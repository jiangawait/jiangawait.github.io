{"meta":{"title":"æ‰¬èˆ²'s blog","subtitle":"å±±é‡æ°´å¤ç–‘æ— è·¯ æŸ³æš—èŠ±æ˜åˆä¸€æ‘","description":"å‰ç«¯æŠ€æœ¯åšå®¢","author":"yangling","url":"http://blog.kobingo.xyz","root":"/"},"pages":[{"title":"æ–‡ç« åˆ†ç±»","date":"2020-05-05T20:50:09.000Z","updated":"2021-01-19T06:41:41.222Z","comments":false,"path":"categories/index.html","permalink":"http://blog.kobingo.xyz/categories/index.html","excerpt":"","text":""},{"title":"react-test","date":"2020-05-01T16:59:10.000Z","updated":"2021-01-19T06:41:41.222Z","comments":true,"path":"react-test/index.html","permalink":"http://blog.kobingo.xyz/react-test/index.html","excerpt":"","text":"XSS å³ï¼ˆCross Site Scriptingï¼‰ï¼šè·¨ç«™è„šæœ¬æ”»å‡» åŸç† æ¶æ„æ”»å‡»è€…åœ¨ web é¡µé¢ä¸­ä¼šæ’å…¥ä¸€äº›æ¶æ„çš„ script ä»£ç ã€‚å½“ç”¨æˆ·æµè§ˆè¯¥é¡µé¢çš„æ—¶å€™ï¼Œé‚£ä¹ˆåµŒå…¥åˆ° web é¡µé¢ä¸­ script ä»£ç ä¼šæ‰§è¡Œï¼Œå› æ­¤ä¼šè¾¾åˆ°æ¶æ„æ”»å‡»ç”¨æˆ·çš„ç›®çš„ã€‚ åˆ†ç±» å­˜å‚¨å‹ï¼ˆæŒä¹…æ€§ XSS æ”»å‡»ï¼‰ã€åå°„å‹(éæŒä¹…æ€§ XSS æ”»å‡»ï¼‰åŠ DOM-based å‹ åå°„æ€§åå°„å‹ XSS åªæ˜¯ç®€å•åœ°æŠŠç”¨æˆ·è¾“å…¥çš„æ•°æ® â€œåå°„â€ ç»™æµè§ˆå™¨ï¼Œè¿™ç§æ”»å‡»æ–¹å¼å¾€å¾€éœ€è¦æ”»å‡»è€…è¯±ä½¿ç”¨æˆ·ç‚¹å‡»ä¸€ä¸ªæ¶æ„é“¾æ¥ï¼Œæˆ–è€…æäº¤ä¸€ä¸ªè¡¨å•ï¼Œæˆ–è€…è¿›å…¥ä¸€ä¸ªæ¶æ„ç½‘ç«™æ—¶ï¼Œæ³¨å…¥è„šæœ¬è¿›å…¥è¢«æ”»å‡»è€…çš„ç½‘ç«™ã€‚ä¾‹å­ï¼š æ¶æ„é“¾æ¥çš„åœ°å€æŒ‡å‘äº† localhost:8001/?q=111&amp;p=222ã€‚ç„¶åï¼Œæˆ‘å†å¯ä¸€ä¸ªç®€å•çš„ Node æœåŠ¡å¤„ç†æ¶æ„é“¾æ¥çš„è¯·æ±‚ï¼š 1234567891011const http = require(\"http\");function handleReequest(req, res) &#123; res.setHeader(\"Access-Control-Allow-Origin\", \"*\"); res.writeHead(200, &#123; \"Content-Type\": \"text/html; charset=UTF-8\" &#125;); res.write('&lt;script&gt;alert(\"åå°„å‹ XSS æ”»å‡»\")&lt;/script&gt;'); res.end();&#125;const server = new http.Server();server.listen(8001, \"127.0.0.1\");server.on(\"request\", handleReequest); å½“ç”¨æˆ·ç‚¹å‡»æ¶æ„é“¾æ¥æ—¶ï¼Œé¡µé¢è·³è½¬åˆ°æ”»å‡»è€…é¢„å…ˆå‡†å¤‡çš„é¡µé¢ï¼Œä¼šå‘ç°åœ¨æ”»å‡»è€…çš„é¡µé¢æ‰§è¡Œäº† js è„šæœ¬ è¿™æ ·å°±äº§ç”Ÿäº†åå°„å‹ XSS æ”»å‡»ã€‚æ”»å‡»è€…å¯ä»¥æ³¨å…¥ä»»æ„çš„æ¶æ„è„šæœ¬è¿›è¡Œæ”»å‡»ï¼Œå¯èƒ½æ³¨å…¥æ¶ä½œå‰§è„šæœ¬ï¼Œæˆ–è€…æ³¨å…¥èƒ½è·å–ç”¨æˆ·éšç§æ•°æ®(å¦‚ cookie)çš„è„šæœ¬ï¼Œè¿™å–å†³äºæ”»å‡»è€…çš„ç›®çš„ã€‚ å­˜å‚¨å‹å­˜å‚¨å‹ XSS ä¼šæŠŠç”¨æˆ·è¾“å…¥çš„æ•°æ® â€œå­˜å‚¨â€ åœ¨æœåŠ¡å™¨ç«¯ï¼Œå½“æµè§ˆå™¨è¯·æ±‚æ•°æ®æ—¶ï¼Œè„šæœ¬ä»æœåŠ¡å™¨ä¸Šä¼ å›å¹¶æ‰§è¡Œã€‚è¿™ç§ XSS æ”»å‡»å…·æœ‰å¾ˆå¼ºçš„ç¨³å®šæ€§ã€‚ æ¯”è¾ƒå¸¸è§çš„ä¸€ä¸ªåœºæ™¯æ˜¯æ”»å‡»è€…åœ¨ç¤¾åŒºæˆ–è®ºå›ä¸Šå†™ä¸‹ä¸€ç¯‡åŒ…å«æ¶æ„ JavaScript ä»£ç çš„æ–‡ç« æˆ–è¯„è®ºï¼Œæ–‡ç« æˆ–è¯„è®ºå‘è¡¨åï¼Œæ‰€æœ‰è®¿é—®è¯¥æ–‡ç« æˆ–è¯„è®ºçš„ç”¨æˆ·ï¼Œéƒ½ä¼šåœ¨ä»–ä»¬çš„æµè§ˆå™¨ä¸­æ‰§è¡Œè¿™æ®µæ¶æ„çš„ JavaScript ä»£ç ã€‚ åŸºäº DOMåŸºäº DOM çš„ XSS æ”»å‡»æ˜¯æŒ‡é€šè¿‡æ¶æ„è„šæœ¬ä¿®æ”¹é¡µé¢çš„ DOM ç»“æ„ï¼Œæ˜¯çº¯ç²¹å‘ç”Ÿåœ¨å®¢æˆ·ç«¯çš„æ”»å‡»ã€‚ 123456789101112131415161718192021222324252627&lt;h2&gt;XSS:&lt;/h2&gt;&lt;input type=\"text\" id=\"input\" /&gt;&lt;button id=\"btn\"&gt;Submit&lt;/button&gt;&lt;div id=\"div\"&gt;&lt;/div&gt;&lt;script&gt; const input = document.getElementById(\"input\"); const btn = document.getElementById(\"btn\"); const div = document.getElementById(\"div\"); let val; input.addEventListener( \"change\", (e) =&gt; &#123; val = e.target.value; &#125;, false ); btn.addEventListener( \"click\", () =&gt; &#123; div.innerHTML = `&lt;a href=$&#123;val&#125;&gt;testLink&lt;/a&gt;`; &#125;, false );&lt;/script&gt; ç‚¹å‡» Submit æŒ‰é’®åï¼Œä¼šåœ¨å½“å‰é¡µé¢æ’å…¥ä¸€ä¸ªé“¾æ¥ï¼Œå…¶åœ°å€ä¸ºç”¨æˆ·çš„è¾“å…¥å†…å®¹ã€‚å¦‚æœç”¨æˆ·åœ¨è¾“å…¥æ—¶æ„é€ äº†å¦‚ä¸‹å†…å®¹ &#39;&#39; onclick=alert(/xss/) ç”¨æˆ·æäº¤ä¹‹åï¼Œé¡µé¢ä»£ç å°±å˜æˆäº†ï¼š &lt;a href onlick=&quot;alert(/xss/)&quot;&gt;testLink&lt;/a&gt; æ­¤æ—¶ï¼Œç”¨æˆ·ç‚¹å‡»ç”Ÿæˆçš„é“¾æ¥ï¼Œå°±ä¼šæ‰§è¡Œå¯¹åº”çš„è„šæœ¬ï¼š SQL æ³¨å…¥SQL æ³¨å…¥æ˜¯é€šè¿‡å®¢æˆ·ç«¯çš„è¾“å…¥æŠŠ SQL å‘½ä»¤æ³¨å…¥åˆ°ä¸€ä¸ªåº”ç”¨çš„æ•°æ®åº“ä¸­ï¼Œä»è€Œæ‰§è¡Œæ¶æ„çš„ SQL è¯­å¥,ä¸€ä¸ªä¾‹å­ï¼š æˆ‘ä»¬æœ‰ä¸€ä¸ªç™»å½•æ¡†ï¼Œéœ€è¦è¾“å…¥ç”¨æˆ·åå’Œå¯†ç å¯¹å§ï¼Œç„¶åæˆ‘ä»¬çš„å¯†ç è¾“å…¥ â€˜or â€˜123â€™ = â€˜123 è¿™æ ·çš„ã€‚ æˆ‘ä»¬åœ¨æŸ¥è¯¢ç”¨æˆ·åå’Œå¯†ç æ˜¯å¦æ­£ç¡®çš„æ—¶å€™ï¼Œæœ¬æ¥æ‰§è¡Œçš„ sql è¯­å¥æ˜¯ï¼šselect _ from user where username = â€˜â€™ and password = â€˜â€™. è¿™æ ·çš„ sql è¯­å¥ï¼Œç°åœ¨æˆ‘ä»¬è¾“å…¥å¯†ç æ˜¯å¦‚ä¸Šè¿™æ ·çš„ï¼Œç„¶åæˆ‘ä»¬ä¼šé€šè¿‡å‚æ•°è¿›è¡Œæ‹¼æ¥ï¼Œæ‹¼æ¥åçš„ sql è¯­å¥å°±æ˜¯ï¼šselect _ from user where username = â€˜â€™ and password = â€˜ â€˜ or â€˜123â€™ = â€˜123 â€˜; è¿™æ ·çš„äº†ï¼Œé‚£ä¹ˆä¼šæœ‰ä¸€ä¸ª or è¯­å¥ï¼Œåªè¦è¿™ä¸¤ä¸ªæœ‰ä¸€ä¸ªæ˜¯æ­£ç¡®çš„è¯ï¼Œå°±æ¡ä»¶æˆç«‹ï¼Œå› æ­¤ 123 = 123 æ˜¯æˆç«‹çš„ã€‚å› æ­¤éªŒè¯å°±ä¼šè¢«è·³è¿‡ã€‚è¿™åªæ˜¯ä¸€ä¸ªç®€å•çš„åˆ—å­ï¼Œæ¯”å¦‚è¿˜æœ‰å¯†ç æ¯”å¦‚æ˜¯è¿™æ ·çš„ï¼šâ€™; drop table user;, è¿™æ ·çš„è¯ï¼Œé‚£ä¹ˆ sql å‘½ä»¤å°±å˜æˆäº†ï¼šselect * from user where username = â€˜â€™ and password = â€˜â€™; drop table user;â€™ , é‚£ä¹ˆè¿™ä¸ªæ—¶å€™æˆ‘ä»¬ä¼šæŠŠ user è¡¨ç›´æ¥åˆ é™¤äº†ã€‚ sql è¢«æ”»å‡»çš„åŸå› æ˜¯ï¼šsql è¯­å¥ä¼ªé€ å‚æ•°ï¼Œç„¶åå¯¹å‚æ•°è¿›è¡Œæ‹¼æ¥åå½¢æˆ xss æ”»å‡»çš„ sql è¯­å¥ã€‚æœ€åä¼šå¯¼è‡´æ•°æ®åº“è¢«æ”»å‡»äº†ã€‚ é˜²èŒƒçš„æ–¹æ³•ï¼š æˆ‘ä»¬å¯ä»¥ä½¿ç”¨é¢„ç¼–è¯‘è¯­å¥(PreparedStatementï¼Œè¿™æ ·çš„è¯å³ä½¿æˆ‘ä»¬ä½¿ç”¨ sql è¯­å¥ä¼ªé€ æˆå‚æ•°ï¼Œåˆ°äº†æœåŠ¡ç«¯çš„æ—¶å€™ï¼Œè¿™ä¸ªä¼ªé€  sql è¯­å¥çš„å‚æ•°ä¹Ÿåªæ˜¯ç®€å•çš„å­—ç¬¦ï¼Œå¹¶ä¸èƒ½èµ·åˆ°æ”»å‡»çš„ä½œç”¨ã€‚ æ•°æ®åº“ä¸­å¯†ç ä¸åº”æ˜æ–‡å­˜å‚¨çš„ï¼Œå¯ä»¥å¯¹å¯†ç ä½¿ç”¨ md5 è¿›è¡ŒåŠ å¯†ï¼Œä¸ºäº†åŠ å¤§ç ´è§£æˆæœ¬ï¼Œæ‰€ä»¥å¯ä»¥é‡‡ç”¨åŠ ç›çš„æ–¹å¼ã€‚ XSS æ”»å‡»çš„é˜²èŒƒ cookie å®‰å…¨ç­–ç•¥ http-only: åªå…è®¸ http æˆ– https è¯·æ±‚è¯»å– cookieã€JS ä»£ç æ˜¯æ— æ³•è¯»å– cookie çš„(document.cookie ä¼šæ˜¾ç¤º http-only çš„ cookie é¡¹è¢«è‡ªåŠ¨è¿‡æ»¤æ‰)ã€‚å‘é€è¯·æ±‚æ—¶è‡ªåŠ¨å‘é€ cookie. secure-only: åªå…è®¸ https è¯·æ±‚è¯»å–ï¼Œå‘é€è¯·æ±‚æ—¶è‡ªåŠ¨å‘é€ cookieã€‚ host-only: åªå…è®¸ä¸»æœºåŸŸåä¸ domain è®¾ç½®å®Œæˆä¸€è‡´çš„ç½‘ç«™æ‰èƒ½è®¿é—®è¯¥ cookieã€‚ è¾“å…¥æ£€æŸ¥ å¯¹äºç”¨æˆ·çš„ä»»ä½•è¾“å…¥è¦è¿›è¡Œæ£€æŸ¥ã€è¿‡æ»¤å’Œè½¬ä¹‰ã€‚ è¾“å‡ºæ£€æŸ¥ åˆ©ç”¨ sanitize-html å¯¹è¾“å‡ºå†…å®¹è¿›è¡Œæœ‰è§„åˆ™çš„è¿‡æ»¤ä¹‹åå†è¾“å‡ºåˆ°é¡µé¢ä¸­ã€‚ å¼€å¯ CSP ç½‘é¡µå®‰å…¨æ”¿ç­–é˜²æ­¢ XSS æ”»å‡» CSP æ˜¯ç½‘é¡µå®‰å…¨æ”¿ç­–(Content Security Policy)çš„ç¼©å†™ã€‚ä¸»è¦ç”¨æ¥é˜²æ­¢ XSS æ”»å‡»ã€‚æ˜¯ä¸€ç§ç”±å¼€å‘è€…å®šä¹‰çš„å®‰å…¨æ€§æ”¿ç­–ç”³æ˜ï¼Œé€šè¿‡ CSP æ‰€çº¦æŸçš„è´£ä»»æŒ‡å®šå¯ä¿¡çš„å†…å®¹æ¥æºï¼Œé€šè¿‡ Content-Security-Policy ç½‘é¡µçš„å¼€å‘è€…å¯ä»¥æ§åˆ¶æ•´ä¸ªé¡µé¢ä¸­ å¤–éƒ¨èµ„æº çš„åŠ è½½å’Œæ‰§è¡Œã€‚ &lt;meta http-equiv=&quot;Content-Security-Policy&quot; content=&quot; default-src http: https: *.xxx.com &#39;self&#39; &#39;unsafe-inline&#39; ; style-src &#39;self&#39; &#39;unsafe-inline&#39; *.yyy.com; script-src &#39;self&#39; &#39;unsafe-inline&#39; &#39;unsafe-eval&#39; ; &quot;&gt; CSRF(è·¨ç«™è¯·æ±‚ä¼ªé€ )å®Œæˆä¸€æ¬¡ CSRF æ”»å‡»ï¼Œéœ€è¦å®Œæˆå¦‚ä¸‹äº‹æƒ…ï¼š ç™»å½•å—ä¿¡ä»»çš„ç½‘ç«™ Aï¼Œå¹¶ä¸”åœ¨æœ¬åœ°ç”Ÿæˆ cookieã€‚ åœ¨ä¸ç™»å‡ºç½‘ç«™ A çš„æƒ…å†µä¸‹ï¼Œç»§ç»­è®¿é—®å±é™©ç½‘ç«™ Bã€‚ CSRF åŸºæœ¬åŸç†æ˜¯ï¼šå‡è®¾ A ç½‘ç«™æ˜¯ä¸€ä¸ªé“¶è¡Œç½‘ç«™ï¼Œè€Œæˆ‘æ˜¯è¯¥ç½‘ç«™çš„ç”¨æˆ·ï¼Œå½“æˆ‘ä»¥å—ä¿¡ä»»çš„èº«ä»½ç™»å½•äº†è¯¥ç½‘ç«™çš„æ—¶å€™ï¼Œè¿™æ—¶å€™ A ç½‘ç«™æ˜¯é€šè¿‡ cookie ä¿ç•™äº†æˆ‘ä»¬çš„ç™»å½•çŠ¶æ€ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘å»ç™»å½•äº†æ¶æ„ç½‘ç«™ B çš„æ—¶å€™ï¼ŒB ç½‘ç«™å°±ä¼šæ‹¿åˆ°æˆ‘ç™»å½• A ç½‘ç«™çš„ cookie ä¿¡æ¯åˆ°ï¼Œå› æ­¤ B ç½‘ç«™å°±æŠŠæ‹¿åˆ°çš„ cookie ä¿¡æ¯å»é‡æ–°è¯·æ±‚ A ç½‘ç«™çš„æ¥å£ï¼Œä½†æ˜¯åœ¨è¯¥æ¥å£åé¢çš„å‚æ•°åšä¸€äº›ä¿®æ”¹ï¼Œå› æ­¤å°±è¿™æ ·è¾¾åˆ°æ”»å‡»çš„ç›®çš„ã€‚ CSRF é˜²èŒƒæªæ–½ æœåŠ¡ç«¯éªŒè¯ HTTP Referer å­—æ®µ åŠ éªŒè¯ç  ä½¿ç”¨ Token"},{"title":"æ ‡ç­¾","date":"2020-05-05T20:52:32.000Z","updated":"2021-01-19T06:41:41.222Z","comments":true,"path":"tags/index.html","permalink":"http://blog.kobingo.xyz/tags/index.html","excerpt":"","text":""}],"posts":[{"title":"2021å‰ç«¯å‘å±•å±•æœ›","slug":"2021å‰ç«¯å‘å±•å±•æœ›","date":"2021-01-14T18:06:10.000Z","updated":"2021-01-19T06:41:41.218Z","comments":true,"path":"2021å‰ç«¯å‘å±•å±•æœ›/","link":"","permalink":"http://blog.kobingo.xyz/2021%E5%89%8D%E7%AB%AF%E5%8F%91%E5%B1%95%E5%B1%95%E6%9C%9B/","excerpt":"","text":"å‰ç«¯ - ä»2020çœ‹2021å‰ç«¯å‘å±•è¶‹åŠ¿_ä¸ªäººæ–‡ç«  åˆåˆ°äº†å¹´åº•ï¼Œæƒ³ç®€å•è°ˆè°ˆè¿™ä¸€å¹´å‰ç«¯çš„å‘å±•ï¼Œä»¥åŠ21å¹´å¯èƒ½ä¼šå‡ºç°çš„ä¸€äº›è¶‹åŠ¿ã€‚æ¯‹åº¸ç½®ç–‘ï¼Œ2020å¹´ç¡®å®æ˜¯ä¸å¹³å‡¡çš„ä¸€å¹´ï¼Œå¯¹å‰ç«¯æ¥è¯´ï¼Œç§ä»¥ä¸ºå¯ä»¥ç”¨â€œå¤§å‰ç«¯æŒç»­æ·±è€•ï¼Œæ³›å‰ç«¯å…¼å®¹å¹¶åŒ…â€è¿™åå››ä¸ªå­—æ¥å½¢å®¹ã€‚è¿™é‡Œéœ€è¦æ˜ç¡®ä¸€ä¸‹æˆ‘å¯¹â€œå¤§å‰ç«¯â€ä»¥åŠâ€œæ³›å‰ç«¯â€è¿™ä¸¤ä¸ªæ¦‚å¿µçš„ç†è§£ï¼šé¦–å…ˆå¤§å‰ç«¯å¯ä»¥åˆ†ä¸ºå¹¿ä¹‰çš„â€œå¤§å‰ç«¯â€å’Œç‹­ä¹‰çš„â€œå¤§å‰ç«¯â€ï¼Œå¸‚é¢ä¸Šå¸¸â€¦ å‰è¨€ åˆåˆ°äº†å¹´åº•ï¼Œæƒ³ç®€å•è°ˆè°ˆè¿™ä¸€å¹´å‰ç«¯çš„å‘å±•ï¼Œä»¥åŠ21å¹´å¯èƒ½ä¼šå‡ºç°çš„ä¸€äº›è¶‹åŠ¿ã€‚æ¯‹åº¸ç½®ç–‘ï¼Œ2020å¹´ç¡®å®æ˜¯ä¸å¹³å‡¡çš„ä¸€å¹´ï¼Œå¯¹å‰ç«¯æ¥è¯´ï¼Œç§ä»¥ä¸ºå¯ä»¥ç”¨â€œå¤§å‰ç«¯æŒç»­æ·±è€•ï¼Œæ³›å‰ç«¯å…¼å®¹å¹¶åŒ…â€è¿™åå››ä¸ªå­—æ¥å½¢å®¹ã€‚è¿™é‡Œéœ€è¦æ˜ç¡®ä¸€ä¸‹æˆ‘å¯¹â€œå¤§å‰ç«¯â€ä»¥åŠâ€œæ³›å‰ç«¯â€è¿™ä¸¤ä¸ªæ¦‚å¿µçš„ç†è§£ï¼šé¦–å…ˆå¤§å‰ç«¯å¯ä»¥åˆ†ä¸ºå¹¿ä¹‰çš„â€œå¤§å‰ç«¯â€å’Œç‹­ä¹‰çš„â€œå¤§å‰ç«¯â€ï¼Œå¸‚é¢ä¸Šå¸¸è¯´çš„å¤§å‰ç«¯ä¸»è¦åˆ†ä¸ºè¿™ä¸¤ç±»ï¼Œæ‰€è°“å¹¿ä¹‰çš„â€œå¤§å‰ç«¯â€æ˜¯æŒ‡ä»¥å‰ç«¯æŠ€æœ¯è§£å†³æ‰€æœ‰æœ¬å±äºå…¶ä»–é¢†åŸŸé—®é¢˜çš„å‰ç«¯æŠ€æœ¯ï¼Œè¿™é‡Œå…¶å®æ˜¯åŒ…å«äº†åè¾¹æ‰€è¯´çš„æ³›å‰ç«¯çš„æ¦‚å¿µï¼Œä¹Ÿå°±æ˜¯è¯´åªè¦æ˜¯ä½¿ç”¨å‰ç«¯æŠ€æœ¯å»è§£å†³çš„éƒ½å¯ä»¥å®šä¹‰ä¸ºâ€œå¤§å‰ç«¯â€ï¼›è€Œç‹­ä¹‰çš„â€œå¤§å‰ç«¯â€æ˜¯ä»…æŒ‡å‚ç›´åˆ°åç«¯é¢†åŸŸçš„å‰ç«¯æŠ€æœ¯ï¼Œå…¶ä»£è¡¨æ˜¯ä»¥node.jsä¸ºä¸»çš„æ‰©å±•çš„å»è§£å†³åç«¯é¢†åŸŸçš„æŠ€æœ¯ï¼Œå¦‚å‡ºç°äº†è¯¸å¦‚expressã€koaã€eggã€nestç­‰ç­‰é…å¥—çš„åç«¯æŠ€æœ¯æ¡†æ¶ï¼Œç”šè‡³å‡ºç°äº†nodeçš„å¾®æœåŠ¡æ¡†æ¶ï¼Œæˆ‘è¿™é‡Œä¸åšè¯´æ˜ä»…æŒ‡ç‹­ä¹‰çš„â€œå¤§å‰ç«¯â€æ¦‚å¿µã€‚å¯¹äºâ€œæ³›å‰ç«¯â€ï¼Œè¿™ä¸ªæ¦‚å¿µæ²¡æœ‰æ­§ä¹‰ï¼Œé€šå¸¸æŒ‡çš„éƒ½æ˜¯è·¨ç«¯æŠ€æœ¯ï¼Œæ¯”å¦‚å®¢æˆ·ç«¯ã€æ¡Œé¢ç«¯ï¼Œç”šè‡³HUBç­‰ç­‰ï¼Œä¸Šå›¾ä¸­æ‰€ç¤ºçš„ä»…ä»…æŒ‡ä¸€éƒ¨åˆ†æ¡†æ¶ï¼Œå¹¶æœªæ”¶å½•å®Œå…¨ï¼Œæ¯•ç«Ÿjs/tsçš„ç¤¾åŒºå®åœ¨å¤ªå¤ªå¤ªå¤ªæ´»è·ƒäº†ï¼Œä¸‹é¢ç®€å•åˆ†è¯´ä¸€ä¸‹â€œå¤§å‰ç«¯â€å’Œâ€œæ³›å‰ç«¯â€ä¸ªäººçš„ä¸€äº›è§è§£ï¼Œæ˜¯ä»¥å‰ç«¯ä¸‰å¤§æ¡†æ¶Vueã€Reactã€Angularä¸ºæ ¸å¿ƒè¿›è¡Œæ¨ªå‘å’Œçºµå‘çš„æ¡†æ¶æ¢è®¨ æ³›å‰ç«¯æŠ€æœ¯æ¡†æ¶æ¢è®¨ Vue React Angular webç«¯ Vueå…¨å®¶æ¡¶ Reactå…¨å®¶æ¡¶ Angularå…¨å®¶æ¡¶ æ¡Œé¢ç«¯ Electron/Nw Electron/Nw Electron/Nw/Cordova/Ionic åŸç”Ÿç§»åŠ¨ç«¯ Weex React Native Cordova/Ionic å°ç¨‹åºç«¯ uniapp/mpvue/mapx taro/Rax æ—  å¤§å‰ç«¯æŠ€æœ¯æ¡†æ¶æ¢è®¨ Vue React Angular webç«¯ Vueå…¨å®¶æ¡¶ Reactå…¨å®¶æ¡¶ Angularå…¨å®¶æ¡¶ SSR Nuxt Next Universal æœåŠ¡ç«¯ æ— ç‰¹å®š æ— ç‰¹å®š å¯é…åˆNest ä»Šå¹´é˜¿é‡Œå‰ç«¯ç»ƒä¹ ç”Ÿè®¡åˆ’å°†å‰ç«¯é¢†åŸŸåˆ’åˆ†äº†ä¸ƒå¤§æ–¹å‘ï¼Œåˆ†åˆ«æ˜¯å·¥ç¨‹åŒ–æ–¹å‘ã€å‰ç«¯ä¸­åå°æ–¹å‘ã€Node.jsæ–¹å‘ã€è·¨ç«¯æŠ€æœ¯æ–¹å‘ã€äº’åŠ¨æŠ€æœ¯æ–¹å‘ã€å¯è§†åŒ–æŠ€æœ¯æ–¹å‘ã€å‰ç«¯æ™ºèƒ½åŒ–æ–¹å‘ï¼Œä¸ªäººè®¤ä¸ºNode.jsæ˜¯ä¸€ä¸ªæ•´ä½“çš„å‰ç«¯åŸºç¡€ï¼Œå¹¶ä¸èƒ½å•ç®—åšä¸€ä¸ªæ–¹å‘ï¼Œå› è€Œæˆ‘å°†å…¶æ›¿æ¢ä¸ºéŸ³è§†é¢‘æ–¹å‘ï¼Œç§ä»¥ä¸ºå¯å°†å‰ç«¯æ–¹å‘åˆ’åˆ†ä¸ºä»¥ä¸‹å‡ ç§ï¼Œä¸‹é¢æˆ‘å°†åœ¨è¿™å‡ ä¸ªä¸åŒçš„æ–¹å‘ç»´åº¦è¿›è¡Œä¸ªäººçš„ä¸€äº›é˜è¿°å’Œæ‹™è§ï¼š ä¸­åå°æ–¹å‘ï¼šå¾®å‰ç«¯ å¯è§†åŒ–æ–¹å‘ï¼šantv æ™ºèƒ½åŒ–æ–¹å‘ï¼šimgcook äº’åŠ¨æ–¹å‘ï¼šEva éŸ³è§†é¢‘æ–¹å‘ï¼šwasm å·¥ç¨‹åŒ–æ–¹å‘ï¼šseverlessã€å…¨é“¾è·¯å·¥ç¨‹ è·¨ç«¯æ–¹å‘ï¼škboneã€rax ä¸­åå°æ–¹å‘ å¯¹äºä¸­åå°æ–¹å‘ï¼Œè¿™æ˜¯ä¼ ç»Ÿwebæ–¹å‘ï¼Œå¯¹äºå‰ç«¯æ¥è¯´ï¼Œ2020å¹´å¯¹äºå¾®å‰ç«¯çš„è½åœ°åº”ç”¨å·²æœ‰å¾ˆå¤šå®è·µã€‚å› æ­¤ï¼Œç§ä»¥ä¸ºå¾®å‰ç«¯ä¼šä½œä¸ºæœªæ¥å‰ç«¯å¤§å‹åº”ç”¨çš„ä¸€ç§è¶‹åŠ¿ï¼Œå¯¹äºä¸åŒå›¢é˜Ÿçš„ä¸åŒæŠ€æœ¯æ ˆçš„æ±‡æ€»æ•´åˆæ˜¯ä¸€ä¸ªæ¯”è¾ƒå¥½çš„æ–¹æ¡ˆï¼Œè™½ç„¶ä¸åŒäºæœåŠ¡ç«¯çš„é‚£ç§å¾®æœåŠ¡å¯ä»¥å¾®çš„å¾ˆå½»åº•ï¼Œä½†æ˜¯å‰ç«¯åŠ æŒç€tsç­‰çš„ç‰¹æ€§ä¹Ÿæ˜¯å¯ä»¥å®ç°å¾®åŒ–çš„æ•ˆæœï¼Œä»è€Œä¼˜åŒ–å·¥æ—¶ï¼Œæå‡æ•ˆç‡ï¼Œé¿å…é‡å¤åŠ³ä½œï¼› æ—¢ç„¶ç¬¬ä¸€ç‚¹æåˆ°äº†tsï¼Œé‚£è¿™é‡Œæˆ‘æƒ³è¯´ä¸€è¯´å…³äºtsçš„é—®é¢˜ï¼Œåœ¨19å¹´æˆ‘å¯¹tsçš„æ€åº¦å°šå­˜è§‚æœ›ï¼Œä½†åœ¨ä»Šå¹´ï¼Œæˆ‘è®¤ä¸ºtså¯ä»¥ä½œä¸ºä¸€ç§å¿…å¤‡æŠ€èƒ½æ¥è€ƒå¯Ÿå’Œå®è·µï¼Œå¹¶ä¸æ˜¯å› ä¸ºå¤§å®¶éƒ½åœ¨ç”¨ï¼Œè€Œæ˜¯å› ä¸ºéšç€æ—¶é—´çš„å‘å±•ï¼Œç°åœ¨å‰ç«¯è¦æ‰¿è½½çš„èƒ½åŠ›è¶Šæ¥è¶Šé‡ï¼Œé¡¹ç›®ä¹Ÿè¶Šæ¥è¶Šå¤§ï¼Œtså¯ä»¥å¾ˆå¥½çš„çº¦å®šï¼Œå¯¹äºåæœŸçš„ç»´æŠ¤ä»¥åŠä¿®æ”¹éƒ½å¯ä»¥å¾ˆå¥½çš„é™åˆ¶ï¼Œå¯¹äºå¤§å‹å›¢é˜Ÿã€å¤§å‹é¡¹ç›®æ¥è¯´ï¼Œtsæ˜¯ä¸äºŒä¹‹é€‰ï¼›å¦å¤–ï¼Œå¦‚æœæœ‰å›¢é˜ŸçœŸçš„è¦å»å¼€å‘æœåŠ¡ç«¯ï¼Œé‚£æˆ‘çœŸçš„å»ºè®®ä½ å»ç”¨tsï¼Œå¦‚æœä½ ç”¨è¿‡nest.jsï¼Œä½ ä¼šå‘ç°å’Œå†™javaçœŸçš„æ²¡ä»€ä¹ˆåŒºåˆ«ï¼Œè€Œä¸”æœåŠ¡ç«¯çš„å¾ˆå¤šç†å¿µä¹Ÿå¯ä»¥é€šè¿‡tsçš„å„ç§ç‰¹æ€§æ¥ä½¿ç”¨ï¼Œæ¯”å¦‚æ³›å‹ã€æŠ½è±¡ç±»ç­‰ã€‚å½“ç„¶ï¼Œå¦‚æœæ˜¯å°å›¢é˜Ÿï¼Œè€Œä¸”éœ€è¦å¿«é€Ÿå¼€å‘ï¼Œå¯¹äºå°è€Œç¾çš„åº”ç”¨ï¼Œä¸ªäººè®¤ä¸ºè¿˜æ˜¯jsé€‚åˆï¼Œæ¯•ç«Ÿjsæ˜¯ä¸€é—¨çµæ´»çš„è¯­è¨€ï¼Œå“ˆå“ˆå“ˆ å¯è§†åŒ–æ–¹å‘ å¯è§†åŒ–è¿™é‡Œï¼Œä»Šå¹´å…¶å®æ²¡æœ‰åšå¤šå°‘å®è·µï¼Œä½†æ˜¯ä¸ªäººè®¤ä¸ºï¼Œè¿™ä¸ƒä¸ªå¤§æ–¹å‘è€Œè¨€ï¼Œæœ€å®¹æ˜“å‡ºæˆæœï¼Œæˆ–è€…è¯´æœ€èƒ½å‡ºå¤§ä½¬çš„ï¼Œå¯èƒ½è¿˜çœŸæ˜¯å¯è§†åŒ–é¢†åŸŸï¼Œå¦‚æœèƒ½åœ¨å¯è§†åŒ–é¢†åŸŸåšåˆ°äº†å‰5%ï¼Œé‚£ä¹ˆæˆ‘ç›¸ä¿¡å„å¤§å‚è‚¯å®šä¼šèŠ±é’±å…»ç€ä½ ï¼Œæ¯•ç«Ÿæˆ‘æ‹¥æœ‰ä½ ä¸ä¸€å®šé‡è¦ï¼Œä½†æ˜¯å¯¹æ‰‹ä¸æ‹¥æœ‰ä½ å¯¹æˆ‘å¾ˆé‡è¦ï¼Œä½ çš„æŠ€æœ¯å£å’å°±å‘ˆç°äº†å‡ºæ¥ï¼Œä¹Ÿå°±åœ¨è¿™ä¸ªå†…å·çš„æ±Ÿæ¹–è·å¾—äº†ä¸€äº›é¢†å…ˆå’Œä¼˜åŠ¿ï¼Œæœ€èµ·ç è£å‘˜çš„ä¼˜å…ˆçº§ä¹Ÿä¸ä¼šé‚£ä¹ˆé å‰ï¼Œå“ˆå“ˆå“ˆ ç¬¬ä¸€ç‚¹è¯´çš„æœ‰ç‚¹å„¿è¿œï¼Œè¯´è¯´å®åœ¨çš„ï¼Œä¸ªäººè§‰å¾—å¯ä»¥å°†é˜¿é‡Œçš„antvä½œä¸ºå¯è§†åŒ–é¢†åŸŸçš„ä¸€ä¸ªæ ‡æ†ï¼Œé’ˆå¯¹å„ç§ç‰¹å®šé¢†åŸŸè¿›è¡Œå±•å¼€ï¼Œæ¯”å¦‚gisç­‰ï¼Œå½“ç„¶ï¼Œå…¶å®å¯è§†åŒ–é¢†åŸŸç ”ç©¶çš„æ·±çš„è¯è¿˜æ˜¯æŒºå†·é—¨çš„ï¼Œè¿™å…¶å®ä¹Ÿä¼šæœ‰ä¸€äº›æœºä¼šï¼ŒwebGL/webAR/webVRç­‰ç­‰éƒ½å¯ä»¥ä½œä¸ºåˆ‡å…¥ç‚¹ï¼Œé…åˆç€ä¸‹é¢çš„éŸ³è§†é¢‘é¢†åŸŸï¼Œè¿™ä¸¤ä¸ªçš„ç›¸äº’ç»“åˆï¼Œç¡®å®è¿˜æ˜¯èƒ½åšå‡ºäº›ä¸œè¥¿çš„ æ™ºèƒ½åŒ–æ–¹å‘ æ™ºèƒ½åŒ–é¢†åŸŸï¼Œä¸ªäººè®¤ä¸ºå…¶å®æ ¸å¿ƒä¸åœ¨äºå‰ç«¯ï¼Œè€Œåœ¨äºäººå·¥æ™ºèƒ½ï¼Œè€Œäººå·¥æ™ºèƒ½é¢†åŸŸå°±ä¸ä»…ä»…å‰ç«¯é‚£ä¹ˆäº›ä¸œè¥¿äº†ï¼Œå¯¹äºå°è£…å¥½çš„å¦‚TensorFlow.jsï¼Œæˆ‘ä»¬æ˜¯ç›´æ¥æ‹¿æ¥ç”¨çš„ï¼Œä½†æ˜¯å¯¹äºé¢†é¢çš„æ¨¡å‹å»ºç«‹å…¶å®æ‰æ˜¯å…³é”®ï¼Œå¦‚æœæœ‰åŒå­¦æƒ³åœ¨æ™ºèƒ½åŒ–é¢†åŸŸæœ‰æ‰€å‘å±•ï¼Œä¸ªäººå»ºè®®è¿˜æ˜¯è¦æ·±é’»ä¸€ä¸‹ï¼Œæœ€å¥½å¯ä»¥æ·±é€ ä¸€ä¸‹ï¼Œæ¯•ç«Ÿè¿™ä¸ªä¸œè¥¿æ˜¯çœŸçš„éœ€è¦å­¦æœ¯ç ”ç©¶+äº§ä¸šå®è·µçš„ åœ¨äº§ä¸šå®è·µçš„å‰ç«¯é¢†åŸŸï¼Œé˜¿é‡Œè¿˜æ˜¯æ¯”è¾ƒé¢†å…ˆçš„ï¼Œæ¯”å¦‚imgcookï¼Œå…¶æ ¸å¿ƒç›®çš„æ˜¯å°†å›¾ç‰‡è½¬æˆå‰ç«¯ä»£ç ï¼Œåˆ©ç”¨çš„æœºå™¨è§†è§‰å»è¯†åˆ«å›¾ç‰‡ä¸­çš„ä¸åŒçš„ä½ç½®ä¿¡æ¯ç­‰ï¼Œå°†å…¶è½¬æˆå‰ç«¯çš„ä»£ç ï¼Œä¹Ÿå°±æ˜¯æ‰€è°“çš„D2Cï¼Œå³ï¼šDesign to Codeï¼Œä»Šå¹´çš„D2å¤§ä¼šä¸Šåˆæå‡ºäº†P2Cï¼Œå³ï¼šProduct to Codeï¼Œä½†å¹¶ä¸æ˜¯çœŸçš„å°†äººç±»è¯­è¨€ç›´æ¥è½¬æ¢æˆcodeï¼Œè€Œæ˜¯å¯¹D2Cçš„ä¸€ä¸ªä¸šåŠ¡æ‰©å±•ï¼Œå¯¹äºD2CæŸäº›ä¸šåŠ¡ä»£ç åˆ©ç”¨ä¸€äº›ç‰¹å®šçš„schemaè¿›è¡Œçº¦å®šï¼Œè®©æœºå™¨å­¦ä¹ è¿‡ç¨‹ä¸­å¤šä¸€äº›å‚æ•°çº¦æŸï¼Œä»è€Œæå‡ä»£ç å®ç°åº¦ã€‚è™½ç„¶è½¬åŒ–çš„ä»£ç è¿˜å¾ˆå†—ä½™ï¼Œä½†æ˜¯å¯¹äºä¸€äº›åˆçº§çš„é¡¹ç›®æˆ–é¡µé¢ï¼Œç¡®å®å¯ä»¥äº¤ç»™æœºå™¨å»å®ç°ï¼Œä¸ªäººè®¤ä¸ºäººå·¥æ™ºèƒ½å¯¹ä½ç«¯é‡å¤çš„å·¥ä½œç¡®å®ä¼šè¿›è¡Œæ›¿ä»£ï¼Œä¹Ÿç®—æ˜¯å¯¹å‰ç«¯å†…å·åšäº†ä¸€å®šçš„è´¡çŒ®ï¼Œæ‘Šæ‰‹â€¦ äº’åŠ¨æ–¹å‘ äº’åŠ¨æ–¹å‘ï¼Œç›®å‰å¤§å¤´è¿˜æ˜¯åœ¨æ¸¸æˆæ–¹å‘ï¼Œä½†æ˜¯æˆ‘è¿˜æ˜¯è®¤ä¸ºé¡µæ¸¸æˆ–å‰ç«¯å®ç°æ¸¸æˆä¸»è¦è¿˜æ˜¯åšä¸€äº›å¼€èƒƒèœçš„åŠŸèƒ½ï¼Œå¹¶ä¸èƒ½çœŸæ­£çš„å°†ç”¨æˆ·å¸¦è¿›æ²‰æµ¸å¼çš„ä½“éªŒï¼Œå¯¹äºå°æ¸¸æˆå¼•æ“ï¼Œä»Šå¹´é˜¿é‡Œå¥½åƒå‡ºäº†ä¸€ä¸ªevaçš„å¼•æ“ï¼Œæ„Ÿå…´è¶£çš„åŒå­¦å¯ä»¥çœ‹çœ‹ å¯¹äºæ–°ä½“éªŒæ–¹é¢ï¼ŒAR/VR/MRç­‰å¯èƒ½åœ¨æ˜å¹´5gæ·±åŒ–çš„æ—¶å€™ä¼šæœ‰ä¸€äº›è½åœ°å®è·µï¼Œä½†å¯èƒ½è¿˜æ˜¯ä¸æ¸©ä¸ç«ï¼Œäº’åŠ¨æ–¹å‘é…åˆè®¾è®¡çš„æ–°ç†å¿µå¯èƒ½ä¼šæ˜¯ä¸€ä¸ªæ–°çš„çªç ´ç‚¹ éŸ³è§†é¢‘æ–¹å‘ è¿™é‡Œæƒ³è¯´ä¸€è¯´WebAssemblyï¼Œè™½ç„¶éƒ½è¯´wasmæ˜¯ä¼šæ›¿ä»£æ‰jsï¼Œä½†ç›®å‰çœ‹åº”è¯¥è¿˜ä¸å¤ªç°å®ï¼Œwasmç›®å‰ä¸»è¦è¿˜æ˜¯é…åˆéŸ³è§†é¢‘é¢†åŸŸå¤šä¸€äº›ï¼Œå¦å¤–å°±æ˜¯ä¸€äº›é¢å¤–çš„ä¼˜åŒ–æªæ–½ï¼Œé…åˆrustè¿›è¡Œä¼˜åŒ–ç­‰ï¼Œå¦‚æœæœ‰å¿—äºéŸ³è§†é¢‘é¢†åŸŸæœ‰æ‰€å»ºæ ‘çš„åŒå­¦ï¼Œwasmç¡®å®å¯ä»¥å‚¨å¤‡èµ·æ¥ webrtcæ˜¯éŸ³è§†é¢‘é¢†åŸŸä¸€ä¸ªç»•ä¸å¼€çš„æŠ€æœ¯ï¼Œå¦å¤–å°±æ˜¯æ’­æ”¾å™¨çš„å®ç°ï¼Œvideo.jsã€flv.jsç­‰ï¼Œå¯¹äºä¸€äº›è§†é¢‘æ’­æ”¾çš„åè®®ä¹Ÿè¦äº†è§£ï¼Œå¦‚rtmp/rtspç­‰ï¼Œä»Šå¹´ç–«æƒ…çš„å…³ç³»ï¼Œå¸¦åŠ¨ç€ç›´æ’­é¢†åŸŸçš„ç«çƒ­ï¼Œå‰ç«¯éŸ³è§†é¢‘æ–¹å‘è¯´ä¸å®šä¼šæ˜¯ä¸€ä¸ªé£å£ å·¥ç¨‹åŒ–æ–¹å‘ å·¥ç¨‹åŒ–æ–¹å‘å°±ä¸å¾—ä¸æserverlessï¼Œè¿™æ˜¯ä»Šå¹´å‰ç«¯æœ€ç«çƒ­çš„ä¸€ä¸ªè¯é¢˜äº†ï¼Œç§ä»¥ä¸ºserverlessä¸ä»…ä»…æ˜¯å‰ç«¯é¢†åŸŸçš„å˜åŒ–ï¼Œå®ƒå¯èƒ½æ”¹å˜ç›®å‰çš„å¼€å‘æ¨¡å¼ï¼Œä»¥åæ²¡æœ‰å‰åç«¯ä¹‹åˆ†ï¼ˆpsï¼šç›®å‰ç¡®å®æ˜¯æœ‰åˆçš„è¶‹åŠ¿ï¼‰ï¼Œåªæœ‰äº‘å·¥ç¨‹å¸ˆå’Œç«¯å·¥ç¨‹å¸ˆä¹‹åˆ†ï¼Œé‚£ä¹ˆå¯¹äºç›®å‰çš„å‰ç«¯æ¥è¯´ï¼Œæˆ‘ä»¬å°±ä¸èƒ½ä»…ä»…åªå…³æ³¨å‰ç«¯é¢†åŸŸçš„ä¸€äº›å†…å®¹äº†ï¼Œdockerã€k8sç­‰å±äºä¼ ç»Ÿåç«¯æˆ–è¿ç»´çš„éƒ¨åˆ†ï¼Œæˆ‘ä»¬ä¹Ÿéœ€è¦æŒæ¡ï¼Œå¯¹äºä¸€äº›åç«¯çš„æ€ç»´åŠåè¯ä¹Ÿéœ€è¦ç†Ÿæ‚‰ï¼Œå¦‚é™æµã€å‰Šå³°ã€æœåŠ¡é™çº§ç­‰ã€‚å½“ç„¶serverlessçš„å‰æå…¶å®æ˜¯äº‘åŸç”Ÿï¼Œå¦‚æœæ²¡æœ‰äº‘åŒ–ï¼Œé‚£å®ç°serverlessçš„æ•ˆæœåº”è¯¥ä¸å¦‚ç›®å‰è¿™æ ·ï¼Œå½“ç„¶ä¸ªäººè®¤ä¸ºè¿™æ˜¯ä¸€ä¸ªå¿…ç„¶çš„è¶‹åŠ¿ï¼Œä»ä»Šå¹´çš„äº‘æ –å¤§ä¼šä»¥åŠè¿è¥å•†5gäº‘åŒ–æ¥çœ‹ï¼Œäº‘ç½‘èåˆã€äº‘è¾¹ååŒåº”è¯¥ä¼šæ˜¯ä¸»æµ å‰ç«¯å·¥ç¨‹åŒ–å¦å¤–ä¸€ä¸ªæ–¹å‘å°±æ˜¯å…¨é“¾è·¯çš„å·¥ç¨‹åŒ–ï¼Œä»è„šæ‰‹æ¶ã€low codeã€æ’ä»¶å¸‚åœºç­‰å…¨é“¾è·¯çš„æä¾›ï¼Œç®€åŒ–å‰ç«¯å¼€å‘é—¨æ§›ï¼Œè¿™é‡Œå¯ä»¥å‚è€ƒæ·˜ç³»çš„é£å†°ï¼Œå¯¹low codeä»¥åŠideçš„æ’ä»¶æä¾›éƒ½æœ‰æ¶‰åŠï¼Œä»¥åŠuiç»„ä»¶åº“çš„æä¾›ç­‰ç­‰ï¼Œå½¢æˆä¸€ä¸ªå…¨é“¾è·¯çš„å‰ç«¯ç”Ÿæ€ã€‚è¿™é‡Œå¯ä»¥è¯´è¯´low codeå’Œno codeï¼Œno codeæ˜¯ä¸€ä¸ªæ— éœ€ä»»ä½•ç¼–ç çš„ç°æˆçš„å·¥å…·ï¼Œå°±æ˜¯å®Œå…¨æ²¡æœ‰ç¼–ç¨‹çš„å…¥å£ï¼›low codeæ˜¯ä¸€ä¸ªéœ€è¦éƒ¨åˆ†ç¼–ç çš„å·¥å…·ï¼Œä¸ºäº†æ˜¯ç»™ä¸€äº›éä¸“ä¸šäººå£«ä½†åˆæœ‰ç¼–ç¨‹éœ€è¦çš„äººå‘˜ä½¿ç”¨ï¼Œå¼ºè°ƒå¼€å‘å‡ºæ¥ç»™åˆ«äººç”¨ï¼Œå¸¸è§çš„æ¯”å¦‚ç»™è¿è¥äººå‘˜ç”¨çš„h5ç¼–è¾‘å™¨ï¼Œå¦‚æ˜“ä¼ç§€ã€makaã€ih5ç­‰ è·¨ç«¯æ–¹å‘ è·¨ç«¯æ–¹å‘æ˜¯ä¸€ä¸ªè€ç”Ÿå¸¸è°ˆçš„é—®é¢˜ï¼Œä¸»æµè¿˜æ˜¯è¦write onceï¼Œrun anywhereï¼Œå¸¸è§çš„æ— éå°±æ˜¯åˆ©ç”¨å„ç§æ¡†æ¶å°†å„ä¸ªDSLè¿›è¡Œæ¥å›è½¬æ¢ï¼Œä½†å…¶å®è¿™æ˜¯ä¸€ä¸ªä¼ªå‘½é¢˜ï¼Œæœ¬è´¨æ˜¯ä¸å¯èƒ½è¾¾åˆ°å¤§ä¸€ç»Ÿçš„å±€é¢çš„ï¼ŒæŠ½è±¡å°±å¾ˆéš¾å…·è±¡ï¼Œè¿™ä¸¤è€…éœ€è¦æœ‰ä¸€ä¸ªå¹³è¡¡ï¼Œéœ€è¦å¯¹å…·ä½“å¸¸è§å…·ä½“åˆ†æ ç§ä»¥ä¸ºå°ç¨‹åºé¢†åŸŸæ˜¯ç«¯æ–¹å‘ä¸‹ä¸€ä¸ªå„å®¶å¤§ä½¬è¿½é€çš„å¸‚åœºï¼Œå› ä¸ºappé¢†åŸŸçš„è·‘é©¬åœˆåœ°éƒ½å·²åŸºæœ¬å½¢æˆï¼Œç°åœ¨å†å»å¼€å‘å‡ºä¸€ä¸ªç°è±¡çº§çš„appå‡ ä¹å¾ˆéš¾å¾ˆéš¾äº†ï¼Œä½†æ˜¯å°†appä½œä¸ºæ“ä½œç³»ç»Ÿï¼Œä»¥å°ç¨‹åºå»å¸¦åŠ¨ç”¨æˆ·ï¼Œå½¢æˆç”¨æˆ·é—­ç¯ï¼Œè¿˜æ˜¯æœ‰å¾ˆå¤§å¸‚åœºçš„ï¼Œç±»å°ç¨‹åºåº”ç”¨ï¼Œå¦‚pwaã€å¿«åº”ç”¨ç­‰éƒ½æ˜¯è¿™ç§æ‰¿è½½æ–¹å¼çš„ä¸åŒå±•ç°ï¼Œå¯¹è·¨ç«¯æ¥è¯´ï¼Œè¿™ä¸ªä¸å¤±ä¸ºä¸€ç§å‘å±•é€‰æ‹©ã€‚å¯¹äºå°ç¨‹åºçš„æ¡†æ¶ä¹Ÿå‡ºç°äº†kboneã€raxç­‰ï¼Œå¯èƒ½ä¹Ÿä¼šæœ‰ä¸€ä¸ªç±»ä¼¼w3cè¿™æ ·çš„ä¸€ä¸ªå°ç¨‹åºæ ‡å‡†ï¼Œä½†æ˜¯åƒå¾®ä¿¡è¿™ç§å·¨æ— éœ¸åº”ç”¨ï¼Œæ˜¯å¦çœŸçš„ä¼šéµå®ˆå°±æ˜¯å¦ä¸€å›äº‹äº†ï¼Œæ€»ä¹‹ï¼Œå…¶å®ä¹Ÿä¸å¤±ä¸ºä¸€ä¸ªé€‰æ‹© æ€»ç»“å›æœ›2020ï¼Œå±•æœ›2021ï¼Œæ€»ç»“å¦‚ä¸‹ï¼š å¤§å‰ç«¯æŒç»­æ·±è€•ï¼Œæ³›å‰ç«¯å…¼å®¹å¹¶åŒ… ä¸­åå°å¾®æœåŠ¡åŒ–ï¼Œå¯è§†åŒ–è¡Œä¸šç»†åŒ– æ™ºèƒ½ä¾§ç®—æ³•æ·±åŒ–ï¼Œäº’å¨±ä¾§å½¢æ€å˜åŒ– éŸ³è§†é¢‘ç»“æ„ä¼˜åŒ–ï¼Œå·¥ç¨‹ä¾§å…¨é¢è½¬åŒ– è·¨ç«¯ä¾§å…·ä½“æ”¹åŒ–ï¼Œå‰ç«¯æ›´åŠ å†…å·åŒ– å¥½äº†ï¼Œ2021åˆ°äº†ï¼Œæ„¿å¤§å®¶åœ¨è¿™ä¸ªå†…å·çš„æ—¶ä»£ï¼Œéƒ½æœ‰è‡ªå·±çš„ä¸€æŠ€ä¹‹é•¿ï¼Œå½¢æˆè‡ªå·±çš„æ ¸å¿ƒç«äº‰åŠ›ï¼Œå‡èŒåŠ è–ªï¼Œå†åˆ›è¾‰ç…Œï¼Œå…±å‹‰ï¼ï¼ï¼ è½¬è½½è‡ªSource","categories":[],"tags":[]},{"title":"csså®ç°ä¸¤ä¸ªåœ†é‡å ","slug":"css-csså®ç°ä¸¤ä¸ªåœ†é‡å ","date":"2021-01-07T17:04:27.000Z","updated":"2021-01-19T06:41:41.218Z","comments":true,"path":"css-csså®ç°ä¸¤ä¸ªåœ†é‡å /","link":"","permalink":"http://blog.kobingo.xyz/css-css%E5%AE%9E%E7%8E%B0%E4%B8%A4%E4%B8%AA%E5%9C%86%E9%87%8D%E5%8F%A0/","excerpt":"å·¥ä½œä¸­æœ‰ä¸€ä¸ªéœ€æ±‚ï¼Œå®ç°ä¸¤ä¸ªæ¤­åœ†ç›¸äº¤ï¼Œå¹¶ä¸”ç›¸äº¤åŒºåŸŸé¢œè‰²ä¸åŒï¼Œç±»ä¼¼äºä¸€ä¸ªç®€å•çš„éŸ¦æ©å›¾ï¼Œå¦‚ä½•ç”¨csså®ç°è¿™ä¸ªæ•ˆæœï¼Ÿ ç»è¿‡ä¸€ç•ªæ¢ç´¢ï¼Œæ‰¾åˆ°äº†ç­”æ¡ˆã€‚","text":"å·¥ä½œä¸­æœ‰ä¸€ä¸ªéœ€æ±‚ï¼Œå®ç°ä¸¤ä¸ªæ¤­åœ†ç›¸äº¤ï¼Œå¹¶ä¸”ç›¸äº¤åŒºåŸŸé¢œè‰²ä¸åŒï¼Œç±»ä¼¼äºä¸€ä¸ªç®€å•çš„éŸ¦æ©å›¾ï¼Œå¦‚ä½•ç”¨csså®ç°è¿™ä¸ªæ•ˆæœï¼Ÿ ç»è¿‡ä¸€ç•ªæ¢ç´¢ï¼Œæ‰¾åˆ°äº†ç­”æ¡ˆã€‚ è¦å®ç°è¿™ä¸ªæ•ˆæœï¼Œéœ€è¦ç”¨åˆ°çš„ç¥æŠ€ï¼šcss-blend-mode, å®ƒæ˜¯ä¸€ä¸ªcsså±æ€§ï¼Œæè¿°äº†å…ƒç´ çš„å†…å®¹åº”è¯¥ä¸å…ƒç´ çš„ç›´ç³»çˆ¶å…ƒç´ çš„å†…å®¹å’Œå…ƒç´ çš„èƒŒæ™¯å¦‚ä½•æ··åˆã€‚ æœ‰äº†è¿™ä¸ªï¼Œå°±å¯ä»¥æ„‰å¿«çš„ç›´æ¥ä¸Šä»£ç äº†ï¼š 1234&lt;div class=\"isolate\"&gt; &lt;div class=\"circle circle-1\"&gt;&lt;/div&gt; &lt;div class=\"circle circle-2\"&gt;&lt;/div&gt;&lt;/div&gt; 1234567891011121314151617181920212223.circle &#123; width: 110px; height: 70px; border-radius: 50% / 35px; mix-blend-mode: color-dodge; position: absolute; border: 1px solid #fff;&#125;.circle-1 &#123; background: #39518A;&#125;.circle-2 &#123; background: #0091FF; top: 40px;&#125;.isolate &#123; isolation: isolate; /* Without isolation, the background color will be taken into account */ position: relative;&#125; å…·ä½“æ•ˆæœå‚è§ï¼šä¾‹å­ å½“ç„¶css-blend-modeä¸ä»…ä»…åªæœ‰è¿™ç‚¹ä½œç”¨ï¼Œå®ƒè¿˜èƒ½ç”¨ä½œèƒŒæ™¯æ··åˆï¼Œçº¹ç†å åŠ ï¼Œè§†é¢‘æ··åˆç­‰åœºæ™¯ï¼Œå…·ä½“å¯å‚è€ƒï¼š å¤§ç¥çš„æ–‡ç«  æ‰“å®Œæ”¶å·¥ğŸ˜Š","categories":[{"name":"css","slug":"css","permalink":"http://blog.kobingo.xyz/categories/css/"}],"tags":[{"name":"css","slug":"css","permalink":"http://blog.kobingo.xyz/tags/css/"}]},{"title":"IntersectionObserveråŸç†åˆ†æ","slug":"Chromeæºç -IntersectionObserver","date":"2020-10-14T16:35:29.000Z","updated":"2021-01-19T06:41:41.218Z","comments":true,"path":"Chromeæºç -IntersectionObserver/","link":"","permalink":"http://blog.kobingo.xyz/Chrome%E6%BA%90%E7%A0%81-IntersectionObserver/","excerpt":"åœ¨ä»‹ç»IntersectionObserverçš„æ—¶å€™æ›¾æåˆ°è¿‡è¿™ä¸ªæ¥å£ç›®å‰ä½¿ç”¨çš„æœ€å¤§é—®é¢˜å°±æ˜¯æµè§ˆå™¨çš„å…¼å®¹æ€§é—®é¢˜ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬å¹³æ—¶åœ¨ä½¿ç”¨çš„æ—¶å€™åˆ‡è®°ä¸è¦å¿˜è®°åˆ¤æ–­è¿™ä¸ªAPIåœ¨æˆ‘ä»¬çš„å®¿ä¸»ç¯å¢ƒä¸­æ˜¯å¦å­˜åœ¨ã€‚å¦‚æœä¸å­˜åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å¼•å…¥å…¶polyfillæ¥ä½œéƒ¨åˆ†åŠŸèƒ½çš„å…¼å®¹ã€‚ IntersectionObserver-polyfillæ˜¯w3cå®˜æ–¹åˆ›å»ºçš„https://github.com/w3c/IntersectionObserverã€‚æˆ‘ä»¬å¯ä»¥åœ¨æµè§ˆå™¨ä¸æ”¯æŒIntersectionObserverçš„æƒ…å†µä¸‹å¼•å…¥å®ƒã€‚å½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥ç›´æ¥å¼•å…¥å®ƒï¼Œå…¶å†…éƒ¨ä¹Ÿåªä¼šåœ¨æµè§ˆå™¨ä¸æ”¯æŒå…¶çš„æƒ…å†µä¸‹è¿›è¡Œpolyfillã€‚","text":"åœ¨ä»‹ç»IntersectionObserverçš„æ—¶å€™æ›¾æåˆ°è¿‡è¿™ä¸ªæ¥å£ç›®å‰ä½¿ç”¨çš„æœ€å¤§é—®é¢˜å°±æ˜¯æµè§ˆå™¨çš„å…¼å®¹æ€§é—®é¢˜ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬å¹³æ—¶åœ¨ä½¿ç”¨çš„æ—¶å€™åˆ‡è®°ä¸è¦å¿˜è®°åˆ¤æ–­è¿™ä¸ªAPIåœ¨æˆ‘ä»¬çš„å®¿ä¸»ç¯å¢ƒä¸­æ˜¯å¦å­˜åœ¨ã€‚å¦‚æœä¸å­˜åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å¼•å…¥å…¶polyfillæ¥ä½œéƒ¨åˆ†åŠŸèƒ½çš„å…¼å®¹ã€‚ IntersectionObserver-polyfillæ˜¯w3cå®˜æ–¹åˆ›å»ºçš„https://github.com/w3c/IntersectionObserverã€‚æˆ‘ä»¬å¯ä»¥åœ¨æµè§ˆå™¨ä¸æ”¯æŒIntersectionObserverçš„æƒ…å†µä¸‹å¼•å…¥å®ƒã€‚å½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥ç›´æ¥å¼•å…¥å®ƒï¼Œå…¶å†…éƒ¨ä¹Ÿåªä¼šåœ¨æµè§ˆå™¨ä¸æ”¯æŒå…¶çš„æƒ…å†µä¸‹è¿›è¡Œpolyfillã€‚ IntersectionObserverçš„ä½¿ç”¨å‰é¢åšäº†ç®€å•çš„å™è¿° 1234567891011const target = document.getElementById('target')const observer = new IntersectionObserver((entries) =&gt; &#123; const [entry] = entries if (entry.isIntersecting) &#123; console.log('å…ƒç´ æ›å…‰äº†') &#125;&#125;)observer.observe(target) ä¸‹é¢æˆ‘ä»¬å°±ä»å…¶polyfillçš„æºç ä¸­æ¥äº†è§£å…¶åŸºæœ¬åŸç† IntersectionObserver1234567891011121314151617181920212223242526272829function IntersectionObserver(callback, opt_options) &#123; var options = opt_options || &#123;&#125;; if (typeof callback != 'function') &#123; throw new Error('callback must be a function'); &#125; if (options.root &amp;&amp; options.root.nodeType != 1) &#123; throw new Error('root must be an Element'); &#125; // Binds and throttles `this._checkForIntersections`. this._checkForIntersections = throttle( this._checkForIntersections.bind(this), this.THROTTLE_TIMEOUT); // Private properties. this._callback = callback; this._observationTargets = []; this._queuedEntries = []; this._rootMarginValues = this._parseRootMargin(options.rootMargin); // Public properties. this.thresholds = this._initThresholds(options.threshold); this.root = options.root || null; this.rootMargin = this._rootMarginValues.map(function(margin) &#123; return margin.value + margin.unit; &#125;).join(' '); &#125; IntersectionObserveræ˜¯ä¸€ä¸ªæ„é€ å‡½æ•°ã€‚å½“æˆ‘ä»¬åˆ›å»ºå…¶å®ä¾‹çš„æ—¶å€™ï¼Œå¯ä»¥ä¼ é€’ä¸¤ä¸ªå‚æ•°ã€‚ç¬¬ä¸€ä¸ªå‚æ•°å¿…é¡»æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå¦åˆ™ä¼šæŠ›å‡ºä¸€ä¸ªé”™è¯¯ã€‚ç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªå¯é€‰çš„å¯¹è±¡ï¼Œå”¯ä¸€çš„è¦æ±‚å°±æ˜¯æˆ‘ä»¬æŒ‡å®šçš„rootå±æ€§çš„å€¼å¿…é¡»æ˜¯ä¸€ä¸ªElementã€‚æ„é€ å‡½æ•°ä¼šåœ¨åˆ›å»ºå®ä¾‹çš„æ—¶å€™æ·»åŠ å¾ˆå¤šç§æœ‰å±æ€§ã€‚æœ‰äº›å±æ€§åé¢ç”¨åˆ°çš„æ—¶å€™ä¼šè®²è§£ï¼Œè¿™é‡Œæˆ‘ä»¬å…ˆçœ‹å‡ ä¸ªç”¨æ¥ä¿å­˜æˆ‘ä»¬ä¼ é€’çš„é€‰é¡¹çš„å±æ€§ã€‚ åœ¨åˆ›å»ºIntersectionObserverå®ä¾‹çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ç¬¬äºŒä¸ªå‚æ•°å¯¹è±¡ä¸­ä¼ å…¥ä»¥ä¸‹å‡ ä¸ªå±æ€§ 12345&#123; root: Element, rootMargin: string, threshold: number | number[]&#125; åœ¨æ„é€ å‡½æ•°ä¸­é¦–å…ˆä¼šè°ƒç”¨ç§æœ‰æ–¹æ³•è§£ææˆ‘ä»¬ä¼ å…¥çš„rootMarginå±æ€§ï¼Œä¸‹é¢æ˜¯è¿™ä¸ªæ–¹æ³•çš„åŸºæœ¬å®ç° 1234567891011121314151617IntersectionObserver.prototype._parseRootMargin = function(opt_rootMargin) &#123; var marginString = opt_rootMargin || '0px'; var margins = marginString.split(/\\s+/).map(function(margin) &#123; var parts = /^(-?\\d*\\.?\\d+)(px|%)$/.exec(margin); if (!parts) &#123; throw new Error('rootMargin must be specified in pixels or percent'); &#125; return &#123;value: parseFloat(parts[1]), unit: parts[2]&#125;; &#125;); // Handles shorthand. margins[1] = margins[1] || margins[0]; margins[2] = margins[2] || margins[0]; margins[3] = margins[3] || margins[1]; return margins;&#125; è¿™ä¸ªæ–¹æ³•å°±æ˜¯å°†æˆ‘ä»¬ä¼ å…¥çš„rootMarginè§£ææˆæ•°ç»„ï¼Œè¿™ä¸ªæ•°ç»„åŒ…å«å››ä¸ªå…ƒç´ ä»£è¡¨çš„åˆ†åˆ«æ˜¯ä¸Šï¼Œå³ï¼Œä¸‹ï¼Œå·¦è¾¹è·çš„å€¼å’Œå•ä½ã€‚rootMarginè®¾ç½®çš„æ—¶å€™å’Œcss marginè®¾ç½®çš„æ–¹å¼ä¸€æ ·ï¼Œå¯ä»¥ä¼ å…¥1,2,3,4ä¸ªå€¼ã€‚æ¯”å¦‚ rootMargin: &apos;10px&apos; --&gt; _parseRootMargin(rootMargin) --&gt; [{value: 10, unit: &apos;px&apos;},{value: 10, unit: &apos;px&apos;},{value: 10, unit: &apos;px&apos;},{value: 10, unit: &apos;px&apos;}] // ä¼ å…¥2ï¼Œ3ï¼Œ4ä¸ªå€¼çš„è§£æè§„åˆ™å’Œcss marginçš„è§£æè§„åˆ™å…¶å®æ˜¯ä¸€æ ·çš„è§£æå®ŒrootMarginåï¼Œç§æœ‰å±æ€§this._rootMarginValueså°±æ˜¯å¦‚ä¸‹å½¢å¼ [ {value: 10, unit: &apos;px&apos;}, {value: 10, unit: &apos;px&apos;}, {value: 10, unit: &apos;px&apos;}, {value: 10, unit: &apos;px&apos;} ]åé¢åˆå°†å…¶è½¬åŒ–ä¸ºthis.rootMarginçš„å€¼ 123this.rootMargin = this._rootMarginValues.map(function(margin) &#123; return margin.value + margin.unit; &#125;).join(' '); æ‰€ä»¥ï¼Œæ— è®ºæˆ‘ä»¬ä¼ å…¥çš„rootMarginæ˜¯ä»€ä¹ˆæ ·çš„å½¢å¼ï¼Œæ„é€ å‡½æ•°æ‰§è¡Œç»“æŸåéƒ½ä¼šå˜æˆ10px 10px 10px 10pxçš„å½¢å¼ã€‚ åœ¨æ„é€ å‡½æ•°ä¸­è¿˜æœ‰ä¸€ä¸ªæ­¥éª¤æ˜¯åˆå§‹åŒ–æˆ‘ä»¬ä¼ å…¥çš„thresholdã€‚æˆ‘ä»¬çŸ¥é“ï¼Œthresholdå¯ä»¥æ˜¯ä¸€ä¸ªæ•°å­—ï¼Œä¹Ÿå¯ä»¥æ˜¯ç”±æ•°å­—ç»„æˆçš„æ•°ç»„ã€‚æ„é€ å‡½æ•°æ‰§è¡Œçš„æ—¶å€™ï¼Œä¼šç»Ÿä¸€å°†å…¶è½¬æ¢æˆæ•°ç»„çš„å½¢å¼å¹¶ä¿å­˜åœ¨this.thresholdså±æ€§ä¸­ 1this.thresholds = this._initThresholds(options.threshold); ä¸‹é¢æ˜¯è§£æthresholdçš„_initThresholdæ–¹æ³•çš„å®ç° 1234567891011IntersectionObserver.prototype._initThresholds = function(opt_threshold) &#123; var threshold = opt_threshold || [0]; if (!Array.isArray(threshold)) threshold = [threshold]; return threshold.sort().filter(function(t, i, a) &#123; if (typeof t != 'number' || isNaN(t) || t &lt; 0 || t &gt; 1) &#123; throw new Error('threshold must be a number between 0 and 1 inclusively'); &#125; return t !== a[i - 1]; &#125;);&#125; è¿™ä¸ªæ–¹æ³•æ¥æ”¶æˆ‘ä»¬ä¼ å…¥çš„options.thresholdé€‰é¡¹çš„å€¼ä½œä¸ºå‚æ•°ï¼Œå¦‚æœæˆ‘ä»¬æ²¡æœ‰ä¼ å…¥è¿™ä¸ªå€¼ï¼Œåˆ™é»˜è®¤ä¸º0ã€‚å¦‚æœæˆ‘ä»¬ä¼ å…¥çš„ä¸æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œå°±å°†å…¶è½¬åŒ–ä¸ºæ•°ç»„ã€‚ä¸‹é¢çš„filteræ˜¯å¯¹ä¸€ä¸ªæ•°ç»„è¿›è¡Œå»é‡çš„æ–¹æ³•ï¼Œå³å¦‚æœæˆ‘ä»¬å¯¹thresholdä¼ å…¥äº†é‡å¤çš„å€¼ï¼Œåªä¼šå–ä¸€ä¸ªã€‚è€Œä¸”thresholdä¸­çš„æ¯ä¸€ä¸ªå€¼éƒ½å¿…é¡»æ˜¯æ•°å­—ï¼Œå¹¶ä¸”åœ¨[0, 1]ä¹‹é—´ã€‚æ‰€ä»¥ï¼Œthis.thresholdæœ€ç»ˆä¿å­˜çš„å€¼æ˜¯å¦‚ä¸‹å½¢å¼ this.threshold = [0] this.threshold = [0.25, 0.5, 1]ä¸Šé¢å°±æ˜¯IntersectionObserveræ„é€ å‡½æ•°å¤§è‡´çš„æ‰§è¡Œè¿‡ç¨‹ï¼Œå®ä¾‹åˆ›å»ºå¥½åï¼Œæˆ‘ä»¬ä¼šè°ƒç”¨observeæ–¹æ³•ç›‘æµ‹å…ƒç´ ã€‚ä¸‹é¢æˆ‘ä»¬çœ‹ä¸€ä¸‹observeæ–¹æ³•çš„å…·ä½“å®ç° observeobserveæ–¹æ³•å®šä¹‰åœ¨IntersectionObserver.prototypeä¸Š 123456789101112131415161718IntersectionObserver.prototype.observe = function(target) &#123; var isTargetAlreadyObserved = this._observationTargets.some(function(item) &#123; return item.element == target; &#125;); if (isTargetAlreadyObserved) &#123; return; &#125; if (!(target &amp;&amp; target.nodeType == 1)) &#123; throw new Error('target must be an Element'); &#125; this._registerInstance(); this._observationTargets.push(&#123;element: target, entry: null&#125;); this._monitorIntersections(); this._checkForIntersections();&#125; æ¥æ”¶çš„å‚æ•°å°±æ˜¯æˆ‘ä»¬éœ€è¦ç›‘æµ‹çš„domå…ƒç´ ã€‚é¦–å…ˆä¼šéå†this._observationTargetsï¼Œè¿™ä¸ªå±æ€§æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œå®ƒä¹Ÿæ˜¯åœ¨åˆå§‹åŒ–IntersectionObserverçš„æ—¶å€™åˆ›å»ºçš„ this._observationTargets = [];å¯¹è¿™ä¸ªå±æ€§çš„éå†ï¼Œå…¶å®å°±æ˜¯ä¸ºäº†åˆ¤æ–­å½“å‰çš„observeræ˜¯å¦å·²ç»é€šè¿‡observeæ–¹æ³•ç›‘æµ‹è¿‡targetå…ƒç´ ã€‚å¦‚æœå·²ç»ç›‘æµ‹è¿‡ï¼Œå°±ç›´æ¥returnï¼Œé˜²æ­¢åŒä¸€ä¸ªobserverå®ä¾‹å¯¹åŒä¸€ä¸ªtargetå…ƒç´ è¿›è¡Œå¤šæ¬¡ç›‘æµ‹ã€‚ å¦‚æœæ²¡æœ‰ç›‘æµ‹è¿‡targetå…ƒç´ ï¼Œè¿™é‡ŒåŒæ ·ä¼šå¯¹targetçš„ç±»å‹è¿›è¡Œåˆ¤æ–­ã€‚å¦‚æœä¸æ˜¯ä¸€ä¸ªdomç»“ç‚¹ï¼ŒåŒæ ·ä¼šæŠ›å‡ºä¸€ä¸ªé”™è¯¯ã€‚ æ¥ç€ï¼Œä¼šè°ƒç”¨this._registerInstanceæ–¹æ³•ã€‚è¿™ä¸ªæ–¹æ³•çš„ä¸»è¦ä½œç”¨å°±æ˜¯å°†å½“å‰çš„observerå®ä¾‹æ·»åŠ åˆ°å…¨å±€æ•°ç»„registryä¸­ï¼Œä¸»è¦æ˜¯ä¸ºäº†é˜²æ­¢æˆ‘ä»¬çš„observerå®ä¾‹è¢«åƒåœ¾å›æ”¶è¿›è¡Œæ¸…é™¤ 12345IntersectionObserver.prototype._registerInstance = function() &#123; if (registry.indexOf(this) &lt; 0) &#123; registry.push(this); &#125;&#125; ç„¶åï¼Œå°†æˆ‘ä»¬targetå…ƒç´ ä¿å­˜åœ¨this._observationTargetsä¸­ã€‚ä»ä¸Šé¢ä»£ç ä¸­å¯ä»¥çœ‹åˆ°ï¼Œthis._observationTargetså¹¶ä¸åªæ˜¯ä¿å­˜targetå…ƒç´ ã€‚å®ƒä¼šå°†targetå…ƒç´ ä½œä¸ºä¸€ä¸ªå¯¹è±¡çš„elementå±æ€§çš„å€¼è¿›è¡Œä¿å­˜ï¼ŒåŒæ—¶è¿™ä¸ªå¯¹è±¡è¿˜æœ‰ä¸€ä¸ªentryå±æ€§ã€‚è¿™ä¸ªå±æ€§åˆå§‹çš„æ—¶å€™æ˜¯ä¸€ä¸ªnullï¼Œåç»­æ˜¯IntersectionObserverEntryçš„ä¸€ä¸ªå®ä¾‹å¯¹è±¡ã€‚ ä¹‹åè°ƒç”¨this._monitorIntersectionsæ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•åé¢æˆ‘ä»¬ä¼šè¯´ã€‚å®ƒçš„ä½œç”¨ä¸»è¦å°±æ˜¯é‡‡ç”¨ä»€ä¹ˆæ ·çš„æ–¹å¼æ¥æ£€æµ‹targetçš„çŠ¶æ€ã€‚ æœ€åè°ƒç”¨this._checkForIntersectionsæ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•åŒæ ·ä¼šåœ¨åé¢è®²è§£ã€‚è¿™é‡Œå®ƒä¸»è¦å°±æ˜¯å¯¹targetå…ƒç´ çš„çŠ¶æ€è¿›è¡Œä¸€æ¬¡åˆå§‹çš„åˆ¤æ–­ã€‚å¦‚æœtargetå…ƒç´ åœ¨åˆå§‹çš„æ—¶å€™å·²ç»æ»¡è¶³äº†å’Œrootå…ƒç´ çš„äº¤é›†çš„çŠ¶æ€ï¼Œåœ¨è°ƒç”¨è¿™ä¸ªæ–¹æ³•çš„æ—¶å€™å°±ä¼šè§¦å‘æˆ‘ä»¬çš„å›è°ƒå‡½æ•°ã€‚ _monitorIntersectionsè°ƒç”¨observeæ–¹æ³•ä¹‹åï¼Œæˆ‘ä»¬å°±èƒ½å¤Ÿç›‘æµ‹targetå…ƒç´ çš„çŠ¶æ€äº†ã€‚å¯¹targetå…ƒç´ çŠ¶æ€çš„ç›‘æµ‹ï¼Œå°±æ˜¯é€šè¿‡è°ƒç”¨ä¸Šé¢æˆ‘ä»¬æ‰€æåˆ°çš„this._monitorIntersectionsæ–¹æ³•ã€‚è¿™é‡Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹è¿™ä¸ªæ–¹æ³•æ˜¯æ€ä¹ˆå®ç°å¯¹å…ƒç´ çš„ç›‘æµ‹çš„ 1234567891011121314151617181920212223242526IntersectionObserver.prototype._monitorIntersections = function() &#123; if (!this._monitoringIntersections) &#123; this._monitoringIntersections = true; // If a poll interval is set, use polling instead of listening to // resize and scroll events or DOM mutations. if (this.POLL_INTERVAL) &#123; this._monitoringInterval = setInterval( this._checkForIntersections, this.POLL_INTERVAL); &#125; else &#123; addEvent(window, 'resize', this._checkForIntersections, true); addEvent(document, 'scroll', this._checkForIntersections, true); if (this.USE_MUTATION_OBSERVER &amp;&amp; 'MutationObserver' in window) &#123; this._domObserver = new MutationObserver(this._checkForIntersections); this._domObserver.observe(document, &#123; attributes: true, childList: true, characterData: true, subtree: true &#125;); &#125; &#125; &#125;&#125; è¿™ä¸ªæ–¹æ³•æä¾›äº†ä¸¤ç§æ–¹å¼ç”¨æ¥ç›‘æµ‹å…ƒç´ çŠ¶æ€çš„å˜åŒ–ã€‚ç¬¬ä¸€ç§å¾ˆç®€å•ï¼Œä¹Ÿå¾ˆç²—æš´ â€“ pollingã€‚è¿™ç§æ–¹å¼é»˜è®¤æ˜¯å…³é—­çš„ IntersectionObserver.prototype.POLL_INTERVAL = null;å¦‚æœä½ æƒ³ä½¿ç”¨pollingçš„æ–¹å¼ç›‘æµ‹å…ƒç´ çš„çŠ¶æ€ï¼Œåˆ™éœ€è¦åœ¨åˆ›å»ºIntersectionObserverå®ä¾‹ä¹‹åï¼Œè°ƒç”¨observeæ–¹æ³•ä¹‹å‰è®¾ç½®observer.POLL_INTERVALå±æ€§ï¼Œæ¯”å¦‚ 12345const observer = new IntersectionObserver(() =&gt; &#123;&#125;)observer.POLL_INTERVAL = 300observer.observe(target) å¦‚æœæŒ‰ç…§ä¸Šé¢ä»£ç çš„è®¾ç½®ï¼Œæµè§ˆå™¨å°±ä¼šå¼€å¯ä¸€ä¸ªå®šæ—¶å™¨ï¼Œæ¯300æ¯«ç§’åˆ¤æ–­ä¸€ä¸‹å…ƒç´ çš„çŠ¶æ€ 12this._monitoringInterval = setInterval( this._checkForIntersections, this.POLL_INTERVAL); ä½†æ˜¯ï¼Œè¿™ç§æ–¹å¼ä¸æ¨èï¼›æ‰€ä»¥åœ¨polyfillçš„æºç ä¸­é»˜è®¤å°†è¿™ç§æ–¹å¼å…³é—­ï¼Œé‡‡ç”¨æ›´é«˜æ•ˆçš„äº‹ä»¶ç›‘å¬çš„æ–¹å¼æ¥ç›‘æµ‹å…ƒç´ çŠ¶æ€çš„å˜åŒ–ã€‚é¦–å…ˆéœ€è¦ç›‘å¬windowçš„resizeå’Œdocumentçš„scrolläº‹ä»¶ã€‚ç›‘å¬è¿™ä¸¤ç§äº‹ä»¶èƒ½å¤Ÿæ»¡è¶³å¤§å¤šæ•°å¯¹å…ƒç´ çŠ¶æ€åˆ¤æ–­çš„æƒ…å†µã€‚å¦‚æœä¸€ä¸ªå…ƒç´ è‡ªèº«çš„å±æ€§æ²¡æœ‰å˜åŒ–ï¼Œå½“çª—å£æ»šåŠ¨æˆ–è€…å¤§å°æ”¹å˜çš„æ—¶å€™éƒ½ä¼šå½±å“å…ƒç´ å’Œâ€è§†çª—â€çš„äº¤é›†ã€‚ä½†æ˜¯ï¼Œåœ¨æŸäº›ä¸šåŠ¡åœºæ™¯ä¸‹è¿™ä¸¤ç§äº‹ä»¶æ˜¯æ— æ³•ç›‘æµ‹åˆ°å…ƒç´ çŠ¶æ€çš„å˜åŒ–çš„ã€‚æ¯”å¦‚é€‰é¡¹å¡åˆ‡æ¢ï¼Œå…ƒç´ è‡ªèº«çš„æ˜¾ç¤ºå’Œéšè—ç­‰ã€‚å¯¹äºè¿™ç§æƒ…å†µï¼Œpolyfillä¸­åŒæ ·é‡‡ç”¨ä¸€ç§ç²—æš´çš„æ–¹æ³• 123456789if (this.USE_MUTATION_OBSERVER &amp;&amp; 'MutationObserver' in window) &#123; this._domObserver = new MutationObserver(this._checkForIntersections); this._domObserver.observe(document, &#123; attributes: true, childList: true, characterData: true, subtree: true &#125;);&#125; é€šè¿‡MutationObserveræ¥å£ç›‘æµ‹documentå…ƒç´ ä¸‹æ‰€æœ‰èŠ‚ç‚¹çš„attributesï¼ŒchildListå’ŒcharacterDataçš„å˜åŒ–ã€‚æ¯å½“æœ‰å­èŠ‚ç‚¹çŠ¶æ€å˜åŒ–çš„æ—¶å€™éƒ½ä¼šå»æ£€æµ‹targetå…ƒç´ å’Œrootå…ƒç´ çš„äº¤é›†çŠ¶æ€ã€‚è¿™ç§æ–¹å¼å¾ˆç²—æš´ï¼Œä½†æ˜¯æŸäº›ä¸šåŠ¡åœºæ™¯ä¸‹æˆ‘ä»¬ä¹Ÿä¸å¾—ä¸è¿™æ ·åšã€‚ ä¸Šé¢ç›‘æµ‹å…ƒç´ æ‰€æœ‰çš„æ–¹å¼ä¸­ï¼Œå…¶å›è°ƒå‡½æ•°éƒ½æ˜¯this._checkForIntersectionsæ–¹æ³•ã€‚è¿™ä¸ªæ–¹æ³•åœ¨ä¸Šé¢ä¹Ÿæåˆ°è¿‡ï¼Œåœ¨è°ƒç”¨observeæ–¹æ³•çš„æ—¶å€™åŒæ ·ä¹Ÿä¼šè°ƒç”¨è¿™ä¸ªæ–¹æ³•ã€‚è¿™ä¸ªæ–¹æ³•åˆ°åº•åšäº†ä»€ä¹ˆï¼Œä¸‹é¢å°±è¯¦ç»†çš„çœ‹ä¸€ä¸‹ã€‚ _checkForIntersectionsåœ¨è¯¦ç»†è®²è§£è¿™ä¸ªæ–¹æ³•ä¹‹å‰ï¼Œå…ˆæ¥ç®€å•çš„æ€»ç»“ä¸€ä¸‹è¿™ä¸ªæ–¹æ³•ä¼šåœ¨ä»€ä¹ˆæ ·çš„æ¡ä»¶ä¸‹è¢«è°ƒç”¨ è°ƒç”¨observer.observe(target)æ–¹æ³•çš„æ—¶å€™ é‡‡ç”¨è½®è¯¢çš„æ–¹å¼ç›‘æµ‹å…ƒç´ ï¼Œä½œä¸ºsetIntervalå›è°ƒå‡½æ•° é‡‡ç”¨äº‹ä»¶çš„æ–¹å¼ç›‘æµ‹å…ƒç´ ï¼Œä½œä¸ºdocumentçš„scrolläº‹ä»¶çš„å›è°ƒå‡½æ•° é‡‡ç”¨äº‹ä»¶çš„æ–¹å¼ç›‘æµ‹å…ƒç´ ï¼Œä½œä¸ºwindowçš„resizeäº‹ä»¶çš„å›è°ƒå‡½æ•° é‡‡ç”¨äº‹ä»¶çš„æ–¹å¼ç›‘æµ‹å…ƒç´ ï¼Œä½œä¸ºMutationObserverçš„å›è°ƒå‡½æ•° æ€»ä¹‹ï¼Œåœ¨this._checkForIntersectionsæ–¹æ³•è¢«è°ƒç”¨çš„æ—¶å€™ï¼Œä¸»è¦å°±æ˜¯ä¸ºäº†åˆ¤æ–­targetå…ƒç´ å’Œrootå…ƒç´ çš„äº¤é›†çŠ¶æ€æœ‰æ²¡æœ‰å‘ç”Ÿå˜åŒ–ï¼Œå¦‚æœäº¤é›†çŠ¶æ€å‘ç”Ÿäº†å˜åŒ–ï¼Œå°±ä¼šè§¦å‘æˆ‘ä»¬çš„å›è°ƒå‡½æ•°ã€‚ä¸‹é¢å°±è¯¦ç»†çš„çœ‹ä¸€ä¸‹è¿™ä¸ªæ–¹æ³•åˆ°åº•åšäº†å“ªäº›äº‹æƒ… 123456789101112131415161718192021222324252627282930313233343536373839404142IntersectionObserver.prototype._checkForIntersections = function() &#123; var rootIsInDom = this._rootIsInDom(); var rootRect = rootIsInDom ? this._getRootRect() : getEmptyRect(); this._observationTargets.forEach(function(item) &#123; var target = item.element; var targetRect = getBoundingClientRect(target); var rootContainsTarget = this._rootContainsTarget(target); var oldEntry = item.entry; var intersectionRect = rootIsInDom &amp;&amp; rootContainsTarget &amp;&amp; this._computeTargetAndRootIntersection(target, rootRect); var newEntry = item.entry = new IntersectionObserverEntry(&#123; time: now(), target: target, boundingClientRect: targetRect, rootBounds: rootRect, intersectionRect: intersectionRect &#125;); if (!oldEntry) &#123; this._queuedEntries.push(newEntry); &#125; else if (rootIsInDom &amp;&amp; rootContainsTarget) &#123; // If the new entry intersection ratio has crossed any of the // thresholds, add a new entry. if (this._hasCrossedThreshold(oldEntry, newEntry)) &#123; this._queuedEntries.push(newEntry); &#125; &#125; else &#123; // If the root is not in the DOM or target is not contained within // root but the previous entry for this target had an intersection, // add a new record indicating removal. if (oldEntry &amp;&amp; oldEntry.isIntersecting) &#123; this._queuedEntries.push(newEntry); &#125; &#125; &#125;, this); if (this._queuedEntries.length) &#123; this._callback(this.takeRecords(), this); &#125;&#125; é¦–å…ˆä¼šåˆ¤æ–­rootå…ƒç´ æ˜¯ä¸æ˜¯åœ¨domç»“æ„ä¸­ 1234567891011121314151617181920212223242526272829IntersectionObserver.prototype._rootIsInDom = function() &#123; return !this.root || containsDeep(document, this.root);&#125;function containsDeep(parent, child) &#123; var node = child; while (node) &#123; if (node == parent) return true; node = getParentNode(node); &#125; return false;&#125;function getParentNode(node) &#123; var parent = node.parentNode; if (parent &amp;&amp; parent.nodeType == 11 &amp;&amp; parent.host) &#123; // If the parent is a shadow root, return the host element. return parent.host; &#125; if (parent &amp;&amp; parent.assignedSlot) &#123; // If the parent is distributed in a &lt;slot&gt;, return the parent of a slot. return parent.assignedSlot.parentNode; &#125; return parent;&#125; ä¸Šé¢çš„ä»£ç ä¸»è¦å°±æ˜¯ç”¨æ¥åˆ¤æ–­rootå…ƒç´ æ˜¯ä¸æ˜¯åœ¨domç»“æ„ä¸­ã€‚æ‰€ä»¥è¿™å°±è¦æ±‚æˆ‘ä»¬ä¼ å…¥çš„options.rooté€‰é¡¹ä¸€å®šè¦æ˜¯targetçš„ç¥–å…ˆå…ƒç´ ã€‚ æ¥ç€ä¼šè·å–rootå…ƒç´ çš„åŒºåŸŸæ•°æ® 12345678910111213141516171819IntersectionObserver.prototype._getRootRect = function() &#123; var rootRect; if (this.root) &#123; rootRect = getBoundingClientRect(this.root); &#125; else &#123; // Use &lt;html&gt;/&lt;body&gt; instead of window since scroll bars affect size. var html = document.documentElement; var body = document.body; rootRect = &#123; top: 0, left: 0, right: html.clientWidth || body.clientWidth, width: html.clientWidth || body.clientWidth, bottom: html.clientHeight || body.clientHeight, height: html.clientHeight || body.clientHeight &#125;; &#125; return this._expandRectByRootMargin(rootRect);&#125; å¦‚æœæˆ‘ä»¬è‡ªå·±ä¼ é€’äº†rootå…ƒç´ ï¼Œå°±ä¼šé€šè¿‡root.getBoundingClientRectæ–¹æ³•è·å–åˆ°rootçš„åŒºåŸŸæ•°æ®ã€‚å¦‚æœé‡‡ç”¨é»˜è®¤çš„documentå…ƒç´ ï¼Œåˆ™ä¼šä½¿ç”¨è§†çª—çš„åŒºåŸŸæ•°æ®ã€‚åé¢åˆè°ƒç”¨äº†_expandRectByRootMarginæ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•ä¸»è¦æ˜¯ç”¨æ¥å°†æˆ‘ä»¬ä¼ å…¥çš„rootMarginå’ŒrootRectæ•°æ®ç»“åˆå¾—å‡ºæ–°çš„newRootRectæ•°æ®ã€‚ 12345678910111213141516IntersectionObserver.prototype._expandRectByRootMargin = function(rect) &#123; var margins = this._rootMarginValues.map(function(margin, i) &#123; return margin.unit == 'px' ? margin.value : margin.value * (i % 2 ? rect.width : rect.height) / 100; &#125;); var newRect = &#123; top: rect.top - margins[0], right: rect.right + margins[1], bottom: rect.bottom + margins[2], left: rect.left - margins[3] &#125;; newRect.width = newRect.right - newRect.left; newRect.height = newRect.bottom - newRect.top; return newRect;&#125; _expandRectByRootMarginæ–¹æ³•å¾ˆå¥½ç†è§£ï¼Œå°±æ˜¯å°†rootRectå’ŒrootMarginç»“åˆè®¡ç®—å‡ºæ–°çš„rootRectåŒºåŸŸçš„å¤§å°ã€‚ åœ¨rootçš„åŒºåŸŸç¡®å®šåï¼Œä¼šéå†this._observationTargetså±æ€§ã€‚è¿™ä¸ªå±æ€§ä¸Šé¢æˆ‘ä»¬ä¹Ÿæè¿‡ï¼Œå®ƒç”¨æ¥ä¿å­˜è¢«observeræ‰€ç›‘æµ‹çš„æ‰€æœ‰çš„targetå…ƒç´ ã€‚éå†çš„è¿‡ç¨‹å…ˆä¸çœ‹ï¼Œåé¢è¿˜æœ‰ä¸€å°æ®µä»£ç  123if (this._queuedEntries.length) &#123; this._callback(this.takeRecords(), this);&#125; this._queuedEntriesè¿™ä¸ªå±æ€§ä¸€ä¸ªæ•°ç»„ï¼Œå…¶ä¸­æ¯ä¸€ä¸ªå…ƒç´ éƒ½æ˜¯IntersectionObserverEntryå®ä¾‹å¯¹è±¡ã€‚åªæœ‰å½“è¿™ä¸ªå±æ€§çš„é•¿åº¦å¤§äº0çš„æ—¶å€™ï¼Œæ‰ä¼šè§¦å‘å›è°ƒå‡½æ•°ã€‚åœ¨è®²è§£IntersectionObserveræ–¹æ³•çš„åŸºæœ¬ä½¿ç”¨çš„æ—¶å€™æˆ‘ä»¬æ›¾ç»è¯´è¿‡ï¼Œcallbackçš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ç”±IntersectionObserverEntryå®ä¾‹ç»„æˆçš„æ•°ç»„ï¼Œé‚£è¿™é‡Œæ˜¯é€šè¿‡this.takeRecords()æ–¹æ³•è·å–çš„ï¼Œè¿™ä¸ªæ–¹æ³•åšäº†ä»€ä¹ˆï¼Ÿ 12345IntersectionObserver.prototype.takeRecords = function() &#123; var records = this._queuedEntries.slice(); this._queuedEntries = []; return records;&#125; è¿™ä¸ªæ–¹æ³•å¾ˆç®€å•ï¼Œå°±æ˜¯é€šè¿‡sliceæ–¹æ³•å¯¹this._queuedEntriesæ•°æ®åšä¸ªå¤‡ä»½ï¼Œç„¶åæ¸…ç©ºthis._queuedEntriesã€‚è¿™è¡¨ç¤ºåœ¨è¿™ä¸ªæ—¶é—´æ®µå†…å’Œrootå‘ç”Ÿäº¤é›†å˜åŒ–çš„targetä¼šåœ¨è°ƒç”¨this._checkForIntersectionsåäº¤ç»™æˆ‘ä»¬çš„callbackç»Ÿä¸€å¤„ç†ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ¯ä¸ªæ—¶é—´æ®µéƒ½æ˜¯é‡æ–°æ”¶é›†å‘ç”Ÿå˜åŒ–çš„targetçš„ã€‚ ä¸‹é¢æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹å¯¹this._observationTargetsçš„éå†ä¼šåšå“ªäº›äº‹æƒ…ï¼Ÿä¼°è®¡å¤§å®¶ä¹Ÿèƒ½æƒ³åˆ°ï¼Œå®ƒä¸»è¦å°±æ˜¯ç”¨æ¥æ”¶é›†åœ¨è¿™ä¸ªé˜¶æ®µä¸­å’Œrootå…ƒç´ å‘ç”Ÿäº¤é›†å˜åŒ–çš„targetå…ƒç´ ï¼Œå¹¶å°†æ–°çš„äº¤é›†çŠ¶æ€(IntersectionObserverEntryå®ä¾‹å¯¹è±¡) ä¿å­˜åœ¨this._queuedEntriesé˜Ÿåˆ—ä¸­ 123456789101112131415161718192021222324252627282930313233this._observationTargets.forEach(function(item) &#123; var target = item.element; var targetRect = getBoundingClientRect(target); var rootContainsTarget = this._rootContainsTarget(target); var oldEntry = item.entry; var intersectionRect = rootIsInDom &amp;&amp; rootContainsTarget &amp;&amp; this._computeTargetAndRootIntersection(target, rootRect); var newEntry = item.entry = new IntersectionObserverEntry(&#123; time: now(), target: target, boundingClientRect: targetRect, rootBounds: rootRect, intersectionRect: intersectionRect &#125;); if (!oldEntry) &#123; this._queuedEntries.push(newEntry); &#125; else if (rootIsInDom &amp;&amp; rootContainsTarget) &#123; // If the new entry intersection ratio has crossed any of the // thresholds, add a new entry. if (this._hasCrossedThreshold(oldEntry, newEntry)) &#123; this._queuedEntries.push(newEntry); &#125; &#125; else &#123; // If the root is not in the DOM or target is not contained within // root but the previous entry for this target had an intersection, // add a new record indicating removal. if (oldEntry &amp;&amp; oldEntry.isIntersecting) &#123; this._queuedEntries.push(newEntry); &#125; &#125;&#125;, this); åœ¨éå†çš„è¿‡ç¨‹ä¸­ï¼Œé¦–å…ˆè·å–æ¯ä¸ªtargetå…ƒç´ çš„åŒºåŸŸæ•°æ®ï¼Œç„¶åè°ƒç”¨this._rootContainsTargetæ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•å°±æ˜¯ç”¨æ¥åˆ¤æ–­rootå…ƒç´ æ˜¯ä¸æ˜¯targetå…ƒç´ çš„ç¥–å…ˆå…ƒç´  123IntersectionObserver.prototype._rootContainsTarget = function(target) &#123; return containsDeep(this.root || document, target);&#125; ä¸‹é¢ï¼Œæˆ‘ä»¬å…ˆçœ‹ä¸€ä¸‹è¿™æ®µä»£ç åšäº†å•¥ï¼Œåé¢å†çœ‹çœ‹item.entryæ˜¯ä»€ä¹ˆ 12var intersectionRect = rootIsInDom &amp;&amp; rootContainsTarget &amp;&amp; this._computeTargetAndRootIntersection(target, rootRect); å¦‚æœrootIsInDomä¸ºçœŸï¼ˆè¡¨ç¤ºrootå…ƒç´ åœ¨domç»“æ„ä¸­ï¼‰ä¸”rootContainsTargetä¸ºçœŸï¼ˆè¡¨ç¤ºrootæ˜¯targetå…ƒç´ çš„ç¥–å…ˆå…ƒç´ ï¼‰ï¼Œå°±è°ƒç”¨this._computeTargetAndRootIntersectionæ–¹æ³•ã€‚è¿™ä¸ªæ–¹æ³•ä»åç§°ä¸Šåº”è¯¥éƒ½èƒ½ç†è§£å®ƒçš„ä½œç”¨ï¼šè®¡ç®—targetå…ƒç´ å’Œrootå…ƒç´ çš„ç›¸äº¤åŒºåŸŸã€‚å…¶å®å°±æ˜¯ç”¨æ¥è®¡ç®—ç›¸äº¤é¢ç§¯intersectionRectçš„å¤§å°ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445IntersectionObserver.prototype._computeTargetAndRootIntersection = function(target, rootRect) &#123; // If the element isn't displayed, an intersection can't happen. if (window.getComputedStyle(target).display == 'none') return; var targetRect = getBoundingClientRect(target); var intersectionRect = targetRect; var parent = getParentNode(target); var atRoot = false; while (!atRoot) &#123; var parentRect = null; var parentComputedStyle = parent.nodeType == 1 ? window.getComputedStyle(parent) : &#123;&#125;; // If the parent isn't displayed, an intersection can't happen. if (parentComputedStyle.display == 'none') return; if (parent == this.root || parent == document) &#123; atRoot = true; parentRect = rootRect; &#125; else &#123; // If the element has a non-visible overflow, and it's not the &lt;body&gt; // or &lt;html&gt; element, update the intersection rect. // Note: &lt;body&gt; and &lt;html&gt; cannot be clipped to a rect that's not also // the document rect, so no need to compute a new intersection. if (parent != document.body &amp;&amp; parent != document.documentElement &amp;&amp; parentComputedStyle.overflow != 'visible') &#123; parentRect = getBoundingClientRect(parent); &#125; &#125; // If either of the above conditionals set a new parentRect, // calculate new intersection data. if (parentRect) &#123; intersectionRect = computeRectIntersection(parentRect, intersectionRect); if (!intersectionRect) break; &#125; parent = getParentNode(parent); &#125; return intersectionRect;&#125; è¿™ä¸ªæ–¹æ³•æ¥æ”¶çš„ä¸¤ä¸ªå‚æ•°åˆ†åˆ«æ˜¯targetå…ƒç´ å’Œrootå…ƒç´ åŒºåŸŸçš„å¤§å°ã€‚å¦‚æœå…ƒç´ æ˜¯éšè—çš„ï¼Œæ˜¯ä¸å¯èƒ½å­˜åœ¨ç›¸äº¤çš„ï¼Œæ‰€ä»¥ç›´æ¥è¿”å›å°±è¡Œäº†ã€‚æ¥ç€ä¼šè·å–targetåŒºåŸŸæ•°æ®å’Œå…¶parentNodeå…ƒç´ ï¼Œå¹¶è®¾ç½®ä¸€ä¸ªæ ‡å¿—ä½ç”¨æ¥è¡¨ç¤ºä¸‹é¢çš„whileå¾ªç¯æ˜¯å¦å¾ªç¯åˆ°äº†this.rootæˆ–è€…æ˜¯documentã€‚åœ¨whileå¾ªç¯ä¸­å…ˆä¼šåˆ¤æ–­target.parentNodeæ˜¯å¦æ˜¾ç¤ºï¼Œå¦‚æœå…¶éšè—çš„è¯ï¼Œtargetå’Œrootå…ƒç´ åŒæ ·æ˜¯ä¸å¯èƒ½å­˜åœ¨äº¤é›†çš„ã€‚è¿™é‡Œæˆ‘ä»¬å…ˆå‡è®¾æˆ‘ä»¬é‡‡ç”¨é»˜è®¤çš„rootå³documentï¼Œè€Œä¸”parentNodeå°±æ˜¯documentï¼Œé‚£ä¹ˆå¾ªç¯å°†ä¼šè¿›å…¥ifåˆ†æ”¯ï¼Œå¹¶å°†parentRectè®¾ç½®rootRectçš„å¤§å°ï¼ŒatRootè®¾ç½®ä¸ºtrueã€‚æ¥ç€ä¼šæ‰§è¡Œå¦‚ä¸‹ä»£ç  123456if (parentRect) &#123; intersectionRect = computeRectIntersection(parentRect, intersectionRect); if (!intersectionRect) break;&#125;parent = getParentNode(parent); åœ¨è¿™ä¸ªåˆ†æ”¯ä¸­ä¼šæ‰§è¡ŒcomputeRectIntersectionå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°æ‰æ˜¯çœŸæ­£çš„è®¡ç®—targetå’Œrootç›¸äº¤åŒºåŸŸçš„å¤§å° 1234567891011121314151617function computeRectIntersection(rect1, rect2) &#123; var top = Math.max(rect1.top, rect2.top); var bottom = Math.min(rect1.bottom, rect2.bottom); var left = Math.max(rect1.left, rect2.left); var right = Math.min(rect1.right, rect2.right); var width = right - left; var height = bottom - top; return (width &gt;= 0 &amp;&amp; height &gt;= 0) &amp;&amp; &#123; top: top, bottom: bottom, left: left, right: right, width: width, height: height &#125;;&#125; æˆ‘ä»¬å°†è¿™æ®µä»£ç ç”¨ä¸‹é¢çš„å›¾ç‰‡æ¥è¡¨ç¤ºï¼Œå°±èƒ½çœ‹å‡ºå®ƒåˆ°åº•åœ¨åšå•¥ ä¸Šå›¾ä¸­çº¢è‰²çš„çº¿æ®µå°±æ˜¯ç›¸äº¤åŒºåŸŸçš„ä¸Šï¼Œä¸‹ï¼Œå·¦ï¼Œå³çš„é•¿åº¦ã€‚æ‰€ä»¥ï¼Œç›¸äº¤åŒºåŸŸçš„å¤§å°å°±æ˜¯å›¾ä¸­æ©™è‰²å®å¿ƒéƒ¨åˆ†çš„å¤§å°ã€‚å¦‚æœtargetä½äºrootçš„åŒºåŸŸå¤–ï¼Œåˆ™è¡¨ç¤ºwidthæˆ–è€…heightè‡³å°‘æœ‰ä¸€ä¸ª&lt;=0ã€‚é‚£ä¹ˆè®¡ç®—å‡ºæ¥çš„ç›¸äº¤åŒºåŸŸçš„å¤§å°ä¹Ÿå°±ä¸º0ã€‚ å‡è®¾target.parentNodeä¸æ˜¯documentï¼Œé‚£ä¹ˆwhileå¾ªç¯ä¼šæ‰§è¡Œelseåˆ†æ”¯ã€‚å…¶ä¸­æ‰§è¡Œelseåˆ†æ”¯æœ‰ä¸€ä¸ªæ¡ä»¶parentComputedStyle.overflow != &#39;visible&#39;ã€‚å¦‚æœparentComputedStyle.overflowçš„å€¼ä¸ºvisibleï¼Œé‚£ä¹ˆtargetå’Œrootæœ€å¤§çš„äº¤å‰é¢ç§¯å°±æ˜¯targetçš„å¤§å°ï¼Œå¦‚æœparentComputedStyle.overflowçš„å€¼ä¸ä¸ºvisibleï¼Œé‚£ä¹ˆtargetå’Œrootæœ€å¤§çš„äº¤å‰é¢ç§¯æ˜¯å¤šå°‘å‘¢ï¼Ÿæœ€å¤§çš„äº¤å‰é¢ç§¯å°±æ˜¯targetæœ€å¤§èƒ½æ˜¾ç¤ºå‡ºæ¥çš„é¢ç§¯çš„å¤§å°ã€‚ äº¤å‰é¢ç§¯è®¡ç®—å‡ºæ¥åï¼Œæˆ‘ä»¬æ¥ç€åˆ†æä¸‹é¢çš„ä»£ç  123456789var oldEntry = item.entry;var newEntry = item.entry = new IntersectionObserverEntry(&#123; time: now(), target: target, boundingClientRect: targetRect, rootBounds: rootRect, intersectionRect: intersectionRect&#125;); å…ˆçœ‹å¯¹newEntryçš„èµ‹å€¼ã€‚æˆ‘ä»¬ä¸Šé¢è¯´è¿‡this._observationTargetsä¿å­˜çš„æ•°æ®çš„ç»“æ„ä¸º{element: target, entry: null}è¿™ç§ç±»å‹ã€‚ä»è¿™é‡Œå°±èƒ½çœ‹åˆ°entryå°±æ˜¯é€šè¿‡new IntersectionObserverEntryå°±æ˜¯åˆ›å»ºçš„å®ä¾‹å¯¹è±¡ã€‚é‚£oldEntryæ˜¯ä»€ä¹ˆå‘¢ï¼ŸoldEntryå°±æ˜¯ä¸Šä¸€æ¬¡è°ƒç”¨this._checkForIntersectionsæ–¹æ³•çš„æ—¶å€™æ‰€åˆ›å»ºçš„entryå¯¹è±¡ã€‚è¿™é‡Œä¸ºä»€ä¹ˆå–æ–°è€ä¸¤æ¬¡entryå¯¹è±¡ï¼Œåé¢æˆ‘ä»¬ä¼šåˆ†æã€‚è¿™é‡Œæˆ‘ä»¬å…ˆçœ‹ä¸€ä¸‹IntersectionObserverEntryæ„é€ å‡½æ•°çš„æ‰§è¡Œæµç¨‹ 123456789101112131415161718192021222324function IntersectionObserverEntry(entry) &#123; this.time = entry.time; this.target = entry.target; this.rootBounds = entry.rootBounds; this.boundingClientRect = entry.boundingClientRect; this.intersectionRect = entry.intersectionRect || getEmptyRect(); this.isIntersecting = !!entry.intersectionRect; // Calculates the intersection ratio. var targetRect = this.boundingClientRect; var targetArea = targetRect.width * targetRect.height; var intersectionRect = this.intersectionRect; var intersectionArea = intersectionRect.width * intersectionRect.height; // Sets intersection ratio. if (targetArea) &#123; // Round the intersection ratio to avoid floating point math issues: // https://github.com/w3c/IntersectionObserver/issues/324 this.intersectionRatio = Number((intersectionArea / targetArea).toFixed(4)); &#125; else &#123; // If area is zero and is intersecting, sets to 1, otherwise to 0 this.intersectionRatio = this.isIntersecting ? 1 : 0; &#125;&#125; IntersectionObserverEntryå‡½æ•°çš„æ‰§è¡Œæµç¨‹ååˆ†ç®€å•ï¼Œå°±æ˜¯è®¡ç®—å‡ºå…¶å„ä¸ªå±æ€§çš„å€¼ã€‚å…¶å®ƒçš„å±æ€§æˆ‘ä»¬å°±ä¸å¤šè¯´äº†ï¼Œè¿™é‡Œæˆ‘ä»¬ä¸»è¦çœ‹ä»¥ä¸‹ä¸‰ä¸ªå±æ€§å€¼ 1234567891011this.intersectionRect = entry.intersectionRect || getEmptyRect();this.isIntersecting = !!entry.intersectionRect;if (targetArea) &#123; // Round the intersection ratio to avoid floating point math issues: // https://github.com/w3c/IntersectionObserver/issues/324 this.intersectionRatio = Number((intersectionArea / targetArea).toFixed(4)); &#125; else &#123; // If area is zero and is intersecting, sets to 1, otherwise to 0 this.intersectionRatio = this.isIntersecting ? 1 : 0; &#125; å…¶ä¸­this.intersectionRectå°±æ˜¯ä¸Šé¢é€šè¿‡this._computeTargetAndRootIntersectionæ–¹æ³•è®¡ç®—å‡ºæ¥çš„ã€‚this.isIntersectingçš„åˆ¤å®šä¹Ÿååˆ†ç®€å•ï¼Œå¦‚æœå­˜åœ¨ç›¸äº¤é¢ç§¯ï¼Œå°±è¡¨ç¤ºç›¸äº¤ã€‚ä¸å­˜åœ¨ç›¸äº¤é¢ç§¯ï¼Œå°±è¡¨ç¤ºä¸æƒ³äº¤ã€‚æœ€åæ˜¯ç›¸äº¤æ¯”this.intersectionRatioçš„è®¡ç®—ï¼Œæ­£å¸¸æƒ…å†µä¸‹(targetçš„widthå’Œheightéƒ½ä¸ä¸º0)å°±æ˜¯intersectionAreaå’ŒtargetåŒºåŸŸé¢ç§¯çš„æ¯”å€¼ã€‚ ç„¶åå°±ä¼šåˆ¤æ–­oldEntryæ˜¯å¦å­˜åœ¨ï¼ŒoldEntryåœ¨ä»€ä¹ˆçŠ¶æ€ä¸‹ä¸ä¼šå­˜åœ¨ï¼Ÿåœ¨åˆå§‹è°ƒç”¨ï¼Œä¹Ÿå°±æ˜¯è°ƒç”¨observer.observeæ–¹æ³•ç›‘æµ‹targetå…ƒç´ çš„æ—¶å€™item.entryæ˜¯ä¸å­˜åœ¨çš„ã€‚ç„¶åå°±ä¼šå°†newEntryæ·»åŠ åˆ°this._queuedEntriesé˜Ÿåˆ—ä¸­ï¼Œå½“æ‰§è¡Œåˆ° 123if (this._queuedEntries.length) &#123; this._callback(this.takeRecords(), this);&#125; çš„æ—¶å€™ï¼Œå°±ä¼šè°ƒç”¨æˆ‘ä»¬ä¼ å…¥çš„å›è°ƒå‡½æ•°ã€‚ å¦‚æœä¸æ˜¯åœ¨åˆå§‹çŠ¶æ€ä¸‹ï¼Œåœ¨rootIsInDom &amp;&amp; rootContainsTargetä¸ºçœŸçš„æ—¶å€™ï¼Œä¼šè°ƒç”¨this._hasCrossedThresholdæ–¹æ³•ï¼Œé‚£è¿™ä¸ªæ–¹æ³•æ˜¯å¹²å•¥çš„ï¼Ÿæˆ‘ä»¬åœ¨ä»‹ç»IntersectionObserverçš„æ—¶å€™æ›¾ç»æåˆ°åœ¨åˆ›å»ºIntersectionObserverå®ä¾‹çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¼ å…¥ä¸€ä¸ªé€‰é¡¹ï¼Œå¯ä»¥é€šè¿‡è¿™ä¸ªé€‰é¡¹çš„thresholdå±æ€§æŒ‡å®šç›¸äº¤æ¯”è¾¾åˆ°ä»€ä¹ˆæ ·çš„æ¡ä»¶æ‰éœ€è¦è§¦å‘æˆ‘ä»¬çš„å›è°ƒå‡½æ•°ã€‚this._hasCrossedThresholdå°±æ˜¯ç”¨æ¥åˆ¤æ–­è¿™ç§æƒ…å†µçš„ã€‚ 123456789101112131415161718192021222324IntersectionObserver.prototype._hasCrossedThreshold = function(oldEntry, newEntry) &#123; // To make comparing easier, an entry that has a ratio of 0 // but does not actually intersect is given a value of -1 var oldRatio = oldEntry &amp;&amp; oldEntry.isIntersecting ? oldEntry.intersectionRatio || 0 : -1; var newRatio = newEntry.isIntersecting ? newEntry.intersectionRatio || 0 : -1; // Ignore unchanged ratios if (oldRatio === newRatio) return; for (var i = 0; i &lt; this.thresholds.length; i++) &#123; var threshold = this.thresholds[i]; // Return true if an entry matches a threshold or if the new ratio // and the old ratio are on the opposite sides of a threshold. if (threshold == oldRatio || threshold == newRatio || threshold &lt; oldRatio !== threshold &lt; newRatio) &#123; return true; &#125; &#125;&#125; ä»_hasCrossedThresholdä»£ç ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ã€‚å¦‚æœtargetå®Œå…¨æ²¡æœ‰æ˜¾ç¤ºoldRatio === newRatio === -1ï¼Œç›´æ¥returnã€‚è¿™ç§æƒ…å†µä¸‹æ˜¯ä¸ä¼šæ‰§è¡Œæˆ‘ä»¬çš„å›è°ƒå‡½æ•°çš„ã€‚å¦‚æœtargetå®Œå…¨æ˜¾ç¤ºoldRatio === newRatio === newEntry.intersectionRatioï¼Œè¿™ç§æƒ…å†µä¸‹ä¹Ÿä¸ä¼šæ‰§è¡Œæˆ‘ä»¬çš„å›è°ƒå‡½æ•°ã€‚é‚£ä»€ä¹ˆæ—¶å€™æ‰ä¼šæ‰§è¡Œæˆ‘ä»¬çš„å›è°ƒå‡½æ•°å‘¢ï¼Œä»è¿™æ®µä»£ç çš„forå¾ªç¯ä¸­æˆ‘ä»¬å¯ä»¥æ€»ç»“å‡ºåªæœ‰å½“thresholdè®¾ç½®çš„å€¼åœ¨oldRatioå’ŒnewRatioä¹‹é—´çš„æ—¶å€™æ‰ä¼šæ‰§è¡Œæˆ‘ä»¬çš„å›è°ƒã€‚è¿™é‡Œå¤§å®¶å¯ä»¥ç”»å›¾åˆ†æä¸€ä¸‹ã€‚ ä¸Šé¢å°±æ˜¯å…³äºæ€ä¹ˆç›‘æµ‹targetå’Œæ‰§è¡Œå›è°ƒå‡½æ•°æ—¶æœºçš„åˆ†æï¼Œä¸‹é¢æˆ‘ä»¬çœ‹ä¸€ä¸‹unobserveçš„è¿‡ç¨‹ unobserve1234567891011IntersectionObserver.prototype.unobserve = function(target) &#123; this._observationTargets = this._observationTargets.filter(function(item) &#123; return item.element != target; &#125;); if (!this._observationTargets.length) &#123; this._unmonitorIntersections(); this._unregisterInstance(); &#125;&#125; unobserveçš„æ‰§è¡Œæµç¨‹ååˆ†ç®€å•ï¼Œé¦–å…ˆæ˜¯ä»this._observationTargetså°†targetåˆ é™¤ã€‚å¦‚æœthis._observationTargetsé˜Ÿåˆ—é•¿åº¦ä¸º0ï¼Œè¡¨ç¤ºå½“å‰çš„observeræ²¡æœ‰ç›‘å¬ä»»ä½•targetï¼Œé‚£ä¹ˆå°±å¯ä»¥å°†å½“å‰observerä»å…¨å±€çš„registryæ•°ç»„ä¸­åˆ é™¤ã€‚å¦‚æœregistryä¹Ÿä¸ºç©ºï¼Œé‚£ä¹ˆå°±å¯ä»¥å¸è½½ç›¸å…³äº‹ä»¶ã€‚è¿™ä¸ªè¿‡ç¨‹ä¸»è¦æ˜¯é€šè¿‡this._unmonitorIntersectionså’Œthis._unregisterInstanceæ–¹æ³•æ¥å®ç°çš„ 1234567891011121314151617181920212223IntersectionObserver.prototype._unmonitorIntersections = function() &#123; if (this._monitoringIntersections) &#123; this._monitoringIntersections = false; clearInterval(this._monitoringInterval); this._monitoringInterval = null; removeEvent(window, 'resize', this._checkForIntersections, true); removeEvent(document, 'scroll', this._checkForIntersections, true); if (this._domObserver) &#123; this._domObserver.disconnect(); this._domObserver = null; &#125; &#125;&#125;IntersectionObserver.prototype._unregisterInstance = function() &#123; var index = registry.indexOf(this); if (index != -1) registry.splice(index, 1);&#125; disconnectdisconnectå¯ä»¥ä¸€æ¬¡æ€§å–æ¶ˆobserverå¯¹æ‰€æœ‰targetçš„ç›‘æµ‹ï¼Œè¿™ä¸ªæ–¹æ³•çš„å®ç°åŒæ ·å¾ˆç®€å• 12345IntersectionObserver.prototype.disconnect = function() &#123; this._observationTargets = []; this._unmonitorIntersections(); this._unregisterInstance();&#125; ä¸Šé¢å°±æ˜¯å¯¹IntersectionObserver polyfillæºç çš„å¤§è‡´åˆ†æã€‚å¦‚æœ‰é”™è¯¯ï¼Œæ¬¢è¿æŒ‡æ­£ã€‚ ä½¿ç”¨IntersectionObserverå®ç°ä¸€ä¸ªç®€å•çš„æ— é™æ»šåŠ¨12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485868788899091929394&lt;!DOCTYPE html&gt;&lt;html lang=\"en\"&gt;&lt;head&gt; &lt;meta charset=\"UTF-8\"&gt; &lt;title&gt;Title&lt;/title&gt; &lt;style&gt; .img-area &#123; width: 500px; height: 320px; margin: 0 auto; &#125; .my-photo &#123; width: 500px; height: 300px; opacity: 0; -webkit-transition: opacity 0.25s ease-in-out; -moz-transition: opacity 0.25s ease-in-out; -o-transition: opacity 0.25s ease-in-out; transition: opacity 0.25s ease-in-out; &#125; &lt;/style&gt;&lt;/head&gt;&lt;body class=\"body\"&gt; &lt;div class=\"container\"&gt; &lt;div class=\"img-area\"&gt;&lt;img class=\"my-photo\" alt=\"loading\" data-src=\"./img/1.png\" /&gt;&lt;/div&gt; &lt;div class=\"img-area\"&gt;&lt;img class=\"my-photo\" alt=\"loading\" data-src=\"./img/1.png\" /&gt;&lt;/div&gt; &lt;div class=\"img-area\"&gt;&lt;img class=\"my-photo\" alt=\"loading\" data-src=\"./img/1.png\" /&gt;&lt;/div&gt; &lt;div class=\"img-area\"&gt;&lt;img class=\"my-photo\" alt=\"loading\" data-src=\"./img/1.png\" /&gt;&lt;/div&gt; &lt;div class=\"img-area\"&gt;&lt;img class=\"my-photo\" alt=\"loading\" data-src=\"./img/1.png\" /&gt;&lt;/div&gt; &lt;div class=\"img-area\"&gt;&lt;img class=\"my-photo\" alt=\"loading\" data-src=\"./img/1.png\" /&gt;&lt;/div&gt; &lt;div class=\"img-area\"&gt;&lt;img class=\"my-photo\" alt=\"loading\" data-src=\"./img/1.png\" /&gt;&lt;/div&gt; &lt;div class=\"img-area\"&gt;&lt;img class=\"my-photo\" alt=\"loading\" data-src=\"./img/1.png\" /&gt;&lt;/div&gt; &lt;div class=\"img-area\"&gt;&lt;img class=\"my-photo\" alt=\"loading\" data-src=\"./img/1.png\" /&gt;&lt;/div&gt; &lt;div class=\"img-area\"&gt;&lt;img class=\"my-photo\" alt=\"loading\" data-src=\"./img/1.png\" /&gt;&lt;/div&gt; &lt;/div&gt; &lt;div class=\"footer\"&gt;&lt;/div&gt; &lt;!-- é¡µå°¾æ ‡å¿—ï¼Œåˆ¤æ–­æ˜¯å¦éœ€è¦æ–°æ·»åŠ èŠ‚ç‚¹åˆ°æ–‡æ¡£æµä¸­ --&gt; &lt;script&gt; function loadItems(io, count = 10) &#123; let container = document.querySelector('.container') const fragment = document.createDocumentFragment(); for (let i = 0; i &lt; count; i++) &#123; const li = document.createElement('div') li.className = 'img-area'; const img = document.createElement('img') img.className = 'my-photo' img.alt = 'loading' img.dataset.src = './img/1.png' li.appendChild(img); fragment.appendChild(li); io.observe(img) &#125; container.appendChild(fragment) &#125; function lazyLoad(imgClassName) &#123; const imgList = Array.from(document.querySelectorAll(imgClassName)); var opts = &#123; root: document, rootMargin: \"500px 0px\" &#125;; const io = new IntersectionObserver(function (ioes) &#123; ioes.forEach(function (ioe) &#123; const el = ioe.target; const cn = el.className; // const intersectionRatio = ioe.intersectionRatio; if (cn === 'footer') &#123; if (!ioe.isIntersecting) return; loadItems(io); console.log('loaded new items'); &#125; else if (ioe.isIntersecting) &#123; //å¯¹äºå›¾ç‰‡èŠ‚ç‚¹ï¼Œå½“å…¶è¿›å…¥èŒƒå›´å†…ï¼Œåˆ™loadå…¶src if (!el.src) &#123; el.src = el.dataset.src; el.onload = function (e) &#123; el.style.opacity = 1 &#125; io.unobserve(el); //åŠ è½½å›¾ç‰‡ååœæ­¢è§‚å¯Ÿè¯¥èŠ‚ç‚¹ &#125; &#125; &#125;) &#125;, opts); imgList.forEach(function (item) &#123; io.observe(item) &#125;); io.observe(document.querySelector(\".footer\")) //è§‚å¯ŸfooterèŠ‚ç‚¹ï¼Œåˆ¤æ–­æ·»åŠ æ–°èŠ‚ç‚¹çš„æ—¶æœº &#125; lazyLoad('.my-photo'); &lt;/script&gt;&lt;/body&gt;&lt;/html&gt; æ•ˆæœå›¾ï¼š","categories":[{"name":"æµè§ˆå™¨","slug":"æµè§ˆå™¨","permalink":"http://blog.kobingo.xyz/categories/%E6%B5%8F%E8%A7%88%E5%99%A8/"}],"tags":[{"name":"IntersectionObserver","slug":"IntersectionObserver","permalink":"http://blog.kobingo.xyz/tags/IntersectionObserver/"}]},{"title":"ç”·å£«æ´—é¢å¥¶","slug":"ç”Ÿæ´»-ç”·å£«æ´—é¢å¥¶æ¨è","date":"2020-09-30T17:37:27.000Z","updated":"2021-01-19T06:41:41.222Z","comments":true,"path":"ç”Ÿæ´»-ç”·å£«æ´—é¢å¥¶æ¨è/","link":"","permalink":"http://blog.kobingo.xyz/%E7%94%9F%E6%B4%BB-%E7%94%B7%E5%A3%AB%E6%B4%97%E9%9D%A2%E5%A5%B6%E6%8E%A8%E8%8D%90/","excerpt":"ä½œä¸ºå…¨è™æ‰‘æ‹¥æœ‰æ´—é¢å¥¶æœ€å¤šçš„ç”·äººï¼Œæˆ‘è¯„ä»·ä¸€æ¬¾æ´—é¢å¥¶æ°¸è¿œä¸æ˜¯å˜´ä¸Šè¯´å¥½ç”¨ä¸å¥½ç”¨é‚£ä¹ˆç®€å•ã€‚å¥½ç”¨è¦æœ‰å¥½ç”¨çš„ç†ç”±ï¼Œä¸å¥½ç”¨ä¹Ÿè¦è¯´å‡ºä¸å¥½ç”¨çš„åœ°æ–¹ã€‚","text":"ä½œä¸ºå…¨è™æ‰‘æ‹¥æœ‰æ´—é¢å¥¶æœ€å¤šçš„ç”·äººï¼Œæˆ‘è¯„ä»·ä¸€æ¬¾æ´—é¢å¥¶æ°¸è¿œä¸æ˜¯å˜´ä¸Šè¯´å¥½ç”¨ä¸å¥½ç”¨é‚£ä¹ˆç®€å•ã€‚å¥½ç”¨è¦æœ‰å¥½ç”¨çš„ç†ç”±ï¼Œä¸å¥½ç”¨ä¹Ÿè¦è¯´å‡ºä¸å¥½ç”¨çš„åœ°æ–¹ã€‚ ä»Šå¤©å°±è™æ‰‘æƒå¨ç”·æ€§æ´—é¢å¥¶æ’è¡Œæ¦œï¼Œæ¥è¯´ä¸€è¯´åˆ°åº•å“ªäº›æ´—é¢å¥¶å€¼å¾—ä¹°ã€‚æˆ‘ä¼šä»æˆåˆ†åˆ†æã€é…¸ç¢±æµ‹è¯•ã€ä½¿ç”¨ä½“éªŒå’Œé€‚ç”¨è‚¤è´¨4ä¸ªæ–¹é¢æ¥å…·ä½“ç›˜ä¸€ç›˜ã€‚ ä¸æ‡‚é€‰æ‹©çš„ï¼Œå¯¹æ¯”è™æ‰‘æ´—é¢å¥¶æ’è¡Œæ¦œï¼Œå‚è€ƒæ–‡ç« ï¼Œå¯¹åº”è‚¤è´¨å’Œé¢„ç®—ï¼Œç›´æ¥å…¥å°±å®Œäº‹äº†ï¼ OKï¼Œä¸Šèœå•ï¼š ä¸ªäººå»ºè®®ï¼Œé€‰æ‹©è´­å…¥äº§å“ï¼Œç›´æ¥é€‰æ‹©å¤©çŒ«å®˜æ–¹åº—ï¼Œä»·æ ¼é€æ˜ï¼Œä¹°çš„æ”¾å¿ƒï¼Œå…¶ä»–å¹³å°å®¹æ˜“å‡ºå‡ï¼Œä»¿è´§ï¼ â—NO.1èŠ™ä¸½èŠ³ä¸ ï¼ˆ150å…ƒ/100gï¼‰1ã€æˆåˆ†åˆ†æã€‘ æˆåˆ†åˆ†æè¿™å—å„¿è®²çš„ä¼šæœ‰ç‚¹å°æ¯ç‡¥ï¼Œä¸å–œæ¬¢çœ‹çš„ç›´æ¥è·³åˆ°ä¸‹ä¸€è¶´ï¼ è¿™å‡ å¹´èŠ™ä¸½èŠ³ä¸åº”è¯¥æ²¡å°‘åœ¨å¹¿å‘Šä¸Šç ¸é’±ï¼Œæ´é¢ç•Œç¬¬ä¸€ç½‘çº¢çš„ç§°å·ä¸æ˜¯ç™½æ¥çš„ã€‚ å®£ä¼ é€‚åˆæ•æ„Ÿè‚Œçš„æ´é¢ï¼Œæ²¡æœ‰åˆºæ¿€æ€§é¦™ç²¾é˜²è…å‰‚ï¼Œé æŸ æª¬é…¸+ä¸äºŒé†‡æ¥é˜²è…ï¼Œè¿˜ç®—é è°±ã€‚ æ¸…æ´æ–¹é¢ä¸»è¦é çš„æ˜¯æ°¨åŸºé…¸è¡¨æ´»-æ¤°æ²¹é…°ç”˜æ°¨é…¸é’¾ï¼Œä¸­ç­‰åä¸Šæ¸…æ´åŠ›ã€‚ç”˜æ²¹æ’ä½ç¬¬ä¸€ä¸ºäº†ä¿æ¹¿ã€‚æ·»åŠ æœ‰ä¸¤ç§è‡´ç—˜é£é™©çš„ä¹³åŒ–å‰‚ï¼Œä»æ¶ˆè´¹è€…åé¦ˆæ¥è¯´ï¼Œæœ‰ä¸€å®šè‡´ç—˜é£é™©ï¼Œæˆ‘è‡ªå·±ç”¨ç€æœŸé—´ï¼Œè¿˜æ²¡é•¿å˜¿å˜¿ã€‚ ä»çƒŸé…°èƒºå¼€å§‹çš„å„ç§æ´»æ€§æˆåˆ†ï¼Œæ·»åŠ é‡å¾ˆä½å¾ˆä½ï¼Œè€Œä¸”ä¸åœ¨è„¸ä¸Šåœç•™ï¼Œä¸è¯´ä¹Ÿç½¢ï¼ 2ã€é…¸ç¢±æµ‹è¯•ã€‘ PHå€¼ä»‹äº6-7ä¹‹é—´ï¼Œè¿˜ç®—è¿‡å…³ï¼æ¯”è¾ƒæ¸©å’Œï¼Œå¯¹è‚Œè‚¤åŸºæœ¬æ²¡ä»€ä¹ˆåˆºæ¿€ã€‚æˆ‘æ¢å­£è¿‡æ•ç”¨éƒ½æ¯«æ— å‹åŠ›ã€‚ 3ã€ä½¿ç”¨ä½“éªŒã€‘ ä¹³è†è´¨åœ°ï¼Œæ´—å‡ºæ¥çš„æ³¡æ³¡è·Ÿæ£‰èŠ±ä¸€æ ·ï¼Œç»†å¯†æ¸©å’Œã€‚å‘³é“æœ‰ç‚¹åƒå®å®èº«ä¸Šçš„å¥¶é¦™å‘³å„¿ï¼Œä¸ªäººèƒ½æ¥å—ï¼Œä½†æ˜¯çœ‹æ·˜å®è¯„ä»·æœ‰äººè¯´åƒå¡‘æ–™â€¦â€¦è®©äººæœ‰ç‚¹æ–¹ã€‚ æ´—çš„å¹²å‡€ï¼Œæ´—å®Œä¸ç»·ï¼Œæ˜¯ä¸€æ¬¾è¿‡æ•æˆ–æ—¥å¸¸ç”¨éƒ½å¯çš„å®‰å…¨æ´—é¢å¥¶ã€‚ 4ã€é€‚ç”¨è‚¤è´¨ã€‘ é™¤äº†å¡”å…‹æ‹‰ç›å¹²å’Œå¤§åº†æ²¹ç”°ï¼ŒåŸºæœ¬æ‰€æœ‰è‚¤è´¨éƒ½é€‚ç”¨ã€‚ä½†æ˜¯å«æœ‰çƒŸé…°èƒºï¼Œé‡æ•çš®è¦é¿é›·ã€‚ â—NO.2 ç®€ç”·å…­è§’ç“¶ ï¼ˆ39.9å…ƒï¼‰ è¿™æ˜¯æˆ‘å¤šæ¬¡å›è´­çš„ï¼Œæ²¹æ€§è‚Œè‚¤ç”¨å®ƒæ²¡é”™äº†ï¼ 1ã€æˆåˆ†åˆ†æã€‘ ä½œä¸ºæ–°å‹æ°¨åŸºé…¸ç²‰æœ«æ´é¢ï¼Œæœ‰ç€æ¯”ä¼ ç»Ÿä¹³çŠ¶æ´—é¢å¥¶æ›´æ˜æ˜¾çš„ä¼˜åŠ¿ï¼Œæº¶è§£é€Ÿåº¦å¿«ï¼Œä¸Šè„¸ä¸é»è…»ï¼Œä¸æ‹…å¿ƒåƒä¹³çŠ¶ä¸€æ ·å¯èƒ½ä¼šæ®‹ç•™ï¼Œç”¨ç€èˆ’å¿ƒæ–¹ä¾¿ å¤‡æ¡ˆæ²¡æœ‰ä»»ä½•ä¹±ä¸ƒå…«ç³Ÿçš„é˜²è…å‰‚é¦™ç²¾æˆåˆ†ï¼Œå·¨å·¨å·¨æ¸©å’Œï¼ç”˜éœ²ç³–é†‡å¤é…èšä¹™äºŒé†‡è´Ÿè´£ä¿æ¹¿ï¼Œæ°¨åŸºé…¸è¡¨æ´»è´Ÿè´£æ¸…æ´ï¼Œç”¨ä¹‹åæ‰çŸ¥é“ä»€ä¹ˆå«çœŸæ­£å«©æ»‘ä¸æ‹”å¹²ï¼Œå­¦æœ¯æ´¾æŠ¤è‚¤å…šæˆ‘çˆ±äº†ã€‚ 2ã€é…¸ç¢±æµ‹è¯•ã€‘ è·Ÿçš®è‚¤è´´åˆçš„å®Œç¾é…¸ç¢±å€¼ï¼Œæ¥è¿‘äº6ï¼Œä¸Šè„¸ä¸€ç‚¹åˆºæ¿€ä¹Ÿæ²¡æœ‰ã€‚ 3ã€ä½¿ç”¨ä½“éªŒã€‘ ç›¸æ¯”äºè†çŠ¶å’Œä¹³çŠ¶ä»¥åŠæ³¡æ³¡æ´é¢ï¼Œç²‰çŠ¶æ´é¢ä½¿ç”¨æ„Ÿä¸Šå‡äº†å¥½å‡ ä¸ªæ¡£æ¬¡ï¼Œç”¨è¿‡çš„äººéƒ½æ‡‚ã€‚ æ¯æ¬¡æ´—è„¸ç”¨ä¸€å°ç›’ï¼Œæºå¸¦æ–¹ä¾¿ï¼Œå¹²å‡€å«ç”Ÿï¼Œå‡ºå·®æ—¥å¸¸éƒ½å¯ã€‚æ¸…æ´æ•ˆæœçš„ç¡®æŒºç¥å¥‡ï¼Œæ¯æ¬¡éƒ½èƒ½æ„Ÿåˆ°é¢—ç²’æ„Ÿçš„ç²‰è´¨èƒ½å¤Ÿæ“å‡ºæ¥ä¸€äº›æ­»çš®å’Œé™„ç€åœ¨æ¯›å­”è¡¨é¢çš„å°ç™½å¤´ï¼Œå¤ªåŠ åˆ†äº†ï¼ æ²¡æœ‰ç”¨è¿‡æ´é¢œç²‰çš„ï¼Œå¢™è£‚å»ºè®®è¯•è¯•ã€‚ 4ã€é€‚ç”¨è‚¤è´¨ã€‘ å°¤å…¶é€‚åˆæ²¹çš®ç”·å£«ï¼ â—NO3. æ—æ°ç±³ç²¹æ´—é¢å¥¶ï¼ˆ29.9-59å…ƒä¹‹é—´ï¼‰ä¸Šæ¦œçš„é‚£ä½ï¼Œè™½ç„¶ä¾¿å®œé‡è¶³ã€‚ä½†æ˜¯å«æœ‰äºŒæ°§åŒ–é’›ï¼Œæ´—å®Œå‡ç™½ã€‚ç›¸å¯¹æ¥è¯´æ—æ°ç±³ç²¹æ´é¢æ³¡æ³¡è¿™ä¸ªäº²å…„å¼Ÿæ›´å€¼å¾—å…¥ã€‚ ä¸å¹è¯´ï¼Œä¹Ÿå°±æ—æ°æ³¡æ³¡èƒ½æ‘Šå¾—ä¸Šä¾¿å®œå¤§ç¢—ï¼Œ30å—é’±è¿™ä¹ˆå¤§ä¸€ç®¡ï¼Œå…¶ä»–ç‰Œå­å°±åˆ«æ¥å‡‘çƒ­é—¹äº†è¡Œä¹ˆï¼Ÿ å› ä¸ºä¾¿å®œï¼Œè¡¨æ´»ç”¨çš„ä¹Ÿæ˜¯æœ€ä¾¿å®œçš„æ¤°æ²¹é…°ç”˜æ°¨é…¸é’¾ï¼Œæ°¨åŸºé…¸ç±»ï¼Œæ¸©å’Œã€‚ æ’ä¸€å¥ï¼Œæ°¨åŸºé…¸æ´—é¢å¥¶çœŸçš„æ˜¯å¾ˆæ™®é€šçš„ä¸€ç§æ´—é¢å¥¶ç±»å‹ï¼Œå·¥ä½œå…³ç³»æ€»æ˜¯çœ‹åˆ°å„ç§æ´—é¢å¥¶ç”¨æ°¨åŸºé…¸ç»™è‡ªå·±æŠ¬èº«ä»·ï¼Œæ²¡å•¥ç¨€ç½•çš„å‘€ã€‚ 2ã€é…¸ç¢±æµ‹è¯•ã€‘ ä½œä¸ºä¸€æ¬¾è€å®æœ¬åˆ†çš„æ¸©å’Œå‹æ´é¢ï¼ŒpHåœ¨6ï½7ä¹‹é—´ï¼Œæ¥è¿‘çš®è‚¤æœ¬èº«çš„pHå€¼ï¼Œæ— è®ºæ²¹çš®å¹²çš®æ•æ„Ÿè‚Œéƒ½å¯ä»¥æ”¾å¿ƒpickã€‚ 3ã€ä½¿ç”¨ä½“éªŒã€‘ æŒ‰å‹å‡ºæ¥å°±æ˜¯æ³¡æ³¡ï¼Œä¸åƒç‚æ¶¦ï¼Œæ—æ°çš„æ³¡æ³¡æŒ¤å‡ºæ¥å•¥æ ·ä¸Šè„¸è¿˜å•¥æ ·ï¼Œä¸ä¼šå˜è™šå˜è–„ã€‚æ´—çš„æ—¶å€™æœ‰æ·¡æ·¡çš„æ·˜ç±³æ°´å‘³ï¼Œæå¾—æˆ‘æ¯æ¬¡æ´—è„¸éƒ½æ„Ÿåˆ°æœ‰ç‚¹é¥¿æ€ä¹ˆè‚¥å››ã€‚æ´—å®Œä¸å¹²ä¸ç´§ç»·ï¼Œä»·æ ¼ä¹Ÿå¾ˆå­¦ç”Ÿå…šï¼Œæ˜¯æˆ‘å¤§å­¦æ—¶æœŸå›è´­æ¬¡æ•°æœ€å¤šçš„æ´—é¢å¥¶ï¼Œè°è®©æˆ‘ç©·å‘¢ï½ï½ 4ã€é€‚ç”¨è‚¤è´¨ã€‘ åªè¦ä¸æ˜¯ä¸¤æåˆ†åŒ–çš„å¤§åº†æ²¹ç”°æˆ–æ’’å“ˆæ‹‰æ²™æ¼ ï¼Œå¤§éƒ¨åˆ†è‚¤è´¨éƒ½å¯ã€‚æœ‰é¦™ç²¾ï¼Œé‡æ•çš„äººä¸è¦ç”¨ã€‚ ç¯‡å¹…æœ‰é™ï¼Œå…¶ä»–æ´—é¢å¥¶å°±æ¥ç®€å•è¯´ä¸€è¯´ã€‚ â—NO4. æ—¥æœ¬UNOæ´—é¢å¥¶ ï¼ˆ55å…ƒï¼‰NUOï¼Ÿæˆ‘å‚»äº†ã€‚ UNOå¾è¯ºç”·å£«æ´—é¢å¥¶æœ‰é»‘ç®¡ã€è“ç®¡ã€ç»¿ç®¡ä¸‰ç§é¢œè‰²ï¼Œè¿™76ä¸ªæ³¡æ³¡å€¼ä¼°è®¡éƒ½æ˜¯æŠ•ç»™é»‘ç®¡çš„ã€‚ æˆåˆ†åˆ†æï¼šçš‚åŸºè¡¨æ´»ï¼Œæ¸…æ´åŠ›å¼ºå¤§ã€‚æ·»åŠ è¾£è–„è·ï¼Œæ´—æ„Ÿæ¸…å‡‰ã€‚ ä½¿ç”¨ä½“éªŒï¼šä¸€ä¸ªå­—çˆ½ï¼Œä¸¤ä¸ªå­—å‡‰çˆ½ã€‚å¤å¤©ç”¨è¿˜å¥½ï¼Œç§‹å†¬çœŸçš„æœ‰ç§æŠ¹é£æ²¹ç²¾çš„æ„Ÿè§‰ã€‚æ´—å®Œç•¥ç´§ç»·ï¼Œéœ€è¦åŠæ—¶è¡¥æ°´ã€‚ é€‚ç”¨è‚¤è´¨ï¼šæ²¹æ€§è€å—è‚Œã€‚ â—NO5. ç¢§æ¬§æ³‰æ´—é¢å¥¶è¯´å®è¯ï¼Œç¢§æ¬§æ³‰æ’è¡Œç¬¬äº”æœ‰ç‚¹äºï¼Œå¯èƒ½ä»·æ ¼æœ‰ç‚¹å°è´µï¼Œç”¨çš„äººä¸å¤šã€‚æ‰€ä»¥ç»™ä»–æŠ•ç¥¨çš„äººä¹Ÿä¸å¤šã€‚ æˆåˆ†åˆ†æï¼šåŒä¸ºçš‚åŸºè¡¨æ´»ï¼Œä½†æ˜¯æ•´ä½“æ¯”UNOè¦æ¸©å’Œå¾—å¤šï¼Œæ·»åŠ äº†å¾ˆå¤šæ´»æ€§æˆåˆ†ï¼Œè´µæœ‰è´µçš„ç†ç”±ã€‚ ä½¿ç”¨ä½“éªŒï¼šè°ƒé¦™é«˜çº§ï¼Œæ·¡æ·¡çš„èŒ¶é¦™ï¼Œæ¸…æ´åŠ›ã€æ¸©å’Œæ€§ä¹Ÿå¹³è¡¡å¾—å¾ˆå¥½ï¼Œæ´—å®Œå®Œå…¨ä¸ä¼šæ„Ÿåˆ°æ‹”å¹²ã€‚ é€‚ç”¨è‚¤è´¨ï¼šä¸­æ€§-æ²¹æ€§è€å—è‚Œã€‚ â—NO.6 Elta MDï¼ˆ80-188å…ƒï¼‰è¿™æ¬¾æ´—é¢å¥¶JRç”¨å¾—ä¸å¤šï¼Œä½†åœ¨å°çº¢ä¹¦ä¸Šå¯æ˜¯ç«çš„ä¸€å¡Œç³Šæ¶‚ã€‚æ˜¯ç¾å›½å„å¤§çš®è‚¤ç§‘åŒ»ç”Ÿä¹Ÿä¼šæ¨èçš„æ¸©å’Œå‹æ´é¢ã€‚ æˆåˆ†åˆ†æï¼šå…¸å‹çš„æ°¨åŸºé…¸æ´é¢ï¼ŒåŠ å…¥äº†æ²¸ç‚¹å¾ˆä½çš„é†šç±»ï¼Œä¸Šè„¸30ç§’åå¯è‡ªåŠ¨èµ·æ³¡ã€‚ ä½¿ç”¨ä½“éªŒï¼šæˆä¹Ÿè§ä½•ï¼Œè´¥ä¹Ÿè§ä½•ã€‚è™½ç„¶è¿™æ¬¾æ´—é¢å¥¶çš„äº®ç‚¹æ˜¯å¯ä»¥è‡ªåŠ¨å‘æ³¡ã€‚ä½†éº»çƒ¦çš„æ˜¯æ¯æ¬¡ç”¨å®Œéƒ½è¦æ—‹è½¬æ³µå¤´é”ä½æ´—é¢å¥¶ï¼Œä¸ç„¶å®ƒä¼šåæ³¡æ³¡åˆ°ä½ æ€€ç–‘äººç”Ÿã€‚ é€‚ç”¨è‚¤è´¨ï¼šå…¨è‚¤è´¨é€‚ç”¨ã€‚ â—NO.7ç†è‚¤æ³‰æ´—é¢å¥¶ç›¸ä¿¡å¾ˆå¤šäººéƒ½æ˜¯ä»ç†è‚¤æ³‰é›…æ¼¾è¿™ç±»å¤–å›½ç‰Œå­å¼€å§‹æ¥è§¦è¯å¦†çš„ã€‚è¿™æ¬¾ç†è‚¤æ³‰ç‰¹å®‰æ´é¢ï¼Œä»åå­—å°±èƒ½çœ‹å‡ºæ¥éå¸¸é€‚åˆæ•æ„Ÿè‚Œã€‚ æˆåˆ†åˆ†æï¼šå®£ä¼ é€‚åˆæ•æ„Ÿè‚Œçš„æ´é¢å´å«æœ‰5ç§çš‚åŸºè¡¨æ´»æˆåˆ†ï¼Œæˆ‘æœ‰ç‚¹æ–¹ã€‚æ„Ÿè§‰è¿™ä¸ªæ´é¢æ›´é€‚åˆæ²¹çš®æ‰å¯¹ã€‚ é€‚ç”¨ä½“éªŒï¼šæ¸…æ´åŠ›å¥½ï¼Œæ— é¦™ç²¾é˜²è…å‰‚ï¼Œè™½ç„¶æ˜¯çš‚åŸºè¡¨æ´»ï¼Œä½†è¿˜ç®—æ¸©å’Œã€‚ é€‚ç”¨è‚¤è´¨ï¼šæ²¹çš®ã€æ²¹çš®æ•æ„Ÿè‚Œ â—NO.8æ¬§è±é›…ç«å±±æ³¥åœ¨JRå¿ƒä¸­æ˜¯æ°¸è¿œçš„ç¥å’Œæ°¸è¿œçš„shiã€‚ æˆåˆ†åˆ†æï¼šå…¸å‹çš„çš‚åŸºè¡¨æ´»ï¼Œå«æœ‰æ°´æ¨é…¸ï¼Œçº¢è‰²è´¨åœ°æ¥è‡ªäºé«˜å²­åœŸã€‚ ä½¿ç”¨ä½“éªŒï¼šæ‰€è°“ç”·æ€§å»æ²¹ç³»åˆ—ï¼Œå°±æ˜¯æŒ‚æ‰ä½ è„¸ä¸Šçš„æ²¹ï¼Œåˆ®æ²¹æ•ˆæœä¸æ˜¯ç›–çš„ï¼Œç”¨å®Œç»·çš„æ„Ÿè§‰è‡ªå·±åƒå¹²å°¸ã€‚æ²¹çš®ç¬é—´å˜å¹²çš®ã€‚å¯¹ä»˜ç›´ç”·å°±æ˜¯è¦ç‹ ã€‚ä½†æ˜¯è¿™ç§åˆ®æ²¹çš„æ–¹å¼åªä¼šåŠ é‡ç—˜ç—˜ï¼Œåˆºæ¿€ç—˜ç—˜ï¼Œæä¸å¥½å°±ä¼šå¼•èµ·å¤–æ²¹å†…å¹²çš„æƒ…å†µå‡ºç°ã€‚ é€‚ç”¨è‚¤è´¨ï¼šæ²¹çš®ï¼Œä¸æ¨èã€‚ â—NO.9é›…è¯—å…°é»›ç™½é‡‘æ´—é¢å¥¶é›…è¯—å…°é»›ç™½é‡‘æ´—é¢å¥¶å·ç§°å¯ä»¥æ¸©å’Œå¸å¦†ã€‚è¿™æ¬¾åˆ†ä¸ºæœ‰æ³¡æ¿å’Œæ— æ³¡æ¿ã€‚çœ‹åŒ…è£…ï¼Œæœ‰æ³¡foamï¼Œæ— æ³¡creme. æˆåˆ†åˆ†æï¼šæ°¨åŸºé…¸ç³»è´µå¦‡æ´—é¢å¥¶ã€‚å¤§ç‰Œä»¬å¯èƒ½æ˜¯å•†é‡å¥½çš„ï¼Œåªè¦å‡ºæ°¨åŸºé…¸æ´—é¢å¥¶å°±è¦å¯ç€åŠ²å„¿çš„æ·»åŠ æ´»æ€§æˆåˆ†ï¼Œä¸ç®¡è¿™äº›æ´»æ€§æˆåˆ†æœ‰æ²¡æœ‰ç”¨ï¼ŒåŠ ä¸Šå»å°±èƒ½å®£ä¼ å–é«˜ä»·ã€‚ é€‚ç”¨ä½“éªŒï¼šè´µå¦‡æ´—é¢å¥¶ä½¿ç”¨æ„Ÿå°±æ˜¯å¥½å‘€ï¼Œè´¨åœ°ã€æ³¡æ²«ã€è°ƒé¦™æ²¡å¾—è¯´ã€‚ä½†æ˜¯è¿™äº›æ´»æ€§æˆåˆ†æ²¡åµç”¨ï¼Œè¦çŸ¥é“æ´—é¢å¥¶åªåœ¨è„¸ä¸Šåœç•™å‡ åç§’é’Ÿï¼Œè¿™ä¹ˆçŸ­çš„æ—¶é—´å†…ï¼Œæ´»æ€§æˆåˆ†æ˜¯ä¸å¯èƒ½è¢«å¸æ”¶çš„ã€‚ é€‚ç”¨è‚¤è´¨ï¼šå…¨è‚¤è´¨é€‚ç”¨ â—NO.10ä¸å¡”èŠ™æ´—é¢å¥¶æ²¡æœ‰æƒ³åˆ°ä¸å¡”èŠ™è¿™ç§æ¯«æ— æ¸…æ´åŠ›çš„æ´—é¢å¥¶ï¼Œè¿˜èƒ½åœ¨JRå¿ƒä¸­å æœ‰ä¸€å¸­ä¹‹åœ°ã€‚ æˆåˆ†åˆ†æï¼šå¤‡æ¡ˆæˆåˆ†ä¸€å…±8ç§ã€‚æ¸…æ´å‰‚ä¸€ç§ï¼Œé˜²è…å‰‚ä¸‰ç§ï¼Œç¥äº†ã€‚æ¸…æ´å‰‚è™½ç„¶æ˜¯æˆ‘ä»¬å¸¸è¯´çš„åˆºæ¿€æ€§è¾ƒå¤§çš„SLSï¼Œä½†æ˜¯æ·»åŠ é‡è¾ƒä½ï¼Œå¯¹çš®è‚¤é€ ä¸æˆä»€ä¹ˆä¼¤å®³ã€‚ ä½¿ç”¨ä½“éªŒï¼šä¸ªäººæ²¹æ€§çš®è‚¤ï¼Œå¯¹è¿™ç§å‡ ä¹æ— æ³¡æ— æ¸…æ´åŠ›çš„æ´—é¢å¥¶ä¸æ„Ÿå†’ï¼Œæ´—å®Œæ„Ÿè§‰æ»‘æ»‘çš„ï¼Œä¸€ç‚¹éƒ½æ²¡æ´—å¹²å‡€ã€‚å¯èƒ½å¹²çš®ä¼šæ¯”è¾ƒå–œæ¬¢å®ƒçš„æ¸©å’Œå§ã€‚ é€‚ç”¨è‚¤è´¨ï¼šå¹²çš® Source","categories":[],"tags":[{"name":"ç”Ÿæ´»","slug":"ç”Ÿæ´»","permalink":"http://blog.kobingo.xyz/tags/%E7%94%9F%E6%B4%BB/"}]},{"title":"npmä¾èµ–ç®¡ç†ä¸­å®¹æ˜“è¢«å¿½ç•¥ç»†èŠ‚","slug":"node-2020-09-15-npmä¾èµ–ç®¡ç†ä¸­å®¹æ˜“è¢«å¿½ç•¥ç»†èŠ‚","date":"2020-09-15T23:38:27.000Z","updated":"2021-01-19T06:41:41.222Z","comments":true,"path":"node-2020-09-15-npmä¾èµ–ç®¡ç†ä¸­å®¹æ˜“è¢«å¿½ç•¥ç»†èŠ‚/","link":"","permalink":"http://blog.kobingo.xyz/node-2020-09-15-npm%E4%BE%9D%E8%B5%96%E7%AE%A1%E7%90%86%E4%B8%AD%E5%AE%B9%E6%98%93%E8%A2%AB%E5%BF%BD%E7%95%A5%E7%BB%86%E8%8A%82/","excerpt":"æèµ· npmï¼Œå¤§å®¶ç¬¬ä¸€ä¸ªæƒ³åˆ°çš„åº”è¯¥å°±æ˜¯ npm install äº†ï¼Œä½†æ˜¯ npm install ä¹‹åç”Ÿæˆçš„ node_modules å¤§å®¶æœ‰è§‚å¯Ÿè¿‡å—ï¼Ÿpackage-lock.json æ–‡ä»¶çš„ä½œç”¨å¤§å®¶çŸ¥é“å—ï¼Ÿé™¤äº† dependencies å’Œ devDependenciesï¼Œå…¶ä»–çš„ä¾èµ–æœ‰ä»€ä¹ˆä½œç”¨å‘¢ï¼Ÿæ¥ä¸‹æ¥ï¼Œæœ¬æ–‡å°†é’ˆå¯¹ npm ä¸­çš„ä½ å¯èƒ½å¿½ç•¥çš„ç»†èŠ‚å’Œå¤§å®¶åˆ†äº«ä¸€äº›ç»éªŒ ã€‚","text":"æèµ· npmï¼Œå¤§å®¶ç¬¬ä¸€ä¸ªæƒ³åˆ°çš„åº”è¯¥å°±æ˜¯ npm install äº†ï¼Œä½†æ˜¯ npm install ä¹‹åç”Ÿæˆçš„ node_modules å¤§å®¶æœ‰è§‚å¯Ÿè¿‡å—ï¼Ÿpackage-lock.json æ–‡ä»¶çš„ä½œç”¨å¤§å®¶çŸ¥é“å—ï¼Ÿé™¤äº† dependencies å’Œ devDependenciesï¼Œå…¶ä»–çš„ä¾èµ–æœ‰ä»€ä¹ˆä½œç”¨å‘¢ï¼Ÿæ¥ä¸‹æ¥ï¼Œæœ¬æ–‡å°†é’ˆå¯¹ npm ä¸­çš„ä½ å¯èƒ½å¿½ç•¥çš„ç»†èŠ‚å’Œå¤§å®¶åˆ†äº«ä¸€äº›ç»éªŒ ã€‚ npm å®‰è£…æœºåˆ¶A å’Œ B åŒæ—¶ä¾èµ– Cï¼ŒC è¿™ä¸ªåŒ…ä¼šè¢«å®‰è£…åœ¨å“ªé‡Œå‘¢ï¼ŸC çš„ç‰ˆæœ¬ç›¸åŒå’Œç‰ˆæœ¬ä¸åŒæ—¶å®‰è£…ä¼šæœ‰ä»€ä¹ˆå·®å¼‚å‘¢ï¼Ÿpackage.json ä¸­åŒ…çš„å‰åé¡ºåºå¯¹äºå®‰è£…æ—¶æœ‰ä»€ä¹ˆå½±å“å—ï¼Ÿè¿™äº›é—®é¢˜å¹³æ—¶å¤§å®¶å¯èƒ½æ²¡æœ‰æ³¨æ„è¿‡ï¼Œä»Šå¤©æˆ‘ä»¬å°±æ¥ä¸€èµ·ç ”ç©¶ä¸€ä¸‹å§ã€‚ A å’Œ B åŒæ—¶ä¾èµ– Cï¼Œè¿™ä¸ªåŒ…ä¼šè¢«å®‰è£…åœ¨å“ªé‡Œå‘¢ï¼Ÿå‡å¦‚æœ‰ A å’Œ B ä¸¤ä¸ªåŒ…ï¼Œä¸¤ä¸ªåŒ…éƒ½ä¾èµ– C è¿™ä¸ªåŒ…ï¼Œnpm 2 ä¼šä¾æ¬¡é€’å½’å®‰è£… A å’Œ B ä¸¤ä¸ªåŒ…åŠå…¶å­ä¾èµ–åŒ…åˆ° node_modules ä¸­ã€‚\bæ‰§è¡Œå®Œæ¯•åï¼Œæˆ‘ä»¬ä¼šçœ‹åˆ° ./node_modulesè¿™å±‚ç›®å½•åªå«æœ‰è¿™ä¸¤ä¸ªå­ç›®å½•ï¼š node_modules/â”œâ”€â”¬ Aâ”‚ â”œâ”€â”€ Câ”œâ”€â”¬ Bâ”‚ â””â”€â”€ C å¦‚æœä½¿ç”¨ npm 3 æ¥è¿›è¡Œå®‰è£…çš„è¯ï¼Œ./node_modules ä¸‹çš„ç›®å½•å°†ä¼šåŒ…å«ä¸‰ä¸ªå­ç›®å½•ï¼š node_modules/â”œâ”€â”¬ Aâ”œâ”€â”¬ Bâ”œâ”€â”¬ C ä¸ºä»€ä¹ˆä¼šå‡ºç°è¿™æ ·çš„åŒºåˆ«å‘¢ï¼Ÿè¿™å°±è¦ä» npm çš„å·¥ä½œæ–¹å¼è¯´èµ·äº†ï¼š npm 2 å’Œ npm 3 æ¨¡å—å®‰è£…æœºåˆ¶çš„å·®å¼‚è™½ç„¶ç›®å‰æœ€æ–°çš„ npm ç‰ˆæœ¬æ˜¯ npm 6ï¼Œä½† npm 2 åˆ° npm 3 çš„ç‰ˆæœ¬å˜æ›´ä¸­å®ç°äº†ç›®å½•æ‰“å¹³ï¼Œä¸å…¶ä»–ç‰ˆæœ¬ç›¸æ¯”å·®åˆ«è¾ƒå¤§ã€‚å› æ­¤ï¼Œè®©æˆ‘ä»¬å…·ä½“çœ‹ä¸‹è¿™ä¸¤ä¸ªç‰ˆæœ¬çš„å·®å¼‚â€‹ã€‚ npm 2 åœ¨å®‰è£…ä¾èµ–åŒ…æ—¶ï¼Œé‡‡ç”¨\bç®€å•çš„é€’å½’å®‰è£…æ–¹æ³•ã€‚æ‰§è¡Œ npm install åï¼Œnpm æ ¹æ® dependencies å’Œ devDependencies å±æ€§ä¸­æŒ‡å®šçš„åŒ…æ¥ç¡®å®šç¬¬ä¸€å±‚ä¾èµ–ï¼Œnpm 2 ä¼šæ ¹æ®ç¬¬ä¸€å±‚ä¾èµ–çš„å­ä¾èµ–ï¼Œé€’å½’å®‰è£…å„ä¸ªåŒ…åˆ°å­ä¾èµ–çš„ node_modules ä¸­ï¼Œç›´åˆ°å­ä¾èµ–ä¸å†ä¾èµ–å…¶ä»–æ¨¡å—ã€‚\bæ‰§è¡Œå®Œæ¯•åï¼Œæˆ‘ä»¬ä¼šçœ‹åˆ° ./node_modules è¿™å±‚ç›®å½•ä¸­åŒ…å«æœ‰æˆ‘ä»¬ package.json æ–‡ä»¶ä¸­æ‰€æœ‰çš„ä¾èµ–åŒ…ï¼Œè€Œè¿™äº›ä¾èµ–åŒ…çš„å­ä¾èµ–åŒ…éƒ½å®‰è£…åœ¨äº†è‡ªå·±çš„ node_modules ä¸­ ï¼Œå½¢æˆç±»ä¼¼äºä¸‹é¢çš„ä¾èµ–æ ‘ï¼š è¿™æ ·çš„ç›®å½•æœ‰è¾ƒä¸ºæ˜æ˜¾çš„å¥½å¤„ï¼š å±‚çº§ç»“æ„éå¸¸æ˜æ˜¾ï¼Œå¯ä»¥æ¸…æ¥šçš„åœ¨ç¬¬ä¸€å±‚çš„ node_modules ä¸­çœ‹åˆ°æˆ‘ä»¬å®‰è£…çš„æ‰€æœ‰åŒ…çš„å­ç›®å½•ï¼› åœ¨å·²çŸ¥è‡ªå·±æ‰€éœ€åŒ…çš„åå­—ä»¥åŠç‰ˆæœ¬å·æ—¶ï¼Œå¯ä»¥å¤åˆ¶ç²˜è´´ç›¸åº”çš„æ–‡ä»¶åˆ° node_modules ä¸­ï¼Œç„¶åæ‰‹åŠ¨æ›´æ”¹ package.json ä¸­çš„é…ç½®ï¼› å¦‚æœæƒ³è¦åˆ é™¤æŸä¸ªåŒ…ï¼Œåªéœ€è¦ç®€å•çš„åˆ é™¤ package.json æ–‡ä»¶ä¸­ç›¸åº”çš„æŸä¸€è¡Œï¼Œç„¶ååˆ é™¤ node_modules ä¸­è¯¥åŒ…çš„ç›®å½•ï¼› ä½†æ˜¯è¿™æ ·çš„å±‚çº§ç»“æ„ä¹Ÿæœ‰è¾ƒä¸ºæ˜æ˜¾çš„ç¼ºé™·ï¼Œå½“æˆ‘çš„ Aï¼ŒBï¼ŒC ä¸‰ä¸ªåŒ…ä¸­æœ‰ç›¸åŒçš„ä¾èµ– D æ—¶ï¼Œæ‰§è¡Œ npm install åï¼ŒD ä¼šè¢«é‡å¤ä¸‹è½½ä¸‰æ¬¡ï¼Œè€Œéšç€æˆ‘ä»¬çš„é¡¹ç›®è¶Šæ¥è¶Šå¤æ‚ï¼Œnode_modules ä¸­çš„ä¾èµ–æ ‘ä¹Ÿä¼šè¶Šæ¥è¶Šå¤æ‚ï¼Œåƒ D è¿™æ ·çš„åŒ…ä¹Ÿä¼šè¶Šæ¥è¶Šå¤šï¼Œé€ æˆäº†å¤§é‡çš„å†—ä½™ï¼›åœ¨ windows ç³»ç»Ÿä¸­ï¼Œç”šè‡³ä¼šå› ä¸ºç›®å½•çš„å±‚çº§å¤ªæ·±å¯¼è‡´æ–‡ä»¶çš„è·¯å¾„è¿‡é•¿ï¼Œè§¦å‘æ–‡ä»¶è·¯å¾„ä¸èƒ½è¶…è¿‡ 280 ä¸ªå­—ç¬¦çš„é”™è¯¯ï¼› â€‹ ä¸ºäº†è§£å†³ä»¥ä¸Šé—®é¢˜ï¼Œnpm 3 çš„ node_modules ç›®å½•æ”¹æˆäº†æ›´ä¸ºæ‰å¹³çŠ¶çš„å±‚çº§ç»“æ„ï¼Œå°½é‡æŠŠä¾èµ–ä»¥åŠä¾èµ–çš„ä¾èµ–å¹³é“ºåœ¨ node_modules æ–‡ä»¶å¤¹ä¸‹å…±äº«ä½¿ç”¨ã€‚ npm 3 å¯¹äºåŒä¸€ä¾èµ–çš„ä¸åŒç‰ˆæœ¬ä¼šæ€ä¹ˆå¤„ç†å‘¢ï¼Ÿnpm 3 ä¼šéå†æ‰€æœ‰çš„èŠ‚ç‚¹ï¼Œé€ä¸ªå°†æ¨¡å—æ”¾åœ¨ node_modules çš„ç¬¬ä¸€å±‚ï¼Œå½“å‘ç°æœ‰é‡å¤æ¨¡å—æ—¶ï¼Œåˆ™ä¸¢å¼ƒï¼Œ å¦‚æœé‡åˆ°æŸäº›ä¾èµ–ç‰ˆæœ¬ä¸å…¼å®¹çš„é—®é¢˜ï¼Œåˆ™ç»§ç»­é‡‡ç”¨ npm 2 çš„å¤„ç†æ–¹å¼ï¼Œå‰é¢çš„æ”¾åœ¨ node_modules ç›®å½•ä¸­ï¼Œåé¢çš„æ”¾åœ¨ä¾èµ–æ ‘ä¸­ã€‚ä¸¾ä¸ªä¾‹å­ï¼š Aï¼ŒBï¼Œä¾èµ– D(v 0.0.1)ï¼ŒC ä¾èµ– D(v 0.0.2): ä½†æ˜¯ npm 3 ä¼šå¸¦æ¥ä¸€ä¸ªæ–°çš„é—®é¢˜ï¼šç”±äºåœ¨æ‰§è¡Œ npm install çš„æ—¶å€™ï¼ŒæŒ‰ç…§ package.jsoné‡Œä¾èµ–çš„é¡ºåºä¾æ¬¡è§£æï¼Œä¸Šå›¾å¦‚æœ C çš„é¡ºåºåœ¨ Aï¼ŒB çš„å‰è¾¹ï¼Œnode_modules æ ‘åˆ™ä¼šæ”¹å˜ï¼Œä¼šå‡ºç°ä¸‹è¾¹çš„æƒ…å†µï¼š ç”±æ­¤å¯è§ï¼Œnpm 3 å¹¶æœªå®Œå…¨è§£å†³å†—ä½™çš„é—®é¢˜ï¼Œç”šè‡³è¿˜ä¼šå¸¦æ¥æ–°çš„é—®é¢˜ã€‚ ä¸ºä»€ä¹ˆä¼šå‡ºç° package-lock.json å‘¢ï¼Ÿä¸ºä»€ä¹ˆä¼šæœ‰ package-lock.json æ–‡ä»¶å‘¢ï¼Ÿè¿™ä¸ªæˆ‘ä»¬å°±è¦å…ˆä» package.json æ–‡ä»¶è¯´èµ·äº†ã€‚ package.json çš„ä¸è¶³ä¹‹å¤„npm install æ‰§è¡Œåï¼Œä¼šç”Ÿæˆä¸€ä¸ª node_modules æ ‘ï¼Œåœ¨ç†æƒ³æƒ…å†µä¸‹ï¼Œ å¸Œæœ›å¯¹äºåŒä¸€ä¸ª package.json æ€»æ˜¯ç”Ÿæˆå®Œå…¨ç›¸åŒ node_modules æ ‘ã€‚åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œç¡®å®å¦‚æ­¤ã€‚ä½†åœ¨å¤šæ•°æƒ…å†µä¸‹ï¼Œnpm æ— æ³•åšåˆ°è¿™ä¸€ç‚¹ã€‚æœ‰ä»¥ä¸‹ä¸¤ä¸ªåŸå› ï¼š 1ï¼‰æŸäº›ä¾èµ–é¡¹è‡ªä¸Šæ¬¡å®‰è£…ä»¥æ¥ï¼Œå¯èƒ½å·²å‘å¸ƒäº†æ–°ç‰ˆæœ¬ ã€‚æ¯”å¦‚ï¼šA åŒ…åœ¨å›¢é˜Ÿä¸­ç¬¬ä¸€ä¸ªäººå®‰è£…çš„æ—¶å€™æ˜¯ 1.0.5 ç‰ˆæœ¬ï¼Œpackage.json ä¸­çš„é…ç½®é¡¹ä¸º A: â€˜^1.0.5â€™ ï¼›å›¢é˜Ÿä¸­ç¬¬äºŒä¸ªäººæŠŠä»£ç æ‹‰ä¸‹æ¥çš„æ—¶å€™ï¼ŒA åŒ…çš„ç‰ˆæœ¬å·²ç»å‡çº§æˆäº† 1.0.8ï¼Œæ ¹æ® package.json ä¸­çš„ semver-range version è§„èŒƒï¼Œæ­¤æ—¶ç¬¬äºŒä¸ªäºº npm install å A çš„ç‰ˆæœ¬ä¸º 1.0.8ï¼› å¯èƒ½ä¼šé€ æˆå› ä¸ºä¾èµ–ç‰ˆæœ¬ä¸åŒè€Œå¯¼è‡´çš„ bugï¼› 2ï¼‰é’ˆå¯¹ 1ï¼‰ä¸­çš„é—®é¢˜ï¼Œå¯èƒ½æœ‰çš„å°ä¼™ä¼´ä¼šæƒ³ï¼ŒæŠŠ A çš„ç‰ˆæœ¬å·å›ºå®šä¸º A: â€˜1.0.5â€™ ä¸å°±å¯ä»¥äº†å—ï¼Ÿä½†æ˜¯è¿™æ ·çš„åšæ³•å…¶å®å¹¶æ²¡æœ‰è§£å†³é—®é¢˜ï¼Œ æ¯”å¦‚ A çš„æŸä¸ªä¾èµ–åœ¨ç¬¬ä¸€ä¸ªäººä¸‹è½½çš„æ—¶å€™æ˜¯ 2.1.3 ç‰ˆæœ¬ï¼Œä½†æ˜¯ç¬¬äºŒä¸ªäººä¸‹è½½çš„æ—¶å€™å·²ç»å‡çº§åˆ°äº† 2.2.5 ç‰ˆæœ¬ï¼Œæ­¤æ—¶ç”Ÿæˆçš„ node_modules æ ‘ä¾æ—§ä¸å®Œå…¨ç›¸åŒ ï¼Œå›ºå®šç‰ˆæœ¬åªæ˜¯å›ºå®šæ¥è‡ªèº«çš„ç‰ˆæœ¬ï¼Œä¾èµ–çš„ç‰ˆæœ¬æ— æ³•å›ºå®šã€‚ é’ˆå¯¹ package.json ä¸è¶³çš„è§£å†³æ–¹æ³•ä¸ºäº†è§£å†³ä¸Šè¿°é—®é¢˜ä»¥åŠ npm 3 çš„é—®é¢˜ï¼Œåœ¨ npm 5.0 ç‰ˆæœ¬åï¼Œnpm install åéƒ½ä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ª package-lock.json æ–‡ä»¶ ï¼Œå½“åŒ…ä¸­æœ‰ package-lock.json æ–‡ä»¶æ—¶ï¼Œnpm install æ‰§è¡Œæ—¶ï¼Œå¦‚æœ package.json å’Œ package-lock.json ä¸­çš„ç‰ˆæœ¬å…¼å®¹ï¼Œä¼šæ ¹æ® package-lock.json ä¸­çš„ç‰ˆæœ¬ä¸‹è½½ï¼›å¦‚æœä¸å…¼å®¹ï¼Œå°†ä¼šæ ¹æ® package.json çš„ç‰ˆæœ¬ï¼Œæ›´æ–° package-lock.json ä¸­çš„ç‰ˆæœ¬ï¼Œå·²ä¿è¯ package-lock.json ä¸­çš„ç‰ˆæœ¬å…¼å®¹ package.jsonã€‚ package-lock.json æ–‡ä»¶çš„ç»“æ„package-lock.json æ–‡ä»¶ä¸­çš„ nameã€version ä¸ package.json ä¸­çš„ nameã€version ä¸€æ ·ï¼Œæè¿°äº†å½“å‰åŒ…çš„åå­—å’Œç‰ˆæœ¬ï¼Œdependencies æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œè¯¥å¯¹è±¡å’Œ node_modules ä¸­çš„åŒ…ç»“æ„ä¸€ä¸€å¯¹åº”ï¼Œå¯¹è±¡çš„ key ä¸ºåŒ…çš„åç§°ï¼Œå€¼ä¸ºåŒ…çš„ä¸€äº›æè¿°ä¿¡æ¯ï¼Œ æ ¹æ® package-lock-jsonå®˜æ–¹æ–‡æ¡£ï¼Œä¸»è¦çš„ç»“æ„å¦‚ä¸‹ï¼š version ï¼šåŒ…ç‰ˆæœ¬ï¼Œå³è¿™ä¸ªåŒ…å½“å‰å®‰è£…åœ¨ node_modules ä¸­çš„ç‰ˆæœ¬ resolved ï¼šåŒ…å…·ä½“çš„å®‰è£…æ¥æº integrity ï¼šåŒ… hash å€¼ï¼ŒéªŒè¯å·²å®‰è£…çš„è½¯ä»¶åŒ…æ˜¯å¦è¢«æ”¹åŠ¨è¿‡ã€æ˜¯å¦å·²å¤±æ•ˆ requires ï¼šå¯¹åº”å­ä¾èµ–çš„ä¾èµ–ï¼Œä¸å­ä¾èµ–çš„ package.json ä¸­ dependencies çš„ä¾èµ–é¡¹ç›¸åŒ dependencies ï¼šç»“æ„å’Œå¤–å±‚çš„ dependencies ç»“æ„ç›¸åŒï¼Œå­˜å‚¨å®‰è£…åœ¨å­ä¾èµ– node_modules ä¸­çš„ä¾èµ–åŒ… éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¹¶ä¸æ˜¯æ‰€æœ‰çš„å­ä¾èµ–éƒ½æœ‰ dependencies å±æ€§ï¼Œåªæœ‰å­ä¾èµ–çš„ä¾èµ–å’Œå½“å‰å·²å®‰è£…åœ¨æ ¹ç›®å½•çš„ node_modules ä¸­çš„ä¾èµ–å†²çªä¹‹åï¼Œæ‰ä¼šæœ‰è¿™ä¸ªå±æ€§ã€‚ package-lock.json æ–‡ä»¶çš„ä½œç”¨ åœ¨å›¢é˜Ÿå¼€å‘ä¸­ï¼Œç¡®ä¿æ¯ä¸ªå›¢é˜Ÿæˆå‘˜å®‰è£…çš„ä¾èµ–ç‰ˆæœ¬æ˜¯ä¸€è‡´çš„ï¼Œç¡®å®šä¸€æ£µå”¯ä¸€çš„ node_modules æ ‘ï¼› node_modules ç›®å½•æœ¬èº«æ˜¯ä¸ä¼šè¢«æäº¤åˆ°ä»£ç åº“çš„ï¼Œä½†æ˜¯ package-lock.json å¯ä»¥æäº¤åˆ°ä»£ç åº“ï¼Œå¦‚æœå¼€å‘äººå‘˜æƒ³è¦å›æº¯åˆ°æŸä¸€å¤©çš„ç›®å½•çŠ¶æ€ï¼Œåªéœ€è¦æŠŠ package.json å’Œ package-lock.json è¿™ä¸¤ä¸ªæ–‡ä»¶å›é€€åˆ°é‚£ä¸€å¤©å³å¯ ã€‚ ç”±äº package-lock.json å’Œ node_modules ä¸­çš„ä¾èµ–åµŒå¥—å®Œå…¨ä¸€è‡´ï¼Œå¯ä»¥æ›´åŠ æ¸…æ¥šçš„äº†è§£æ ‘çš„ç»“æ„åŠå…¶å˜åŒ–ã€‚ åœ¨å®‰è£…æ—¶ï¼Œnpm ä¼šæ¯”è¾ƒ node_modules å·²æœ‰çš„åŒ…ï¼Œå’Œ package-lock.json è¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æœé‡å¤çš„è¯ï¼Œå°±è·³è¿‡å®‰è£… ï¼Œä»è€Œä¼˜åŒ–äº†å®‰è£…çš„è¿‡ç¨‹ã€‚ ä¾èµ–çš„åŒºåˆ«ä¸ä½¿ç”¨åœºæ™¯npm ç›®å‰æ”¯æŒä»¥ä¸‹å‡ ç±»ä¾èµ–åŒ…ç®¡ç†åŒ…æ‹¬ dependencies devDependencies optionalDependencies å¯é€‰æ‹©çš„ä¾èµ–åŒ… peerDependencies åŒç­‰ä¾èµ– bundledDependencies æ†ç»‘ä¾èµ–åŒ… ä¸‹é¢æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹è¿™å‡ ç§ä¾èµ–çš„åŒºåˆ«ä»¥åŠå„è‡ªçš„åº”ç”¨åœºæ™¯ï¼š dependenciesdependencies æ˜¯æ— è®ºåœ¨å¼€å‘ç¯å¢ƒè¿˜æ˜¯åœ¨ç”Ÿäº§ç¯å¢ƒéƒ½å¿…é¡»ä½¿ç”¨çš„ä¾èµ–ï¼Œæ˜¯æˆ‘ä»¬æœ€å¸¸ç”¨çš„ä¾èµ–åŒ…ç®¡ç†å¯¹è±¡ï¼Œä¾‹å¦‚ Reactï¼ŒLoadshï¼ŒAxios ç­‰ï¼Œé€šè¿‡ npm install XXX ä¸‹è½½çš„åŒ…éƒ½ä¼šé»˜è®¤å®‰è£…åœ¨ dependencies å¯¹è±¡ä¸­ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ npm install XXX â€“save ä¸‹è½½ dependencies ä¸­çš„åŒ…ï¼› devDependenciesdevDependencies æ˜¯æŒ‡å¯ä»¥åœ¨å¼€å‘ç¯å¢ƒä½¿ç”¨çš„ä¾èµ–ï¼Œä¾‹å¦‚ eslintï¼Œdebug ç­‰ï¼Œé€šè¿‡ npm install packageName â€“save-dev ä¸‹è½½çš„åŒ…éƒ½ä¼šåœ¨ devDependencies å¯¹è±¡ä¸­ï¼› dependencies å’Œ devDependencies æœ€å¤§çš„åŒºåˆ«æ˜¯åœ¨æ‰“åŒ…è¿è¡Œæ—¶ï¼Œæ‰§è¡Œ npm install æ—¶é»˜è®¤ä¼šæŠŠæ‰€æœ‰ä¾èµ–å…¨éƒ¨å®‰è£…ï¼Œä½†æ˜¯å¦‚æœä½¿ç”¨ npm install --production æ—¶å°±åªä¼šå®‰è£… dependencies ä¸­çš„ä¾èµ–ï¼Œå¦‚æœæ˜¯ node æœåŠ¡é¡¹ç›®ï¼Œå°±å¯ä»¥é‡‡ç”¨è¿™æ ·çš„æ–¹å¼ç”¨äºæœåŠ¡è¿è¡Œæ—¶å®‰è£…å’Œæ‰“åŒ…ï¼Œå‡å°‘åŒ…å¤§å°ã€‚ optionalDependenciesoptionalDependencies æŒ‡çš„æ˜¯å¯ä»¥é€‰æ‹©çš„ä¾èµ–ï¼Œå½“ä½ å¸Œæœ›æŸäº›ä¾èµ–å³ä½¿ä¸‹è½½å¤±è´¥æˆ–è€…æ²¡æœ‰æ‰¾åˆ°æ—¶ï¼Œé¡¹ç›®ä¾ç„¶å¯ä»¥æ­£å¸¸è¿è¡Œæˆ–è€… npm ç»§ç»­è¿è¡Œçš„æ—¶ï¼Œå°±å¯ä»¥æŠŠè¿™äº›ä¾èµ–æ”¾åœ¨ optionalDependencies å¯¹è±¡ä¸­ï¼Œä½†æ˜¯ optionalDependencies ä¼šè¦†ç›– dependencies ä¸­çš„åŒåä¾èµ–åŒ…ï¼Œæ‰€ä»¥ä¸è¦æŠŠä¸€ä¸ªåŒ…åŒæ—¶å†™è¿›ä¸¤ä¸ªå¯¹è±¡ä¸­ã€‚ optionalDependencies å°±åƒæ˜¯æˆ‘ä»¬çš„ä»£ç çš„ä¸€ç§ä¿æŠ¤æœºåˆ¶ä¸€æ ·ï¼Œå¦‚æœåŒ…å­˜åœ¨çš„è¯å°±èµ°å­˜åœ¨çš„é€»è¾‘ï¼Œä¸å­˜åœ¨çš„å°±èµ°ä¸å­˜åœ¨çš„é€»è¾‘ã€‚ 12345678910try &#123; var axios = require('axios') var fooVersion = require('axios/package.json').version&#125; catch (er) &#123; foo = null&#125;// .. then later in your program ..if (foo) &#123; foo.doFooThings()&#125; peerDependenciespeerDependencies ç”¨äºæŒ‡å®šä½ å½“å‰çš„æ’ä»¶å…¼å®¹çš„å®¿ä¸»å¿…é¡»è¦å®‰è£…çš„åŒ…çš„ç‰ˆæœ¬ï¼Œè¿™ä¸ªæ˜¯ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿä¸¾ä¸ªä¾‹å­ğŸŒ°ï¼šæˆ‘ä»¬å¸¸ç”¨çš„ react ç»„ä»¶åº“ ant-design@3.x çš„ package.json ä¸­çš„é…ç½®å¦‚ä¸‹ï¼š 1234\"peerDependencies\": &#123; \"react\": \"&gt;=16.9.0\", \"react-dom\": \"&gt;=16.9.0\" &#125;, å‡è®¾æˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªåä¸º project çš„é¡¹ç›®ï¼Œåœ¨æ­¤é¡¹ç›®ä¸­æˆ‘ä»¬è¦ä½¿ç”¨ ant-design@3.x è¿™ä¸ªæ’ä»¶ï¼Œæ­¤æ—¶æˆ‘ä»¬çš„é¡¹ç›®å°±å¿…é¡»å…ˆå®‰è£… React &gt;= 16.9.0 å’Œ React-dom &gt;= 16.9.0 çš„ç‰ˆæœ¬ã€‚â€‹ åœ¨ npm 2 ä¸­ï¼Œå½“æˆ‘ä»¬ä¸‹è½½ ant-design@3.x æ—¶ï¼ŒpeerDependencies ä¸­æŒ‡å®šçš„ä¾èµ–ä¼šéšç€ ant-design@3.x ä¸€èµ·è¢«å¼ºåˆ¶å®‰è£…ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸éœ€è¦åœ¨å®¿ä¸»é¡¹ç›®çš„ package.json æ–‡ä»¶ä¸­æŒ‡å®š peerDependencies ä¸­çš„ä¾èµ–ï¼Œä½†æ˜¯åœ¨ npm 3 ä¸­ï¼Œä¸ä¼šå†å¼ºåˆ¶å®‰è£… peerDependencies ä¸­æ‰€æŒ‡å®šçš„åŒ…ï¼Œè€Œæ˜¯é€šè¿‡è­¦å‘Šçš„æ–¹å¼æ¥æç¤ºæˆ‘ä»¬ï¼Œæ­¤æ—¶å°±éœ€è¦æ‰‹åŠ¨åœ¨ package.json æ–‡ä»¶ä¸­æ‰‹åŠ¨æ·»åŠ ä¾èµ–ï¼› bundledDependenciesè¿™ä¸ªä¾èµ–é¡¹ä¹Ÿå¯ä»¥è®°ä¸º bundleDependenciesï¼Œä¸å…¶ä»–å‡ ç§ä¾èµ–é¡¹ä¸åŒï¼Œä»–ä¸æ˜¯ä¸€ä¸ªé”®å€¼å¯¹çš„å¯¹è±¡ï¼Œè€Œæ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œæ•°ç»„é‡Œæ˜¯åŒ…åçš„å­—ç¬¦ä¸²ï¼Œä¾‹å¦‚ï¼š 12345678&#123; \"name\": \"project\", \"version\": \"1.0.0\", \"bundleDependencies\": [ \"axios\", \"lodash\" ]&#125; å½“ä½¿ç”¨ npm pack çš„æ–¹å¼æ¥æ‰“åŒ…æ—¶ï¼Œä¸Šè¿°çš„ä¾‹å­ä¼šç”Ÿæˆä¸€ä¸ª project-1.0.0.tgz çš„æ–‡ä»¶ï¼Œåœ¨ä½¿ç”¨äº† bundledDependencies åï¼Œæ‰“åŒ…æ—¶ä¼šæŠŠ Axios å’Œ Lodash è¿™ä¸¤ä¸ªä¾èµ–ä¸€èµ·æ”¾å…¥åŒ…ä¸­ï¼Œä¹‹åæœ‰äººä½¿ç”¨ npm install project-1.0.0.tgz ä¸‹è½½åŒ…æ—¶ï¼ŒAxios å’Œ Lodash è¿™ä¸¤ä¸ªä¾èµ–ä¹Ÿä¼šè¢«å®‰è£…ã€‚éœ€è¦æ³¨æ„çš„æ˜¯å®‰è£…ä¹‹å Axios å’Œ Lodash è¿™ä¸¤ä¸ªåŒ…çš„ä¿¡æ¯åœ¨ dependencies ä¸­ï¼Œå¹¶ä¸”ä¸åŒ…æ‹¬ç‰ˆæœ¬ä¿¡æ¯ã€‚ 12345678\"bundleDependencies\": [ \"axios\", \"lodash\"],\"dependencies\": &#123; \"axios\": \"*\", \"lodash\": \"*\"&#125; å¦‚æœæˆ‘ä»¬ä½¿ç”¨å¸¸è§„çš„ npm publish æ¥å‘å¸ƒçš„è¯ï¼Œè¿™ä¸ªå±æ€§æ˜¯ä¸ä¼šç”Ÿæ•ˆçš„ï¼Œæ‰€ä»¥æ—¥å¸¸æƒ…å†µä¸­ä½¿ç”¨çš„è¾ƒå°‘ã€‚ æ€»ç»“æœ¬æ–‡ä»‹ç»çš„æ˜¯ npm 2ï¼Œnpm 3ï¼Œpackage-lock.json ä»¥åŠå‡ ç§ä¾èµ–çš„åŒºåˆ«å’Œä½¿ç”¨åœºæ™¯ï¼Œå¸Œæœ›èƒ½å¤Ÿè®©å¤§å®¶å¯¹ npm çš„äº†è§£æ›´åŠ å¤šä¸€ç‚¹ï¼Œæœ‰ä»€ä¹ˆä¸æ¸…æ¥šçš„åœ°æ–¹æˆ–è€…ä¸è¶³ä¹‹å¤„æ¬¢è¿å¤§å®¶åœ¨è¯„è®ºåŒºç•™è¨€ã€‚ åŸæ–‡è½¬è½½è‡ªï¼šhttps://www.zoo.team/article/npm-details","categories":[{"name":"npm","slug":"npm","permalink":"http://blog.kobingo.xyz/categories/npm/"}],"tags":[{"name":"npm","slug":"npm","permalink":"http://blog.kobingo.xyz/tags/npm/"}]},{"title":"åœ¨ React ä¸­å®ç° keep alive","slug":"framework-react-keep-alive","date":"2020-09-15T23:25:43.000Z","updated":"2021-01-19T06:41:41.218Z","comments":true,"path":"framework-react-keep-alive/","link":"","permalink":"http://blog.kobingo.xyz/framework-react-keep-alive/","excerpt":"æœ¬æ–‡ä»‹ç»ä¸€ç§åœ¨reactä¸­å®ç°Vueçš„keep aliveåŠŸèƒ½çš„æ–¹æ¡ˆã€‚","text":"æœ¬æ–‡ä»‹ç»ä¸€ç§åœ¨reactä¸­å®ç°Vueçš„keep aliveåŠŸèƒ½çš„æ–¹æ¡ˆã€‚ ä»€ä¹ˆæ˜¯ keep aliveåœ¨ Vue ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ keep-alive åŒ…è£¹ä¸€ä¸ªåŠ¨æ€ç»„ä»¶ï¼Œä»è€Œç¼“å­˜ä¸æ´»è·ƒçš„å®ä¾‹ï¼Œè€Œä¸æ˜¯ç›´æ¥é”€æ¯ä»–ä»¬ï¼š 123&lt;keep-alive&gt; &lt;component :is=\"view\"&gt;&lt;/component&gt;&lt;/keep-alive&gt; è¿™å¯¹äºæŸäº›è·¯ç”±åˆ‡æ¢ç­‰åœºæ™¯éå¸¸å¥½ç”¨ï¼Œä¾‹å¦‚ï¼Œå¦‚æœæˆ‘ä»¬éœ€è¦å®ç°ä¸€ä¸ªåˆ—è¡¨é¡µå’Œè¯¦æƒ…é¡µï¼Œä½†åœ¨ç”¨æˆ·ä»è¯¦æƒ…é¡µè¿”å›åˆ—è¡¨çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¸å¸Œæœ›é‡æ–°è¯·æ±‚æ¥å£è·å–ï¼Œä¹Ÿä¸å¸Œæœ›é‡ç½®åˆ—è¡¨çš„è¿‡æ»¤ã€æ’åºç­‰æ¡ä»¶ï¼Œé‚£è¿™æ—¶å°±å¯ä»¥å¯¹åˆ—è¡¨é¡µçš„ç»„ä»¶ç”¨ keep-alive åŒ…è£¹ä¸€ä¸‹ï¼Œè¿™æ ·ï¼Œå½“è·¯ç”±åˆ‡æ¢æ—¶ï¼ŒVue ä¼šå°†è¿™ä¸ªç»„ä»¶â€œå¤±æ´»â€å¹¶ç¼“å­˜èµ·æ¥ï¼Œè€Œä¸æ˜¯ç›´æ¥å¸è½½æ‰ã€‚ æœ€ç®€å•çš„æ–¹æ¡ˆè€Œåœ¨ React ä¸­ï¼Œå…¶å®ä¸€ç›´ä»¥æ¥éƒ½æ²¡æœ‰å®˜æ–¹çš„ keep alive è§£å†³æ–¹æ¡ˆï¼Œå¤§éƒ¨åˆ†å¼€å‘è€…å¯èƒ½éƒ½ä¼šç›´æ¥ä½¿ç”¨ display: none æ¥å°† DOM éšè—ï¼š 123&lt;div style=&#123;shouldHide ? &#123;display: 'none'&#125; : &#123;&#125;&#125;&gt; &lt;Foo/&gt;&lt;/div&gt; ä½†è¿™ç§æ–¹æ¡ˆå…¶å®åªæ˜¯åœ¨â€œè§†è§‰ä¸Šâ€å°†å…ƒç´ éšè—èµ·æ¥äº†ï¼Œå¹¶æ²¡æœ‰çœŸæ­£çš„ç§»é™¤ï¼Œé‚£æœ‰æ²¡æœ‰å¯èƒ½æŠŠ DOM æ ‘çœŸçš„ç§»é™¤æ‰ï¼ŒåŒæ—¶åˆè®©ç»„ä»¶ä¸è¢«é”€æ¯å‘¢ï¼Ÿ Portalå®ç° Portal æä¾›äº†ä¸€ç§å°†å­èŠ‚ç‚¹æ¸²æŸ“åˆ°å­˜åœ¨äºçˆ¶ç»„ä»¶ä»¥å¤–çš„ DOM èŠ‚ç‚¹çš„ä¼˜ç§€çš„æ–¹æ¡ˆã€‚ è¿™æ˜¯ React å®˜æ–¹æ–‡æ¡£ä¸Šå¯¹ Portal ç‰¹æ€§çš„ä»‹ç»ï¼Œå€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œè¿™é‡Œåªæ˜¯è¯´â€œçˆ¶ç»„ä»¶ä»¥å¤–çš„ DOM èŠ‚ç‚¹â€ï¼Œä½†æ²¡æœ‰è¦æ±‚è¿™ä¸ª DOM èŠ‚ç‚¹æ˜¯çœŸçš„åœ¨é¡µé¢ä¸Šï¼Œè¿˜æ˜¯åªæ˜¯å­˜åœ¨äºå†…å­˜ä¸­ã€‚ å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥å…ˆé€šè¿‡ document.createElement åœ¨å†…å­˜ä¸­åˆ›å»ºä¸€ä¸ªå…ƒç´ ï¼Œç„¶åå†é€šè¿‡ React.createPoral æŠŠ React å­èŠ‚ç‚¹æ¸²æŸ“åˆ°è¿™ä¸ªå…ƒç´ ä¸Šï¼Œè¿™æ ·å°±å®ç°äº†â€œç©ºæ¸²æŸ“â€ã€‚ 12const targetElement = document.createElement('div')ReactDOM.createPortal(child, targetElement) åŸºäºè¿™ç§æ–¹æ¡ˆï¼Œæˆ‘ä»¬å¯ä»¥è¿›ä¸€æ­¥å°è£…å‡ºä¸€ä¸ª Conditional ç»„ä»¶ï¼Œä»è€Œå®ç°é€šç”¨æ€§çš„æ¡ä»¶æ¸²æŸ“é€»è¾‘ï¼š 12345678910111213141516171819export const Conditional = props =&gt; &#123; const [targetElement] = useState(() =&gt; document.createElement('div')) const containerRef = useRef() useLayoutEffect(() =&gt; &#123; if (props.active) &#123; containerRef.current.appendChild(targetElement) &#125; else &#123; try &#123; containerRef.current.removeChild(targetElement) &#125; catch (e) &#123;&#125; &#125; &#125;, [props.active]) return ( &lt;&gt; &lt;div ref=&#123;containerRef&#125; /&gt; &#123;ReactDOM.createPortal(props.children, targetElement)&#125; &lt;/&gt; )&#125; é¦–å…ˆï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ª targetElement ï¼Œå¹¶ä¸”é€šè¿‡ createPortal å°† children æ¸²æŸ“åˆ° targetElement ã€‚ ç„¶åï¼Œæˆ‘ä»¬ä¼šåˆ›å»ºä¸€ä¸ªå®¹å™¨ div å…ƒç´ ï¼Œå¹¶ä¸”é€šè¿‡ containerRef æ‹¿åˆ°å®ƒçš„å¼•ç”¨ã€‚ æœ€åï¼Œå½“ active ä¸º true æ—¶ï¼Œæˆ‘ä»¬ä¼šæŠŠ targetElement æ‰‹åŠ¨æ·»åŠ åˆ° containerRef.current çš„å†…éƒ¨ï¼Œåä¹‹ï¼Œåˆ™ä¼šä»å…¶å†…éƒ¨ç§»é™¤æ‰ targetElement ã€‚ å®é™…ä½¿ç”¨çš„æ–¹å¼å¦‚ä¸‹ï¼š 123&lt;Conditional active=&#123;!shouldHide&#125;&gt; &lt;Foo/&gt;&lt;/Conditional&gt; æ‡’åŠ è½½ç»†å¿ƒçš„è¯»è€…å¯èƒ½ä¼šå‘ç°ï¼Œç›®å‰æˆ‘ä»¬çš„ Conditional ç»„ä»¶è¿˜æœ‰ä¸€ç‚¹å°å°çš„ç‘•ç–µï¼šå½“ç»„ä»¶åˆæ¬¡æ¸²æŸ“æ—¶ï¼Œä¸è®ºå½“å‰çš„ active æ˜¯ true è¿˜æ˜¯ false ï¼Œ Conditional ç»„ä»¶éƒ½ä¼šå°† props.children æ¸²æŸ“ã€‚è¿™å¯¹å¤§å‹åº”ç”¨å¯èƒ½ä¼šå¸¦æ¥éå¸¸æ˜æ˜¾çš„æ€§èƒ½é—®é¢˜ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬å¯ä»¥ä¸ºå…¶å¢åŠ â€œæ‡’åŠ è½½â€çš„ç‰¹æ€§ï¼š 1234567891011121314151617181920212223242526export const Conditional = props =&gt; &#123; const [targetElement] = useState(() =&gt; document.createElement('div')) const containerRef = useRef() // å¢åŠ ä¸€ä¸ª ref è®°å½•ç»„ä»¶æ˜¯å¦â€œè¢«æ¿€æ´»è¿‡â€ const activatedRef = useRef(false) activatedRef.current = activatedRef.current || props.active useLayoutEffect(() =&gt; &#123; if (props.active) &#123; containerRef.current.appendChild(targetElement) &#125; else &#123; try &#123; containerRef.current.removeChild(targetElement) &#125; catch (e) &#123;&#125; &#125; &#125;, [props.active]) return ( &lt;&gt; &lt;div ref=&#123;containerRef&#125; /&gt; &#123;activatedRef.current &amp;&amp; ( // å¦‚æœâ€œè¢«æ¿€æ´»è¿‡â€ï¼Œæ‰æ¸²æŸ“ children ReactDOM.createPortal(props.children, targetElement) )&#125; &lt;/&gt; )&#125; ä¸€äº›é—æ†¾ä¸å¾—ä¸æ‰¿è®¤çš„æ˜¯ï¼ŒåŸºäº Portal æ–¹æ¡ˆçš„ Conditional ç»„ä»¶å¹¶ä¸èƒ½åŒ…æ²»ç™¾ç—…ï¼Œå’Œ Vue çš„ keep-alive ç›¸æ¯”ï¼Œä¹Ÿå­˜åœ¨ä¸å°‘ç¼ºæ†¾ï¼š éœ€è¦æ‰‹åŠ¨æ§åˆ¶ active ï¼Œä¸èƒ½ç›´æ¥åŸºäºå­ç»„ä»¶é”€æ¯/åˆ›å»ºçš„ç”Ÿå‘½å‘¨æœŸäº‹ä»¶ ç¼ºå°‘å¤±æ´»/æ¿€æ´»çš„ç”Ÿå‘½å‘¨æœŸæ—¶é—´ï¼Œå­ç»„ä»¶æ— æ³•æ„ŸçŸ¥è‡ªå·±æ˜¯ä¸æ˜¯è¢«ç¼“å­˜èµ·æ¥äº† ä¾èµ–äº† ReactDOM ï¼Œå¯¹ SSR ä¸å¤Ÿå‹å¥½ åŸæ–‡è½¬è½½è‡ªçŸ¥ä¹ï¼šåœ¨ React ä¸­å®ç° keep alive","categories":[{"name":"react","slug":"react","permalink":"http://blog.kobingo.xyz/categories/react/"}],"tags":[{"name":"react","slug":"react","permalink":"http://blog.kobingo.xyz/tags/react/"},{"name":"keep alice","slug":"keep-alice","permalink":"http://blog.kobingo.xyz/tags/keep-alice/"}]},{"title":"æ•°æ®ç»“æ„ä¸ç®—æ³•çŸ¥è¯†ç‚¹æ±‡æ€»","slug":"algorithms-å¼€ç¯‡","date":"2020-06-22T18:09:54.000Z","updated":"2021-01-19T06:41:41.218Z","comments":true,"path":"algorithms-å¼€ç¯‡/","link":"","permalink":"http://blog.kobingo.xyz/algorithms-%E5%BC%80%E7%AF%87/","excerpt":"æ•°æ®ç»“æ„ä¸ç®—æ³•çŸ¥è¯†ç‚¹æ±‡æ€»","text":"","categories":[{"name":"æ•°æ®ç»“æ„ä¸ç®—æ³•","slug":"æ•°æ®ç»“æ„ä¸ç®—æ³•","permalink":"http://blog.kobingo.xyz/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/"}],"tags":[{"name":"æ•°æ®ç»“æ„ä¸ç®—æ³•","slug":"æ•°æ®ç»“æ„ä¸ç®—æ³•","permalink":"http://blog.kobingo.xyz/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/"}]},{"title":"LeetCodeé¢˜è§£è®°å½•","slug":"algorithms-leetcode","date":"2020-06-21T21:56:01.000Z","updated":"2021-01-19T06:41:41.218Z","comments":true,"path":"algorithms-leetcode/","link":"","permalink":"http://blog.kobingo.xyz/algorithms-leetcode/","excerpt":"æ±‡é›†LeetCodeé¢˜è§£æ€è·¯ï¼Œæ–¹ä¾¿æ—¥åå›å¿†","text":"leetCodeé¢˜è§£è®°å½• leetCodeé¢˜è§£è®°å½• æ•°ç»„ç±» å¸¸ç”¨æ–¹æ³•æ€»ç»“ï¼š ä¸¤æ•°ä¹‹å’Œ 15. ä¸‰æ•°ä¹‹å’Œ 16. æœ€æ¥è¿‘çš„ä¸‰æ•°ä¹‹å’Œ æœ€å¤§å­åºå’Œ 239. æ»‘åŠ¨çª—å£æœ€å¤§å€¼ åˆå¹¶ä¸¤ä¸ªæœ‰åºæ•°ç»„ 14. æœ€é•¿å…¬å…±å‰ç¼€ é“¾è¡¨ç±» å¸¸ç”¨æ–¹æ³•æ€»ç»“ï¼š åˆå¹¶ä¸¤ä¸ªæœ‰åºé“¾è¡¨ 141. ç¯å½¢é“¾è¡¨ 142. ç¯å½¢é“¾è¡¨ II åè½¬é“¾è¡¨ 19. åˆ é™¤é“¾è¡¨çš„å€’æ•°ç¬¬Nä¸ªèŠ‚ç‚¹ 876. é“¾è¡¨çš„ä¸­é—´ç»“ç‚¹ åŠ¨æ€è§„åˆ’ç±» 309. æœ€ä½³ä¹°å–è‚¡ç¥¨æ—¶æœºå«å†·å†»æœŸ é¢è¯•é¢˜ 17.13. æ¢å¤ç©ºæ ¼ 96. ä¸åŒçš„äºŒå‰æœç´¢æ ‘ æ•°ç»„ç±»å¸¸ç”¨æ–¹æ³•æ€»ç»“ï¼š ç»“åˆObject(Map/set)ç­‰æ•°æ®ç»“æ„æ¥è§£é¢˜ï¼› æ»‘åŠ¨çª—å£æ–¹æ³•ï¼ˆæœ€å°ï¼ˆå¤§ï¼‰å­é›†ç­‰é—®é¢˜é€‚ç”¨ï¼‰ Trie æ ‘ ä¸¤æ•°ä¹‹å’Œç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„ nums å’Œä¸€ä¸ªç›®æ ‡å€¼ targetï¼Œè¯·ä½ åœ¨è¯¥æ•°ç»„ä¸­æ‰¾å‡ºå’Œä¸ºç›®æ ‡å€¼çš„é‚£ ä¸¤ä¸ª æ•´æ•°ï¼Œå¹¶è¿”å›ä»–ä»¬çš„æ•°ç»„ä¸‹æ ‡ã€‚ ä½ å¯ä»¥å‡è®¾æ¯ç§è¾“å…¥åªä¼šå¯¹åº”ä¸€ä¸ªç­”æ¡ˆã€‚ä½†æ˜¯ï¼Œæ•°ç»„ä¸­åŒä¸€ä¸ªå…ƒç´ ä¸èƒ½ä½¿ç”¨ä¸¤éã€‚ ç¤ºä¾‹: 1234ç»™å®š nums = [2, 7, 11, 15], target = 9å› ä¸º nums[0] + nums[1] = 2 + 7 = 9æ‰€ä»¥è¿”å› [0, 1] æ–¹æ³•ä¸€ï¼š 1234567891011121314151617/** * @param &#123;number[]&#125; nums * @param &#123;number&#125; target * @return &#123;number[]&#125; */var twoSum = function(nums, target) &#123; let result = []; for(let i = 0, length = nums.length; i &lt; length; i++)&#123; const left = target - nums[i]; const leftIndex = nums.lastIndexOf(left); if(leftIndex &gt; i)&#123; result = [i ,leftIndex]; break; &#125; &#125; return result;&#125;; å¤æ‚åº¦åˆ†æï¼š æ—¶é—´å¤æ‚åº¦ï¼šO(n2) ç©ºé—´å¤æ‚åº¦ï¼šo(1) æ–¹æ³•äºŒï¼š 1234567891011var twoSum = function(nums, target) &#123; let map = new Map() for(let i = 0; i&lt; nums.length; i++) &#123; let k = target-nums[i] if(map.has(k)) &#123; return [map.get(k), i] &#125; map.set(nums[i], i) &#125; return [];&#125;; å¤æ‚åº¦åˆ†æï¼š æ—¶é—´å¤æ‚åº¦ï¼šO(n) ç©ºé—´å¤æ‚åº¦ï¼šo(n) 15. ä¸‰æ•°ä¹‹å’Œè§£é¢˜æ€è·¯ï¼š é¦–å…ˆå¯¹æ•°ç»„ä»å¤§åˆ°å°è¿›è¡Œæ’åºï¼› éå†æ•°ç»„ï¼Œè®¾ç½®å·¦å³ä¿©æŒ‡é’ˆåˆå§‹ä½ç½®åœ¨æ•°ç»„å·¦å³è¾¹ç•Œï¼ˆfirst = i + 1,last = length -1ï¼‰; å¦‚æœi, first, last ä¸‰ä¸ªæ•°å€¼å¤§äº0ï¼Œåˆ™lastå·¦ç§»ï¼Œå¦‚æœå°äº0ï¼Œåˆ™firstå³ç§»ï¼› ä½¿å¾—æœ€ç»ˆä¸‰æ•°ä¹‹å’Œç­‰äº0ï¼Œåˆ™æˆåŠŸæ‰¾å‡ºä¸€ç»„ã€‚é‡å¤æ­¥éª¤2ã€‚ å®ç°ä»£ç : 1234567891011121314151617181920212223242526var threeSum = function (nums) &#123; let res = []; let length = nums.length; nums.sort((a, b) =&gt; a - b); // å…ˆæ’ä¸ªé˜Ÿï¼Œæœ€å·¦è¾¹æ˜¯æœ€å¼±ï¼ˆå°ï¼‰çš„ï¼Œæœ€å³è¾¹æ˜¯æœ€å¼º(å¤§)çš„ if (nums[0] &gt; 0 || nums[length - 1] &lt; 0) &#123; return res; &#125; for (let i = 0; i &lt; length - 2; i) &#123; if (nums[i] &gt; 0) break; let first = i + 1, last = length - 1, sum; while (first &lt; last) &#123; sum = nums[i] + nums[first] + nums[last]; if (sum === 0) &#123; res.push([nums[i], nums[first], nums[last]]); while (first &lt; last &amp;&amp; nums[first] === nums[++first]) &#123; &#125; &#125; else if (sum &lt; 0) &#123; while (first &lt; last &amp;&amp; nums[first] === nums[++first]) &#123; &#125; &#125; else &#123; while (first &lt; last &amp;&amp; nums[last] === nums[--last]) &#123; &#125; &#125; &#125; while (nums[i] === nums[++i]) &#123; &#125; &#125; return res;&#125;; å¤æ‚åº¦åˆ†æ æ—¶é—´å¤æ‚åº¦ï¼š O(n2) 16. æœ€æ¥è¿‘çš„ä¸‰æ•°ä¹‹å’Œè§£é¢˜æ€è·¯ æ€è·¯åŒä¸Šä¸€é¢˜ç±»ä¼¼ï¼Œä¸åŒç‚¹åœ¨äºæ­¤é¢˜æ˜¯æ±‚æœ€æ¥è¿‘ç»™å®šå€¼çš„è§£ã€‚ å®ç°ä»£ç  123456789101112131415161718var threeSumClosest = function (nums, target) &#123; nums.sort((a, b) =&gt; a - b); let length = nums.length; let result = nums[0] + nums[1] + nums[length - 1]; for (let i = 0; i &lt; length - 2; i++) &#123; let first = i + 1; let last = length - 1; let sum; while (first &lt; last) &#123; sum = nums[i] + nums[first] + nums[last]; sum &gt; target ? last-- : first++; if (Math.abs(target - result) &gt; Math.abs(target - sum)) &#123; result = sum; &#125; &#125; &#125; return result;&#125;; å¤æ‚åº¦åˆ†æ æ—¶é—´å¤æ‚åº¦ï¼š O(n2) æœ€å¤§å­åºå’Œç®—æ³•ï¼š åœ¨æ•´ä¸ªæ•°ç»„æˆ–åœ¨å›ºå®šå¤§å°çš„æ»‘åŠ¨çª—å£ä¸­æ‰¾åˆ°æ€»å’Œæˆ–æœ€å¤§å€¼æˆ–æœ€å°å€¼çš„é—®é¢˜å¯ä»¥é€šè¿‡åŠ¨æ€è§„åˆ’ï¼ˆDPï¼‰åœ¨çº¿æ€§æ—¶é—´å†…è§£å†³ã€‚æœ‰ä¸¤ç§æ ‡å‡† DP æ–¹æ³•é€‚ç”¨äºæ•°ç»„ï¼š å¸¸æ•°ç©ºé—´ï¼Œæ²¿æ•°ç»„ç§»åŠ¨å¹¶åœ¨åŸæ•°ç»„ä¿®æ”¹ã€‚ çº¿æ€§ç©ºé—´ï¼Œé¦–å…ˆæ²¿ left-&gt;right æ–¹å‘ç§»åŠ¨ï¼Œç„¶åå†æ²¿ right-&gt;left æ–¹å‘ç§»åŠ¨ã€‚ åˆå¹¶ç»“æœã€‚ æˆ‘ä»¬åœ¨è¿™é‡Œä½¿ç”¨ç¬¬ä¸€ç§æ–¹æ³•ï¼Œå› ä¸ºå¯ä»¥ä¿®æ”¹æ•°ç»„è·Ÿè¸ªå½“å‰ä½ç½®çš„æœ€å¤§å’Œã€‚ä¸‹ä¸€æ­¥æ˜¯åœ¨çŸ¥é“å½“å‰ä½ç½®çš„æœ€å¤§å’Œåæ›´æ–°å…¨å±€æœ€å¤§å’Œã€‚ 1234567891011121314/** * @param &#123;number[]&#125; nums * @return &#123;number&#125; */var maxSubArray = function (nums) &#123; if (nums.length === 1) &#123; return nums[0]; &#125; let maxSum = nums[0]; for (let i = 1, length = nums.length; i &lt; length; i++) &#123; if (nums[i - 1] &gt; 0) nums[i] += nums[i - 1]; // indexä½ä¸Šçš„å€¼å˜ä¸ºåˆ°è¿™ä½ä¸ºæ­¢çš„æœ€å¤§å€¼ maxSum = Math.max(nums[i], maxSum); // å–å½“å‰ä½ä¸å†å²ä½çš„æœ€å¤§å€¼ &#125; return maxSum;&#125;; å¤æ‚åº¦åˆ†æ: æ—¶é—´å¤æ‚åº¦ï¼šO(N)ã€‚åªéå†äº†ä¸€æ¬¡æ•°ç»„ã€‚ ç©ºé—´å¤æ‚åº¦ï¼šO(1)ï¼Œä½¿ç”¨äº†å¸¸æ•°çš„ç©ºé—´ã€‚ 239. æ»‘åŠ¨çª—å£æœ€å¤§å€¼è§£é¢˜æ€è·¯ ä½¿ç”¨ é˜Ÿåˆ— æ–¹å¼ç»´æŠ¤ä¸€ä¸ªæ»‘åŠ¨çª—å£å†…çš„æ•°å€¼ç´¢å¼•ï¼Œå¹¶ç¡®ä¿é˜Ÿåˆ—é˜Ÿé¦–å€¼æ˜¯å½“å‰æ»‘åŠ¨çª—å£çš„æœ€å¤§å€¼ç´¢å¼• å¯¹åº”ç´¢å¼•iæ¥è¯´ï¼Œåœ¨iå‰é¢å¹¶ä¸”æ¯”içš„å€¼å°çš„æ•°å€¼æ˜¯æ²¡æœ‰ä»·å€¼çš„ï¼Œå¯ä»¥å‰”é™¤æ‰ å®ç°ä»£ç  1234567891011121314151617181920var maxSlidingWindow = function (nums, k) &#123; //queueä¿å­˜ SlidingWindow æ•°æ®ï¼Œå…¶ä¸­é¦–ä½æ˜¯æœ€å¤§å€¼çš„ç´¢å¼• const queue = [], result = []; for (let i = 0; i &lt; nums.length; i++) &#123; //å‰”é™¤SlidingWindowå¤–çš„æ•°æ® if (i - queue[0] &gt;= k) &#123; queue.shift(); &#125; // å‰”é™¤queueå…ƒç´ ï¼Œç¡®ä¿queueé¦–ä½ä¿å­˜çš„æ˜¯æœ€å¤§å€¼çš„ç´¢å¼• while (nums[i] &gt; nums[queue[queue.length - 1]]) &#123; queue.pop() &#125; queue.push(i) //ä»k-1å¼€å§‹è¾“å‡ºç»“æœ if (i &gt;= k - 1) &#123; result.push(nums[queue[0]]) &#125; &#125; return result;&#125; åˆå¹¶ä¸¤ä¸ªæœ‰åºæ•°ç»„ç»™ä½ ä¸¤ä¸ªæœ‰åºæ•´æ•°æ•°ç»„ nums1 å’Œ nums2ï¼Œè¯·ä½ å°† nums2 åˆå¹¶åˆ° nums1 ä¸­ï¼Œä½¿ nums1 æˆä¸ºä¸€ä¸ªæœ‰åºæ•°ç»„ã€‚ è¯´æ˜: åˆå§‹åŒ– nums1 å’Œ nums2 çš„å…ƒç´ æ•°é‡åˆ†åˆ«ä¸º m å’Œ n ã€‚ä½ å¯ä»¥å‡è®¾ nums1 æœ‰è¶³å¤Ÿçš„ç©ºé—´ï¼ˆç©ºé—´å¤§å°å¤§äºæˆ–ç­‰äº m + nï¼‰æ¥ä¿å­˜ nums2 ä¸­çš„å…ƒç´ ã€‚ç¤ºä¾‹: 12345è¾“å…¥:nums1 = [1,2,3,0,0,0], m = 3nums2 = [2,5,6], n = 3è¾“å‡º: [1,2,2,3,5,6] æ€è·¯åˆ†æï¼šnums1 ã€ nums2 æœ‰åºï¼Œè‹¥æŠŠ nums2 å…¨éƒ¨åˆå¹¶åˆ° nums1 ï¼Œåˆ™åˆå¹¶åçš„ nums1 é•¿åº¦ä¸º m+næˆ‘ä»¬å¯ä»¥ä»ä¸‹æ ‡ m+n-1 çš„ä½ç½®å¡«å…… nums1ï¼Œå¾ªç¯æ¯”è¾ƒ nums1[len1] ä¸ nums2[len2] çš„å¤§å°ï¼Œå°†æœ€å¤§å€¼å†™å…¥ nums1[len]ã€‚è¾¹ç•Œæ¡ä»¶ï¼š è‹¥ len1 &lt; 0ï¼Œ len2 &gt;= 0 ï¼Œæ­¤æ—¶ nums1 å·²é‡å†™å…¥ï¼Œ nums2 è¿˜æœªåˆå¹¶å®Œï¼Œåªéœ€å°† nums2 çš„å‰©ä½™å…ƒç´ å†™å…¥ nums1 å³å¯ï¼Œå†™å…¥åï¼Œåˆå¹¶å®Œæˆï¼› è‹¥ len2 &lt; 0ï¼Œæ­¤æ—¶ nums2 å·²å…¨éƒ¨åˆå¹¶åˆ° nums1 ï¼Œåˆå¹¶å®Œæˆã€‚ å®ç°ä»£ç ï¼š 123456789101112131415161718192021/** * @param &#123;number[]&#125; nums1 * @param &#123;number&#125; m * @param &#123;number[]&#125; nums2 * @param &#123;number&#125; n * @return &#123;void&#125; Do not return anything, modify nums1 in-place instead. */var merge = function (nums1, m, nums2, n) &#123; let len1 = m - 1, len2 = n - 1, len = m + n - 1; //è‹¥len2 &lt; 0,è¯´æ˜ nums2 å·²å…¨éƒ¨åˆå¹¶åˆ° nums1 ï¼Œåˆå¹¶å®Œæˆ while (len2 &gt;= 0) &#123; if (len1 &lt; 0) &#123; // æ­¤æ—¶ nums1 å·²é‡å†™å…¥ï¼Œ nums2 è¿˜æœªåˆå¹¶å®Œï¼Œä»…ä»…éœ€è¦å°† nums2 çš„å‰©ä½™å…ƒç´ å†™å…¥ nums1 å³å¯ nums1[len--] = nums2[len2--]; continue; &#125; nums1[len--] = nums1[len1] &gt;= nums2[len2] ? nums1[len1--] : nums2[len2--] &#125;&#125;; å¤æ‚åº¦åˆ†æï¼š æ—¶é—´å¤æ‚åº¦ä¸º O(m+n) ç©ºé—´å¤æ‚åº¦ä¸º O(1ï¼‰ 14. æœ€é•¿å…¬å…±å‰ç¼€ç¼–å†™ä¸€ä¸ªå‡½æ•°æ¥æŸ¥æ‰¾å­—ç¬¦ä¸²æ•°ç»„ä¸­çš„æœ€é•¿å…¬å…±å‰ç¼€ã€‚ å¦‚æœä¸å­˜åœ¨å…¬å…±å‰ç¼€ï¼Œè¿”å›ç©ºå­—ç¬¦ä¸² â€œâ€ã€‚ç¤ºä¾‹ 1: 12è¾“å…¥: [\"flower\",\"flow\",\"flight\"]è¾“å‡º: \"fl\" ç¤ºä¾‹ 2: 123è¾“å…¥: [\"dog\",\"racecar\",\"car\"]è¾“å‡º: \"\"è§£é‡Š: è¾“å…¥ä¸å­˜åœ¨å…¬å…±å‰ç¼€ã€‚ è§£é¢˜æ€è·¯ï¼š æœ¬é¢˜çš„è§£é¢˜æ–¹æ³•å¾ˆå¤šï¼Œæ¯”å¦‚ï¼š ç›´æ¥é€ä¸ªæ¯”è¾ƒ; å¯»æ‰¾æœ€å¤§å­—ç¬¦ä¸²ä¸æœ€å°å­—ç¬¦ä¸²ï¼Œå°†é—®é¢˜åŒ–è§£ä¸ºæ¯”è¾ƒè¿™ä¸¤ä¸ªå­—ç¬¦ä¸²çš„å¤§å°ï¼ˆace &gt; acd &gt; abc =&gt; è¿™ä¸‰ä¸ªå­—ç¬¦ä¸²çš„æœ€é•¿å…¬å…±å‰ç¼€ä¸€å®šæ˜¯aceä¸abcä¸¤è€…çš„æœ€é•¿å…¬å…±å‰ç¼€ï¼‰ åˆ†æ²»/å½’å¹¶ç­–ç•¥ï¼š å°†é—®é¢˜åˆ†è§£ä¸ºæ¯ä¸¤ä¸ªå­—ç¬¦ä¸²çš„æœ€é•¿å…¬å…±å‰ç¼€ï¼Œå†å½’å¹¶ä¸ºä¸€ï¼Œæ±‚å¾—æœ€åå€¼ã€‚å¦‚ä¸‹å›¾ï¼š åˆ©ç”¨Trie æ ‘ï¼ˆå­—å…¸æ ‘ï¼‰Trie æ ‘ï¼Œä¹Ÿç§°ä¸ºå­—å…¸æ ‘æˆ–å‰ç¼€æ ‘ï¼Œé¡¾åæ€ä¹‰ï¼Œå®ƒæ˜¯ç”¨æ¥å¤„ç†å­—ç¬¦ä¸²åŒ¹é…é—®é¢˜çš„æ•°æ®ç»“æ„ï¼Œä»¥åŠç”¨æ¥è§£å†³é›†åˆä¸­æŸ¥æ‰¾å›ºå®šå‰ç¼€å­—ç¬¦ä¸²çš„æ•°æ®ç»“æ„ã€‚ ä¸‹é¢ä»¥Trieæ ‘æ–¹å¼ä¸ºä¾‹æ¥å®ç°ï¼Œæ€è·¯å¦‚ä¸‹ï¼šæ„å»ºä¸€ä¸ª Trie æ ‘ï¼Œå­—ç¬¦ä¸²æ•°ç»„çš„æœ€é•¿å…¬å…±åºåˆ—å°±ä¸ºä»æ ¹èŠ‚ç‚¹å¼€å§‹éå†æ ‘ï¼Œç›´åˆ°ï¼š éå†èŠ‚ç‚¹å­˜åœ¨è¶…è¿‡ä¸€ä¸ªå­èŠ‚ç‚¹çš„èŠ‚ç‚¹ æˆ–éå†èŠ‚ç‚¹ä¸ºä¸€ä¸ªå­—ç¬¦ä¸²çš„ç»“æŸå­—ç¬¦ ä¸ºæ­¢ï¼Œèµ°è¿‡çš„å­—ç¬¦ä¸ºå­—ç¬¦ä¸²æ•°ç»„çš„æœ€é•¿å…¬å…±å‰ç¼€ã€‚ å¦‚å›¾ï¼Œä»¥[â€œflowerâ€,â€flowâ€,â€flightâ€]ä¸ºä¾‹ï¼Œæœ€ç»ˆç»“æœä¸º&quot;fl&quot; å®ç°ä»£ç ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354var longestCommonPrefix = function (strs) &#123; if (strs === null || strs.length === 0) return \"\"; // åˆå§‹åŒ– Trie æ ‘ let trie = new Trie() // æ„å»º Trie æ ‘ for (let i = 0; i &lt; strs.length; i++) &#123; if (!trie.insert(strs[i])) return \"\" &#125; // è¿”å›æœ€é•¿å…¬å…±å‰ç¼€ return trie.searchLongestPrefix()&#125;;var TrieNode = function () &#123; // next æ”¾å…¥å½“å‰èŠ‚ç‚¹çš„å­èŠ‚ç‚¹ this.next = &#123;&#125;; // å½“å‰æ˜¯å¦æ˜¯ç»“æŸèŠ‚ç‚¹ this.isEnd = false;&#125;;// Trie æ ‘var Trie = function () &#123; this.root = new TrieNode()&#125;;Trie.prototype.insert = function (word) &#123; if (!word) return false let node = this.root for (let i = 0; i &lt; word.length; i++) &#123; if (!node.next[word[i]]) &#123; node.next[word[i]] = new TrieNode() &#125; node = node.next[word[i]] &#125; node.isEnd = true return true&#125;;Trie.prototype.searchLongestPrefix = function () &#123; let node = this.root let prevs = '' while (node.next) &#123; let keys = Object.keys(node.next) if (keys.length !== 1) break; //è¶…è¿‡ä¸€ä¸ªå­èŠ‚ç‚¹çš„èŠ‚ç‚¹ if (node.next[keys[0]].isEnd) &#123; //èŠ‚ç‚¹ä¸ºä¸€ä¸ªå­—ç¬¦ä¸²çš„ç»“æŸå­—ç¬¦ prevs += keys[0] break &#125; prevs += keys[0] node = node.next[keys[0]] &#125; return prevs&#125;const res = longestCommonPrefix([\"flower\", \"flow\", \"flight\"])console.log(res); é“¾è¡¨ç±»å¸¸ç”¨æ–¹æ³•æ€»ç»“ï¼š å¿«æ…¢æŒ‡é’ˆ æ ‡è®°ä½æ³• åˆå¹¶ä¸¤ä¸ªæœ‰åºé“¾è¡¨å°†ä¸¤ä¸ªå‡åºé“¾è¡¨åˆå¹¶ä¸ºä¸€ä¸ªæ–°çš„ å‡åº é“¾è¡¨å¹¶è¿”å›ã€‚æ–°é“¾è¡¨æ˜¯é€šè¿‡æ‹¼æ¥ç»™å®šçš„ä¸¤ä¸ªé“¾è¡¨çš„æ‰€æœ‰èŠ‚ç‚¹ç»„æˆçš„ã€‚ç¤ºä¾‹ï¼š 12è¾“å…¥ï¼š1-&gt;2-&gt;4, 1-&gt;3-&gt;4è¾“å‡ºï¼š1-&gt;1-&gt;2-&gt;3-&gt;4-&gt;4 æ€è·¯ä»é“¾è¡¨å¤´å¼€å§‹æ¯”è¾ƒï¼Œl1 ä¸ l2 æ˜¯æœ‰åºé€’å¢çš„ï¼Œæ‰€ä»¥æ¯”è¾ƒ l1.val ä¸ l2.val çš„è¾ƒå°å€¼å°±æ˜¯åˆå¹¶åé“¾è¡¨çš„æœ€å°å€¼ï¼Œæ¬¡å°å€¼å°±æ˜¯å°èŠ‚ç‚¹çš„ next.val ä¸å¤§èŠ‚ç‚¹çš„ val æ¯”è¾ƒçš„è¾ƒå°å€¼ï¼Œä¾æ¬¡é€’å½’ï¼Œç›´åˆ°é€’å½’åˆ° l1 l2 å‡ä¸º null ç¡®å®šè¾¹ç•Œæ¡ä»¶ï¼š å½“é€’å½’åˆ°ä»»æ„é“¾è¡¨ä¸º null ï¼Œç›´æ¥å°† next æŒ‡å‘å¦å¤–çš„é“¾è¡¨å³å¯ï¼Œä¸éœ€è¦ç»§ç»­é€’å½’äº† ä»£ç å®ç°ï¼š 123456789101112131415function mergeTwoLists(l1, l2) &#123; if(l1 === null) &#123; return l2 &#125; if(l2 === null) &#123; return l1 &#125; if(l1.val &lt;= l2.val) &#123; l1.next = mergeTwoLists(l1.next, l2) return l1 &#125; else &#123; l2.next = mergeTwoLists(l2.next, l1) return l2 &#125;&#125; 141. ç¯å½¢é“¾è¡¨ç»™å®šä¸€ä¸ªé“¾è¡¨ï¼Œåˆ¤æ–­é“¾è¡¨ä¸­æ˜¯å¦æœ‰ç¯ã€‚ ä¸ºäº†è¡¨ç¤ºç»™å®šé“¾è¡¨ä¸­çš„ç¯ï¼Œæˆ‘ä»¬ä½¿ç”¨æ•´æ•° pos æ¥è¡¨ç¤ºé“¾è¡¨å°¾è¿æ¥åˆ°é“¾è¡¨ä¸­çš„ä½ç½®ï¼ˆç´¢å¼•ä» 0 å¼€å§‹ï¼‰ã€‚ å¦‚æœ pos æ˜¯ -1ï¼Œåˆ™åœ¨è¯¥é“¾è¡¨ä¸­æ²¡æœ‰ç¯ã€‚ ç¤ºä¾‹ 1ï¼š 123è¾“å…¥ï¼šhead = [3,2,0,-4], pos = 1è¾“å‡ºï¼štrueè§£é‡Šï¼šé“¾è¡¨ä¸­æœ‰ä¸€ä¸ªç¯ï¼Œå…¶å°¾éƒ¨è¿æ¥åˆ°ç¬¬äºŒä¸ªèŠ‚ç‚¹ã€‚ ç¤ºä¾‹ 2ï¼š 123è¾“å…¥ï¼šhead = [1,2], pos = 0è¾“å‡ºï¼štrueè§£é‡Šï¼šé“¾è¡¨ä¸­æœ‰ä¸€ä¸ªç¯ï¼Œå…¶å°¾éƒ¨è¿æ¥åˆ°ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ã€‚ ç¤ºä¾‹ 3ï¼š 123è¾“å…¥ï¼šhead = [1], pos = -1è¾“å‡ºï¼šfalseè§£é‡Šï¼šé“¾è¡¨ä¸­æ²¡æœ‰ç¯ã€‚ æ–¹æ³•ä¸€ï¼šæ ‡å¿—æ³•ç»™æ¯ä¸ªå·²éå†è¿‡çš„èŠ‚ç‚¹åŠ æ ‡å¿—ä½ï¼Œéå†é“¾è¡¨ï¼Œå½“å‡ºç°ä¸‹ä¸€ä¸ªèŠ‚ç‚¹å·²è¢«æ ‡å¿—æ—¶ï¼Œåˆ™è¯æ˜å•é“¾è¡¨æœ‰ç¯ 12345678910111213141516171819202122/** * Definition for singly-linked list. * function ListNode(val) &#123; * this.val = val; * this.next = null; * &#125; *//** * @param &#123;ListNode&#125; head * @return &#123;boolean&#125; */var hasCycle = function(head) &#123; while(head)&#123; if(head.flag)&#123; return true; &#125; head.flag = 1; head = head.next; &#125; return false&#125;; æ–¹æ³•äºŒï¼š å¿«æ…¢æŒ‡é’ˆæ³•è®¾ç½®å¿«æ…¢ä¸¤ä¸ªæŒ‡é’ˆï¼Œéå†å•é“¾è¡¨ï¼Œå¿«æŒ‡é’ˆä¸€æ¬¡èµ°ä¸¤æ­¥ï¼Œæ…¢æŒ‡é’ˆä¸€æ¬¡èµ°ä¸€æ­¥ï¼Œå¦‚æœå•é“¾è¡¨ä¸­å­˜åœ¨ç¯ï¼Œåˆ™å¿«æ…¢æŒ‡é’ˆç»ˆä¼šæŒ‡å‘åŒä¸€ä¸ªèŠ‚ç‚¹ï¼Œå¦åˆ™ç›´åˆ°å¿«æŒ‡é’ˆæŒ‡å‘ null æ—¶ï¼Œå¿«æ…¢æŒ‡é’ˆéƒ½ä¸å¯èƒ½ç›¸é‡ã€‚ 1234567891011121314var hasCycle = function(head) &#123; if(!head || !head.next) &#123; return false &#125; let fast = head.next.next, slow = head.next; while(fast &amp;&amp; fast.next)&#123; // fast.nextä¸ºnullè¯´æ˜fastæ˜¯é“¾è¡¨ç»ˆç‚¹ï¼Œæ— ç¯ if(fast === slow )&#123; return true &#125; fast = fast.next.next; slow = slow.next; &#125; return false;&#125;; æ–¹æ³•ä¸‰ï¼š åˆ©ç”¨ JSON.stringify() ä¸èƒ½åºåˆ—åŒ–å«æœ‰å¾ªç¯å¼•ç”¨çš„ç»“æ„ 123456789var hasCycle = function(head) &#123; try&#123; JSON.stringify(head); return false; &#125; catch(err)&#123; return true; &#125;&#125;; 142. ç¯å½¢é“¾è¡¨ IIç»™å®šä¸€ä¸ªé“¾è¡¨ï¼Œè¿”å›é“¾è¡¨å¼€å§‹å…¥ç¯çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ã€‚ å¦‚æœé“¾è¡¨æ— ç¯ï¼Œåˆ™è¿”å› nullã€‚ ä¸ºäº†è¡¨ç¤ºç»™å®šé“¾è¡¨ä¸­çš„ç¯ï¼Œæˆ‘ä»¬ä½¿ç”¨æ•´æ•° pos æ¥è¡¨ç¤ºé“¾è¡¨å°¾è¿æ¥åˆ°é“¾è¡¨ä¸­çš„ä½ç½®ï¼ˆç´¢å¼•ä» 0 å¼€å§‹ï¼‰ã€‚ å¦‚æœ pos æ˜¯ -1ï¼Œåˆ™åœ¨è¯¥é“¾è¡¨ä¸­æ²¡æœ‰ç¯ã€‚ è¯´æ˜ï¼šä¸å…è®¸ä¿®æ”¹ç»™å®šçš„é“¾è¡¨ã€‚ è§£é¢˜æ€è·¯ï¼š æœ¬é¢˜ä¸ä¸Šä¸€é¢˜ç±»ä¼¼ï¼Œå¢åŠ çš„éš¾åº¦åœ¨äºéœ€è¦è¿”å›å…¥ç¯ç‚¹ã€‚æ‰€ä»¥æ— æ³•åŸºäºJSON.stringify()æ¥å®ç°äº†ã€‚æ–¹æ³•ä¸€ï¼š æ ‡å¿—æ³•æ­¤æ–¹æ³•å®ç°ä»£ç ä¸ä¸Šä¸€é¢˜åŸºæœ¬ä¸€æ ·ï¼Œåªæ˜¯è¿”å›å€¼æœ‰æ‰€åŒºåˆ«ã€‚ 12345678910111213141516171819202122/** * Definition for singly-linked list. * function ListNode(val) &#123; * this.val = val; * this.next = null; * &#125; *//** * @param &#123;ListNode&#125; head * @return &#123;ListNode&#125; */var detectCycle = function (head) &#123; while(head)&#123; if(head.flag)&#123; return head; &#125; head.flag = 1; head = head.next; &#125; return null;&#125;; æ–¹æ³•äºŒï¼š å¿«æ…¢æŒ‡é’ˆæ³• ä¸Šä¸€é¢˜ä¸­å¿«æ…¢æŒ‡é’ˆç›¸é‡ç‚¹ï¼ˆå³fast === slowï¼‰è‚¯å®šæ˜¯ç¯å†…æŸä¸€ç‚¹ï¼ˆæ³¨æ„ä¸ä¸€å®šæ˜¯å…¥ç¯ç‚¹ï¼Œæ‰€ä»¥æœ¬é¢˜ä¸èƒ½ç›´æ¥è¿”å›è¿™ä¸ªèŠ‚ç‚¹ï¼‰ã€‚ æ‰€ä»¥æ¥ä¸‹å»ä¸»è¦å·¥ä½œæ˜¯å¦‚ä½•åˆ¤æ–­å…¥ç¯ç‚¹ï¼Ÿ åŸºäºä¸Šä¸€é¢˜ï¼Œæˆ‘ä»¬è®¾ç½®fastæŒ‡é’ˆé€Ÿåº¦æ˜¯2ï¼ŒslowæŒ‡é’ˆé€Ÿåº¦æ˜¯1, fasté€Ÿåº¦æ˜¯slowé€Ÿåº¦çš„2å€ï¼Œæ‰€ä»¥æœ€ç»ˆç›¸é‡ï¼ˆfast === slowï¼‰æ—¶ï¼Œfastèµ°çš„è·ç¦»ä¹Ÿæ˜¯slowèµ°çš„è·ç¦»çš„2å€ã€‚å…·ä½“åˆ†æå¦‚ä¸‹ï¼š 123456A - èµ·ç‚¹B - ç¬¬ä¸€æ¬¡ç›¸é‡ç‚¹X - å…¥ç¯ç‚¹d1 - A-Xè·ç¦»d2 - X-Bè·ç¦»d3 - B-Xè·ç¦» æœ€åå¾—å‡ºd1 = d3ã€‚é‚£ä¹ˆå°±å¯ä»¥åœ¨ä¸Šé¢˜åŸºç¡€ä¸Šè¿›è¡Œå¯»æ‰¾å…¥ç¯ç‚¹ï¼š å½“fastå’Œslowåœ¨Bç‚¹ç›¸é‡åï¼Œå°†fasté‡å›Aç‚¹ã€‚å°†ä¸¤ä¸ªæŒ‡é’ˆå‡ä»¥é€Ÿåº¦1å‘å‰èµ°ï¼Œæœ€ç»ˆä¼šåœ¨Xç‚¹ç›¸é‡ï¼ˆè·ç¦»ä¸€æ ·ï¼Œé€Ÿåº¦ä¸€æ ·ï¼Œæ‰€ä»¥åˆ°Xç‚¹çš„æ—¶é—´ä¹Ÿä¸€æ ·ï¼‰ï¼Œç›¸é‡æ—¶è¿”å›èŠ‚ç‚¹å³å¯ã€‚ å®ç°ä»£ç ï¼š 12345678910111213141516171819var detectCycle = function (head) &#123; if(!head || !head.next) &#123; return null &#125; let fast = head.next.next, slow = head.next; while(fast &amp;&amp; fast.next)&#123;//fast.nextä¸ºnullè¯´æ˜fastæ˜¯é“¾è¡¨ç»ˆç‚¹ï¼Œæ— ç¯ if(fast === slow )&#123; fast = head; while(fast !== slow)&#123; fast = fast.next; slow = slow.next; &#125; return slow; &#125; fast = fast.next.next; slow = slow.next; &#125; return null;&#125;; åè½¬é“¾è¡¨è§£é¢˜æ€è·¯ï¼š å®šä¹‰ä¸€ä¸ªåè½¬é“¾è¡¨prev, å¾ªç¯headæŒ‡é’ˆï¼Œå°†å½“å‰headæŒ‡å‘prevï¼Œå®ç°åè½¬æ•ˆæœã€‚ 123456789101112131415161718192021222324/** * Definition for singly-linked list. * function ListNode(val) &#123; * this.val = val; * this.next = null; * &#125; *//** * @param &#123;ListNode&#125; head * @return &#123;ListNode&#125; */var reverseList = function(head) &#123; let prev = null; while(head)&#123; //ä¸´æ—¶å­˜æ”¾ä¸‹ä¸€ä¸ªæŒ‡é’ˆ let next = head.next; //å°†å½“å‰èŠ‚ç‚¹æŒ‡å‘prevï¼Œå®ç°åè½¬æ•ˆæœ head.next = prev; // å˜æ›´prevã€head prev = head; head = next; &#125; return prev;&#125;; å¤æ‚åº¦åˆ†æï¼š æ—¶é—´å¤æ‚åº¦ï¼šO(n) ç©ºé—´å¤æ‚åº¦ï¼šO(1) 19. åˆ é™¤é“¾è¡¨çš„å€’æ•°ç¬¬Nä¸ªèŠ‚ç‚¹ç»™å®šä¸€ä¸ªé“¾è¡¨ï¼Œåˆ é™¤é“¾è¡¨çš„å€’æ•°ç¬¬ n ä¸ªèŠ‚ç‚¹ï¼Œå¹¶ä¸”è¿”å›é“¾è¡¨çš„å¤´ç»“ç‚¹ã€‚ç¤ºä¾‹ï¼š 123ç»™å®šä¸€ä¸ªé“¾è¡¨: 1-&gt;2-&gt;3-&gt;4-&gt;5, å’Œ n = 2.å½“åˆ é™¤äº†å€’æ•°ç¬¬äºŒä¸ªèŠ‚ç‚¹åï¼Œé“¾è¡¨å˜ä¸º 1-&gt;2-&gt;3-&gt;5. è§£é¢˜æ€è·¯ï¼šéœ€è¦åˆ é™¤é“¾è¡¨ä¸­çš„å€’æ•°ç¬¬ n ä¸ªèŠ‚ç‚¹ï¼Œæˆ‘ä»¬éœ€è¦çŸ¥é“çš„å°±æ˜¯å€’æ•°ç¬¬ n+1 ä¸ªèŠ‚ç‚¹ï¼Œç„¶ååˆ é™¤åˆ é™¤å€’æ•°ç¬¬ n+1 èŠ‚ç‚¹çš„åç»§èŠ‚ç‚¹å³å¯. ä½¿ç”¨å¿«æ…¢æŒ‡é’ˆæ€æƒ³æ¥è§£å†³æ­¤é—®é¢˜ï¼š 12345678910111213141516var removeNthFromEnd = function(head, n) &#123; let fast = head, slow = head // å¿«å…ˆèµ° n - 1 æ­¥ while(--n) &#123; fast = fast.next &#125; if(!fast.next) return head.next;//è¯´æ˜åˆ—è¡¨é•¿åº¦ä¸ºn,åˆ é™¤å¤´ç»“ç‚¹ fast = fast.next // fastã€slow ä¸€èµ·å‰è¿› while(fast &amp;&amp; fast.next) &#123; fast = fast.next slow = slow.next &#125; slow.next = slow.next.next return head&#125;; 876. é“¾è¡¨çš„ä¸­é—´ç»“ç‚¹è§£é¢˜æ€è·¯ï¼šä½¿ç”¨å¿«æ…¢æŒ‡é’ˆæ–¹æ³•ï¼š å¿«æŒ‡é’ˆé€Ÿåº¦2ï¼Œæ…¢æŒ‡é’ˆé€Ÿåº¦1ï¼Œå½“å¿«æŒ‡é’ˆåˆ°è¾¾ç»ˆç‚¹æ—¶ï¼Œæ…¢æŒ‡é’ˆåˆšå¥½åœ¨ä¸­é—´èŠ‚ç‚¹ã€‚ 12345678var middleNode = function(head) &#123; let fast = head, slow = head; while(fast &amp;&amp; fast.next)&#123; fast = fast.next.next; slow = slow.next; &#125; return slow;&#125;; å¤æ‚åº¦åˆ†æï¼š æ—¶é—´å¤æ‚åº¦ï¼šO(n) ç©ºé—´å¤æ‚åº¦ï¼šO(1) åŠ¨æ€è§„åˆ’ç±»309. æœ€ä½³ä¹°å–è‚¡ç¥¨æ—¶æœºå«å†·å†»æœŸåˆ†æï¼š ç¬¬iå¤©ä¸»è¦æœ‰ä¸‰ç§æƒ…å†µï¼Œå½“å¤©æ”¶ç›Šå–ä¸‰è€…æœ€å¤§å€¼ï¼š å½“å¤©æŒæœ‰æ­¤è‚¡ç¥¨ï¼Œé‚£ä¹ˆè‚¡ç¥¨å¯èƒ½æ˜¯ï¼ša. å‰ä¸€å¤©å°±æŒæœ‰çš„, å–å€¼(dp[i - 1][0])ï¼Œb. æˆ–è€…å½“å¤©åˆšä¹°çš„,å–å€¼(dp[i - 1][2] - prices[i]))ï¼Œè¿™ç§æƒ…å†µçš„æœ€å¤§æ”¶ç›Šä¸ºï¼š Math.max(dp[i - 1][0], dp[i - 1][2] - prices[i]); å½“å¤©å–å‡ºè‚¡ç¥¨ï¼Œåˆ™æ”¶ç›Šä¸ºå‰ä¸€å¤©çš„æŒæœ‰æ”¶ç›Š + å½“å¤©çš„è‚¡ç¥¨ä»·æ ¼æ”¶ç›Šï¼Œ å³ï¼š dp[i - 1][0] + prices[i]; å½“å¤©æœªæŒæœ‰ï¼Œå¹¶ä¸”å½“å¤©æœªå–å‡ºè¿‡ï¼Œåˆ™æœ‰ä¸¤ç§æƒ…å†µï¼ša. å‰ä¸€å¤©å–å‡ºè¿‡ï¼Œdp[i-1][1]b. å‰ä¸€å¤©æœªå–å‡ºï¼Œ dp[i-1][2]ã€‚è¿™ç§æƒ…å†µçš„æœ€å¤§æ”¶ç›Šä¸ºï¼š Math.max(dp[i - 1][1], dp[i - 1][2]); ç¬¬ä¸€å¤©çš„åˆå§‹å€¼ï¼šdp[0] = [-prices[0], 0, 0]; ä»£ç å®ç°ï¼š 1234567891011121314151617181920/* * æœ€ç»ˆçš„æ”¶ç›Šæ˜¯å½“å¤©çš„ä¸‰ç§æƒ…å†µå–æœ€å¤§ * @param &#123;number[]&#125; prices * @return &#123;number&#125; */var maxProfit = function (prices) &#123; const len = prices.length; if (len &lt; 2) return 0 const dp = []; dp.push([-prices[0], 0, 0]); let t0, t1, t2; for (let i = 1; i &lt; len; i++) &#123; t0 = Math.max(dp[i - 1][0], dp[i - 1][2] - prices[i]); // å½“å¤©æŒæœ‰æ­¤è‚¡ç¥¨ t1 = dp[i - 1][0] + prices[i]; // å½“å¤©æœªæŒæœ‰ï¼Œå¹¶ä¸”å½“å¤©å–å‡º t2 = Math.max(dp[i - 1][1], dp[i - 1][2]); //å½“å¤©æœªæŒæœ‰ï¼Œå¹¶ä¸”ä¸æ˜¯å½“å¤©å–å‡º dp.push([t0, t1, t2]); &#125; return Math.max(...dp.pop())&#125;; é¢è¯•é¢˜ 17.13. æ¢å¤ç©ºæ ¼åˆ†æï¼š éå† sentenceï¼Œå¦‚æœi-1ç»“å°¾çš„å­å­—ç¬¦ä¸² ç­‰äº dictionaryçš„æŸä¸ªword, è¯´æ˜dp[i] å¯ä»¥ç­‰äº dp[i - word.length]ï¼› ä»£ç å®ç°ï¼š 12345678910111213141516171819202122/** * @param &#123;Array&#125; dictionary * @param &#123;String&#125; sentence * @return &#123;number&#125; */const respace = (dictionary, sentence) =&gt; &#123; const len = sentence.length; if (len === 0) return 0; const dp = new Array(len + 1); dp[0] = 0; for (let i = 1; i &lt;= len; i++) &#123; //iä»£è¡¨ Length(sentence) dp[i] = dp[i - 1] + 1; for (const word of dictionary) &#123; if (word === sentence.substring(i - word.length, i)) &#123; dp[i] = Math.min(dp[i], dp[i - word.length]) &#125; &#125; &#125; return dp[len]&#125;; 96. ä¸åŒçš„äºŒå‰æœç´¢æ ‘ æ€è·¯:æ ‡ç­¾ï¼šåŠ¨æ€è§„åˆ’å‡è®¾nä¸ªèŠ‚ç‚¹å­˜åœ¨äºŒå‰æ’åºæ ‘çš„ä¸ªæ•°æ˜¯dp(n)ï¼Œä»¤f(i)ä¸ºä»¥iä¸ºæ ¹çš„äºŒå‰æœç´¢æ ‘çš„ä¸ªæ•°ï¼Œåˆ™dp(n) = f(1) + f(2) + f(3) + f(4) + â€¦ + f(n) å½“iä¸ºæ ¹èŠ‚ç‚¹æ—¶ï¼Œå…¶å·¦å­æ ‘èŠ‚ç‚¹ä¸ªæ•°ä¸ºi-1ä¸ªï¼Œå³å­æ ‘èŠ‚ç‚¹ä¸ºn-iï¼Œåˆ™f(i) = dp(i-1)*dp(n-i) ç»¼åˆä¸¤ä¸ªå…¬å¼å¯ä»¥å¾—åˆ° å¡ç‰¹å…°æ•° å…¬å¼dp(n) = dp(0)dp(n-1)+dp(1)(n-2)+â€¦+dp(n-1)*dp(0) ä»£ç å®ç°ï¼š 1234567891011var numTrees = function (n) &#123; const dp = new Array(n + 1).fill(0); dp[0] = 1; dp[1] = 1; for (let i = 2; i &lt;= n; i++) &#123; for (let j = 1; j &lt;= i; j++) &#123; //ä»¥jä¸ºé¡¶ç‚¹çš„ä¸ªæ•°è®¡ç®— dp[i] += dp[j - 1] * dp[i - j]; &#125; &#125; return dp[n];&#125;","categories":[{"name":"æ•°æ®ç»“æ„ä¸ç®—æ³•","slug":"æ•°æ®ç»“æ„ä¸ç®—æ³•","permalink":"http://blog.kobingo.xyz/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/"}],"tags":[{"name":"LeetCode","slug":"LeetCode","permalink":"http://blog.kobingo.xyz/tags/LeetCode/"}]},{"title":"ä»Chromeæºç çœ‹JS Arrayçš„åº•å±‚å®ç°","slug":"Chromeæºç -array-knowledge","date":"2020-06-17T22:41:59.000Z","updated":"2021-01-19T06:41:41.218Z","comments":true,"path":"Chromeæºç -array-knowledge/","link":"","permalink":"http://blog.kobingo.xyz/Chrome%E6%BA%90%E7%A0%81-array-knowledge/","excerpt":"ä½œä¸ºå‰ç«¯erï¼Œæˆ‘ä»¬éƒ½çŸ¥é“ï¼ŒJS çš„æ•°ç»„å¯ä»¥å­˜æ”¾ä¸åŒç±»å‹çš„å…ƒç´ ã€å¹¶ä¸”æ•°ç»„é•¿åº¦æ˜¯å¯å˜çš„ã€‚ä¸åƒå…¶ä»–çš„è¯­è¨€ï¼Œæ¯”å¦‚Cï¼Œåˆ›å»ºçš„æ—¶å€™è¦å†³å®šæ•°ç»„çš„å¤§å°ï¼Œå¦‚æœæ•°ç»„æ»¡äº†ï¼Œå°±è¦é‡æ–°ç”³è¯·å†…å­˜ç©ºé—´ã€‚ çŸ¥é“å½’çŸ¥é“ï¼Œä½†æ˜¯è¦æƒ³å¼„æ¸…æ¥šå…¶ä¸­åŸå› ï¼Œå°±å¾—ä»Chromeæºç å»æ¢ç©¶äº†ã€‚","text":"ä½œä¸ºå‰ç«¯erï¼Œæˆ‘ä»¬éƒ½çŸ¥é“ï¼ŒJS çš„æ•°ç»„å¯ä»¥å­˜æ”¾ä¸åŒç±»å‹çš„å…ƒç´ ã€å¹¶ä¸”æ•°ç»„é•¿åº¦æ˜¯å¯å˜çš„ã€‚ä¸åƒå…¶ä»–çš„è¯­è¨€ï¼Œæ¯”å¦‚Cï¼Œåˆ›å»ºçš„æ—¶å€™è¦å†³å®šæ•°ç»„çš„å¤§å°ï¼Œå¦‚æœæ•°ç»„æ»¡äº†ï¼Œå°±è¦é‡æ–°ç”³è¯·å†…å­˜ç©ºé—´ã€‚ çŸ¥é“å½’çŸ¥é“ï¼Œä½†æ˜¯è¦æƒ³å¼„æ¸…æ¥šå…¶ä¸­åŸå› ï¼Œå°±å¾—ä»Chromeæºç å»æ¢ç©¶äº†ã€‚ JS Arrayä¸ºä»€ä¹ˆå¯ä»¥ä¿å­˜ä¸åŒç±»å‹å…ˆçœ‹ä¸‹Chrome V8å¯¹JSArrayçš„å®šä¹‰ï¼š 123456789101112131415// The JSArray describes JavaScript Arrays// Such an array can be in one of two modes:// - fast, backing storage is a FixedArray and length &lt;= elements.length();// Please note: push and pop can be used to grow and shrink the array.// - slow, backing storage is a HashTable with numbers as keys.class JSArray: public JSObject &#123; public: // [length]: The length property. DECL_ACCESSORS(length, Object) // ... // Number of element slots to pre-allocate for an empty array. static const int kPreallocatedArrayElements = 4;&#125;; æˆ‘ä»¬å¯ä»¥çœ‹åˆ° JSArray æ˜¯ç»§æ‰¿è‡ª JSObject çš„ï¼Œæ‰€ä»¥åœ¨ JavaScript ä¸­ï¼Œæ•°ç»„å¯ä»¥æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„å¯¹è±¡ï¼Œå†…éƒ¨æ˜¯ä»¥ key-value å½¢å¼å­˜å‚¨æ•°æ®ï¼Œæ‰€ä»¥ JavaScript ä¸­çš„æ•°ç»„å¯ä»¥å­˜æ”¾ä¸åŒç±»å‹çš„å€¼ã€‚ JS Arrayå¦‚ä½•å­˜å‚¨ä»ä¸Šè¿° V8 æºç æ³¨é‡Šä¸­å¯ä»¥çœ‹å‡ºï¼ŒJSArrayæœ‰ä¸¤ç§å­˜å‚¨æ–¹å¼ï¼š fastï¼šå­˜å‚¨ç»“æ„æ˜¯ FixedArray ï¼Œå¹¶ä¸”æ•°ç»„é•¿åº¦ &lt;= elements.length() ï¼Œpush æˆ– pop æ—¶å¯èƒ½ä¼šä¼´éšç€åŠ¨æ€æ‰©å®¹æˆ–å‡å®¹ï¼Œæºç é‡Œå« FastElements; slowï¼šå­˜å‚¨ç»“æ„æ˜¯ HashTableï¼Œå¹¶ä¸”æ•°ç»„ä¸‹æ ‡ä½œä¸º key,æºç é‡Œå« SlowElements; å¿«æ•°ç»„ï¼ˆFastElementsï¼‰FixedArray æ˜¯ V8 å®ç°çš„ä¸€ä¸ªç±»ä¼¼äºæ•°ç»„çš„ç±»ï¼Œå®ƒè¡¨ç¤ºä¸€æ®µè¿ç»­çš„å†…å­˜ï¼Œå¯ä»¥ä½¿ç”¨ç´¢å¼•ç›´æ¥å®šä½ã€‚æ–°åˆ›å»ºçš„ç©ºæ•°ç»„é»˜è®¤å°±æ˜¯å¿«æ•°ç»„ã€‚å½“æ•°ç»„æ»¡ï¼ˆæ•°ç»„çš„é•¿åº¦è¾¾åˆ°æ•°ç»„åœ¨å†…å­˜ä¸­ç”³è¯·çš„å†…å­˜å®¹é‡æœ€å¤§å€¼ï¼‰çš„æ—¶å€™ï¼Œç»§ç»­ push æ—¶ï¼Œ JSArray ä¼šè¿›è¡ŒåŠ¨æ€çš„æ‰©å®¹ï¼Œä»¥å­˜å‚¨æ›´å¤šçš„å…ƒç´ ã€‚ æ…¢æ•°ç»„ï¼ˆSlowElementsï¼‰æ…¢æ•°ç»„ä»¥å“ˆå¸Œè¡¨çš„å½¢å¼å­˜å‚¨åœ¨å†…å­˜ç©ºé—´é‡Œï¼Œå®ƒä¸éœ€è¦å¼€è¾Ÿè¿ç»­çš„å­˜å‚¨ç©ºé—´,èŠ‚çœäº†å†…å­˜ï¼Œä½†éœ€è¦é¢å¤–ç»´æŠ¤ä¸€ä¸ªå“ˆå¸Œè¡¨ï¼Œæ€§èƒ½ç›¸å¯¹è¾ƒå·®ã€‚ ä»€ä¹ˆæ—¶å€™ä¼šä» fast è½¬å˜ä¸º slow 123456789101112131415161718192021222324252627282930313233343536373839404142434445// src/objects/js-objects.hstatic const uint32_t kMaxGap = 1024;// src/objects/dictionary.h// JSObjects prefer dictionary elements if the dictionary saves this much// memory compared to a fast elements backing store.static const uint32_t kPreferFastElementsSizeFactor = 3;// src/objects/js-objects-inl.h// If the fast-case backing storage takes up much more memory than a dictionary// backing storage would, the object should have slow elements.// staticstatic inline bool ShouldConvertToSlowElements(uint32_t used_elements, uint32_t new_capacity) &#123; uint32_t size_threshold = NumberDictionary::kPreferFastElementsSizeFactor * NumberDictionary::ComputeCapacity(used_elements) * NumberDictionary::kEntrySize; // å¿«æ•°ç»„æ–°å®¹é‡æ˜¯æ‰©å®¹åçš„å®¹é‡3å€ä¹‹å¤šæ—¶ï¼Œä¹Ÿä¼šè¢«è½¬æˆæ…¢æ•°ç»„ return size_threshold &lt;= new_capacity;&#125;static inline bool ShouldConvertToSlowElements(JSObject object, uint32_t capacity, uint32_t index, uint32_t* new_capacity) &#123; STATIC_ASSERT(JSObject::kMaxUncheckedOldFastElementsLength &lt;= JSObject::kMaxUncheckedFastElementsLength); if (index &lt; capacity) &#123; *new_capacity = capacity; return false; &#125; // å½“åŠ å…¥çš„ç´¢å¼•å€¼ï¼ˆä¾‹å¦‚ä¾‹3ä¸­çš„2000ï¼‰æ¯”å½“å‰å®¹é‡capacity å¤§äºç­‰äº 1024æ—¶ï¼Œ // è¿”å›trueï¼Œè½¬ä¸ºæ…¢æ•°ç»„ if (index - capacity &gt;= JSObject::kMaxGap) return true; *new_capacity = JSObject::NewElementsCapacity(index + 1); DCHECK_LT(index, *new_capacity); // TODO(ulan): Check if it works with young large objects. if (*new_capacity &lt;= JSObject::kMaxUncheckedOldFastElementsLength || (*new_capacity &lt;= JSObject::kMaxUncheckedFastElementsLength &amp;&amp; ObjectInYoungGeneration(object))) &#123; return false; &#125; return ShouldConvertToSlowElements(object.GetFastElementsUsage(), *new_capacity);&#125; ä»ä¸Šè¿°æºç çœ‹å‡ºï¼Œå½“å¤„äºä»¥ä¸‹æƒ…å†µæ—¶ï¼Œå¿«æ•°ç»„ä¼šè¢«è½¬å˜ä¸ºæ…¢æ•°ç»„ï¼š å½“åŠ å…¥çš„ç´¢å¼•å€¼ index æ¯”å½“å‰å®¹é‡ capacity å·®å€¼å¤§äºç­‰äº 1024 æ—¶ï¼ˆindex - capacity &gt;= 1024ï¼‰ å¿«æ•°ç»„æ–°å®¹é‡æ˜¯æ‰©å®¹åçš„å®¹é‡ 3 å€ä¹‹å¤šæ—¶ å¢åŠ ä¸€ä¸ª2000çš„ç´¢å¼•æ—¶ï¼Œarrayå°±ä¼šè¢«è½¬æˆæ…¢æ•°ç»„: 12var array = [1, 2, 3]array[2000] = 1000; ä»€ä¹ˆæ—¶å€™ä¼šä» slow è½¬å˜ä¸º fast 123456789101112131415161718192021222324static bool ShouldConvertToFastElements(JSObject object, NumberDictionary dictionary, uint32_t index, uint32_t* new_capacity) &#123; // If properties with non-standard attributes or accessors were added, we // cannot go back to fast elements. if (dictionary.requires_slow_elements()) return false; // Adding a property with this index will require slow elements. if (index &gt;= static_cast&lt;uint32_t&gt;(Smi::kMaxValue)) return false; if (object.IsJSArray()) &#123; Object length = JSArray::cast(object).length(); if (!length.IsSmi()) return false; *new_capacity = static_cast&lt;uint32_t&gt;(Smi::ToInt(length)); &#125; else if (object.IsJSArgumentsObject()) &#123; return false; &#125; else &#123; *new_capacity = dictionary.max_number_key() + 1; &#125; *new_capacity = Max(index + 1, *new_capacity); uint32_t dictionary_size = static_cast&lt;uint32_t&gt;(dictionary.Capacity()) * NumberDictionary::kEntrySize; // Turn fast if the dictionary only saves 50% space. return 2 * dictionary_size &gt;= *new_capacity;&#125; å½“æ…¢æ•°ç»„çš„å…ƒç´ å¯å­˜æ”¾åœ¨å¿«æ•°ç»„ä¸­ä¸”é•¿åº¦åœ¨ smi ä¹‹é—´ä¸”ä»…èŠ‚çœäº†50%çš„ç©ºé—´(ç”¨æ…¢æ•°ç»„èŠ‚çœçš„ç©ºé—´ä¸å¤§äº50%),åˆ™ä¼šè½¬å˜ä¸ºå¿«æ•°ç»„ smiåœ¨64ä½å¹³å°ä¸º-231 åˆ° 231 -1ï¼Œåœ¨32ä½å¹³å°ä¸º-230 åˆ° 230 -1 12345let a = [1,2];a[1030] = 1;for (let i = 200; i &lt; 1030; i++) &#123; a[i] = i;&#125; åœ¨ 1030 çš„ä½ç½®ä¸Šé¢æ·»åŠ ä¸€ä¸ªå€¼ï¼Œä¼šé€ æˆå¤šäº 1024 ä¸ªç©ºæ´ï¼Œæ•°ç»„å˜æˆæ…¢æ•°ç»„ï¼›ç„¶åå¾€è¿™ä¸ªæ•°ç»„ä¸­ 200-1029 è¿™äº›ä½ç½®ä¸Šèµ‹å€¼ï¼Œä½¿æ…¢æ•°ç»„ä¸å†æ¯”å¿«æ•°ç»„èŠ‚çœ 50% çš„ç©ºé—´ï¼Œåˆ™æ•°ç»„å˜æˆå¿«æ•°ç»„ã€‚ æ€»ç»“ å¿«æ•°ç»„å°±æ˜¯ä»¥ç©ºé—´æ¢æ—¶é—´çš„æ–¹å¼ï¼Œç”³è¯·äº†å¤§å—è¿ç»­å†…å­˜ï¼Œæé«˜æ•ˆç‡ã€‚ æ…¢æ•°ç»„ä»¥æ—¶é—´æ¢ç©ºé—´ï¼Œä¸å¿…ç”³è¯·è¿ç»­çš„ç©ºé—´ï¼ŒèŠ‚çœäº†å†…å­˜ï¼Œä½†éœ€è¦ä»˜å‡ºæ•ˆç‡å˜å·®çš„ä»£ä»·ã€‚ æ•°ç»„çš„åŠ¨æ€æ‰©å®¹ä¸å‡å®¹é»˜è®¤ç©ºæ•°ç»„åˆå§‹åŒ–å¤§å°ä¸º 4 : 12// Number of element slots to pre-allocate for an empty array.static const int kPreallocatedArrayElements = 4; åœ¨ Chrome æºç ä¸­ï¼Œ push çš„æ“ä½œæ˜¯ç”¨æ±‡ç¼–å®ç°çš„ï¼Œåœ¨ c++ é‡ŒåµŒå…¥çš„æ±‡ç¼–ï¼Œä»¥æé«˜æ‰§è¡Œæ•ˆç‡ï¼Œå¹¶ä¸”åœ¨æ±‡ç¼–çš„åŸºç¡€ä¸Šç”¨ c++ å°è£…äº†ä¸€å±‚ï¼Œåœ¨ç¼–è¯‘æ‰§è¡Œçš„æ—¶å€™ï¼Œä¼šå°†è¿™äº› c++ ä»£ç è½¬æˆæ±‡ç¼–ä»£ç ã€‚ è®¡ç®—æ–°å®¹é‡çš„å‡½æ•°ï¼š 12345678910111213// js-objects.hstatic const uint32_t kMinAddedElementsCapacity = 16;// code-stub-assembler.ccNode* CodeStubAssembler::CalculateNewElementsCapacity(Node* old_capacity, ParameterMode mode) &#123; CSA_SLOW_ASSERT(this, MatchesParameterMode(old_capacity, mode)); Node* half_old_capacity = WordOrSmiShr(old_capacity, 1, mode); Node* new_capacity = IntPtrOrSmiAdd(half_old_capacity, old_capacity, mode); Node* padding = IntPtrOrSmiConstant(JSObject::kMinAddedElementsCapacity, mode); return IntPtrOrSmiAdd(new_capacity, padding, mode);&#125; æ‰€ä»¥æ‰©å®¹åæ–°å®¹é‡è®¡å…¬å¼ä¸ºï¼š 1new_capacity = old_capacity /2 + old_capacity + 16 å³è€çš„å®¹é‡çš„ 1.5 å€åŠ ä¸Š 16 ã€‚åˆå§‹åŒ–ä¸º 4 ä¸ªï¼Œå½“ push ç¬¬ 5 ä¸ªçš„æ—¶å€™ï¼Œå®¹é‡å°†ä¼šå˜æˆï¼š 1new_capacity = 4 / 2 + 4 + 16 = 22 æ¥ç€ç”³è¯·ä¸€å—è¿™ä¹ˆå¤§çš„å†…å­˜ï¼ŒæŠŠè€çš„æ•°æ®æ‹·è¿‡å»ï¼ŒæŠŠæ–°å…ƒç´ æ”¾åœ¨å½“å‰ length ä½ç½®ï¼Œç„¶åå°†æ•°ç»„çš„ length + 1ï¼Œå¹¶è¿”å› lengthã€‚ æ•´ä¸ªè¿‡ç¨‹ï¼Œç”¨æˆ·æ˜¯æ— æ„ŸçŸ¥çš„ï¼Œä¸åƒ Cï¼Œéœ€ç”¨ç”¨æˆ·æ‰‹åŠ¨ç”³è¯·å†…å­˜ç©ºé—´ã€‚ å½“æ•°ç»„æ‰§è¡Œ pop æ“ä½œæ—¶ï¼Œä¼šåˆ¤æ–­ pop åæ•°ç»„çš„å®¹é‡ï¼Œæ˜¯å¦éœ€è¦è¿›è¡Œå‡å®¹ã€‚ ä¸åŒäºæ•°ç»„çš„ push ä½¿ç”¨æ±‡ç¼–å®ç°çš„ï¼Œ pop ä½¿ç”¨ c++ å®ç°çš„ã€‚ åˆ¤æ–­æ˜¯å¦è¿›è¡Œå‡å®¹ï¼š 1234567if (2 * length &lt;= capacity) &#123; // If more than half the elements won't be used, trim the array. isolate-&gt;heap()-&gt;RightTrimFixedArray(*backing_store, capacity - length);&#125; else &#123; // Otherwise, fill the unused tail with holes. BackingStore::cast(*backing_store)-&gt;FillWithHoles(length, old_length);&#125; æ‰€ä»¥ï¼Œå½“æ•°ç»„ pop åï¼Œå¦‚æœæ•°ç»„å®¹é‡å¤§äºç­‰äº length çš„ 2 å€ï¼Œåˆ™è¿›è¡Œå®¹é‡è°ƒæ•´ï¼Œä½¿ç”¨ RightTrimFixedArray å‡½æ•°ï¼Œè®¡ç®—å‡ºéœ€è¦é‡Šæ”¾çš„ç©ºé—´å¤§å°ï¼Œåšå¥½æ ‡è®°ï¼Œç­‰å¾… GC å›æ”¶ï¼›å¦‚æœæ•°ç»„å®¹é‡å°äº length çš„ 2 å€ï¼Œåˆ™ç”¨ holes å¯¹è±¡å¡«å……ã€‚ æ€»ç»“JavaScript ä¸­ï¼Œ JSArray ç»§æ‰¿è‡ª JSObject ï¼Œæ˜¯ä¸€ä¸ªç‰¹æ®Šçš„å¯¹è±¡ï¼Œå†…éƒ¨æ˜¯ä»¥ key-value å½¢å¼å­˜å‚¨æ•°æ®ï¼Œæ‰€ä»¥ JavaScript ä¸­çš„æ•°ç»„å¯ä»¥å­˜æ”¾ä¸åŒç±»å‹çš„å€¼ã€‚ JSArrayæœ‰ä¸¤ç§å­˜å‚¨æ–¹å¼ï¼Œå¿«æ•°ç»„ä¸æ…¢æ•°ç»„ï¼Œåˆå§‹åŒ–ç©ºæ•°ç»„æ—¶ï¼Œä½¿ç”¨å¿«æ•°ç»„ï¼Œå¿«æ•°ç»„ä½¿ç”¨è¿ç»­çš„å†…å­˜ç©ºé—´ï¼Œå½“å¿«æ•°ç»„é•¿åº¦è¾¾åˆ°æœ€å¤§æ—¶ï¼ŒJSArray ä¼šè¿›è¡ŒåŠ¨æ€çš„æ‰©å®¹ï¼Œä»¥å­˜å‚¨æ›´å¤šçš„å…ƒç´ ï¼Œç›¸å¯¹æ…¢æ•°ç»„ï¼Œæ€§èƒ½è¦å¥½å¾—å¤šã€‚ å½“æ•°ç»„ä¸­ hole å¤ªå¤šæ—¶ï¼Œä¼šè½¬å˜æˆæ…¢æ•°ç»„ï¼Œå³ä»¥å“ˆå¸Œè¡¨çš„æ–¹å¼ï¼ˆ key-value çš„å½¢å¼ï¼‰å­˜å‚¨æ•°æ®ï¼Œä»¥èŠ‚çœå†…å­˜ç©ºé—´ã€‚ ä¸€é“é¢è¯•é¢˜ - æ•°ç»„æ‰å¹³åŒ–å‡å¦‚æœ‰ä¸ªæ•°ç»„ï¼š 1var arr = [ [1, 2, 2], [3, 4, [5, 5]], 10] å¦‚ä½•å°†å…¶æ‰å¹³åŒ–ä¸ºï¼š 1[1, 2, 2, 3, 4, 5, 5, 10] æ ¸å¿ƒæ€æƒ³ï¼š éå†æ•°ç»„arrï¼Œè‹¥arr[i]ä¸ºæ•°ç»„åˆ™é€’å½’éå†ï¼Œç›´è‡³arr[i]ä¸ä¸ºæ•°ç»„ç„¶åä¸ä¹‹å‰çš„ç»“æœconcatã€‚ ES6 flat 1arr.flat(Infinity) reduce 12345function flatten(arr) &#123; return arr.reduce((result, item)=&gt; &#123; return result.concat(Array.isArray(item) ? flatten(item) : item); &#125;, []);&#125; toString / join 12345function flatten(arr) &#123; return arr.toString().split(',').map(function(item) &#123; return Number(item); &#125;)&#125; é€’å½’ 1234567891011function flatten(arr) &#123; var res = []; arr.map(item =&gt; &#123; if(Array.isArray(item)) &#123; res = res.concat(flatten(item)); &#125; else &#123; res.push(item); &#125; &#125;); return res;&#125; æ‰©å±•è¿ç®—ç¬¦ es6çš„æ‰©å±•è¿ç®—ç¬¦èƒ½å°†äºŒç»´æ•°ç»„å˜ä¸ºä¸€ç»´ 123456function flatten(arr) &#123; while(arr.some(item=&gt;Array.isArray(item))) &#123; arr = [].concat(...arr); &#125; return arr;&#125; å‚è€ƒé“¾æ¥ï¼šå‰ç«¯è¿›é˜¶ç®—æ³•2ï¼šä»Chrome V8æºç çœ‹JavaScriptæ•°ç»„","categories":[{"name":"Chromeæºç ","slug":"Chromeæºç ","permalink":"http://blog.kobingo.xyz/categories/Chrome%E6%BA%90%E7%A0%81/"}],"tags":[{"name":"array","slug":"array","permalink":"http://blog.kobingo.xyz/tags/array/"}]},{"title":"å¸¸ç”¨ç³»ç»Ÿå‘½ä»¤æ±‡æ€»","slug":"others-å¸¸ç”¨ç³»ç»Ÿå‘½ä»¤æ±‡æ€»","date":"2020-06-12T18:50:05.000Z","updated":"2021-01-19T06:41:41.222Z","comments":true,"path":"others-å¸¸ç”¨ç³»ç»Ÿå‘½ä»¤æ±‡æ€»/","link":"","permalink":"http://blog.kobingo.xyz/others-%E5%B8%B8%E7%94%A8%E7%B3%BB%E7%BB%9F%E5%91%BD%E4%BB%A4%E6%B1%87%E6%80%BB/","excerpt":"å„ä¸ªç³»ç»Ÿå¸¸ç”¨ç»ˆç«¯å‘½ä»¤æ±‡æ€»ä¹‹åœ°","text":"ç«¯å£æ£€æŸ¥ linux 1telnet 192.168.1.102 3306 mac 1nc -vz -w 2 192.168.1.104 3306 æŸ¥çœ‹ç«¯å£å ç”¨ Centos7+ 1234567891011lsof -i tcp:80 # æŸ¥çœ‹80ç«¯å£å ç”¨æƒ…å†µnetstat -ntlp # åˆ—å‡ºæ‰€æœ‰ç«¯å£firewall-cmd --query-port=3306/tcp # æŸ¥è¯¢æ˜¯å¦å¼€å¯3306ç«¯å£firewall-cmd --zone=public --add-port=3306/tcp --permanent # å¼€å¯ç«¯å£firewall-cmd --zone=public --remove-port=3306/tcp --permanent # å…³é—­ç«¯å£firewall-cmd --reload #é‡å¯é˜²ç«å¢™ æ€æ‰è¿›ç¨‹ Centos 123netstat -tpnul # æŸ¥çœ‹å½“å‰æ‰€æœ‰æ­£åœ¨è¿è¡Œçš„è¿›ç¨‹ps aux |grep httpd # æŸ¥çœ‹ httpd è¿›ç¨‹kill -9 6732 # 6732ä¸ºhttpdè¿›ç¨‹å¯¹åº”çš„è¿›ç¨‹ID","categories":[{"name":"others","slug":"others","permalink":"http://blog.kobingo.xyz/categories/others/"}],"tags":[{"name":"å‘½ä»¤","slug":"å‘½ä»¤","permalink":"http://blog.kobingo.xyz/tags/%E5%91%BD%E4%BB%A4/"}]},{"title":"Vulter + v2ray / Trojan ä½¿ç”¨æ•™ç¨‹","slug":"others-v2ray-manual","date":"2020-06-11T18:25:33.000Z","updated":"2021-01-19T06:41:41.222Z","comments":true,"path":"others-v2ray-manual/","link":"","permalink":"http://blog.kobingo.xyz/others-v2ray-manual/","excerpt":"æœ€è¿‘ä¸€ç›´åœ¨ä½¿ç”¨çš„æ¢¯å­æœåŠ¡ä¸´è¿‘åˆ°æœŸï¼Œæƒ³è¦ç»­è´¹å‘ç°ä»·æ ¼åˆæ¶¨äº†ä¸€æ³¢ï¼Œå†åŠ ä¸Šå¹³æ—¶ä½¿ç”¨ä¸­å¹¶ä¸æ˜¯å¾ˆç¨³å®šã€‚å°±èŒç”Ÿäº†è‡ªå»ºä¸€ä¸ªæ¢¯å­çš„æƒ³æ³•ã€‚","text":"æœ€è¿‘ä¸€ç›´åœ¨ä½¿ç”¨çš„æ¢¯å­æœåŠ¡ä¸´è¿‘åˆ°æœŸï¼Œæƒ³è¦ç»­è´¹å‘ç°ä»·æ ¼åˆæ¶¨äº†ä¸€æ³¢ï¼Œå†åŠ ä¸Šå¹³æ—¶ä½¿ç”¨ä¸­å¹¶ä¸æ˜¯å¾ˆç¨³å®šã€‚å°±èŒç”Ÿäº†è‡ªå»ºä¸€ä¸ªæ¢¯å­çš„æƒ³æ³•ã€‚ å‰è¨€è¦æƒ³è‡ªå»ºæ¢¯å­æœ‰ä¸¤ä¸ªå‰æï¼š å¢ƒå¤–VPSæœåŠ¡å™¨(è™šæ‹Ÿä¸“ç”¨æœåŠ¡å™¨) ç§‘å­¦ä¸Šç½‘å·¥å…· VPSæœåŠ¡å™¨å¯¹æ¯”äº†é˜¿é‡Œäº‘å›½é™…ç‰ˆã€è°·æ­Œäº‘ã€AWSç­‰å·¨å¤´äº§å“ï¼Œä»¥åŠVULTRã€æ¬ç“¦å·¥ç­‰æœåŠ¡å•†ï¼Œæœ€ç»ˆé€‰æ‹©äº†VULTRï¼Œä¸»è¦åŸå› åœ¨äºï¼š ä»·æ ¼ä¾¿å®œï¼š æœ€ä¾¿å®œçš„æœ‰$2.5/æœˆçš„æœåŠ¡ï¼Œä»·æ ¼æ˜¯ç‹é“ï¼› æœºæˆ¿ä¼—å¤šï¼šæ‹¥æœ‰æ—¥æœ¬ã€ç¾å›½ã€æ¬§æ´²ç­‰ 17 ä¸ªæœºæˆ¿ï¼› æ¶æ„ä¼˜ç§€ï¼šå…¨éƒ¨é‡‡ç”¨ KVM æ¶æ„ã€SSD å›ºæ€ç¡¬ç›˜ã€500G/æœˆæµé‡èµ·æ­¥ï¼› åå°å¼ºå¤§ ï¼šæ‹¥æœ‰ç³»ç»Ÿå¿«ç…§ã€ä¸€é”®è£…æœºéƒ¨ç½²è„šæœ¬ã€å¤‡ä»½ã€é˜²ç«å¢™ç­‰å¼ºå¤§åŠŸèƒ½ï¼Œä» VPS è¿™ç‚¹ä¸æ¯«ä¸è¾“ç»™é˜¿é‡Œäº‘ã€‚ è®¡è´¹çµæ´» : é‡‡ç”¨å°æ—¶è®¡è´¹æ¨¡å¼ï¼Œå¯ä»¥ä»»æ„çš„æ·»åŠ å’Œåˆ é™¤æœºå™¨ , å¹¶ä¸”æ˜¯å•å‘æµé‡æ”¶è´¹ , ä¹Ÿå°±æ˜¯åªè®¡ç®—ä¸‹è½½çš„çš„æµé‡; æ”¯æŒæ”¯ä»˜å®/å¾®ä¿¡æ”¯ä»˜ï¼Œå›½å†…ç”¨æˆ·è´­ä¹°æ–¹ä¾¿ï¼› æ³¨å†Œè´­ä¹°è¯·è¿›å…¥å®˜ç½‘è‡ªè¡Œæ“ä½œï¼švultrå®˜ç½‘ ç§‘å­¦ä¸Šç½‘å·¥å…·æœ¬æ–‡ä¸»è¦å®ç°v2ray å’Œ Trojan ä¸¤ä¸ªå·¥å…·çš„æ­å»º SSHå…å¯†ç™»å½•vultræœåŠ¡å™¨ åœ¨æœ¬æœºç”Ÿæˆå¯†é’¥ï¼ˆå¦‚æœå·²ç»æœ‰äº†ä¸ç”¨é‡å¤ç”Ÿæˆï¼‰ï¼š 1ssh-keygen -t rsa å°†æœ¬åœ°å…¬é’¥æ‹·è´åˆ°æœåŠ¡å™¨çš„~/.ssh/authorized_keysç›®å½•ä¸­ï¼š 12345678910111213# æ–¹æ³•ä¸€ssh-copy-id user@ip# æ³•äºŒ# å°† æœ¬æœº ~/.sshç›®å½•ä¸­çš„ id_rsa.pub è¿™ä¸ªæ–‡ä»¶æ‹·è´åˆ°æœåŠ¡å™¨ çš„~/.sshç›®å½•ä¸­scp ~/.ssh/id_rsa.pub user@ip:~/.ssh/# åœ¨æœåŠ¡å™¨è¿è¡Œä»¥ä¸‹å‘½ä»¤æ¥å°†å…¬é’¥å¯¼å…¥åˆ°~/.ssh/authorized_keysè¿™ä¸ªæ–‡ä»¶ä¸­cat ~/.ssh/id_rsa.pub &gt;&gt; ~/.ssh/authorized_keys# authorized_keysçš„æƒé™è¦æ˜¯600ã€‚chmod 600 .ssh/authorized_keys user: æœåŠ¡å™¨ç”¨æˆ·åï¼Œé»˜è®¤ä¸ºrootip: æœåŠ¡å™¨å…¬ç½‘IP è‡³æ­¤ï¼Œå°±å¯ä»¥ç”¨ä¸‹é¢å‘½ä»¤å…å¯†ç™»å½•äº†ï¼š 1ssh user@ip v2rayå®‰è£…ä¸é…ç½®ç™»å½•äº†äº‘æœåŠ¡åï¼Œå°±å¯ä»¥å¼€å§‹ä¸‹è½½å®‰è£…v2rayäº†ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š 12345wget https://install.direct/go.shchmod +x go.sh./go.sh æ‰§è¡ŒæˆåŠŸåï¼Œä¼šè¾“å‡º V2Ray v4.24.2 is installed. ç­‰å­—æ ·ã€‚ å®‰è£…V2Rayåï¼Œ ä¼šåœ¨/etc/v2ray/config.jsoné»˜è®¤ç”Ÿæˆé…ç½®æ–‡ä»¶ï¼Œæˆ‘ä»¬éœ€è¦ç¼–è¾‘è¿™ä¸ªæ–‡ä»¶ï¼š 1vi /etc/v2ray/config.json ç„¶åè¿ç»­æŒ‰ d é”®ï¼Œå°†åŸæœ¬çš„æ–‡ä»¶å†…å®¹æ¸…ç©ºï¼Œç„¶åæŒ‰ i é”®å¼€å¯ç¼–è¾‘æ¨¡å¼ï¼Œå¤åˆ¶ä»¥ä¸‹é…ç½® 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081&#123; \"log\": &#123; \"access\": \"/var/log/v2ray/access.log\", \"error\": \"/var/log/v2ray/error.log\", \"loglevel\": \"warning\" &#125;, \"inbound\": &#123; \"port\": 9751, \"protocol\": \"vmess\", \"settings\": &#123; \"clients\": [ &#123; \"id\": \"392029fa-a9e0-42e3-93cb-97a9288795ed\", \"level\": 1, \"alterId\": 100 &#125; ] &#125;, \"streamSettings\": &#123; \"network\": \"tcp\" &#125;, \"detour\": &#123; \"to\": \"vmess-detour-118345\" &#125; &#125;, \"outbound\": &#123; \"protocol\": \"freedom\", \"settings\": &#123;&#125; &#125;, \"inboundDetour\": [ &#123; \"protocol\": \"vmess\", \"port\": \"10000-10010\", \"tag\": \"vmess-detour-118345\", \"settings\": &#123;&#125;, \"allocate\": &#123; \"strategy\": \"random\", \"concurrency\": 5, \"refresh\": 5 &#125;, \"streamSettings\": &#123; \"network\": \"kcp\" &#125; &#125; ], \"outboundDetour\": [ &#123; \"protocol\": \"blackhole\", \"settings\": &#123;&#125;, \"tag\": \"blocked\" &#125; ], \"routing\": &#123; \"strategy\": \"rules\", \"settings\": &#123; \"rules\": [ &#123; \"type\": \"field\", \"ip\": [ \"0.0.0.0/8\", \"10.0.0.0/8\", \"100.64.0.0/10\", \"127.0.0.0/8\", \"169.254.0.0/16\", \"172.16.0.0/12\", \"192.0.0.0/24\", \"192.0.2.0/24\", \"192.168.0.0/16\", \"198.18.0.0/15\", \"198.51.100.0/24\", \"203.0.113.0/24\", \"::1/128\", \"fc00::/7\", \"fe80::/10\" ], \"outboundTag\": \"blocked\" &#125; ] &#125; &#125;&#125; ä¸Šè¿°é…ç½®ä¸­å¯æ ¹æ®è‡ªå·±çš„å–œå¥½è¿›è¡Œç›¸åº”ä¿®æ”¹ï¼Œä¹Ÿå¯ç›´æ¥ä½¿ç”¨ä¸åšä¿®æ”¹ã€‚ ä¿å­˜å¹¶é€€å‡ºç¼–è¾‘æ¨¡å¼ï¼Œå†å¯åŠ¨v2rayæœåŠ¡ï¼ŒæœåŠ¡ç«¯çš„é…ç½®å°±å®Œæˆäº†ã€‚ 1systemctl start v2ray v2rayè¿›ç¨‹ç®¡ç†å‘½ä»¤ï¼š 1234567891011# æŸ¥çœ‹ v2ray è¿›ç¨‹çŠ¶æ€systemctl status v2ray# å¯åŠ¨systemctl start v2ray# é‡å¯systemctl restart v2ray# å…³é—­systemctl stop v2ray é…ç½®é˜²ç«å¢™CentOS 7 ç³»ç»Ÿé»˜è®¤ä¼šå¼€å¯é˜²ç«å¢™ï¼Œéœ€è¦å¼€æ”¾ä¸Šé¢é…ç½®çš„ç«¯å£ï¼š 123firewall-cmd --permanent --add-service=https# æˆ–è€…firewall-cmd --zone=public --add-port=9751/tcp --permanent â€“ zone #ä½œç”¨åŸŸ â€“ add-port=80/tcp #æ·»åŠ ç«¯å£ï¼Œæ ¼å¼ä¸ºï¼šç«¯å£/é€šè®¯åè®® â€“ permanent #æ°¸ä¹…ç”Ÿæ•ˆï¼Œæ²¡æœ‰æ­¤å‚æ•°é‡å¯åå¤±æ•ˆ é˜²ç«å¢™å…¶ä»–ç›¸å…³å‘½ä»¤ï¼š 12345678systemctl status firewalld # æŸ¥çœ‹é˜²ç«å¢™çŠ¶æ€firewall-cmd --reload #é‡å¯firewallsystemctl restart firewalld # é‡å¯2systemctl stop firewalld.service #åœæ­¢firewallsystemctl disable firewalld.service #ç¦æ­¢firewallå¼€æœºå¯åŠ¨firewall-cmd --state #æŸ¥çœ‹é»˜è®¤é˜²ç«å¢™çŠ¶æ€ï¼ˆå…³é—­åæ˜¾ç¤ºnotrunningï¼Œå¼€å¯åæ˜¾ç¤ºrunningï¼‰firewall-cmd --list-ports # æŸ¥çœ‹å·²ç»å¼€æ”¾çš„ç«¯å£ è‡³æ­¤ï¼ŒæœåŠ¡ç«¯éƒ¨åˆ†å°±ç®—å®Œæˆäº†ã€‚ä¸‹é¢å¼€å§‹å®¢æˆ·ç«¯é…ç½®ã€‚ V2Ray å®¢æˆ·ç«¯ Macç«¯ Macç«¯ä½¿ç”¨çš„æ˜¯ClashXå®¢æˆ·ç«¯ã€‚å®‰è£…ä¸‹è½½åæ‰“å¼€é…ç½®æ–‡ä»¶å¤¹ï¼š æ–°å»ºä¸€ä¸ª.yamlé…ç½®æ–‡ä»¶ï¼Œå…·ä½“é…ç½®å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263264265266267268269270271272273274275276277278279280281282283284285286287288289290291292293294295296297298299300301302303304305306307308309310311312313314315316317318319320321322323324325326327328329330331332333334335336337338339340341342343344345346347348349350351352353354355356357358359360361362363364365366367368369370371372373374375376377378379380381382383384385386387388389390391392393394395396397398399400401402403404405406407408409410411412413414415416417418419420421422423424425426427428429430431432433434435436437438439440441442443444445446447448449450451452453454455456457458459460461462463464465466467468469470471472473474475476477478479480481port: 7890socks-port: 7891redir-port: 7892allow-lan: falsemode: Rulelog-level: infoexternal-controller: 127.0.0.1:9090secret: \"\"cfw-bypass: - localhost - 127.* - 10.* - 172.16.* - 172.17.* - 172.18.* - 172.19.* - 172.20.* - 172.21.* - 172.22.* - 172.23.* - 172.24.* - 172.25.* - 172.26.* - 172.27.* - 172.28.* - 172.29.* - 172.30.* - 172.31.* - 192.168.* - &lt;local&gt;cfw-latency-timeout: 3000Proxy: - name: V2-NewJersey type: vmess server: 208.167.222.200 # æœåŠ¡å™¨å…¬ç½‘IP port: \"9751\" # v2rayé…ç½®çš„ç«¯å£ uuid: 392029fa-a9e0-42e3-93cb-97a9288795ed # v2rayçš„uuid alterId: \"100\" # v2rayçš„é¢å¤–ID cipher: auto network: tcp # ä¼ è¾“åè®®Proxy Group: - name: CroLAX type: select proxies: - V2-NewJerseyRule: - DOMAIN,hls.itunes.apple.com,CroLAX - DOMAIN,itunes.apple.com,CroLAX - DOMAIN,itunes.com,CroLAX - DOMAIN-SUFFIX,icloud.com,DIRECT - DOMAIN-SUFFIX,icloud-content.com,DIRECT - DOMAIN-SUFFIX,me.com,DIRECT - DOMAIN-SUFFIX,mzstatic.com,DIRECT - DOMAIN-SUFFIX,akadns.net,DIRECT - DOMAIN-SUFFIX,aaplimg.com,DIRECT - DOMAIN-SUFFIX,cdn-apple.com,DIRECT - DOMAIN-SUFFIX,apple.com,DIRECT ## å›½å†…ç½‘ç«™ - DOMAIN-SUFFIX,cn,DIRECT - DOMAIN-KEYWORD,-cn,DIRECT - DOMAIN-SUFFIX,126.com,DIRECT - DOMAIN-SUFFIX,126.net,DIRECT - DOMAIN-SUFFIX,127.net,DIRECT - DOMAIN-SUFFIX,163.com,DIRECT - DOMAIN-SUFFIX,360buyimg.com,DIRECT - DOMAIN-SUFFIX,36kr.com,DIRECT - DOMAIN-SUFFIX,acfun.tv,DIRECT - DOMAIN-SUFFIX,air-matters.com,DIRECT - DOMAIN-SUFFIX,aixifan.com,DIRECT - DOMAIN-SUFFIX,akamaized.net,DIRECT - DOMAIN-KEYWORD,alicdn,DIRECT - DOMAIN-KEYWORD,alipay,DIRECT - DOMAIN-KEYWORD,taobao,DIRECT - DOMAIN-SUFFIX,amap.com,DIRECT - DOMAIN-SUFFIX,autonavi.com,DIRECT - DOMAIN-KEYWORD,baidu,DIRECT - DOMAIN-SUFFIX,bdimg.com,DIRECT - DOMAIN-SUFFIX,bdstatic.com,DIRECT - DOMAIN-SUFFIX,bilibili.com,DIRECT - DOMAIN-SUFFIX,caiyunapp.com,DIRECT - DOMAIN-SUFFIX,clouddn.com,DIRECT - DOMAIN-SUFFIX,cnbeta.com,DIRECT - DOMAIN-SUFFIX,cnbetacdn.com,DIRECT - DOMAIN-SUFFIX,cootekservice.com,DIRECT - DOMAIN-SUFFIX,csdn.net,DIRECT - DOMAIN-SUFFIX,ctrip.com,DIRECT - DOMAIN-SUFFIX,dgtle.com,DIRECT - DOMAIN-SUFFIX,dianping.com,DIRECT - DOMAIN-SUFFIX,douban.com,DIRECT - DOMAIN-SUFFIX,doubanio.com,DIRECT - DOMAIN-SUFFIX,duokan.com,DIRECT - DOMAIN-SUFFIX,easou.com,DIRECT - DOMAIN-SUFFIX,ele.me,DIRECT - DOMAIN-SUFFIX,feng.com,DIRECT - DOMAIN-SUFFIX,fir.im,DIRECT - DOMAIN-SUFFIX,frdic.com,DIRECT - DOMAIN-SUFFIX,g-cores.com,DIRECT - DOMAIN-SUFFIX,godic.net,DIRECT - DOMAIN-SUFFIX,gtimg.com,DIRECT - DOMAIN-SUFFIX,hongxiu.com,DIRECT - DOMAIN-SUFFIX,hxcdn.net,DIRECT - DOMAIN-SUFFIX,iciba.com,DIRECT - DOMAIN-SUFFIX,ifeng.com,DIRECT - DOMAIN-SUFFIX,ifengimg.com,DIRECT - DOMAIN-SUFFIX,ipip.net,DIRECT - DOMAIN-SUFFIX,iqiyi.com,DIRECT - DOMAIN-SUFFIX,jd.com,DIRECT - DOMAIN-SUFFIX,jianshu.com,DIRECT - DOMAIN-SUFFIX,knewone.com,DIRECT - DOMAIN-SUFFIX,le.com,DIRECT - DOMAIN-SUFFIX,lecloud.com,DIRECT - DOMAIN-SUFFIX,lemicp.com,DIRECT - DOMAIN-SUFFIX,licdn.com,DIRECT - DOMAIN-SUFFIX,linkedin.com,DIRECT - DOMAIN-SUFFIX,luoo.net,DIRECT - DOMAIN-SUFFIX,meituan.com,DIRECT - DOMAIN-SUFFIX,meituan.net,DIRECT - DOMAIN-SUFFIX,mi.com,DIRECT - DOMAIN-SUFFIX,miaopai.com,DIRECT - DOMAIN-SUFFIX,microsoft.com,DIRECT - DOMAIN-SUFFIX,microsoftonline.com,DIRECT - DOMAIN-SUFFIX,miui.com,DIRECT - DOMAIN-SUFFIX,miwifi.com,DIRECT - DOMAIN-SUFFIX,mob.com,DIRECT - DOMAIN-SUFFIX,netease.com,DIRECT - DOMAIN-SUFFIX,office.com,DIRECT - DOMAIN-KEYWORD,officecdn,DIRECT - DOMAIN-SUFFIX,office365.com,DIRECT - DOMAIN-SUFFIX,oschina.net,DIRECT - DOMAIN-SUFFIX,ppsimg.com,DIRECT - DOMAIN-SUFFIX,pstatp.com,DIRECT - DOMAIN-SUFFIX,qcloud.com,DIRECT - DOMAIN-SUFFIX,qdaily.com,DIRECT - DOMAIN-SUFFIX,qdmm.com,DIRECT - DOMAIN-SUFFIX,qhimg.com,DIRECT - DOMAIN-SUFFIX,qhres.com,DIRECT - DOMAIN-SUFFIX,qidian.com,DIRECT - DOMAIN-SUFFIX,qihucdn.com,DIRECT - DOMAIN-SUFFIX,qiniu.com,DIRECT - DOMAIN-SUFFIX,qiniucdn.com,DIRECT - DOMAIN-SUFFIX,qiyipic.com,DIRECT - DOMAIN-SUFFIX,qq.com,DIRECT - DOMAIN-SUFFIX,qqurl.com,DIRECT - DOMAIN-SUFFIX,rarbg.to,DIRECT - DOMAIN-SUFFIX,ruguoapp.com,DIRECT - DOMAIN-SUFFIX,segmentfault.com,DIRECT - DOMAIN-SUFFIX,sinaapp.com,DIRECT - DOMAIN-SUFFIX,smzdm.com,DIRECT - DOMAIN-SUFFIX,sogou.com,DIRECT - DOMAIN-SUFFIX,sogoucdn.com,DIRECT - DOMAIN-SUFFIX,sohu.com,DIRECT - DOMAIN-SUFFIX,soku.com,DIRECT - DOMAIN-SUFFIX,speedtest.net,DIRECT - DOMAIN-SUFFIX,sspai.com,DIRECT - DOMAIN-SUFFIX,suning.com,DIRECT - DOMAIN-SUFFIX,taobao.com,DIRECT - DOMAIN-SUFFIX,tencent.com,DIRECT - DOMAIN-SUFFIX,tenpay.com,DIRECT - DOMAIN-SUFFIX,tianyancha.com,DIRECT - DOMAIN-SUFFIX,tmall.com,DIRECT - DOMAIN-SUFFIX,tudou.com,DIRECT - DOMAIN-SUFFIX,umetrip.com,DIRECT - DOMAIN-SUFFIX,upaiyun.com,DIRECT - DOMAIN-SUFFIX,upyun.com,DIRECT - DOMAIN-SUFFIX,v2ex.com,DIRECT - DOMAIN-SUFFIX,veryzhun.com,DIRECT - DOMAIN-SUFFIX,weather.com,DIRECT - DOMAIN-SUFFIX,weibo.com,DIRECT - DOMAIN-SUFFIX,xiami.com,DIRECT - DOMAIN-SUFFIX,xiami.net,DIRECT - DOMAIN-SUFFIX,xiaomicp.com,DIRECT - DOMAIN-SUFFIX,ximalaya.com,DIRECT - DOMAIN-SUFFIX,xmcdn.com,DIRECT - DOMAIN-SUFFIX,xunlei.com,DIRECT - DOMAIN-SUFFIX,yhd.com,DIRECT - DOMAIN-SUFFIX,yihaodianimg.com,DIRECT - DOMAIN-SUFFIX,yinxiang.com,DIRECT - DOMAIN-SUFFIX,ykimg.com,DIRECT - DOMAIN-SUFFIX,youdao.com,DIRECT - DOMAIN-SUFFIX,youku.com,DIRECT - DOMAIN-SUFFIX,zealer.com,DIRECT - DOMAIN-SUFFIX,zhihu.com,DIRECT - DOMAIN-SUFFIX,zhimg.com,DIRECT - DOMAIN-SUFFIX,zimuzu.tv,DIRECT - DOMAIN-KEYWORD,netflix,CroLAX - DOMAIN-KEYWORD,nflx,CroLAX ## æŠ— DNS æ±¡æŸ“ - DOMAIN-KEYWORD,amazon,CroLAX - DOMAIN-KEYWORD,google,CroLAX - DOMAIN-KEYWORD,gmail,CroLAX - DOMAIN-KEYWORD,youtube,CroLAX - DOMAIN-KEYWORD,facebook,CroLAX - DOMAIN-SUFFIX,fb.me,CroLAX - DOMAIN-SUFFIX,fbcdn.net,CroLAX - DOMAIN-KEYWORD,twitter,CroLAX - DOMAIN-KEYWORD,instagram,CroLAX - DOMAIN-KEYWORD,dropbox,CroLAX - DOMAIN-SUFFIX,twimg.com,CroLAX - DOMAIN-KEYWORD,blogspot,CroLAX - DOMAIN-SUFFIX,youtu.be,CroLAX - DOMAIN-KEYWORD,whatsapp,CroLAX ## å›½å¤–ç½‘ç«™ - DOMAIN-SUFFIX,9to5mac.com,CroLAX - DOMAIN-SUFFIX,abpchina.org,CroLAX - DOMAIN-SUFFIX,adblockplus.org,CroLAX - DOMAIN-SUFFIX,adobe.com,CroLAX - DOMAIN-SUFFIX,alfredapp.com,CroLAX - DOMAIN-SUFFIX,amplitude.com,CroLAX - DOMAIN-SUFFIX,ampproject.org,CroLAX - DOMAIN-SUFFIX,android.com,CroLAX - DOMAIN-SUFFIX,angularjs.org,CroLAX - DOMAIN-SUFFIX,aolcdn.com,CroLAX - DOMAIN-SUFFIX,apkpure.com,CroLAX - DOMAIN-SUFFIX,appledaily.com,CroLAX - DOMAIN-SUFFIX,appshopper.com,CroLAX - DOMAIN-SUFFIX,appspot.com,CroLAX - DOMAIN-SUFFIX,arcgis.com,CroLAX - DOMAIN-SUFFIX,archive.org,CroLAX - DOMAIN-SUFFIX,armorgames.com,CroLAX - DOMAIN-SUFFIX,aspnetcdn.com,CroLAX - DOMAIN-SUFFIX,att.com,CroLAX - DOMAIN-SUFFIX,awsstatic.com,CroLAX - DOMAIN-SUFFIX,azureedge.net,CroLAX - DOMAIN-SUFFIX,azurewebsites.net,CroLAX - DOMAIN-SUFFIX,bing.com,CroLAX - DOMAIN-SUFFIX,bintray.com,CroLAX - DOMAIN-SUFFIX,bit.com,CroLAX - DOMAIN-SUFFIX,bit.ly,CroLAX - DOMAIN-SUFFIX,bitbucket.org,CroLAX - DOMAIN-SUFFIX,bjango.com,CroLAX - DOMAIN-SUFFIX,bkrtx.com,CroLAX - DOMAIN-SUFFIX,blog.com,CroLAX - DOMAIN-SUFFIX,blogcdn.com,CroLAX - DOMAIN-SUFFIX,blogger.com,CroLAX - DOMAIN-SUFFIX,blogsmithmedia.com,CroLAX - DOMAIN-SUFFIX,blogspot.com,CroLAX - DOMAIN-SUFFIX,blogspot.hk,CroLAX - DOMAIN-SUFFIX,bloomberg.com,CroLAX - DOMAIN-SUFFIX,box.com,CroLAX - DOMAIN-SUFFIX,box.net,CroLAX - DOMAIN-SUFFIX,cachefly.net,CroLAX - DOMAIN-SUFFIX,chromium.org,CroLAX - DOMAIN-SUFFIX,cl.ly,CroLAX - DOMAIN-SUFFIX,cloudflare.com,CroLAX - DOMAIN-SUFFIX,cloudfront.net,CroLAX - DOMAIN-SUFFIX,cloudmagic.com,CroLAX - DOMAIN-SUFFIX,cmail19.com,CroLAX - DOMAIN-SUFFIX,cnet.com,CroLAX - DOMAIN-SUFFIX,cocoapods.org,CroLAX - DOMAIN-SUFFIX,comodoca.com,CroLAX - DOMAIN-SUFFIX,crashlytics.com,CroLAX - DOMAIN-SUFFIX,culturedcode.com,CroLAX - DOMAIN-SUFFIX,d.pr,CroLAX - DOMAIN-SUFFIX,danilo.to,CroLAX - DOMAIN-SUFFIX,dayone.me,CroLAX - DOMAIN-SUFFIX,db.tt,CroLAX - DOMAIN-SUFFIX,deskconnect.com,CroLAX - DOMAIN-SUFFIX,disq.us,CroLAX - DOMAIN-SUFFIX,disqus.com,CroLAX - DOMAIN-SUFFIX,disquscdn.com,CroLAX - DOMAIN-SUFFIX,dnsimple.com,CroLAX - DOMAIN-SUFFIX,docker.com,CroLAX - DOMAIN-SUFFIX,dribbble.com,CroLAX - DOMAIN-SUFFIX,droplr.com,CroLAX - DOMAIN-SUFFIX,duckduckgo.com,CroLAX - DOMAIN-SUFFIX,dueapp.com,CroLAX - DOMAIN-SUFFIX,dytt8.net,CroLAX - DOMAIN-SUFFIX,edgecastcdn.net,CroLAX - DOMAIN-SUFFIX,edgekey.net,CroLAX - DOMAIN-SUFFIX,edgesuite.net,CroLAX - DOMAIN-SUFFIX,engadget.com,CroLAX - DOMAIN-SUFFIX,entrust.net,CroLAX - DOMAIN-SUFFIX,eurekavpt.com,CroLAX - DOMAIN-SUFFIX,evernote.com,CroLAX - DOMAIN-SUFFIX,fabric.io,CroLAX - DOMAIN-SUFFIX,fast.com,CroLAX - DOMAIN-SUFFIX,fastly.net,CroLAX - DOMAIN-SUFFIX,fc2.com,CroLAX - DOMAIN-SUFFIX,feedburner.com,CroLAX - DOMAIN-SUFFIX,feedly.com,CroLAX - DOMAIN-SUFFIX,feedsportal.com,CroLAX - DOMAIN-SUFFIX,fiftythree.com,CroLAX - DOMAIN-SUFFIX,firebaseio.com,CroLAX - DOMAIN-SUFFIX,flexibits.com,CroLAX - DOMAIN-SUFFIX,flickr.com,CroLAX - DOMAIN-SUFFIX,flipboard.com,CroLAX - DOMAIN-SUFFIX,g.co,CroLAX - DOMAIN-SUFFIX,gabia.net,CroLAX - DOMAIN-SUFFIX,geni.us,CroLAX - DOMAIN-SUFFIX,gfx.ms,CroLAX - DOMAIN-SUFFIX,ggpht.com,CroLAX - DOMAIN-SUFFIX,ghostnoteapp.com,CroLAX - DOMAIN-SUFFIX,git.io,CroLAX - DOMAIN-KEYWORD,github,CroLAX - DOMAIN-SUFFIX,globalsign.com,CroLAX - DOMAIN-SUFFIX,gmodules.com,CroLAX - DOMAIN-SUFFIX,godaddy.com,CroLAX - DOMAIN-SUFFIX,golang.org,CroLAX - DOMAIN-SUFFIX,gongm.in,CroLAX - DOMAIN-SUFFIX,goo.gl,CroLAX - DOMAIN-SUFFIX,goodreaders.com,CroLAX - DOMAIN-SUFFIX,goodreads.com,CroLAX - DOMAIN-SUFFIX,gravatar.com,CroLAX - DOMAIN-SUFFIX,gstatic.com,CroLAX - DOMAIN-SUFFIX,gvt0.com,CroLAX - DOMAIN-SUFFIX,hockeyapp.net,CroLAX - DOMAIN-SUFFIX,hotmail.com,CroLAX - DOMAIN-SUFFIX,icons8.com,CroLAX - DOMAIN-SUFFIX,ift.tt,CroLAX - DOMAIN-SUFFIX,ifttt.com,CroLAX - DOMAIN-SUFFIX,iherb.com,CroLAX - DOMAIN-SUFFIX,imageshack.us,CroLAX - DOMAIN-SUFFIX,img.ly,CroLAX - DOMAIN-SUFFIX,imgur.com,CroLAX - DOMAIN-SUFFIX,imore.com,CroLAX - DOMAIN-SUFFIX,instapaper.com,CroLAX - DOMAIN-SUFFIX,ipn.li,CroLAX - DOMAIN-SUFFIX,is.gd,CroLAX - DOMAIN-SUFFIX,issuu.com,CroLAX - DOMAIN-SUFFIX,itgonglun.com,CroLAX - DOMAIN-SUFFIX,itun.es,CroLAX - DOMAIN-SUFFIX,ixquick.com,CroLAX - DOMAIN-SUFFIX,j.mp,CroLAX - DOMAIN-SUFFIX,js.revsci.net,CroLAX - DOMAIN-SUFFIX,jshint.com,CroLAX - DOMAIN-SUFFIX,jtvnw.net,CroLAX - DOMAIN-SUFFIX,justgetflux.com,CroLAX - DOMAIN-SUFFIX,kat.cr,CroLAX - DOMAIN-SUFFIX,klip.me,CroLAX - DOMAIN-SUFFIX,libsyn.com,CroLAX - DOMAIN-SUFFIX,linode.com,CroLAX - DOMAIN-SUFFIX,lithium.com,CroLAX - DOMAIN-SUFFIX,littlehj.com,CroLAX - DOMAIN-SUFFIX,live.com,CroLAX - DOMAIN-SUFFIX,live.net,CroLAX - DOMAIN-SUFFIX,livefilestore.com,CroLAX - DOMAIN-SUFFIX,llnwd.net,CroLAX - DOMAIN-SUFFIX,macid.co,CroLAX - DOMAIN-SUFFIX,macromedia.com,CroLAX - DOMAIN-SUFFIX,macrumors.com,CroLAX - DOMAIN-SUFFIX,mashable.com,CroLAX - DOMAIN-SUFFIX,mathjax.org,CroLAX - DOMAIN-SUFFIX,medium.com,CroLAX - DOMAIN-SUFFIX,mega.co.nz,CroLAX - DOMAIN-SUFFIX,mega.nz,CroLAX - DOMAIN-SUFFIX,megaupload.com,CroLAX - DOMAIN-SUFFIX,microsofttranslator.com,CroLAX - DOMAIN-SUFFIX,mindnode.com,CroLAX - DOMAIN-SUFFIX,mobile01.com,CroLAX - DOMAIN-SUFFIX,modmyi.com,CroLAX - DOMAIN-SUFFIX,msedge.net,CroLAX - DOMAIN-SUFFIX,myfontastic.com,CroLAX - DOMAIN-SUFFIX,name.com,CroLAX - DOMAIN-SUFFIX,nextmedia.com,CroLAX - DOMAIN-SUFFIX,nsstatic.net,CroLAX - DOMAIN-SUFFIX,nssurge.com,CroLAX - DOMAIN-SUFFIX,nyt.com,CroLAX - DOMAIN-SUFFIX,nytimes.com,CroLAX - DOMAIN-SUFFIX,omnigroup.com,CroLAX - DOMAIN-SUFFIX,onedrive.com,CroLAX - DOMAIN-SUFFIX,onenote.com,CroLAX - DOMAIN-SUFFIX,ooyala.com,CroLAX - DOMAIN-SUFFIX,openvpn.net,CroLAX - DOMAIN-SUFFIX,openwrt.org,CroLAX - DOMAIN-SUFFIX,orkut.com,CroLAX - DOMAIN-SUFFIX,osxdaily.com,CroLAX - DOMAIN-SUFFIX,outlook.com,CroLAX - DOMAIN-SUFFIX,ow.ly,CroLAX - DOMAIN-SUFFIX,paddleapi.com,CroLAX - DOMAIN-SUFFIX,parallels.com,CroLAX - DOMAIN-SUFFIX,parse.com,CroLAX - DOMAIN-SUFFIX,pdfexpert.com,CroLAX - DOMAIN-SUFFIX,periscope.tv,CroLAX - DOMAIN-SUFFIX,pinboard.in,CroLAX - DOMAIN-SUFFIX,pinterest.com,CroLAX - DOMAIN-SUFFIX,pixelmator.com,CroLAX - DOMAIN-SUFFIX,pixiv.net,CroLAX - DOMAIN-SUFFIX,playpcesor.com,CroLAX - DOMAIN-SUFFIX,playstation.com,CroLAX - DOMAIN-SUFFIX,playstation.com.hk,CroLAX - DOMAIN-SUFFIX,playstation.net,CroLAX - DOMAIN-SUFFIX,playstationnetwork.com,CroLAX - DOMAIN-SUFFIX,pushwoosh.com,CroLAX - DOMAIN-SUFFIX,rime.im,CroLAX - DOMAIN-SUFFIX,servebom.com,CroLAX - DOMAIN-SUFFIX,sfx.ms,CroLAX - DOMAIN-SUFFIX,shadowsocks.org,CroLAX - DOMAIN-SUFFIX,sharethis.com,CroLAX - DOMAIN-SUFFIX,shazam.com,CroLAX - DOMAIN-SUFFIX,skype.com,CroLAX - DOMAIN-SUFFIX,smartdnsProxy.com,CroLAX - DOMAIN-SUFFIX,smartmailcloud.com,CroLAX - DOMAIN-SUFFIX,sndcdn.com,CroLAX - DOMAIN-SUFFIX,sony.com,CroLAX - DOMAIN-SUFFIX,soundcloud.com,CroLAX - DOMAIN-SUFFIX,sourceforge.net,CroLAX - DOMAIN-SUFFIX,spotify.com,CroLAX - DOMAIN-SUFFIX,squarespace.com,CroLAX - DOMAIN-SUFFIX,sstatic.net,CroLAX - DOMAIN-SUFFIX,st.luluku.pw,CroLAX - DOMAIN-SUFFIX,stackoverflow.com,CroLAX - DOMAIN-SUFFIX,startpage.com,CroLAX - DOMAIN-SUFFIX,staticflickr.com,CroLAX - DOMAIN-SUFFIX,steamcommunity.com,CroLAX - DOMAIN-SUFFIX,symauth.com,CroLAX - DOMAIN-SUFFIX,symcb.com,CroLAX - DOMAIN-SUFFIX,symcd.com,CroLAX - DOMAIN-SUFFIX,tapbots.com,CroLAX - DOMAIN-SUFFIX,tapbots.net,CroLAX - DOMAIN-SUFFIX,tdesktop.com,CroLAX - DOMAIN-SUFFIX,techcrunch.com,CroLAX - DOMAIN-SUFFIX,techsmith.com,CroLAX - DOMAIN-SUFFIX,thepiratebay.org,CroLAX - DOMAIN-SUFFIX,theverge.com,CroLAX - DOMAIN-SUFFIX,time.com,CroLAX - DOMAIN-SUFFIX,timeinc.net,CroLAX - DOMAIN-SUFFIX,tiny.cc,CroLAX - DOMAIN-SUFFIX,tinypic.com,CroLAX - DOMAIN-SUFFIX,tmblr.co,CroLAX - DOMAIN-SUFFIX,todoist.com,CroLAX - DOMAIN-SUFFIX,trello.com,CroLAX - DOMAIN-SUFFIX,trustasiassl.com,CroLAX - DOMAIN-SUFFIX,tumblr.co,CroLAX - DOMAIN-SUFFIX,tumblr.com,CroLAX - DOMAIN-SUFFIX,tweetdeck.com,CroLAX - DOMAIN-SUFFIX,tweetmarker.net,CroLAX - DOMAIN-SUFFIX,twitch.tv,CroLAX - DOMAIN-SUFFIX,txmblr.com,CroLAX - DOMAIN-SUFFIX,typekit.net,CroLAX - DOMAIN-SUFFIX,ubertags.com,CroLAX - DOMAIN-SUFFIX,ublock.org,CroLAX - DOMAIN-SUFFIX,ubnt.com,CroLAX - DOMAIN-SUFFIX,ulyssesapp.com,CroLAX - DOMAIN-SUFFIX,urchin.com,CroLAX - DOMAIN-SUFFIX,usertrust.com,CroLAX - DOMAIN-SUFFIX,v.gd,CroLAX - DOMAIN-SUFFIX,vimeo.com,CroLAX - DOMAIN-SUFFIX,vimeocdn.com,CroLAX - DOMAIN-SUFFIX,vine.co,CroLAX - DOMAIN-SUFFIX,vivaldi.com,CroLAX - DOMAIN-SUFFIX,vox-cdn.com,CroLAX - DOMAIN-SUFFIX,vsco.co,CroLAX - DOMAIN-SUFFIX,vultr.com,CroLAX - DOMAIN-SUFFIX,w.org,CroLAX - DOMAIN-SUFFIX,w3schools.com,CroLAX - DOMAIN-SUFFIX,webtype.com,CroLAX - DOMAIN-SUFFIX,wikiwand.com,CroLAX - DOMAIN-SUFFIX,wikileaks.org,CroLAX - DOMAIN-SUFFIX,wikimedia.org,CroLAX - DOMAIN-SUFFIX,wikipedia.com,CroLAX - DOMAIN-SUFFIX,wikipedia.org,CroLAX - DOMAIN-SUFFIX,windows.com,CroLAX - DOMAIN-SUFFIX,windows.net,CroLAX - DOMAIN-SUFFIX,wire.com,CroLAX - DOMAIN-SUFFIX,wordpress.com,CroLAX - DOMAIN-SUFFIX,workflowy.com,CroLAX - DOMAIN-SUFFIX,wp.com,CroLAX - DOMAIN-SUFFIX,wsj.com,CroLAX - DOMAIN-SUFFIX,wsj.net,CroLAX - DOMAIN-SUFFIX,xda-developers.com,CroLAX - DOMAIN-SUFFIX,xeeno.com,CroLAX - DOMAIN-SUFFIX,xiti.com,CroLAX - DOMAIN-SUFFIX,yahoo.com,CroLAX - DOMAIN-SUFFIX,yimg.com,CroLAX - DOMAIN-SUFFIX,ying.com,CroLAX - DOMAIN-SUFFIX,yoyo.org,CroLAX - DOMAIN-SUFFIX,ytimg.com,CroLAX - DOMAIN-SUFFIX,telegram.me,CroLAX - IP-CIDR,91.108.4.0/22,CroLAX - IP-CIDR,91.108.8.0/22,CroLAX - IP-CIDR,91.108.56.0/22,CroLAX - IP-CIDR,109.239.140.0/24,CroLAX - IP-CIDR,149.154.160.0/20,CroLAX - IP-CIDR,127.0.0.0/8,DIRECT - IP-CIDR,172.16.0.0/12,DIRECT - IP-CIDR,192.168.0.0/16,DIRECT - IP-CIDR,10.0.0.0/8,DIRECT - IP-CIDR,17.0.0.0/8,DIRECT - IP-CIDR,100.64.0.0/10,DIRECT - GEOIP,CN,DIRECT - MATCH,,CroLAX ä¸»è¦å…³æ³¨æ³¨é‡Šä»£ç éƒ¨åˆ†ï¼Œæ›´åŠ è¯¦ç»†çš„ClashXé…ç½®è¯´æ˜è¯·å‚åŠ  æ­¤æ–‡ã€‚ windowsç«¯ windowsç«¯ä½¿ç”¨v2rayNè½¯ä»¶ï¼Œå®‰è£…åç‚¹å‡»æœåŠ¡å™¨ -&gt; æ·»åŠ [VMess]æœåŠ¡å™¨, å…·ä½“é…ç½®å¦‚ä¸‹ï¼š é…ç½® BBR åŠ é€ŸTCP BBR æ˜¯è°·æ­Œåœ¨ 2016 å¹´ 9 æœˆå¼€æºçš„ä¸€ä¸ªä¼˜åŒ– TCP æ‹¥å¡çš„ç®—æ³•ï¼Œå¹¶ä¸” Linux å†…æ ¸ä» 4.9 ç‰ˆæœ¬å¼€å§‹é›†æˆè¯¥ç®—æ³•ï¼Œæ®å¤šæ–¹ç½‘å‹åé¦ˆï¼Œç½‘é€Ÿç”šè‡³å¯ä»¥æå‡å¥½å‡ ä¸ªæ•°é‡çº§ï¼Œ ä¸€èˆ¬æ–°ç‰ˆçš„Linuxæ“ä½œç³»ç»Ÿä»¥åŠè‡ªå¸¦äº†BBRï¼Œä¸éœ€è¦æ‰‹åŠ¨å®‰è£…ï¼Œå¦‚æœæ˜¯è€ç³»ç»Ÿï¼Œå¯ä»¥æ‰§è¡Œä¸‹é¢å‘½ä»¤ï¼š 12345678# ä¸‹è½½è„šæœ¬wget --no-check-certificate https://github.com/teddysun/across/raw/master/bbr.sh# æ·»åŠ å¯æ‰§è¡Œæƒé™chmod +x bbr.sh# è¿è¡Œbbrè„šæœ¬./bbr.sh 12345wget --no-check-certificate https://raw.githubusercontent.com/cx9208/Linux-NetSpeed/master/tcp.shchmod +x tcp.sh./tcp.sh æˆ‘è¿™è¾¹ç³»ç»Ÿä»¥åŠè‡ªå¸¦ï¼Œè¿è¡Œbbrè„šæœ¬åæç¤ºå·²ç»å®‰è£…äº†ï¼Œç»“æœå¦‚ä¸‹ï¼š å¯ä»¥éªŒè¯ä¸€ä¸‹æ˜¯å¦æˆåŠŸå®‰è£…æœ€æ–°å†…æ ¸å¹¶å¼€å¯ TCP BBRï¼Œè¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼š 123456789uname -r # &gt;&gt; 4.18.0-147.8.1.el8_1.x86_64sysctl net.ipv4.tcp_available_congestion_control # &gt;&gt; net.ipv4.tcp_available_congestion_control = reno cubic bbrsysctl net.ipv4.tcp_congestion_control # &gt;&gt; net.ipv4.tcp_congestion_control = bbrsysctl net.core.default_qdisc # &gt;&gt; net.core.default_qdisc = fqlsmod | grep bbr # &gt;&gt; tcp_bbr 20480 9 è¿”å›å€¼æœ‰ tcp_bbr æ¨¡å—å³è¯´æ˜bbrå·²å¯åŠ¨ã€‚ Trojanå®‰è£…æ•™ç¨‹Trojanæ˜¯ä¸€ä¸ªè¿‘ä¸¤å¹´å…´èµ·çš„ç½‘ç»œå·¥å…·ï¼Œé¡¹ç›®å®˜ç½‘ï¼ˆhttps://github.com/trojan-gfwï¼‰ã€‚ä¸å¼ºè°ƒåŠ å¯†å’Œæ··æ·†çš„SS/SSRç­‰å·¥å…·ä¸åŒï¼Œtrojanå°†é€šä¿¡æµé‡ä¼ªè£…æˆäº’è”ç½‘ä¸Šæœ€å¸¸è§çš„httpsæµé‡ï¼Œä»è€Œæœ‰æ•ˆé˜²æ­¢æµé‡è¢«æ£€æµ‹å’Œå¹²æ‰°ã€‚ ä½¿ç”¨Trojanéœ€è¦ä¸€ä¸ªæŒ‡å‘æœåŠ¡å™¨IPçš„åŸŸåä»¥åŠåŸŸåè¯ä¹¦ã€‚ ä½¿ç”¨Letâ€™s Encryptè·å–å…è´¹è¯ä¹¦ å¼€å‘ç«¯å£ certbot é»˜è®¤ä½¿ç”¨httpæ–¹å¼å¯¹åŸŸåæ‰€æœ‰æƒè¿›è¡ŒéªŒè¯ï¼Œè¯¥æ“ä½œéœ€è¦ç»‘å®švpsçš„80ç«¯å£ã€‚éœ€è¦å¼€å‘é˜²ç«å¢™ç«¯å£ 12firewall-cmd --zone=public --add-port=80/tcp --permanentfirewall-cmd --zone=public --add-port=443/tcp --permanent å¦‚æœ80ç«¯å£å·²è¢«å ç”¨ï¼Œè¯·å…ˆåœæ­¢å ç”¨çš„è¿›ç¨‹ï¼Œä¾‹å¦‚åœæ­¢Nginxï¼š 1killall nginx å®‰è£…certbot 1yum install -y python3 &amp;&amp; pip3 install certbot æŸ¥çœ‹certbotä½¿ç”¨æ–¹æ³•ï¼š 1certbot --help ä¸ºæŒ‡å®šåŸŸåç”Ÿæˆè¯ä¹¦ï¼š 1certbot certonly --standalone -d åŸŸå1 -d åŸŸå2 æŸ¥çœ‹åŸŸåè¯ä¹¦çš„è·¯å¾„å’Œå›½æ——æ—¶é—´ 1certbot certificates å®‰è£…trojanæœåŠ¡ç«¯1sudo bash -c \"$(curl -fsSL https://raw.githubusercontent.com/trojan-gfw/trojan-quickstart/master/trojan-quickstart.sh)\" è¯¥å‘½ä»¤ä¼šä¸‹è½½æœ€æ–°ç‰ˆçš„trojanå¹¶å®‰è£…ã€‚å®‰è£…å®Œæ¯•åï¼Œtrojané…ç½®æ–‡ä»¶è·¯å¾„æ˜¯ /usr/local/etc/trojan/config.jsonï¼Œå…¶åˆå§‹å†…å®¹ä¸ºï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445&#123; \"run_type\": \"server\", \"local_addr\": \"0.0.0.0\", \"local_port\": 443, \"remote_addr\": \"127.0.0.1\", \"remote_port\": 80, \"password\": [ \"password1\", \"password2\" ], \"log_level\": 1, \"ssl\": &#123; \"cert\": \"/path/to/certificate.crt\", \"key\": \"/path/to/private.key\", \"key_password\": \"\", \"cipher\": \"ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-RSA-CHACHA20-POLY1305:DHE-RSA-AES128-GCM-SHA256:DHE-RSA-AES256-GCM-SHA384\", \"cipher_tls13\": \"TLS_AES_128_GCM_SHA256:TLS_CHACHA20_POLY1305_SHA256:TLS_AES_256_GCM_SHA384\", \"prefer_server_cipher\": true, \"alpn\": [ \"http/1.1\" ], \"reuse_session\": true, \"session_ticket\": false, \"session_timeout\": 600, \"plain_http_response\": \"\", \"curves\": \"\", \"dhparam\": \"\" &#125;, \"tcp\": &#123; \"prefer_ipv4\": false, \"no_delay\": true, \"keep_alive\": true, \"reuse_port\": false, \"fast_open\": false, \"fast_open_qlen\": 20 &#125;, \"mysql\": &#123; \"enabled\": false, \"server_addr\": \"127.0.0.1\", \"server_port\": 3306, \"database\": \"trojan\", \"username\": \"trojan\", \"password\": \"\" &#125;&#125; local_portï¼šç›‘å¬çš„ç«¯å£ï¼Œé»˜è®¤æ˜¯443ï¼Œé™¤éç«¯å£è¢«å¢™ï¼Œä¸å»ºè®®æ”¹æˆå…¶ä»–ç«¯å£ï¼› remote_addrå’Œremote_portï¼šétrojanåè®®æ—¶ï¼Œå°†è¯·æ±‚è½¬å‘å¤„ç†çš„åœ°å€å’Œç«¯å£ã€‚å¯ä»¥æ˜¯ä»»æ„æœ‰æ•ˆçš„ip/åŸŸåå’Œç«¯å£å·ï¼Œé»˜è®¤æ˜¯æœ¬æœºå’Œ80ç«¯å£ï¼› passwordï¼šå¯†ç ã€‚éœ€è¦å‡ ä¸ªå¯†ç å°±å¡«å‡ è¡Œï¼Œæœ€åä¸€è¡Œç»“å°¾ä¸èƒ½æœ‰é€—å·ï¼› certå’Œkeyï¼šåŸŸåçš„è¯ä¹¦å’Œå¯†é’¥ï¼ŒLetâ€™s Encryptç”³è¯·çš„è¯ä¹¦å¯ç”¨ certbot certificates æŸ¥çœ‹è¯ä¹¦è·¯å¾„ï¼› key_passwordï¼šé»˜è®¤æ²¡æœ‰å¯†ç ï¼ˆå¦‚æœè¯ä¹¦æ–‡ä»¶æœ‰å¯†ç å°±è¦å¡«ä¸Šï¼‰ï¼› alpnï¼šå»ºè®®å¡«ä¸¤è¡Œï¼šhttp/1.1å’Œh2ï¼Œä¿æŒé»˜è®¤ä¹Ÿæ²¡æœ‰é—®é¢˜ã€‚ æ ¹æ®è‡ªå·±çš„æƒ…å†µä¿®æ”¹é…ç½®ï¼Œä¿å­˜ï¼Œç„¶åè®¾ç½®å¼€æœºå¯åŠ¨ï¼š 1systemctl enable trojan å¯åŠ¨Trojanï¼š 1systemctl start trojan æ£€æŸ¥æ˜¯å¦è¿è¡Œï¼š 1ss -lp | grep trojan è¯ä¹¦è‡ªåŠ¨æ›´æ–°Letâ€™s Encryptè¯ä¹¦çš„æœ‰æ•ˆæœŸæ˜¯ä¸‰ä¸ªæœˆï¼Œè¶…è¿‡æœŸé™åˆ™éœ€è¦ç»­ç­¾ã€‚è¯ä¹¦ç»­æœŸå¯ä»¥æ‰‹åŠ¨å®Œæˆï¼Œä¾‹å¦‚ï¼š 123systemctl stop trojancertbot renewsystemctl restart trojan ä¹Ÿå¯ä»¥é…ç½®crontabä»»åŠ¡è‡ªåŠ¨ç»­ç­¾ï¼Œåœ¨/etc/crontabæ–‡ä»¶æœ«æ·»åŠ ä¸€è¡Œï¼š 10 0 1 */2 0 root systemctl stop trojan; /usr/local/bin/certbot renew; systemctl restart trojan Trojanå®¢æˆ·ç«¯ä»¥Macç«¯ä½¿ç”¨ClashXå®¢æˆ·ç«¯ä¸ºä¾‹ï¼Œé…ç½®å¦‚ä¸‹ï¼š 123456789101112Proxy: - name: trojan_NJ5 type: trojan server: nj5.kobingo.xyz port: 443 password: OF54OAJN3WZ66882 # udp: true # sni: example.com # aka server name alpn: - h2 - http/1.1 # skip-cert-verify: true å‚è€ƒæ–‡ç«  Trojanå®˜ç½‘ trojanæ•™ç¨‹ https://github.com/hijkpw/scripts trojanä¸€é”®è„šæœ¬ Namesiloè´­ä¹°åŸŸåè¯¦ç»†æ•™ç¨‹","categories":[{"name":"others","slug":"others","permalink":"http://blog.kobingo.xyz/categories/others/"}],"tags":[{"name":"æ¢¯å­","slug":"æ¢¯å­","permalink":"http://blog.kobingo.xyz/tags/%E6%A2%AF%E5%AD%90/"}]},{"title":"æ‰“é€ èµå¿ƒæ‚¦ç›®çš„Macç»ˆç«¯","slug":"others-zsh","date":"2020-06-10T11:36:19.000Z","updated":"2021-01-19T06:41:41.222Z","comments":true,"path":"others-zsh/","link":"","permalink":"http://blog.kobingo.xyz/others-zsh/","excerpt":"æœ¬æ–‡ä¸»è¦è®²è§£å¦‚ä½•åŸºäºiTerm2 + Oh My Zsh æ‰“é€ èµå¿ƒæ‚¦ç›®çš„Macç»ˆç«¯ï¼Œä»¥åŠå¦‚ä½•é…ç½®ç»ˆç«¯ä»£ç†ç­‰ã€‚","text":"æœ¬æ–‡ä¸»è¦è®²è§£å¦‚ä½•åŸºäºiTerm2 + Oh My Zsh æ‰“é€ èµå¿ƒæ‚¦ç›®çš„Macç»ˆç«¯ï¼Œä»¥åŠå¦‚ä½•é…ç½®ç»ˆç«¯ä»£ç†ç­‰ã€‚ ä¸‹è½½iTerm2å¯ä»¥ç›´æ¥å»å®˜ç½‘ä¸‹è½½ï¼šhttps://www.iterm2.com/ å®‰è£…å®Œæˆåï¼Œåœ¨/binç›®å½•ä¸‹ä¼šå¤šå‡ºä¸€ä¸ªzshçš„æ–‡ä»¶ã€‚ Macç³»ç»Ÿè‡ªå¸¦å¾ˆå¤šShellï¼Œå¯ä»¥é€šè¿‡å‘½ä»¤æŸ¥çœ‹ï¼š 1cat /etc/shells ç»“æœå¦‚ä¸‹ï¼š ç”±äºMacé»˜è®¤ä½¿ç”¨dashä½œä¸ºç»ˆç«¯ï¼Œæ‰€ä»¥é¦–å…ˆä¿®æ”¹ä¸ºé»˜è®¤ä½¿ç”¨zshï¼š 1chsh -s /bin/zsh è¿™å°±æ˜¯iTerm2åˆå§‹çš„æ ·å­ï¼Œä¸‹é¢æˆ‘ä»¬æ¥ç¾åŒ–å®ƒï¼Œè®©å®ƒå˜å¾—å¥½ç”¨åˆå¥½çœ‹ï¼ å®‰è£…Oh my zshoh-my-zshå¼€æºåœ°å€ï¼šhttps://github.com/robbyrussell/oh-my-zsh ä¸»è¦æœ‰curlå’Œwgetä¸¤ç§å®‰è£…æ–¹å¼ï¼Œå¯ä»»é€‰ä¸€ç§è¿›è¡Œå®‰è£…ï¼š 12# curl å®‰è£…æ–¹å¼sh -c \"$(curl -fsSL https://raw.githubusercontent.com/robbyrussell/oh-my-zsh/master/tools/install.sh)\" 12# wget å®‰è£…æ–¹å¼sh -c \"$(wget https://raw.githubusercontent.com/robbyrussell/oh-my-zsh/master/tools/install.sh -O -)\" å®‰è£…å‘½ä»¤å’Œå®‰è£…å®Œæˆåçš„æˆªå›¾ï¼š å®‰è£…PowerLinePowerlineæ˜¯agnosterä¸»é¢˜çš„ä¾èµ–ã€‚å…·ä½“å¯ä»¥åœ¨repoé‡ŒæŸ¥è¯¢åˆ°ï¼šhttps://github.com/agnoster/agnoster-zsh-theme å®‰è£…powerlineçš„æ–¹å¼ä¾ç„¶ç®€å•ï¼Œä¹Ÿåªéœ€è¦ä¸€æ¡å‘½ä»¤ï¼š 1pip install powerline-status --user æ²¡æœ‰å®‰è£…pipçš„åŒå­¦å¯èƒ½ä¼šç¢°åˆ°zsh: command not found: pipã€‚ ä½¿ç”¨å‘½ä»¤å®‰è£…pipå³å¯ï¼š 1sudo easy_install pip å®‰è£…åå†æ¬¡æ‰§è¡Œå®‰è£…powerlineçš„å‘½ä»¤å³å¯ã€‚ å®‰è£…PowerFontså®‰è£…å­—ä½“åº“éœ€è¦é¦–å…ˆå°†é¡¹ç›®git cloneè‡³æœ¬åœ°ï¼Œç„¶åæ‰§è¡Œæºç ä¸­çš„install.shã€‚ åœ¨ä½ ä¹ æƒ¯çš„ä½ç½®æ–°å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œå¦‚ï¼š~/Desktop/OpenSource/ åœ¨æ­¤æ–‡ä»¶å¤¹ä¸‹æ‰§è¡Œgit cloneå‘½ä»¤ï¼š 123456# git clonegit clone https://github.com/powerline/fonts.git --depth=1# cd to foldercd fonts# run install shell./install.sh æ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š å®‰è£…å¥½å­—ä½“åº“ä¹‹åï¼Œæˆ‘ä»¬æ¥è®¾ç½®iTerm2çš„å­—ä½“ï¼Œå…·ä½“çš„æ“ä½œæ˜¯iTerm2 -&gt; Preferences -&gt; Profiles -&gt; Textï¼Œåœ¨FontåŒºåŸŸé€‰ä¸­Change Fontï¼Œç„¶åæ‰¾åˆ°Meslo LGå­—ä½“ã€‚æœ‰Lã€Mã€Så¯é€‰ï¼Œçœ‹ä¸ªäººå–œå¥½ï¼š å®‰è£…é…è‰²æ–¹æ¡ˆé…è‰²æ–¹æ¡ˆåœ¨ä½¿ç”¨VIMæˆ–Colorful Logæ—¶ä¼šå˜å¾—éå¸¸æœ‰ç”¨ï¼ŒåŒæ—¶ç•Œé¢ä¹Ÿä¸ä¼šä¸€ç‰‡é»‘ç»¿ä¸€æ ·æ­»æ¿ã€‚ åŒæ ·ä½¿ç”¨git cloneçš„æ–¹å¼ä¸‹è½½æºç è¿›è¡Œå®‰è£…ï¼š 1234cd ~/Desktop/OpenSourcegit clone https://github.com/altercation/solarizedcd solarized/iterm2-colors-solarized/open . åœ¨æ‰“å¼€çš„finderçª—å£ä¸­ï¼ŒåŒå‡»Solarized Dark.itermcolorså’ŒSolarized Light.itermcolorså³å¯å®‰è£…æ˜æš—ä¸¤ç§é…è‰²ï¼š å†æ¬¡è¿›å…¥iTerm2 -&gt; Preferences -&gt; Profiles -&gt; Colors -&gt; Color Presetsä¸­æ ¹æ®ä¸ªäººå–œå¥½é€‰æ‹©è¿™ä¸¤ç§é…è‰²ä¸­çš„ä¸€ç§å³å¯ï¼š å®‰è£…ä¸»é¢˜ä¸‹è½½agnosterä¸»é¢˜ï¼Œæ‰§è¡Œè„šæœ¬å®‰è£…ï¼š 1234cd ~/Desktop/OpenSourcegit clone https://github.com/fcamblor/oh-my-zsh-agnoster-fcamblor.gitcd oh-my-zsh-agnoster-fcamblor/./install æ‰§è¡Œä¸Šé¢çš„å‘½ä»¤ä¼šå°†ä¸»é¢˜æ‹·è´åˆ°oh my zshçš„themesä¸­ï¼š æ‹·è´å®Œæˆåï¼Œæ‰§è¡Œå‘½ä»¤æ‰“å¼€zshrcé…ç½®æ–‡ä»¶ï¼Œå°†ZSH_THEMEåé¢çš„å­—æ®µæ”¹ä¸ºagnosterã€‚ 1vi ~/.zshrc ä¿®æ”¹å®ŒæˆåæŒ‰ä¸€ä¸‹escè°ƒå‡ºviå‘½ä»¤ï¼Œè¾“å…¥:wqä¿å­˜å¹¶é€€å‡ºviæ¨¡å¼ã€‚ æ­¤æ—¶command+Qæˆ–sourceé…ç½®æ–‡ä»¶åï¼ŒiTerm2å˜äº†æ¨¡æ ·ï¼š å®‰è£…é«˜äº®æ’ä»¶è¿™æ˜¯oh my zshçš„ä¸€ä¸ªæ’ä»¶ï¼Œå®‰è£…æ–¹å¼ä¸themeå¤§åŒå°å¼‚ï¼š 123cd ~/.oh-my-zsh/custom/plugins/git clone https://github.com/zsh-users/zsh-syntax-highlighting.gitvi ~/.zshrc è¿™æ—¶æˆ‘ä»¬å†æ¬¡æ‰“å¼€zshrcæ–‡ä»¶è¿›è¡Œç¼–è¾‘ã€‚æ‰¾åˆ°pluginsï¼Œæ­¤æ—¶pluginsä¸­åº”è¯¥å·²ç»æœ‰äº†gitï¼Œæˆ‘ä»¬éœ€è¦æŠŠé«˜äº®æ’ä»¶ä¹ŸåŠ ä¸Šï¼š è¯·åŠ¡å¿…ä¿è¯æ’ä»¶é¡ºåºï¼Œzsh-syntax-highlightingå¿…é¡»åœ¨æœ€åä¸€ä¸ªã€‚ ç„¶ååœ¨æ–‡ä»¶çš„æœ€åä¸€è¡Œæ·»åŠ ï¼šsource ~/.oh-my-zsh/custom/plugins/zsh-syntax-highlighting/zsh-syntax-highlighting.zsh æŒ‰ä¸€ä¸‹escè°ƒå‡ºviå‘½ä»¤ï¼Œè¾“å…¥:wqä¿å­˜å¹¶é€€å‡ºviæ¨¡å¼ã€‚ æ‰§è¡Œå‘½ä»¤ä½¿åˆšæ‰çš„ä¿®æ”¹ç”Ÿæ•ˆï¼š 1source ~/.zshrc è‡³æ­¤å¤§åŠŸå‘Šæˆï¼Œè¯·çœ‹æœ€ç»ˆæ•ˆæœå›¾ï¼š èƒŒæ™¯å›¾ç‰‡å–è‡ªå¾®è½¯Surface Studioçš„4Kå£çº¸(å°†è¿‘12MBå¤§å°)ï¼Œéå¸¸æ¼‚äº®ï¼Œéœ€è¦çš„å¯ä»¥è‡ªå–ï¼š https://pan.baidu.com/s/1LKd4ghGyyNI6UwHhOHvfaAæå–ç : snrd æ›´æ¢èƒŒæ™¯å›¾ç‰‡æ–¹å¼ï¼šiTerm2 -&gt; Preferences -&gt; Profiles -&gt; Window -&gt; BackGround Imageå‹¾é€‰å›¾ç‰‡å³å¯ã€‚ å¯é€‰æ‹©ã€å‘½ä»¤è¡¥å…¨è·Ÿä»£ç é«˜äº®çš„å®‰è£…æ–¹å¼ä¸€æ ·ï¼Œè¿™ä¹Ÿæ˜¯ä¸€ä¸ªzshçš„æ’ä»¶ï¼Œå«åšzsh-autosuggestionï¼Œç”¨äºå‘½ä»¤å»ºè®®å’Œè¡¥å…¨ã€‚ 123cd ~/.oh-my-zsh/custom/plugins/git clone https://github.com/zsh-users/zsh-autosuggestionsvi ~/.zshrc æ‰¾åˆ°pluginsï¼ŒåŠ ä¸Šè¿™ä¸ªæ’ä»¶å³å¯ï¼š æ’ä»¶æ•ˆæœï¼š æœ‰åŒå­¦è¯´è¡¥å…¨å‘½ä»¤çš„å­—ä½“ä¸å¤ªæ¸…æ™°ï¼Œä¸èƒŒæ™¯é¢œè‰²å¤ªè¿‡ç›¸è¿‘ï¼Œå…¶å®å¯ä»¥è‡ªå·±è°ƒæ•´ä¸€ä¸‹å­—ä½“é¢œè‰²ã€‚ Preferences -&gt; Profiles -&gt; Colors ä¸­æœ‰Foregroundæ˜¯æ ‡å‡†å­—ä½“é¢œè‰²ï¼ŒANSI Colorsä¸­Brightçš„ç¬¬ä¸€ä¸ªæ˜¯è¡¥å…¨çš„å­—ä½“é¢œè‰²ã€‚ VScodeæ˜¾ç¤ºå¼‚å¸¸é—®é¢˜åœ¨ç»è¿‡ä¸Šé¢é…ç½®åï¼Œå‘ç°VScodeä¸Šçš„ç»ˆç«¯æ˜¾ç¤ºå¼‚å¸¸ï¼Œä¸»è¦åŸå› æ˜¯å‰é¢é…ç½®çš„agnosterä¸»é¢˜éœ€è¦PowerFontså­—ä½“çš„æ”¯æŒã€‚ æ‰€ä»¥éœ€è¦åœ¨VScodeé‡Œè®¾ç½®å­—ä½“ï¼ˆæ¯”å¦‚ï¼šMeslo LG L for Powerlineï¼‰ï¼š å®Œæˆåï¼Œæ˜¾ç¤ºæ­£å¸¸ï¼š ä½¿ç”¨ä»£ç†ç”±äºGFWçš„å­˜åœ¨ï¼Œå¹³æ—¶ç”¨ç»ˆç«¯å®‰è£…npmåŒ…ï¼Œæˆ–è€…clone GitHubä¸Šçš„ä»“åº“ç­‰æ“ä½œæ—¶ï¼Œç»å¸¸é€Ÿåº¦æ˜¯å¯æ€œçš„10K/sç”šè‡³ä¸åˆ°çš„é€Ÿåº¦ï¼Œå³ä¾¿å¼€äº† SS / V2Ray ç­‰ä»£ç†æœåŠ¡ï¼Œè²Œä¼¼åœ¨ç»ˆç«¯ä¸Šæ²¡ä»€ä¹ˆåµç”¨ğŸ˜­ï¼ˆå…¶å®ä¸»è¦åŸå› æ˜¯è¿™äº›ä»£ç†æœåŠ¡èµ°çš„æ˜¯ä¼šè¯å±‚ï¼Œè€Œitemçš„å‘½ä»¤èµ°åœ¨ç½‘ç»œå±‚ï¼Œå±‚çº§æ›´ä½ï¼Œæ‰€ä»¥æµé‡æ— æ³•ç”¨è¿‡ä»£ç†è½¬å‘ï¼‰ã€‚ å¦‚æœä½ ç”¨çš„æ˜¯VPNæ–¹å¼ä»£ç†ï¼Œé‚£ä¹ˆä¼°è®¡ä½ æ²¡æœ‰è¿™ä¸ªçƒ¦æ¼ åŸå› æ˜¯ä¸»æµçš„VPNåè®®ï¼ˆåŒ…æ‹¬PPTP / L2TP / OPENVPN / SSTPï¼‰è·‘åœ¨ç¬¬äºŒå±‚ï¼ˆæ•°æ®é“¾è·¯å±‚ï¼‰å’Œç¬¬ä¸‰å±‚ï¼ˆç½‘ç»œå±‚ï¼‰ï¼ŒåŸºæœ¬å¯ä»¥è¯´æ˜¯å…¨æµé‡ä»£ç†ã€‚ é‚£æœ‰æ²¡æœ‰ä»€ä¹ˆæ–¹æ³•å¯ä»¥è®©itermä¸Šçš„æµé‡èƒ½èµ°ä»£ç†ä»è€Œæé«˜ä¸‹è½½é€Ÿåº¦å‘¢ï¼Ÿ ç­”æ¡ˆæ˜¯æœ‰çš„ï¼ ä¸‹é¢çš„æ“ä½œçš„å‰ææ˜¯ä½ è‡ªå·±æœ‰æœ‰å¯ç”¨çš„ä»£ç†æœåŠ¡ ç¼–è¾‘~/.zshrc: 1vim ~/.zshrc åœ¨é…ç½®çš„æœ€ä¸‹é¢æ·»åŠ å¦‚ä¸‹ä»£ç ï¼š 1234567891011121314151617function useProxy() &#123; export https_proxy=http://127.0.0.1:7890; export http_proxy=http://127.0.0.1:7890; export all_proxy=socks5://127.0.0.1:7891; echo 'open proxy successful';&#125;function closeProxy() &#123; unset https_proxy; unset http_proxy; unset all_proxy; echo 'close proxy successful';&#125;alias openP='useProxy'alias closeP='closeProxy' ä¿å­˜æ›´æ”¹ï¼Œæ‰§è¡Œï¼š 1source ~/.zshrc æ¥ç€åªè¦åœ¨ç»ˆç«¯æ‰§è¡ŒopenPå°±èƒ½æ‰“å¼€ç»ˆç«¯ä»£ç†ï¼Œæ‰§è¡ŒclosePå°±èƒ½å…³é—­ç»ˆç«¯ä»£ç† ZSHå¸¸ç”¨æŠ€èƒ½ è‡ªåŠ¨è¡¥å…¨ ZSHçš„è¡¥å…¨åŠŸèƒ½éå¸¸è´´å¿ƒï¼ŒæŒ‰TABå¯ä»¥è¡¥å…¨å‘½ä»¤ã€è·¯å¾„è¿˜æœ‰å‚æ•°ã€‚ æ€è¿›ç¨‹ Bashæ€è¿›ç¨‹éœ€è¦å…ˆç”¨ps aux | grep xxxæŸ¥æ‰¾è¿›ç¨‹çš„PIDï¼Œç„¶åæ‰èƒ½ç”¨kill PIDã€‚ZSHå¯ä»¥ç›´æ¥å°±kill xxxåæŒ‰TABä¼šæ˜¾ç¤ºå¯¹åº”çš„PIDï¼Œéå¸¸æ–¹ä¾¿ã€‚ å†å²è®°å½• ZSHçš„historyå¯ä»¥è·¨sessionï¼Œå¯ä»¥å…±äº«ï¼Œè¿™æ ·å°±ä¸€è¿›è¡Œå†å²è®°å½•çš„å—é™æŸ¥è¯¢ã€‚æ¯”å¦‚ï¼Œè¾“å…¥gitï¼Œå†æŒ‰å‘ä¸Šç®­å¤´ï¼Œä¼šæœç´¢å‰é¢æ‰€æœ‰çš„gitå‘½ä»¤ã€‚ é€šé…ç¬¦æœç´¢ l .pngæŸ¥æ‰¾å½“å‰ç›®å½•ä¸‹æ‰€æœ‰pngæ–‡ä»¶ï¼Œl **/.pngé€’å½’æŸ¥æ‰¾ã€‚","categories":[{"name":"others","slug":"others","permalink":"http://blog.kobingo.xyz/categories/others/"}],"tags":[{"name":"Macç»ˆç«¯","slug":"Macç»ˆç«¯","permalink":"http://blog.kobingo.xyz/tags/Mac%E7%BB%88%E7%AB%AF/"}]},{"title":"å¸¸ç”¨è½¯ä»¶å¤§å…¨","slug":"others-å¸¸ç”¨è½¯ä»¶æ¨è","date":"2020-05-27T22:51:15.000Z","updated":"2021-01-19T06:41:41.222Z","comments":true,"path":"others-å¸¸ç”¨è½¯ä»¶æ¨è/","link":"","permalink":"http://blog.kobingo.xyz/others-%E5%B8%B8%E7%94%A8%E8%BD%AF%E4%BB%B6%E6%8E%A8%E8%8D%90/","excerpt":"åœ¨æ­¤è®°å½•ä¸€äº›å ªç§°ç¥å™¨çš„è½¯ä»¶","text":"windowsç¯‡1. Listaryå®ƒä¸ä»…å¯ä»¥åœ¨æœ¬åœ°éå¸¸å¿«é€Ÿçš„æœç´¢ï¼Œè¿˜å¯ä»¥æ‰“å¼€ç½‘ç«™ã€åœ¨æœç´¢å¼•æ“ä¸­æœç´¢ã€éšæ—¶éšåœ°æ‰“å¼€å¿«æ·èœå•ã€æ–‡ä»¶å¿«é€Ÿå®šä½ã€å¿«é€Ÿæ‰“å¼€cmdçª—å£ç­‰ç­‰ä¼˜ç§€çš„åŠŸèƒ½ï¼› æ¯”å¦‚è¾“å…¥ cmdæ‰“å¼€cmdçª—å£ï¼Œè¾“å…¥ cmdaä½¿ç”¨ç®¡ç†å‘˜æƒé™æ‰“å¼€cmdçª—å£ï¼Œè¾“å…¥ wyyyyæ‰“å¼€ç½‘æ˜“äº‘éŸ³ä¹ï¼Œæ‰¾åˆ°æŸä¸ªæ–‡ä»¶çš„æ—¶å€™ Enterç›´æ¥æ‰“å¼€ï¼Œ Ctrl+Enter æ˜¯æ‰“å¼€æ–‡ä»¶æ‰€åœ¨æ–‡ä»¶å¤¹ï¼› å€¼å¾—ä¸€æçš„æ˜¯æœç´¢å…³é”®è¯åŠŸèƒ½ï¼Œè®©æˆ‘ä»¬å¯ä»¥éå¸¸ä¾¿æ·çš„æ‰“å¼€ç›¸åº”ç½‘ç«™æˆ–åœ¨å¯¹åº”ç½‘ç«™æœç´¢ï¼Œæ¯”å¦‚è¾“å…¥ ggæˆ‘çš„å­˜æ¬¾å‘¢ï¼Ÿå°±å¯ä»¥ç›´æ¥ä½¿ç”¨é»˜è®¤æµè§ˆå™¨åœ¨è°·æ­Œæœç´¢ä¸­æœç´¢äº†ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥è‡ªå®šä¹‰è¾“å…¥å…¶ä»–å…³é”®å­—ï¼Œåªéœ€æŠŠæœç´¢é“¾æ¥ä¸­çš„å…³é”®å­—æ¢æˆ {query} ~ 2. uToolså¯ä»¥ä½œä¸ºç¨‹åºå¯åŠ¨å™¨å¤–ï¼ŒuToolsæœ€å¤§çš„ç‰¹ç‚¹å°±æ˜¯æ‹¥æœ‰å¼ºå¤§çš„æ’ä»¶ç³»ç»Ÿï¼Œæ¯ä¸ªæ’ä»¶éƒ½æœ‰ç®€æ´ç¾è§‚ã€æ˜“äºæ“ä½œçš„ç•Œé¢ï¼Œè¾“å…¥pluginsè¿›å…¥æ’ä»¶ç®¡ç†ï¼Œä½ å°±å¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€æ±‚æŒ‘é€‰å®‰è£…ï¼Œç»„åˆæˆè‡ªå·±æœ€è¶æ‰‹çš„å·¥å…·åˆé›†ï¼Œä¸ºå„ç§æ—¥å¸¸æ“ä½œæä¾›ä¾¿åˆ©ã€‚ä¸æ–­äº§ç”Ÿçš„æ–°æ’ä»¶ï¼Œä¹Ÿå°†ä¸ºä½ å¸¦æ¥æ— é™å¯èƒ½ã€‚ ä¸ªäººå¸¸ç”¨å›¾åºŠã€å‰ªåˆ‡æ¿ã€todoã€å„ç§æŠ€æœ¯æ–‡æ¡£ç­‰ 3. DittoDitto æ˜¯ä¸€æ¬¾å…è´¹å¼€æºçš„windowså‰ªåˆ‡æ¿ç®¡ç†å·¥å…·ï¼Œä½œä¸º CtrlC Vå·¥ç¨‹å¸ˆï¼Œå¤åˆ¶ç²˜è´´å°‘ä¸äº†ï¼Œæ›´å‰å®³çš„æ˜¯ï¼Œå¯ä»¥ç”¨å®ƒæ¥æ‰¹é‡çš„å¤åˆ¶ï¼Œ Ctrl+Cä¸€å †åˆ«äººçš„ä»£ç ï¼Œä¸€æ¬¡æ€§å…¨ç²˜ä¸Šï¼Œå²‚ä¸ç¾å“‰ï¼› ä½¿ç”¨å¿«æ·é”®æ‰“å¼€å‰ªåˆ‡æ¿å†å²ï¼Œç„¶å Ctrl/Shiftæ¥é€‰æ‹©ä½ å¸Œæœ›ç²˜è´´çš„å†…å®¹ï¼Œ Enterå³å¯é€‰æ‹©æ€§çš„ç²˜è´´å¤šè¡Œå†…å®¹ï¼›å¦å¤–å‰ªåˆ‡æ¿å†å²è¿˜å¯ä»¥æœç´¢ï¼Œå¿«é€Ÿæ‰¾åˆ°å¤åˆ¶å†…å®¹ï¼› åªéœ€è®¾ç½®å¯¥å¯¥å‡ ä¸ªå¿«æ·é”®ï¼Œå°±å¯ä»¥å¾ˆæ–¹ä¾¿çš„æ“ä½œå‰ªåˆ‡æ¿ï¼Œå¸¦æ¥æå¤§å¹¸ç¦~ 4. Winsnapçœ‹åˆ°ä¸Šé¢çš„æˆªå›¾æ²¡ï¼Œæ—è¾¹éƒ½æœ‰å¾ˆéªšåŒ…çš„é˜´å½±ï¼Œæ€ä¹ˆåšåˆ°çš„ï¼Ÿä¸éœ€è¦å„ç§é«˜å¤§ä¸Šçš„å›¾ç‰‡å¤„ç†è½¯ä»¶ï¼Œåªéœ€ Winsnap ï¼Œå®ƒå¯ä»¥åœ¨æˆªå›¾çš„æ—¶å€™è‡ªåŠ¨å¸®ä½ åŠ ä¸ŠèƒŒæ™¯é˜´å½±ï¼Œç„¶åå¸®ä½ è‡ªåŠ¨å¤åˆ¶åˆ°å‰ªåˆ‡æ¿ï¼› å®ƒå¯ä»¥ä½¿ç”¨å…¨å±ã€åº”ç”¨ç¨‹åºã€çª—å£ã€å¯¹è±¡ç­‰æ•æ‰æ¨¡å¼ï¼Œæ›´ç‰›çš„æ˜¯å®ƒè¿˜å¯ä»¥åœ¨æˆªå›¾çš„æ—¶å€™åŒæ—¶é€‰æ‹©å’Œæ•æ‰å¤šä¸ªå¯¹è±¡ï¼ŒæŒ‰ä½ Ctrlæˆ– Shifté€‰æ‹©å¤šä¸ªçª—å£æˆ–å¯¹è±¡â€¦è¿™ä¸ªå°±æ¯”è¾ƒå‰å®³äº†ï¼Œä¸ä¿¡ä½ è¯•è¯•ï¼Ÿ 5. CmderCmder æ˜¯ä¸€ä¸ªç¾è§‚åˆå®ç”¨çš„å‘½ä»¤è¡Œå·¥å…·ï¼Œå®ƒæ”¯æŒå¤§éƒ¨åˆ†Linuxå‘½ä»¤ï¼Œæ”¯æŒsshè¿Linuxï¼Œè¿˜å¯ä»¥åœ¨å®ƒçš„çª—å£ä¸­æ–°å»ºcmdå’Œpowershellï¼Œæ›´å¤šç©æ³•ç­‰ä½ æ¥æˆ˜~ æ¯”è¾ƒæ–¹ä¾¿çš„æ˜¯åœ¨å®‰è£…ç›®å½•ä¸‹ \\config\\user-aliases.cmdè®¾ç½® alias åˆ«åï¼Œæ¯”å¦‚å‚è§çš„ Git æ“ä½œï¼š 12345678910111213ga=git add $*gb=git branch $*gc=git commit $*gch=git checkout $*gd=git diff $*gl=git log $*gs=git status $* è¿˜å¯ä»¥å°†cmderé…ç½®åˆ°å³é”®èœå•ï¼Œå¿«æ·åœ¨å½“å‰ç›®å½•æ‰“å¼€cmderï¼Œæ–¹æ³•æ˜¯å…ˆæŠŠè¿™ä¸ªåœ°å€åŠ åˆ°ç³»ç»Ÿçš„pathç¯å¢ƒå˜é‡é‡Œé¢ï¼Œæ¯”å¦‚æˆ‘çš„æ˜¯ D:cmderï¼Œç„¶åå³é”® Cmder.exeå±æ€§-å…¼å®¹æ€§-ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œæ­¤ç¨‹åºï¼Œå†é‡æ–°æ‰“å¼€ Cmder.exeè¾“å…¥ Cmder.exe/REGISTER ALLå°±è¡Œäº†~ è®°å¾—å®‰è£…å®Œåœ¨é…ç½® Setting-Startup-Environmenté‡Œé¢åŠ ä¸Š setLANG=zh_CN.UTF8ï¼Œå¦åˆ™è¾“å‡ºçš„ä¸€äº›ä¸­æ–‡ä¼šä¹±ç ï¼› 6. Typoraä½¿ç”¨è¿‡å¾ˆå¤š Markdown ç¼–è¾‘å™¨ï¼Œæœ€åé€‰æ‹©äº† Typoraï¼Œä¸ä¸»æµç¼–è¾‘å™¨ä¸€è¾¹ç¼–è¾‘ä¸€è¾¹é¢„è§ˆçš„å½¢å¼ï¼ŒTypora æ˜¯å°†ç¼–è¾‘å’Œé¢„è§ˆåˆå¹¶åˆ°ä¸€èµ·ï¼Œç®€æ´å¤§æ–¹ï¼Œç›®å…‰ä¹Ÿä¸éœ€è¦åœ¨å¤æ‚çš„ç¼–è¾‘åŒºå’Œé¢„è§ˆåŒºä¸­æ¥å›åˆ‡æ¢äº†ï¼Œåªæœ‰å½“ç„¦ç‚¹ç§»å…¥çš„æ—¶å€™æ‰æ˜¾ç¤º Markdown è¯­æ³•ï¼› å¦å¤– Typora è¿˜æ”¯æŒ Latexã€ [TOC]åŠ¨æ€ç›®å½•ã€æ‹–æ‹½å›¾ç‰‡è‡ªåŠ¨ç”Ÿæˆæœ¬åœ°é¢„è§ˆé“¾æ¥ã€è‡ªå®šä¹‰ä¸»é¢˜ç­‰æ–¹ä¾¿çš„åŠŸèƒ½ï¼› 7. Quick LookQuickLook æ˜¯åœ¨ Microsoft Store é‡Œé¢ä¸‹è½½çš„ä¸€ä¸ªé€Ÿè§ˆå·¥å…·ï¼Œæœ‰æ—¶å€™æ‰“å¼€ä¸€ä¸ªPDFã€TXTã€å›¾ç‰‡ä¹‹ç±»çš„éœ€è¦ç­‰å…³è”ç¨‹åºå¯åŠ¨åŠå¤©ï¼Œæœ‰äº†å®ƒä¹‹ååªè¦é€‰ä¸­ç›®æ ‡æ–‡ä»¶ï¼ŒæŒ‰ç©ºæ ¼ï¼Œå°±å¯ä»¥å¿«é€Ÿé¢„è§ˆäº†ï¼Œé€Ÿåº¦éå¸¸å¿«ï¼Œæ”¯æŒå›¾ç‰‡ã€è§†é¢‘ã€éŸ³é¢‘ã€å‹ç¼©åŒ…ã€PDFã€æ–‡æœ¬æ–‡ä»¶ã€Markdownã€HTMLç­‰æ ¼å¼ï¼› ç”¨å®ƒæ¥çœ‹ä¸€äº›ä»£ç ä»€ä¹ˆçš„ï¼Œç”šè‡³ä¸éœ€è¦ Sublime\\VSCode å¯åŠ¨å°±å¯ä»¥ç›´æ¥çœ‹äº†ï¼Œå¦‚æœåªæ˜¯é€Ÿè§ˆä¸€ä¸‹çš„è¯æ˜¯éå¸¸é€‚åˆçš„äº†ã€‚ 8. Myper SplashMyper Splash ä¹Ÿæ˜¯å¯ä»¥åœ¨ Microsoft Store é‡Œé¢ä¸‹è½½çš„ä¸€æ¬¾é«˜è´¨é‡å£çº¸åº“ï¼Œæ‰€æœ‰å£çº¸æ¥æº Unsplash ç½‘ç«™ï¼Œå‡æ— ç‰ˆæƒå¯ä»¥å…è´¹ä½¿ç”¨ï¼Œå†åŠ ä¸Šç®€æ´ç¾è§‚çš„UI/UXè®¾è®¡ï¼Œè®©ä½ ä½“éªŒä¸€è§é’Ÿæƒ…çš„æ„Ÿè§‰ã€‚ å¦å¤– MyperSplash å¯ä»¥è®¾ç½®è‡ªåŠ¨æ¯å¤©è‡ªåŠ¨æ›´æ¢å£çº¸æˆ–é”å±ï¼Œæ¯å¤©æ—©æ™¨æ¥åˆ°åŠå…¬å®¤ç‚¹äº®å±å¹•å°±å¯ä»¥çœ‹åˆ° Awesome çš„é”å±æˆ–å£çº¸ï¼Œè®©ä½ å¸¦ç€å¥½å¿ƒæƒ…å¼€å¯ä¸€å¤©çš„å·¥ä½œã€‚ 9. GifCam / ScreenToGifç›¸ä¿¡å¤§å®¶éƒ½æœ‰è¿‡éœ€è¦æˆªä¸€ä¸ª Gif çš„æ—¶å€™ï¼Œè¿™é‡Œæœ‰ä¸¤ä¸ªå…è´¹ Gif å±å¹•å½•åˆ¶å·¥å…·éƒ½å¾ˆä¸é”™ï¼Œå°è€Œç¾çš„ GifCam å’Œå¼€æºå¼ºå¤§çš„ ScreenToGif ï¼› 10. Free Download ManageFree Download Manage (FDM) æ˜¯ä¸€æ¬¾å…è´¹çš„ä¸‹è½½å·¥å…·ï¼Œå¦‚æœä½ å·²ç»å—å¤Ÿäº†å›½å†…ä¸€äº›è½¯ä»¶çš„å¹¿å‘Šå’Œé™é€Ÿï¼Œé‚£ä¹ˆ FDM æ˜¯ä¸€ä¸ªä¸é”™çš„é€‰æ‹©ï¼Œå¦å¤–å¤šçº¿ç¨‹ã€æ–­ç‚¹ç»­ä¼ ã€è®¡åˆ’ä»»åŠ¡ç­‰åŠŸèƒ½è®© FDM å€¼å¾—æ¨ä»‹ã€‚ 11. SourcetreeSourcetree æ˜¯è·¨å¹³å°å…è´¹çš„ Git å®¢æˆ·ç«¯ç®¡ç†å·¥å…·ï¼Œå¦‚æœå—å¤Ÿäº†æ‰‹æ‰“å„ç§ Git æ“ä½œå‘½ä»¤ï¼Œé‚£ä¹ˆ Sourcetree æ˜¯ä¸€ä¸ªä¸é”™çš„é€‰æ‹©ï¼› Sourcetree å¯ä»¥å¤§å¤§ç®€åŒ–ä½ çš„ä»£ç æ“ä½œï¼Œç‰¹åˆ«æ˜¯å¯¹äºä¸€äº›ä¸ç”šç†Ÿæ‚‰ Git å‘½ä»¤çš„äººæ¥è¯´ç°å¸¸å®ç”¨ï¼›ä¸€äº›å¯¹ Git æ“ä½œæ¯”è¾ƒç†Ÿç»ƒçš„ç”¨æˆ·ä¹Ÿå¯ä»¥ç”¨å®ƒæ¥æå‡æ•ˆç‡ï¼Œå‡å°‘å‡ºé”™ã€‚","categories":[{"name":"others","slug":"others","permalink":"http://blog.kobingo.xyz/categories/others/"}],"tags":[{"name":"software","slug":"software","permalink":"http://blog.kobingo.xyz/tags/software/"},{"name":"è½¯ä»¶","slug":"è½¯ä»¶","permalink":"http://blog.kobingo.xyz/tags/%E8%BD%AF%E4%BB%B6/"}]},{"title":"centOS7å®‰è£…Javaç¯å¢ƒ","slug":"others-centOS7å®‰è£…Javaç¯å¢ƒ","date":"2020-05-22T16:28:42.000Z","updated":"2021-01-19T06:41:41.222Z","comments":true,"path":"others-centOS7å®‰è£…Javaç¯å¢ƒ/","link":"","permalink":"http://blog.kobingo.xyz/others-centOS7%E5%AE%89%E8%A3%85Java%E7%8E%AF%E5%A2%83/","excerpt":"è®°å½•ä¸€æ¬¡åœ¨é˜¿é‡Œäº‘ï¼ˆç³»ç»ŸCentOS 7.4 64ä½ï¼‰å®‰è£…é…ç½®Javaç¯å¢ƒçš„è¿‡ç¨‹","text":"è®°å½•ä¸€æ¬¡åœ¨é˜¿é‡Œäº‘ï¼ˆç³»ç»ŸCentOS 7.4 64ä½ï¼‰å®‰è£…é…ç½®Javaç¯å¢ƒçš„è¿‡ç¨‹ 1. é€‰æ‹©åˆé€‚çš„jdkç‰ˆæœ¬ jdkä¸‹è½½åœ°å€ é€‰æ‹©ä¸€ä¸‹ç‰ˆæœ¬è·å–ä¸‹è½½é“¾æ¥ 2. ä¸‹è½½1wget https://download.oracle.com/otn/java/jdk/8u251-b08/3d5a2bb8f8d4428bbe94aed7ec7ae784/jdk-8u251-linux-x64.tar.gz?AuthParam=1590135363_2f6dbe12605da3b1164a50e7c1a8db7b æ­¤é“¾æ¥åœ°å€å¯èƒ½å¤±æ•ˆï¼Œè¯·è‡ªè¡Œåœ¨æ­¥éª¤1ä¸­è·å–æœ€æ–°ä¸‹è½½é“¾æ¥ ä¸‹è½½åæ£€æŸ¥å®‰è£…åŒ…å¤§å°æ˜¯å¦ç¬¦åˆé¢„æœŸï¼ˆåˆ¤æ–­å®‰è£…åŒ…æ˜¯å¦æŸåï¼‰ 1ls -lht 3. å®‰è£…3.1. åˆ›å»ºå®‰è£…ç›®å½•ï¼š 1mkdir /usr/local/java/ 3.2 è§£å‹åˆ°å®‰è£…ç›®å½•ï¼š 1tar -zxvf jdk-8u251-linux-x64.tar.gz?AuthParam=1590135363_2f6dbe12605da3b1164a50e7c1a8db7b -C /usr/local/java 4. é…ç½®ç¯å¢ƒå˜é‡æ‰“å¼€profileæ–‡ä»¶ 1vim /etc/profile åœ¨æœ«å°¾æ·»åŠ ä¸€ä¸‹ä»£ç ï¼š 1234export JAVA_HOME=/usr/local/java/jdk1.8.0_251export JRE_HOME=$&#123;JAVA_HOME&#125;/jreexport CLASSPATH=.:$&#123;JAVA_HOME&#125;/lib:$&#123;JRE_HOME&#125;/libexport PATH=$&#123;JAVA_HOME&#125;/bin:$PATH ä½¿ç¯å¢ƒå˜é‡ç”Ÿæ•ˆ 1source /etc/profile æ·»åŠ è½¯é“¾æ¥ 1ln -s /usr/local/java/jdk1.8.0_251/bin/java /usr/bin/java éªŒè¯æ˜¯å¦å®‰è£…æˆåŠŸ 1java -version","categories":[{"name":"others","slug":"others","permalink":"http://blog.kobingo.xyz/categories/others/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"http://blog.kobingo.xyz/tags/Linux/"},{"name":"centOS","slug":"centOS","permalink":"http://blog.kobingo.xyz/tags/centOS/"},{"name":"java","slug":"java","permalink":"http://blog.kobingo.xyz/tags/java/"}]},{"title":"ECMAScriptæ–°ç‰¹æ€§","slug":"javascript-ECMAScriptç‰¹æ€§åˆ†æ","date":"2020-05-22T14:59:54.000Z","updated":"2021-01-19T06:41:41.222Z","comments":true,"path":"javascript-ECMAScriptç‰¹æ€§åˆ†æ/","link":"","permalink":"http://blog.kobingo.xyz/javascript-ECMAScript%E7%89%B9%E6%80%A7%E5%88%86%E6%9E%90/","excerpt":"2015å¹´6æœˆå‘å¸ƒäº†ES 6ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬ä»Šå¤©å¹¿æ³›ä½¿ç”¨çš„ç‰ˆæœ¬ã€‚è¿™ä¹‹åæ¯å¹´6æœˆå‘å¸ƒä¸€ä¸ªæå°æ›´æ–°çš„ESç‰ˆæœ¬ï¼Œæ¯”å¦‚2016å¹´6æœˆå‘å¸ƒçš„ ES 2016 å«åšES 7ï¼Œè€Œè¿™ä¸ªç‰ˆæœ¬åªå¢åŠ äº†ä¸¤ä¸ªæ–°ç‰¹æ€§ã€‚æˆªæ­¢ç›®å‰ï¼ŒES 11çš„ææ¡ˆå·²ç»å®šç¨¿äº†ã€‚","text":"2015å¹´6æœˆå‘å¸ƒäº†ES 6ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬ä»Šå¤©å¹¿æ³›ä½¿ç”¨çš„ç‰ˆæœ¬ã€‚è¿™ä¹‹åæ¯å¹´6æœˆå‘å¸ƒä¸€ä¸ªæå°æ›´æ–°çš„ESç‰ˆæœ¬ï¼Œæ¯”å¦‚2016å¹´6æœˆå‘å¸ƒçš„ ES 2016 å«åšES 7ï¼Œè€Œè¿™ä¸ªç‰ˆæœ¬åªå¢åŠ äº†ä¸¤ä¸ªæ–°ç‰¹æ€§ã€‚æˆªæ­¢ç›®å‰ï¼ŒES 11çš„ææ¡ˆå·²ç»å®šç¨¿äº†ã€‚ ES 7 æ–°ç‰¹æ€§ åŠŸèƒ½ç‚¹ è¯´æ˜ Array.prototype.includes æŸ¥æ‰¾æ•°ç»„ Exponentiation operator æŒ‡æ•°å‡½æ•°çš„ä¸­ç¼€è¡¨ç¤ºæ³• Array.prototype.includesincludesæ˜¯ä¸€ä¸ªArrayä¸Šå¾ˆæœ‰ç”¨çš„æ–¹æ³•ï¼Œç”¨äºå¿«é€ŸæŸ¥æ‰¾æ•°ç»„ä¸­æ˜¯å¦åŒ…å«æŸä¸ªå…ƒç´ ï¼ŒåŒ…æ‹¬NaNï¼ˆå’ŒindexOfä¸ä¸€æ ·çš„ç‚¹)ã€‚ 1234567891011121314let arr = [1, 2, 3, NaN];if (arr.includes(2)) &#123; //æŸ¥æ‰¾2æ˜¯å¦å­˜åœ¨äºarræ•°ç»„ä¸­ console.log(\"æ‰¾åˆ°äº†!\"); //&gt;&gt; æ‰¾åˆ°äº†ï¼&#125;if (!arr.includes(2, 3)) &#123; //ç¬¬äºŒä¸ªå‚æ•°3è¡¨ç¤ºæ•°ç»„ä¸‹æ ‡ä¸º3çš„é¡¹ï¼Œä¹Ÿå³ç¬¬4é¡¹å¼€å§‹æŸ¥æ‰¾ console.warn(\"ä¸å­˜åœ¨!\"); //&gt;&gt; ä¸å­˜åœ¨ï¼&#125;//ä¸‹é¢ä¸¤å¥è¯´æ˜incluedeså’ŒindexOfçš„åŒºåˆ«console.log(arr.includes(NaN)); //trueconsole.log(arr.indexOf(NaN) != -1); //false æŒ‡æ•°å‡½æ•°ç”¨æ³•JavaScripté‡‡ç”¨ä¸¤ä¸ªæ˜Ÿç¬¦å·**æ¥è¡¨ç¤ºMath.powï¼Œç›¸å¯¹äºMath.powçš„å¥½å¤„ï¼š ä¸­ç¼€è¡¨ç¤ºæ³•æ¯”å‡½æ•°è¡¨ç¤ºæ³•æ›´ç®€æ´ï¼Œè¿™ä½¿å®ƒæ›´å¯å–ã€‚ æ–¹ä¾¿æ•°å­¦ã€ç‰©ç†ã€æœºå™¨äººå­¦ç­‰é¢†åŸŸçš„è®¡ç®—ã€‚ 12345678910//ç”¨æ³•ä¸€ï¼šx ** ylet squared = 2 ** 2;//ç­‰åŒäº: 2 * 2let cubed = 2 ** 3;//ç­‰åŒäº: 2 * 2 * 2//ç”¨æ³•äºŒï¼šx **= ylet a = 2;a **= 2;//ç­‰åŒäº: a = a * a;let b = 3;b **= 3;//ç­‰åŒäº: b = b * b * b; ES 8 æ–°ç‰¹æ€§ åŠŸèƒ½ç‚¹ è¯´æ˜ Object.values / Object.entries String padding å­—ç¬¦ä¸²è¿½åŠ  Object.getOwnPropertyDescriptors è¿”å›æŒ‡å®šå¯¹è±¡è‡ªå·±æ‰€æœ‰çš„å±æ€§å†…å®¹ Async functions å¼‚æ­¥å‡½æ•° Shared memory and atomics å…±äº«å†…å­˜å’Œ Atomics å¯¹è±¡ Object.values() / Object.entries Object.values(obj)ï¼Œobj å‚æ•°æ˜¯å¯¹ç›®æ ‡å¯¹è±¡çš„æ“ä½œï¼Œå®ƒå¯ä»¥æ˜¯ä¸€ä¸ªå¯¹è±¡æˆ–è€…æ•°ç»„ 12345678910const obj = &#123; x: 'xxx', y: 1 &#125;;Object.values(obj); // ['xxx', 1]const obj = ['e', 's', '8']; // ç­‰åŒäº &#123; 0: 'e', 1: 's', 2: '8' &#125;;Object.values(obj); // ['e', 's', '8']//å½“æŠŠæ•°å­—å¯¹è±¡çš„å½“é”®çš„æ—¶å€™ï¼Œè¿”å›çš„æ•°ç»„ä»¥é”®çš„å€¼å‡åºæ’åºconst obj = &#123; 10: 'xxx', 1: 'yyy', 3: 'zzz' &#125;;Object.values(obj); // ['yyy', 'zzz', 'xxx']Object.values('es8'); // ['e', 's', '8'] Object.entriesæ–¹æ³•è¿”å›ä¸€ä¸ªç»™å®šå¯¹è±¡å¯æšä¸¾å±æ€§å€¼çš„æ•°ç»„[key, value]ï¼Œä¸Object.valuesç±»ä¼¼ 123456789const obj = &#123; x: 'xxx', y: 1 &#125;;Object.entries(obj); // [['x', 'xxx'], ['y', 1]]const obj = ['e', 's', '8'];Object.entries(obj); // [['0', 'e'], ['1', 's'], ['2', '8']]const obj = &#123; 10: 'xxx', 1: 'yyy', 3: 'zzz' &#125;;Object.entries(obj); // [['1', 'yyy'], ['3', 'zzz'], ['10', 'xxx']]Object.entries('es8'); // [['0', 'e'], ['1', 's'], ['2', '8']] å­—ç¬¦ä¸²è¿½åŠ åœ¨ ES 8 ä¸­Stringæ–°å¢äº†ä¸¤ä¸ªå®ä¾‹å‡½æ•°String.prototype.padStartå’ŒString.prototype.padEndï¼Œå…è®¸å°†ç©ºå­—ç¬¦ä¸²æˆ–å…¶ä»–å­—ç¬¦ä¸²æ·»åŠ åˆ°åŸå§‹å­—ç¬¦ä¸²çš„å¼€å¤´æˆ–ç»“å°¾ã€‚String.padStart(targetLength,[padString])targetLengthï¼šå½“å‰å­—ç¬¦ä¸²éœ€è¦å¡«å……åˆ°çš„ç›®æ ‡é•¿åº¦ã€‚å¦‚æœè¿™ä¸ªæ•°å€¼å°äºå½“å‰å­—ç¬¦ä¸²çš„é•¿åº¦ï¼Œåˆ™è¿”å›å½“å‰å­—ç¬¦ä¸²æœ¬èº«ã€‚padStringï¼š(å¯é€‰)å¡«å……å­—ç¬¦ä¸²ã€‚å¦‚æœå­—ç¬¦ä¸²å¤ªé•¿ï¼Œä½¿å¡«å……åçš„å­—ç¬¦ä¸²é•¿åº¦è¶…è¿‡äº†ç›®æ ‡é•¿åº¦ï¼Œåˆ™åªä¿ç•™æœ€å·¦ä¾§çš„éƒ¨åˆ†ï¼Œå…¶ä»–éƒ¨åˆ†ä¼šè¢«æˆªæ–­ï¼Œæ­¤å‚æ•°çš„ç¼ºçœå€¼ä¸ºç©ºæ ¼ã€‚String.padEnd(targetLength,padString]) å‚æ•°é‡Šä¹‰åŒä¸Šã€‚ 1234567891011'es8'.padStart(2); // 'es8''es8'.padStart(5); // ' es8''es8'.padStart(6, '1891'); // '189es8''es8'.padStart(14, 'coffe'); // 'coffecoffecoffes8''es8'.padStart(7, '0'); // '0000es8''es8'.padEnd(2); // 'es8''es8'.padEnd(5); // 'es8 ''es8'.padEnd(6, '1891'); // 'es81891''es8'.padEnd(14, 'coffe'); // 'es8coffecoffecoff''es8'.padEnd(7, '9'); // 'es89999' Object.getOwnPropertyDescriptorsgetOwnPropertyDescriptorsæ–¹æ³•è¿”å›æŒ‡å®šå¯¹è±¡è‡ªå·±æ‰€æœ‰çš„å±æ€§å†…å®¹ï¼Œå¹¶ä¸”å±æ€§å†…å®¹åªæ˜¯è‡ªèº«ç›´æ¥å®šä¹‰çš„ï¼Œè€Œä¸æ˜¯ä»objectçš„åŸå‹ç»§æ‰¿è€Œæ¥çš„ã€‚å®šä¹‰æ˜¯ï¼šObject.getOwnPropertyDescriptors(obj)ï¼Œobj æ˜¯æŒ‡ç›®æ ‡å¯¹è±¡ï¼Œè¿™ä¸ªæ–¹æ³•è¿”å›çš„å€¼å¯èƒ½æ˜¯ configurableã€enumerableã€writableã€getã€set å’Œ valueã€‚ 12345678910111213141516171819const obj = &#123; get es7() &#123; return 7; &#125;, get es8() &#123; return 8; &#125;&#125;;Object.getOwnPropertyDescriptors(obj);// &#123;// es7: &#123;// configurable: true,// enumerable: true,// get: function es7()&#123;&#125;, //the getter function// set: undefined// &#125;,// es8: &#123;// configurable: true,// enumerable: true,// get: function es8()&#123;&#125;, //the getter function// set: undefined// &#125;// &#125; getOwnPropertyDescriptorså¯ä»¥ç”¨æ¥åˆ›å»ºå­ç±»ï¼š 12345678function superclass() &#123;&#125;superclass.prototype = &#123; // åœ¨è¿™é‡Œå®šä¹‰æ–¹æ³•å’Œå±æ€§&#125;;function subclass() &#123;&#125;subclass.prototype = Object.create(superclass.prototype, Object.getOwnPropertyDescriptors(&#123; // åœ¨è¿™é‡Œå®šä¹‰æ–¹æ³•å’Œå±æ€§&#125;)); å¼‚æ­¥å‡½æ•°Async Functionsä¹Ÿå°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„Async/Await,å·²ç»ç”¨çš„å¾ˆé¢‘ç¹äº†ï¼Œåœ¨æ­¤ä¸å†èµ˜è¿°ã€‚ SharedArrayBuffer &amp; AtomicsSharedArrayBuffer å¯¹è±¡ç”¨æ¥è¡¨ç¤ºä¸€ä¸ªé€šç”¨çš„ï¼Œå›ºå®šé•¿åº¦çš„åŸå§‹äºŒè¿›åˆ¶æ•°æ®ç¼“å†²åŒºï¼Œç±»ä¼¼äº ArrayBuffer å¯¹è±¡ï¼Œå®ƒä»¬éƒ½å¯ä»¥ç”¨æ¥åœ¨å…±äº«å†…å­˜ï¼ˆshared memoryï¼‰ä¸Šåˆ›å»ºè§†å›¾ã€‚ä¸ ArrayBuffer ä¸åŒçš„æ˜¯ï¼ŒSharedArrayBuffer ä¸èƒ½è¢«åˆ†ç¦»ã€‚ è¯·æ³¨æ„ï¼Œä½œä¸ºå¯¹Spectreçš„å“åº”ï¼Œæ‰€æœ‰ä¸»æµæµè§ˆå™¨å‡é»˜è®¤äº2018å¹´1æœˆ5æ—¥ç¦ç”¨SharedArrayBufferã€‚ Chromeåœ¨å¯ç”¨äº†ç½‘ç«™éš”ç¦»åŠŸèƒ½çš„å¹³å°ä¸Šçš„v67ä¸­é‡æ–°å¯ç”¨äº†è¯¥åŠŸèƒ½ï¼Œä»¥é˜²æ­¢å‡ºç°Spectreé£æ ¼çš„æ¼æ´ã€‚ è¯­æ³•ï¼š 123456/** * * @param &#123;*&#125; length æ‰€åˆ›å»ºçš„æ•°ç»„ç¼“å†²åŒºçš„å¤§å°ï¼Œä»¥å­—èŠ‚(byte)ä¸ºå•ä½ã€‚ * @returns &#123;SharedArrayBuffer&#125; ä¸€ä¸ªå¤§å°æŒ‡å®šçš„æ–° SharedArrayBuffer å¯¹è±¡ã€‚å…¶å†…å®¹è¢«åˆå§‹åŒ–ä¸º 0ã€‚ */new SharedArrayBuffer(length) å…±äº«å†…å­˜èƒ½è¢«åŒæ—¶åˆ›å»ºå’Œæ›´æ–°äºå·¥ä½œè€…çº¿ç¨‹æˆ–ä¸»çº¿ç¨‹ã€‚ä¾èµ–äºç³»ç»Ÿï¼ˆCPUï¼Œæ“ä½œç³»ç»Ÿï¼Œæµè§ˆå™¨ï¼‰ï¼Œå˜åŒ–ä¼ é€’ç»™æ‰€æœ‰ä¸Šä¸‹æ–‡ç¯å¢ƒéœ€è¦ä¸€æ®µæ—¶é—´ã€‚éœ€è¦é€šè¿‡ atomic æ“ä½œæ¥è¿›è¡ŒåŒæ­¥ã€‚ Atomics å¯¹è±¡æä¾›äº†ä¸€ç»„é™æ€æ–¹æ³•ç”¨æ¥å¯¹ SharedArrayBuffer å¯¹è±¡è¿›è¡ŒåŸå­æ“ä½œã€‚è¿™äº›åŸå­æ“ä½œå±äº Atomics æ¨¡å—ã€‚ä¸ä¸€èˆ¬çš„å…¨å±€å¯¹è±¡ä¸åŒï¼ŒAtomics ä¸æ˜¯æ„é€ å‡½æ•°ï¼Œå› æ­¤ä¸èƒ½ä½¿ç”¨ new æ“ä½œç¬¦è°ƒç”¨ï¼Œä¹Ÿä¸èƒ½å°†å…¶å½“ä½œå‡½æ•°ç›´æ¥è°ƒç”¨ã€‚Atomics çš„æ‰€æœ‰å±æ€§å’Œæ–¹æ³•éƒ½æ˜¯é™æ€çš„ï¼ˆä¸ Math å¯¹è±¡ä¸€æ ·ï¼‰ã€‚ å¤šä¸ªå…±äº«å†…å­˜çš„çº¿ç¨‹èƒ½å¤ŸåŒæ—¶è¯»å†™åŒä¸€ä½ç½®ä¸Šçš„æ•°æ®ã€‚åŸå­æ“ä½œä¼šç¡®ä¿æ­£åœ¨è¯»æˆ–å†™çš„æ•°æ®çš„å€¼æ˜¯ç¬¦åˆé¢„æœŸçš„ï¼Œå³ä¸‹ä¸€ä¸ªåŸå­æ“ä½œä¸€å®šä¼šåœ¨ä¸Šä¸€ä¸ªåŸå­æ“ä½œç»“æŸåæ‰ä¼šå¼€å§‹ï¼Œå…¶æ“ä½œè¿‡ç¨‹ä¸ä¼šä¸­æ–­ã€‚ æ–¹æ³•å è¯´æ˜ Atomics.add() å°†æŒ‡å®šä½ç½®ä¸Šçš„æ•°ç»„å…ƒç´ ä¸ç»™å®šçš„å€¼ç›¸åŠ ï¼Œå¹¶è¿”å›ç›¸åŠ å‰è¯¥å…ƒç´ çš„å€¼ Atomics.and() å°†æŒ‡å®šä½ç½®ä¸Šçš„æ•°ç»„å…ƒç´ ä¸ç»™å®šçš„å€¼ç›¸ä¸ï¼Œå¹¶è¿”å›ä¸æ“ä½œå‰è¯¥å…ƒç´ çš„å€¼ã€‚ Atomics.compareExchange() å¦‚æœæ•°ç»„ä¸­æŒ‡å®šçš„å…ƒç´ ä¸ç»™å®šçš„å€¼ç›¸ç­‰ï¼Œåˆ™å°†å…¶æ›´æ–°ä¸ºæ–°çš„å€¼ï¼Œå¹¶è¿”å›è¯¥å…ƒç´ åŸå…ˆçš„å€¼ã€‚ Atomics.exchange() å°†æ•°ç»„ä¸­æŒ‡å®šçš„å…ƒç´ æ›´æ–°ä¸ºç»™å®šçš„å€¼ï¼Œå¹¶è¿”å›è¯¥å…ƒç´ æ›´æ–°å‰çš„å€¼ã€‚ Atomics.load() è¿”å›æ•°ç»„ä¸­æŒ‡å®šå…ƒç´ çš„å€¼ã€‚ Atomics.or() å°†æŒ‡å®šä½ç½®ä¸Šçš„æ•°ç»„å…ƒç´ ä¸ç»™å®šçš„å€¼ç›¸æˆ–ï¼Œå¹¶è¿”å›æˆ–æ“ä½œå‰è¯¥å…ƒç´ çš„å€¼ã€‚ Atomics.store() å°†æ•°ç»„ä¸­æŒ‡å®šçš„å…ƒç´ è®¾ç½®ä¸ºç»™å®šçš„å€¼ï¼Œå¹¶è¿”å›è¯¥å€¼ã€‚ Atomics.sub() å°†æŒ‡å®šä½ç½®ä¸Šçš„æ•°ç»„å…ƒç´ ä¸ç»™å®šçš„å€¼ç›¸å‡ï¼Œå¹¶è¿”å›ç›¸å‡å‰è¯¥å…ƒç´ çš„å€¼ã€‚ Atomics.xor() å°†æŒ‡å®šä½ç½®ä¸Šçš„æ•°ç»„å…ƒç´ ä¸ç»™å®šçš„å€¼ç›¸å¼‚æˆ–ï¼Œå¹¶è¿”å›å¼‚æˆ–æ“ä½œå‰è¯¥å…ƒç´ çš„å€¼ã€‚ Atomics.wait() æ£€æµ‹æ•°ç»„ä¸­æŸä¸ªæŒ‡å®šä½ç½®ä¸Šçš„å€¼æ˜¯å¦ä»ç„¶æ˜¯ç»™å®šå€¼ï¼Œæ˜¯åˆ™ä¿æŒæŒ‚èµ·ç›´åˆ°è¢«å”¤é†’æˆ–è¶…æ—¶ã€‚è¿”å›å€¼ä¸º â€œokâ€ã€â€not-equalâ€ æˆ– â€œtime-outâ€ã€‚è°ƒç”¨æ—¶ï¼Œå¦‚æœå½“å‰çº¿ç¨‹ä¸å…è®¸é˜»å¡ï¼Œåˆ™ä¼šæŠ›å‡ºå¼‚å¸¸ï¼ˆå¤§å¤šæ•°æµè§ˆå™¨éƒ½ä¸å…è®¸åœ¨ä¸»çº¿ç¨‹ä¸­è°ƒç”¨ wait()ï¼‰ã€‚ Atomics.wake() å”¤é†’ç­‰å¾…é˜Ÿåˆ—ä¸­æ­£åœ¨æ•°ç»„æŒ‡å®šä½ç½®çš„å…ƒç´ ä¸Šç­‰å¾…çš„çº¿ç¨‹ã€‚è¿”å›å€¼ä¸ºæˆåŠŸå”¤é†’çš„çº¿ç¨‹æ•°é‡ã€‚ Atomics.isLockFree(size) å¯ä»¥ç”¨æ¥æ£€æµ‹å½“å‰ç³»ç»Ÿæ˜¯å¦æ”¯æŒç¡¬ä»¶çº§çš„åŸå­æ“ä½œã€‚å¯¹äºæŒ‡å®šå¤§å°çš„æ•°ç»„ï¼Œå¦‚æœå½“å‰ç³»ç»Ÿæ”¯æŒç¡¬ä»¶çº§çš„åŸå­æ“ä½œï¼Œåˆ™è¿”å› trueï¼›å¦åˆ™å°±æ„å‘³ç€å¯¹äºè¯¥æ•°ç»„ï¼ŒAtomics å¯¹è±¡ä¸­çš„å„åŸå­æ“ä½œéƒ½åªèƒ½ç”¨é”æ¥å®ç°ã€‚æ­¤å‡½æ•°é¢å‘çš„æ˜¯æŠ€æœ¯ä¸“å®¶ã€‚ ES 9 æ–°ç‰¹æ€§ æ–°ç‰¹æ€§ ä¸­æ–‡è¯´æ˜ Asynchronous Iteration å¼‚æ­¥è¿­ä»£å™¨ Promise.prototype.finally Lifting template literal restriction é‡æ–°ä¿®è®¢äº†å­—é¢é‡çš„è½¬ä¹‰ Rest/Spread Properties Rest/Spread å±æ€§ s (dotAll) flag for regular expressions æ­£åˆ™è¡¨è¾¾å¼dotAllæ¨¡å¼ RegExp named capture groups æ­£åˆ™è¡¨è¾¾å¼å‘½åæ•è·ç»„ RegExp Lookbehind Assertions æ­£åˆ™è¡¨è¾¾å¼åå‘æ–­è¨€ RegExp Unicode Property Escapes æ­£åˆ™è¡¨è¾¾å¼ Unicode è½¬ä¹‰ å¼‚æ­¥è¿­ä»£å™¨åœ¨async/awaitçš„æŸäº›æ—¶åˆ»ï¼Œä½ å¯èƒ½å°è¯•åœ¨åŒæ­¥å¾ªç¯ä¸­è°ƒç”¨å¼‚æ­¥å‡½æ•°ã€‚ä¾‹å¦‚ï¼š 12345async function func(array) &#123; for (let i of array) &#123; await someFunc(i); &#125;&#125; è¿™æ®µä»£ç ä¸ä¼šè¾¾åˆ°é¢„æœŸç›®çš„ï¼Œä¸‹é¢è¿™æ®µåŒæ ·ä¹Ÿä¸ä¼šï¼š 12345async function func(array) &#123; array.forEach(async i =&gt; &#123; await someFunc(i); &#125;);&#125; ä¸Šé¢è¿™æ®µä»£ç ä¸­ï¼Œå¾ªç¯æœ¬èº«ä¾æ—§ä¿æŒåŒæ­¥ï¼Œå¹¶åœ¨å†…éƒ¨å¼‚æ­¥å‡½æ•°ä¹‹å‰å…¨éƒ¨è°ƒç”¨å®Œæˆã€‚ å¼•å…¥å¼‚æ­¥è¿­ä»£å™¨åï¼Œå°±åƒå¸¸è§„è¿­ä»£å™¨ï¼Œé™¤äº†next()æ–¹æ³•è¿”å›ä¸€ä¸ªPromiseã€‚å› æ­¤awaitå¯ä»¥å’Œfor...ofå¾ªç¯ä¸€èµ·ä½¿ç”¨ï¼Œä»¥ä¸²è¡Œçš„æ–¹å¼è¿è¡Œå¼‚æ­¥æ“ä½œã€‚ 12345async function func(array) &#123; for await (let i of array) &#123;//å¼‚æ­¥è¿­ä»£ someFunc(i); &#125;&#125; æ›´å¤šè¯¦ç»†è®ºè¿°è§â€œå£¹.2.12â€ã€‚ Promise.prototype.finallyä¸€ä¸ªPromiseè°ƒç”¨é“¾è¦ä¹ˆæˆåŠŸåˆ°è¾¾æœ€åä¸€ä¸ª.then()ï¼Œè¦ä¹ˆå¤±è´¥è§¦å‘.catch()ã€‚åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œä½ æƒ³è¦åœ¨æ— è®ºPromiseè¿è¡ŒæˆåŠŸè¿˜æ˜¯å¤±è´¥ï¼Œè¿è¡Œç›¸åŒçš„ä»£ç ï¼Œä¾‹å¦‚æ¸…é™¤æ•°ç»„ã€åˆ é™¤å¯¹è¯ã€å…³é—­æ•°æ®åº“è¿æ¥ç­‰ï¼Œ.finally()å…è®¸å®ç°è¿™æ ·çš„ç›®çš„ã€‚ 1234567891011function func() &#123; promiseFunc() //è¿”å›ä¸€ä¸ªPromiseå¯¹è±¡ .then(() =&gt; &#123;&#125;) .then(() =&gt; &#123;&#125;) .catch(err =&gt; &#123; console.log(err); &#125;) .finally(() =&gt; &#123; //æ— è®ºpromiseFunc()è¿è¡ŒæˆåŠŸè¿˜æ˜¯å¤±è´¥ï¼Œè¿™é‡Œçš„ä»£ç ä¼šè¢«è°ƒç”¨åˆ° &#125;);&#125; æ›´å¤šè¯¦ç»†è®ºè¿°è§â€œå£¹.2.12â€ã€‚ é‡æ–°ä¿®è®¢äº†å­—é¢é‡çš„è½¬ä¹‰ES9 ä¹‹å‰ï¼Œ\\uè¡¨ç¤º unicode è½¬ä¹‰ï¼Œ\\xè¡¨ç¤ºåå…­è¿›åˆ¶è½¬ä¹‰ï¼Œ\\åè·Ÿä¸€ä¸ªæ•°å­—è¡¨ç¤ºå…«è¿›åˆ¶è½¬ä¹‰ï¼Œè¿™ä½¿å¾—åˆ›å»ºç‰¹å®šçš„å­—ç¬¦ä¸²å˜å¾—ä¸å¯èƒ½ï¼Œä¾‹å¦‚Windowsæ–‡ä»¶è·¯å¾„C:\\uuu\\xxx\\111ã€‚ è¦å–æ¶ˆè½¬ä¹‰åºåˆ—çš„è¯­æ³•é™åˆ¶ï¼Œå¯åœ¨æ¨¡æ¿å­—ç¬¦ä¸²ä¹‹å‰ä½¿ç”¨æ ‡è®°å‡½æ•°String.rawã€‚ 12345let s = `\\u&#123;54&#125;` //ä¼šè½¬ä¹‰æˆunicode \"T\"console.log(s);//&gt;&gt; Tlet str = String.raw`\\u&#123;54&#125;`; //ä¸ä¼šè¢«è½¬ä¹‰console.log(str);//&gt;&gt; \\u&#123;54&#125; Rest / Spread å±æ€§è¿™ä¸ªå°±æ˜¯æˆ‘ä»¬é€šå¸¸æ‰€è¯´çš„ä¸‰ä¸ªç‚¹...ï¼Œåœ¨=å·¦è¾¹çš„æ˜¯restå‚æ•°ï¼Œæ”¾åœ¨=å³è¾¹æˆ–è€…ä½œä¸ºå‚æ•°çš„æ˜¯æ‰©å±•è¿ç®—ç¬¦ï¼Œè¿™é¡¹ç‰¹æ€§åœ¨ES6ä¸­å·²ç»å¼•å…¥ï¼Œä½†æ˜¯ES6ä¸­çš„ä½œç”¨å¯¹è±¡ä»…é™äºæ•°ç»„ã€‚åœ¨ES9ä¸­ï¼Œä¸ºå¯¹è±¡æä¾›äº†åƒæ•°ç»„ä¸€æ ·çš„restå‚æ•°å’Œæ‰©å±•è¿ç®—ç¬¦ï¼š 12345678910111213const obj = &#123; a: 1, b: 2, c: 3&#125;;const &#123; a, ...param &#125; = obj; //è¿™é‡Œ...æ˜¯restå‚æ•°console.log(a); //&gt;&gt; 1console.log(param); //&gt;&gt; &#123;b: 2, c: 3&#125;function foo(&#123; a, ...param &#125;) &#123;//è¿™é‡Œ...æ˜¯æ‰©å±•è¿ç®—ç¬¦ console.log(a); //&gt;&gt; 1 console.log(param); //&gt;&gt; &#123;b: 2, c: 3&#125;&#125; æ­£åˆ™è¡¨è¾¾å¼dotAllæ¨¡å¼æ­£åˆ™è¡¨è¾¾å¼ä¸­ç‚¹.åŒ¹é…é™¤å›è½¦å¤–çš„ä»»ä½•å•å­—ç¬¦ï¼Œæ ‡è®°sæ”¹å˜è¿™ç§è¡Œä¸ºï¼Œå…è®¸åŒ¹é…å›è½¦æ¢è¡Œã€‚ 1234/hello.world/.test('hello\\nworld'); // false/hello.world/s.test('hello\\nworld'); // trueconsole.log(/hello.world/s.test(`helloworld`)) //&gt;&gt; true æ­£åˆ™è¡¨è¾¾å¼å‘½åæ•è·ç»„Javascriptæ­£åˆ™è¡¨è¾¾å¼ä¸­ä½¿ç”¨exec()åŒ¹é…åï¼Œèƒ½å¤Ÿè¿”å›ä¸€ä¸ªåŒ…å«åŒ¹é…å­—ç¬¦ä¸²çš„ç±»æ•°ç»„å¯¹è±¡ã€‚ 12345678const reDate = /(\\d&#123;4&#125;)-(\\d&#123;2&#125;)-(\\d&#123;2&#125;)/, match = reDate.exec(\"2018-08-06\");console.log(match);//&gt;&gt; [2018-08-06, 2018, 08, 06]//è¿™æ ·å°±å¯ä»¥ç›´æ¥ç”¨ç´¢å¼•æ¥è·å–å¹´æœˆæ—¥ï¼šlet year = match[1]; //&gt;&gt; 2018let month = match[2]; //&gt;&gt; 08let day = match[3]; //&gt;&gt; 06 è¿”å›æ•°ç»„çš„ç¬¬0é¡¹ä¸ºä¸æ­£åˆ™è¡¨è¾¾å¼ç›¸åŒ¹é…çš„æ–‡æœ¬ï¼Œç¬¬ 1 é¡¹æ˜¯ä¸ reDate çš„ç¬¬ 1 ä¸ªåˆ†ç»„\\d{4}ç›¸åŒ¹é…çš„æ–‡æœ¬ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰ï¼Œç¬¬ 2 é¡¹æ˜¯ä¸ reDate çš„ç¬¬ 2 ä¸ªåˆ†ç»„\\d{2}ç›¸åŒ¹é…çš„æ–‡æœ¬ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰ï¼Œä»¥æ­¤ç±»æ¨ã€‚æ­£åˆ™è¡¨è¾¾å¼çš„ç»„ä»¥()åŒ…èµ·æ¥ã€‚ ä¸Šé¢çš„æ¡ˆä¾‹ï¼Œè‹¥æ˜¯æ—¥æœŸæ ¼å¼å˜æˆæœˆæ—¥å¹´ï¼Œé‚£ä¹ˆæ”¹å˜æ­£åˆ™è¡¨è¾¾å¼çš„ç»“æ„åï¼Œè¿˜æœ‰å¯èƒ½ä¼šæ”¹å˜å˜é‡çš„èµ‹å€¼éƒ¨åˆ†çš„ä»£ç ã€‚å¦‚ä¸‹ç¤ºä¾‹ï¼š 12345678const reDate = /(\\d&#123;2&#125;)-(\\d&#123;2&#125;)-(\\d&#123;4&#125;)/,//è¡¨è¾¾å¼ç»“æ„å˜åŒ–äº† match = reDate.exec(\"08-06-2018\");console.log(match);//&gt;&gt; [08-06-2018, 08, 06, 2018]//æ­¤æ—¶å¹´æœˆæ—¥çš„èµ‹å€¼ä»£ç ä¹Ÿè¦æ”¹äº†,æ”¹çš„åœ°æ–¹çœŸå¤šå•Šï¼æ€ä¹ˆåŠï¼Ÿlet year = match[3]; //&gt;&gt; 2018let month = match[1]; //&gt;&gt; 08let day = match[2]; //&gt;&gt; 06 å¯ä»¥å‘ç°ä¸Šé¢çš„å†™æ³•æ”¹çš„åœ°æ–¹å¤ªå¤šäº†ï¼Œæœ‰æ²¡æœ‰åŠæ³•å°‘æ”¹ç‚¹ä»£ç çœçœäº‹å‘¢ï¼Ÿæœ‰ï¼ ES9 å…è®¸ä½¿ç”¨ç¬¦å·?&lt;name&gt;æ¥å‘½åæ•è·ç»„ï¼ˆä¹Ÿå³â€œåŒ¹é…åˆ°çš„ç»„â€ï¼‰ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 123456789const reDate = /(?&lt;year&gt;\\d&#123;4&#125;)-(?&lt;month&gt;\\d&#123;2&#125;)-(?&lt;day&gt;\\d&#123;2&#125;)/, match = reDate.exec(\"2018-08-06\");console.log(match);//&gt;&gt; [2018-08-06, 08, 06, 2018, groups: &#123;day: 06, month: 08, year: 2018&#125;]//æ­¤æ—¶ç”¨groupså¯¹è±¡æ¥è·å–å¹´æœˆæ—¥ï¼Œæ— è®ºæ­£åˆ™è¡¨è¾¾å¼æ€ä¹ˆå˜æ¢ï¼Œè¿™ä¸‹é¢ä¸‰è¡Œä¸ç”¨æ”¹äº†ï¼Œçœäº‹ï¼let year = match.groups.year; //&gt;&gt; 2018let month = match.groups.month; //&gt;&gt; 08let day = match.groups.day; //&gt;&gt; 06 å‘½åæ•è·ç»„çš„å†™æ³•ç›¸å½“äºæ˜¯æŠŠæ¯ä¸ªæ•è·ç»„éƒ½å®šä¹‰äº†ä¸€ä¸ªåå­—ï¼Œç„¶åå­˜å‚¨åˆ°è¿”å›å€¼çš„groupså±æ€§ä¸­ã€‚ æ­£åˆ™è¡¨è¾¾å¼åè¡Œæ–­è¨€å…ˆçœ‹çœ‹æ­£åˆ™è¡¨è¾¾å¼å…ˆè¡Œæ–­è¨€ç¤ºä¾‹ï¼š 123456const re1 = /\\D(\\d+)/, re2 = /\\D(?=\\d+)/,//\"?=\"æ˜¯æ­£å‘å…ˆè¡Œæ–­è¨€ match1 = re1.exec(\"$123.45\"), match2 = re2.exec(\"$123.45\");console.log(match1[0]); //&gt;&gt; $123console.log(match2[0]); //&gt;&gt; $ (?=pattern) é›¶å®½æ­£å‘å…ˆè¡Œæ–­è¨€(zero-width positive lookahead assertion)ä»£è¡¨å­—ç¬¦ä¸²ä¸­çš„ä¸€ä¸ªä½ç½®ï¼Œç´§æ¥è¯¥ä½ç½®ä¹‹åçš„å­—ç¬¦åºåˆ—èƒ½å¤ŸåŒ¹é…patternï¼› (?!pattern) é›¶å®½è´Ÿå‘å…ˆè¡Œæ–­è¨€(zero-width negative lookahead assertion)ä»£è¡¨å­—ç¬¦ä¸²ä¸­çš„ä¸€ä¸ªä½ç½®ï¼Œç´§æ¥è¯¥ä½ç½®ä¹‹åçš„å­—ç¬¦åºåˆ—ä¸èƒ½åŒ¹é…patternï¼› (?&lt;=pattern) é›¶å®½æ­£å‘åè¡Œæ–­è¨€(zero-width positive lookbehind assertion)ä»£è¡¨å­—ç¬¦ä¸²ä¸­çš„ä¸€ä¸ªä½ç½®ï¼Œç´§æ¥è¯¥ä½ç½®ä¹‹å‰çš„å­—ç¬¦åºåˆ—èƒ½å¤ŸåŒ¹é…patternï¼› (?&lt;!pattern) é›¶å®½è´Ÿå‘åè¡Œæ–­è¨€(zero-width negative lookbehind assertion)ä»£è¡¨å­—ç¬¦ä¸²ä¸­çš„ä¸€ä¸ªä½ç½®ï¼Œç´§æ¥è¯¥ä½ç½®ä¹‹å‰çš„å­—ç¬¦åºåˆ—ä¸èƒ½åŒ¹é…patternã€‚ åœ¨ES9ä¸­ï¼Œå¯ä»¥å…è®¸ä½¿ç”¨?&lt;=è¿›è¡Œæ­£å‘åè¡Œæ–­è¨€ï¼Œå¯ä»¥è·å–è´§å¸çš„ä»·æ ¼è€Œå¿½ç•¥è´§å¸ç¬¦å·ã€‚ 123const re= /(?&lt;=\\D)[\\d\\.]+/, match = re.exec(\"$123.45\");console.log(match[0]); //&gt;&gt; 123.45 ä¸Šé¢çš„æ­£å‘åè¡Œæ–­è¨€ï¼Œä¹Ÿå°±æ˜¯è¯´\\Dè¿™ä¸ªæ¡ä»¶å¿…é¡»æ»¡è¶³ï¼Œä½†\\DåŒ¹é…çš„å­—ç¬¦ä¸ä¼šä½œä¸ºç»“æœè¾“å‡ºï¼ˆå› ä¸ºå…ˆè¡Œ/åè¡Œæ–­è¨€å…¶å®åªæ˜¯åŒ¹é…äº†ä¸€ä¸ªä½ç½®ï¼‰ã€‚å¦‚æœæ˜¯ä¸‹é¢è¿™æ ·ï¼š 12345const re= /(?&lt;=\\D)[\\d\\.]+/, match1 = re.exec(\"123.45\"), match2 = re.exec(\"12345\");console.log(match1 &amp;&amp; match1[0]); //&gt;&gt; 45console.log(match2 &amp;&amp; match1[0]); //&gt;&gt; null å¯ä»¥çœ‹åˆ°match1åŒ¹é…åˆ°çš„æ˜¯45,è¿™æ˜¯ç”±äºåœ¨.å‰é¢æ²¡æœ‰ä»»ä½•ç¬¦åˆ\\Dçš„åŒ¹é…å†…å®¹ï¼Œå®ƒä¼šä¸€ç›´æ‰¾åˆ°ç¬¦åˆ\\Dçš„å†…å®¹ï¼Œä¹Ÿå°±æ˜¯.ç„¶åè¿”å›åé¢çš„å†…å®¹ã€‚è€Œmatch2è‹¥æ˜¯æ²¡æœ‰æ»¡è¶³å‰é¢è‚¯å®šåå‘æ–­è¨€çš„æ¡ä»¶çš„è¯ï¼Œåˆ™ç»“æœè¿”å›nullã€‚ æ­£åˆ™è¡¨è¾¾å¼ Unicode è½¬ä¹‰ES9 ä¹‹å‰ï¼Œåœ¨æ­£åˆ™è¡¨è¾¾å¼ä¸­æœ¬åœ°è®¿é—® Unicode å­—ç¬¦å±æ€§æ˜¯ä¸è¢«å…è®¸çš„ã€‚ES9 æ·»åŠ äº† Unicode å±æ€§è½¬ä¹‰ï¼Œå½¢å¼ä¸º\\p{...}å’Œ\\P{...}ï¼Œåœ¨æ­£åˆ™è¡¨è¾¾å¼ä¸­ä½¿ç”¨æ ‡è®° u (unicode) è®¾ç½®ï¼Œåœ¨\\pçš„{...}å†…ï¼Œå¯ç”¨é”®å€¼å¯¹çš„æ–¹å¼è®¾ç½®éœ€è¦åŒ¹é…çš„å±æ€§è€Œéå…·ä½“å†…å®¹ã€‚ 123const regex = /\\p&#123;Script=Greek&#125;/u;//Greekä¸ºå¸Œè…Šè¯­çš„æ„æ€console.log(regex.test('a')); //&gt;&gt; flaseconsole.log(regex.test('Î£')); //&gt;&gt; true ES 10 æ–°ç‰¹æ€§ æ–°ç‰¹æ€§ ä¸­æ–‡è¯´æ˜ Optional catch binding å¯é€‰çš„ catch å˜é‡ç»‘å®š JSON superset JSONè¶…é›† Symbol.prototype.description Symbol å¯¹è±¡çš„ description å±æ€§ Function.prototype.toString revision ä¿®è®¢Function.prototype.toString Object.fromEntries Well-formed JSON.stringify æ›´åŠ å‹å¥½çš„JSON.stringify String.prototype.{trimStart,trimEnd} Array.prototype.{flat,flatMap} å¯é€‰çš„ catch å˜é‡ç»‘å®šåœ¨ ES10 ä¹‹å‰ï¼Œæˆ‘ä»¬å¿…é¡»é€šè¿‡è¯­æ³•ä¸º catch å­å¥ç»‘å®šå¼‚å¸¸å˜é‡ï¼Œæ— è®ºæ˜¯å¦æœ‰å¿…è¦ã€‚å¾ˆå¤šæ—¶å€™ catch å—æ˜¯å¤šä½™çš„ï¼Œè€Œ ES10 ä½¿æˆ‘ä»¬èƒ½å¤Ÿç®€å•çš„æŠŠå˜é‡çœç•¥æ‰ã€‚ 12345//ä¹‹å‰æ˜¯try &#123;&#125; catch(e) &#123;&#125;//ES10ä¹‹åå¯ä»¥å†™æˆï¼Œtry &#123;&#125; catch &#123;&#125;//çœæ‰äº†å˜é‡e JSONè¶…é›†ä»€ä¹ˆæ˜¯ JSON è¶…é›†ï¼Ÿç®€å•æ¥è¯´å°±æ˜¯ JSON æ˜¯ ECMAScript çš„å­é›†ï¼Œä¹Ÿå°±æ˜¯è¯´è®© ECMAScript å…¼å®¹ JSON çš„å†…å®¹æ‰€æ”¯æŒçš„å…¨éƒ¨æ–‡æœ¬ã€‚ ECMAScript åœ¨æ ‡å‡† JSON.parse éƒ¨åˆ†é˜æ˜äº† JSON ç¡®ä¸ºå…¶ä¸€ä¸ªå­é›†ï¼Œä½†ç”±äº JSON çš„å†…å®¹å¯ä»¥æ­£å¸¸åŒ…å« U+2028 è¡Œåˆ†éš”ç¬¦ä¸ U+2029 æ®µè½åˆ†éš”ç¬¦ï¼Œè€Œ ECMAScript å´ä¸è¡Œï¼Œæ‰€ä»¥ï¼Œè¯¥è‰æ¡ˆæ—¨åœ¨è§£å†³è¿™ä¸€é—®é¢˜ã€‚åœ¨è¿™ä¹‹å‰ï¼Œå¦‚æœä½ ä½¿ç”¨ JSON.parse() æ‰§è¡Œå¸¦å¦‚ä¸Šç‰¹æ®Šå­—ç¬¦çš„å­—ç¬¦ä¸²æ—¶ï¼Œåªä¼šæ”¶åˆ° SyntaxError çš„é”™è¯¯æç¤ºã€‚è¯¥è‰æ¡ˆåŒæ ·æ˜¯å‘åå…¼å®¹çš„ï¼Œå…¶å¯¹ç”¨æˆ·å”¯ä¸€çš„å½±å“æ˜¯ä¿æŒåŸæ ·ï¼Œå³åœ¨æš‚ä¸æ”¯æŒç‰¹æ®Šå­—ç¬¦è§£æçš„è¿è¡Œç¯å¢ƒä¸­ä¿æŒæŠ¥é”™ SyntaxError ã€‚ Symbol å¯¹è±¡çš„ description å±æ€§ES10 ä¸­ä¸º Symbol å¯¹è±¡æ·»åŠ äº†åªè¯»å±æ€§ description ï¼Œè¯¥å¯¹è±¡è¿”å›åŒ…å« Symbol æè¿°çš„å­—ç¬¦ä¸²ã€‚åœ¨åˆ›å»ºSymbolæ—¶å‘å…¶æ·»åŠ description (æè¿°)ï¼Œèƒ½å¤Ÿç›´æ¥è®¿é—®description ï¼Œå¯¹è°ƒè¯•æ˜¯å¾ˆæœ‰ç”¨çš„ã€‚ 123456789101112let sym = Symbol('foo');//æ·»åŠ çš„æè¿°å†…å®¹ä¸ºâ€œfooâ€console.log(sym.description);//&gt;&gt; foosym = Symbol();console.log(sym.description);//&gt;&gt; undefined//å’Œ Symbol() ä¸åŒçš„æ˜¯ï¼Œç”¨ Symbol.for() æ–¹æ³•åˆ›å»ºçš„çš„ symbol ä¼šè¢«æ”¾å…¥ä¸€ä¸ªå…¨å±€//symbol æ³¨å†Œè¡¨ä¸­ã€‚Symbol.for() å¹¶ä¸æ˜¯æ¯æ¬¡éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ symbolï¼Œå®ƒä¼šé¦–å…ˆæ£€//æŸ¥ç»™å®šçš„ key æ˜¯å¦å·²ç»åœ¨æ³¨å†Œè¡¨ä¸­äº†ã€‚å‡å¦‚æ˜¯ï¼Œåˆ™ä¼šç›´æ¥è¿”å›ä¸Šæ¬¡å­˜å‚¨çš„é‚£ä¸ªã€‚å¦åˆ™ï¼Œå®ƒ//ä¼šå†æ–°å»ºä¸€ä¸ªã€‚sym = Symbol.for('bar');console.log(sym.description);//&gt;&gt; bar ä¿®è®¢Function.prototype.toStringå‡½æ•°åŸå‹ä¸Šçš„æ–¹æ³•toString()ç°åœ¨è¿”å›ç²¾ç¡®å­—ç¬¦ï¼ŒåŒ…æ‹¬ç©ºæ ¼å’Œæ³¨é‡Šã€‚ 123456789101112function /* comment */ foo /* another comment */() &#123;&#125;//ES10ä¹‹å‰ä¸ä¼šæ‰“å°æ³¨é‡Šéƒ¨åˆ†console.log(foo.toString()); //&gt;&gt; function foo()&#123;&#125;//ES10é‡Œï¼Œä¼šæŠŠæ³¨é‡Šä¸€åŒæ‰“å°console.log(foo.toString()); //&gt;&gt; function /* comment */ foo /* another comment */ ()&#123;&#125;//æ³¨æ„ï¼š//ç®­å¤´å‡½æ•°æ˜¯ä¸ªä¾‹å¤–const bar /* comment */ = /* another comment */ () =&gt; &#123;&#125;;console.log(bar.toString()); //&gt;&gt; () =&gt; &#123;&#125; Object.fromEntriesåœ¨ JavaScript æ“ä½œä¸­ï¼Œæ•°æ®åœ¨å„ç§æ•°æ®ç»“æ„ä¹‹é—´çš„è½¬æ¢éƒ½æ˜¯å¾ˆå®¹æ˜“çš„ï¼Œæ¯”å¦‚ Map åˆ°æ•°ç»„ã€Map åˆ° Setã€å¯¹è±¡åˆ° Map ç­‰ç­‰ã€‚ 12345678let map = new Map().set('foo', true).set('bar', false);let arr = Array.from(map);let set = new Set(map.values());let obj = &#123; foo: true, bar: false &#125;;//ä¸‹ä¸€å¥ Object.entries() æ–¹æ³•è¿”å›ç»™å®šå¯¹è±¡ obj è‡ªèº«å¯æšä¸¾å±æ€§çš„é”®å€¼å¯¹æ•°ç»„,//å½¢å¦‚ï¼š[[\"foo\",true],[\"bar\",false]]let newMap = new Map(Object.entries(obj)); ä½†æ˜¯å¦‚æœæˆ‘ä»¬éœ€è¦å°†ä¸€ä¸ªé”®å€¼å¯¹åˆ—è¡¨è½¬æ¢ä¸ºå¯¹è±¡ï¼Œå°±è¦å†™ç‚¹è´¹åŠ²çš„ä»£ç äº†ã€‚ 123456let map = new Map().set(\"foo\", true).set(\"bar\", false);let obj = Array.from(map).reduce((acc, [key, val]) =&gt; &#123; return Object.assign(acc, &#123; [key]: val &#125;);&#125;, &#123;&#125;); è¯¥ç‰¹æ€§çš„ç›®çš„åœ¨äºä¸ºå¯¹è±¡æ·»åŠ ä¸€ä¸ªæ–°çš„é™æ€æ–¹æ³• Object.fromEntriesï¼Œç”¨äºå°†ç¬¦åˆé”®å€¼å¯¹çš„åˆ—è¡¨ï¼ˆä¾‹å¦‚ Mapã€æ•°ç»„ç­‰ï¼‰è½¬æ¢ä¸ºä¸€ä¸ªå¯¹è±¡ã€‚ä¸Šä¸€å—çš„ä»£ç ä¸­çš„è½¬æ¢é€»è¾‘ï¼Œç°åœ¨æˆ‘ä»¬åªéœ€è¦ä¸€è¡Œä»£ç å³å¯æå®šã€‚ 12const map = new Map().set(\"foo\", true).set(\"bar\", false);let obj = Object.fromEntries(map); æ›´åŠ å‹å¥½çš„ JSON.stringifyES10 ä¹‹å‰ï¼Œå½“ä½ ä½¿ç”¨ JSON.stringify() å¤„ç†æ— æ³•ç”¨ UTF-8 ç¼–ç è¡¨ç¤ºçš„å­—ç¬¦æ—¶ï¼ˆU+D800 è‡³ U+DFFFï¼‰ï¼Œè¿”å›çš„ç»“æœä¼šæ˜¯ä¸€ä¸ªä¹±ç  Unicode å­—ç¬¦â€œï¿½â€ã€‚è¯¥ç‰¹æ€§æå‡ºç”¨JSON.stringify()æ¥å®‰å…¨çš„è¡¨ç¤ºè¿™äº›ä¸æ­£å¸¸çš„UTF-8å­—ç¬¦ã€‚ 123456789101112let r;r = JSON.stringify(\"â¤\"); //æ­£å¸¸çš„UTF-8å­—ç¬¦åŸæ ·è¾“å‡ºconsole.log(r); //&gt;&gt; \"â¤\"r = JSON.stringify('\\u2764'); //æ­£å¸¸çš„UTF-8å­—ç¬¦ç¼–ç ï¼Œè¾“å‡ºè§£ç ä¹‹åçš„æ¨¡æ ·console.log(r); //&gt;&gt; \"â¤\"r = JSON.stringify(\"\\uDF06\\uD834\"); //ä¸æ­£å¸¸çš„UTF-8å­—ç¬¦ç¼–ç ï¼Œåˆ™ä»¥unicodeå½¢å¼è¾“å‡ºconsole.log(r); //&gt;&gt; \"\\udf06\\ud834\"r = JSON.stringify(\"\\uDEAD\"); //ä¸æ­£å¸¸çš„UTF-8å­—ç¬¦ç¼–ç ï¼Œåˆ™ä»¥unicodeå½¢å¼è¾“å‡ºconsole.log(r); //&gt;&gt; \"\\udead\" String.prototype.{trimStart,trimEnd}æ–°å¢äº†Stringçš„trimStart()æ–¹æ³•å’ŒtrimEnd()æ–¹æ³•ï¼Œè¿™ä¸¤ä¸ªæ–¹æ³•å¾ˆå¥½ç†è§£ï¼Œåˆ†åˆ«å»é™¤å­—ç¬¦ä¸²é¦–ã€å°¾çš„ç©ºç™½å­—ç¬¦ï¼Œå°±ä¸ä¸¾ä¾‹å ç¯‡å¹…äº†ã€‚ Array.prototype.{flat,flatMap}è¿™ä¸ªç‰¹æ€§æ–°åˆ›é€ äº†ä¸¤ä¸ªæ–¹æ³•ï¼Œå…¶ä¸­ï¼š Array.prototype.flat æ•°ç»„çš„æ‰€æœ‰é¡¹ä¼šä»¥æŒ‡å®šçš„ç»´åº¦é™ç»´ï¼ˆæ‰å¹³åŒ–ï¼‰ï¼Œç„¶åç»„æˆæ–°æ•°ç»„è¿”å›ï¼› Array.prototype.flatMap é¦–å…ˆä¼šæ‰§è¡Œä¸€æ¬¡map()æ–¹æ³•ï¼Œç„¶åå†é€šè¿‡ç±»ä¼¼flat()æ–¹æ³•æ‰å¹³åŒ–æ•°ç»„ã€‚å®ƒç­‰åŒäºæ‰§è¡Œå®Œ map() åå†æ‰§è¡Œä¸€æ¬¡ flat() æ–¹æ³•ï¼Œæ‰€ä»¥å½“ä½ æ‰§è¡Œ map() è¿”å›çš„ç»“æœå¦‚æœæ˜¯ä¸ªæ•°ç»„ï¼Œç„¶ååˆè¦å°†å…¶æ‰å¹³åŒ–æ—¶ï¼Œè¿™ä¸ªæ–¹æ³•ä¼šæ˜¾å¾—æ–¹ä¾¿ã€‚ æ¥çœ‹å‡ ä¸ªä¾‹å­è§£é‡Šä¸€ä¸‹ï¼Œé¦–å…ˆ flat() æ–¹æ³•æ”¯æŒå¤šç»´æ•°ç»„çš„æ‰å¹³åŒ–ï¼Œå…¶ä¸­Infinityå¯ä»¥å°†å¤šç»´æ•°ç»„å‹æ‰æˆä¸€ç»´æ•°ç»„ã€‚ 123456789let r;r = [\"1\", [\"8\", [\"9\", [\"1\"]]]].flat();//4ç»´æ•°ç»„ï¼Œé»˜è®¤é™ç»´1ï¼Œå˜æˆ3ç»´æ•°ç»„console.log(r); //&gt;&gt; [ '1', '8', [ '9', ['1'] ] ]r = [\"1\", [\"8\", [\"9\", [\"1\"]]]].flat(2); //4ç»´æ•°ç»„ï¼Œé™ç»´2ï¼Œå˜æˆ2ç»´æ•°ç»„console.log(r); //&gt;&gt; [ '1', '8', '9', ['1'] ]r = [\"1\", [\"8\", [\"9\", [\"1\"]]]].flat(Infinity);//4ç»´æ•°ç»„ï¼Œæœ€å¤šå˜æˆ1ç»´æ•°ç»„console.log(r); //&gt;&gt; [ '1', '8', '9', '1' ] æ¥ç€æ¥çœ‹çœ‹flatMap() 123456let r;r = [\"I love\", \"coffe 1891\"].map(item =&gt; item.split(\" \"));console.log(r); //&gt;&gt; [ [ 'I', 'love' ], [ 'coffe', '1891' ] ]r = [\"I love\", \"coffe 1891\"].flatMap(item =&gt; item.split(\" \"));console.log(r); //&gt;&gt;[ 'I', 'love', 'coffe', '1891' ] ES 11 æ–°ç‰¹æ€§ä¸€è§ˆ æ–°ç‰¹æ€§ ä¸­æ–‡è¯´æ˜ String.prototype.matchAll import() import()å‡½æ•° Promise.allSettled String.prototype.matchAllmatchAll() æ–¹æ³•è¿”å›ä¸€ä¸ªåŒ…å«æ‰€æœ‰åŒ¹é…æ­£åˆ™è¡¨è¾¾å¼åŠåˆ†ç»„æ•è·ç»“æœçš„è¿­ä»£å™¨ï¼ˆiteratorï¼‰ã€‚ åœ¨ matchAll å‡ºç°ä¹‹å‰ï¼Œé€šè¿‡åœ¨å¾ªç¯ä¸­è°ƒç”¨Regexp.execæ¥è·å–æ‰€æœ‰åŒ¹é…é¡¹ä¿¡æ¯ï¼ˆRegexpéœ€ä½¿ç”¨/gæ ‡å¿—ï¼‰ï¼š 12345678const regexp = RegExp('foo*','g');const str = 'coffe football, foosball';while ((matches = regexp.exec(str)) !== null) &#123; console.log(`æ‰¾åˆ° $&#123;matches[0]&#125;ï¼Œä¸‹ä¸€è½®å¾ªç¯ä»ä½ç½® $&#123;regexp.lastIndex&#125; å¼€å§‹`); //&gt;&gt; æ‰¾åˆ° fooï¼Œä¸‹ä¸€è½®å¾ªç¯ä»ä½ç½® 9 å¼€å§‹ //&gt;&gt; æ‰¾åˆ° fooï¼Œä¸‹ä¸€è½®å¾ªç¯ä»ä½ç½® 19 å¼€å§‹&#125; å¦‚æœä½¿ç”¨matchAll ï¼Œå°±å¯ä»¥ä¸å¿…ä½¿ç”¨whileå¾ªç¯åŠ execæ–¹å¼ï¼ˆä¸”æ­£åˆ™è¡¨è¾¾å¼éœ€ä½¿ç”¨/gæ ‡å¿—ï¼‰ã€‚ä½¿ç”¨matchAll ä¼šå¾—åˆ°ä¸€ä¸ªè¿­ä»£å™¨çš„è¿”å›å€¼ï¼Œé…åˆ for...ofï¼Œarray spreadï¼ŒArray.from() å¯ä»¥æ›´æ–¹ä¾¿å®ç°åŠŸèƒ½ã€‚ 123456789101112131415161718const regexp = RegExp('foo*','g');const str = 'coffe football, foosball';let matches = str.matchAll(regexp);for (const match of matches) &#123; console.log(match);&#125;//&gt;&gt; [ \"foo\" ]//&gt;&gt; [ \"foo\" ]//æ³¨æ„ï¼š//matchesçš„è¿­ä»£å™¨åœ¨for..ofä¹‹åå·²ç»è¢«æ¶ˆè€—æ‰äº†ï¼Œ//éœ€è¦å†æ¬¡è°ƒç”¨matchAllåˆ›å»ºä¸€ä¸ªæ–°çš„è¿­ä»£å™¨matches = str.matchAll(regexp);let arr = Array.from(matches, m =&gt; m[0]);console.log(arr);//&gt;&gt; [ \"foo\", \"foo\" ] import()å‡½æ•°è¿™ä¸ªç‰¹æ€§ä¸ºJavaScriptæ·»åŠ äº†ä¸€ä¸ªç±»å‡½æ•°ï¼ˆfunction-likeï¼‰çš„import()åŠŸèƒ½ï¼Œä»¥ä¾¿å¯ä»¥åƒå‡½æ•°ä¼ å‚é‚£æ ·ä¼ å…¥å‚æ•°å®ç°åŠ¨æ€ï¼ˆæ²¡é”™ï¼Œimportæ˜¯é™æ€å¼•ç”¨çš„ï¼‰å¼•ç”¨æ¨¡å—ï¼ˆmoduleï¼‰ã€‚ä¸‹é¢æœ‰ä¸ªå•é¡µåº”ç”¨ç®€å•ç¤ºä¾‹ï¼Œæ¼”ç¤ºäº†ç”¨import()å¼€å¯æ‡’åŠ è½½ã€‚ 12345678910111213141516171819202122232425&lt;!DOCTYPE html&gt;&lt;nav&gt; &lt;a href&#x3D;&quot;books.html&quot; data-entry-module&#x3D;&quot;books&quot;&gt;ä¹¦ç±&lt;&#x2F;a&gt; &lt;a href&#x3D;&quot;movies.html&quot; data-entry-module&#x3D;&quot;movies&quot;&gt;ç”µå½±&lt;&#x2F;a&gt; &lt;a href&#x3D;&quot;video-games.html&quot; data-entry-module&#x3D;&quot;video-games&quot;&gt;ç”µè§†æ¸¸æˆ&lt;&#x2F;a&gt;&lt;&#x2F;nav&gt;&lt;main&gt;å†…å®¹å°†ä¼šåŠ è½½åˆ°è¿™é‡Œï¼&lt;&#x2F;main&gt;&lt;script&gt; const main &#x3D; document.querySelector(&quot;main&quot;); for (const link of document.querySelectorAll(&quot;nav &gt; a&quot;)) &#123; link.addEventListener(&quot;click&quot;, e &#x3D;&gt; &#123; e.preventDefault(); import(&#96;.&#x2F;section-modules&#x2F;$&#123;link.dataset.entryModule&#125;.js&#96;)&#x2F;&#x2F;åŠ¨æ€å¼•ç”¨ .then(module &#x3D;&gt; &#123;&#x2F;&#x2F;åŠ è½½æ¨¡å—æˆåŠŸä»¥åï¼Œè¯¥æ¨¡å—ä¼šå½“ä½œthenæ–¹æ³•çš„å‚æ•° module.loadPageInto(main); &#125;) .catch(err &#x3D;&gt; &#123;&#x2F;&#x2F;æ•æ‰å¼‚å¸¸ main.textContent &#x3D; err.message; &#125;); &#125;); &#125;&lt;&#x2F;script&gt; è¯·æ³¨æ„import()å’Œimportçš„åŒºåˆ«ï¼š import() å¯ä»¥ç”¨åœ¨scriptè„šæœ¬åŒºï¼Œä¸æ­¢æ˜¯æ¨¡å—å†…ï¼› å¦‚æœåœ¨æ¨¡å—å†…ä½¿ç”¨import()ï¼Œå®ƒå¯ä»¥åœ¨ä»»ä½•åœ°æ–¹ä»»ä½•çº§åˆ«æ‰§è¡Œï¼Œè€Œä¸æ˜¯è¢«æå‡åˆ°é¡¶çº§ï¼ˆä¼˜å…ˆæ‰§è¡Œï¼‰ï¼› import() æ˜¯è¿è¡Œæ—¶æ‰§è¡Œï¼Œä¹Ÿå³ä»€ä¹ˆæ—¶å€™è¿è¡Œåˆ°è¿™å¥ï¼Œå°±ä¼šåŠ è½½å‚æ•°æŒ‡å®šçš„æ¨¡å—ï¼›å‚æ•°ä¹Ÿå¯ä»¥æ˜¯åŠ¨æ€å¯å˜çš„ï¼Œä¸æ­¢æ˜¯é™æ€å‚æ•°ï¼› import() ä¸å»ºç«‹å¯é™æ€åˆ†æçš„ä¾èµ–å…³ç³»ï¼ˆé™æ€åˆ†æçš„æƒ…å†µä¸‹å¯ä»¥åšå¾ˆå¤šä¼˜åŒ–ï¼‰ï¼Œä½†æ˜¯ï¼Œåœ¨ä¸€äº›æ¯”è¾ƒç®€å•çš„æƒ…å†µä¸‹ï¼Œæ¯”å¦‚importï¼ˆâ€œ/foo.jsâ€ï¼‰ä¸­ï¼Œå®ç°ä»ç„¶å¯ä»¥æ‰§è¡Œé™æ€åˆ†æä¼˜åŒ–ã€‚ å¦‚æœæ¨¡å—é‡‡ç”¨defaultçš„å½¢å¼å¯¹å¤–æš´éœ²æ¥å£ï¼Œåˆ™å¯ç”¨defaultå±æ€§ç›´æ¥è·å¾—ã€‚ 1234import('./module.js').then(module =&gt; &#123; console.log(module.default);//ç›´æ¥é€šè¿‡defaultå±æ€§è·å¾—æ¨¡å—æš´éœ²çš„æ¥å£&#125;); Promise.allSettledä¸ºä»€ä¹ˆè¦æœ‰Promise.allSettled()ï¼Ÿ ä¸¾ä¾‹è¯´æ˜ï¼Œæ¯”å¦‚å„ä½ç”¨æˆ·åœ¨é¡µé¢ä¸Šé¢åŒæ—¶å¡«äº†3ä¸ªç‹¬ç«‹çš„è¡¨å•ï¼Œè¿™ä¸‰ä¸ªè¡¨å•åˆ†ä¸‰ä¸ªæ¥å£æäº¤åˆ°åç«¯ï¼Œä¸‰ä¸ªæ¥å£ç‹¬ç«‹ï¼Œæ²¡æœ‰é¡ºåºä¾èµ–ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬éœ€è¦ç­‰åˆ°è¯·æ±‚å…¨éƒ¨å®Œæˆåç»™ä¸ç”¨æˆ·æç¤ºè¡¨å•æäº¤çš„æƒ…å†µã€‚ åœ¨å¤šä¸ªpromiseåŒæ—¶è¿›è¡Œæ—¶å’±ä»¬å¾ˆå¿«ä¼šæƒ³åˆ°ä½¿ç”¨Promise.allæ¥è¿›è¡ŒåŒ…è£…ï¼Œä½†æ˜¯ç”±äºPromise.allçš„ä¸€ç¥¨å¦å†³çš„ç‰¹æ€§ï¼Œä¸‰ä¸ªæäº¤ä¸­è‹¥å‰é¢ä»»æ„ä¸€ä¸ªæäº¤å¤±è´¥ï¼Œåˆ™åé¢çš„è¡¨å•ä¹Ÿä¸ä¼šè¿›è¡Œæäº¤äº†ï¼Œè¿™å°±ä¸å’±ä»¬éœ€æ±‚ä¸ç¬¦åˆã€‚ Promise.allSettledè·ŸPromise.allç±»ä¼¼ï¼Œå…¶å‚æ•°æ¥å—ä¸€ä¸ªPromiseçš„æ•°ç»„ï¼Œè¿”å›ä¸€ä¸ªæ–°çš„Promiseï¼Œå”¯ä¸€çš„ä¸åŒåœ¨äºï¼Œå…¶æ²¡æœ‰ä¸€ç¥¨å¦å†³çš„ç‰¹æ€§ï¼Œä¹Ÿå°±æ˜¯è¯´å½“Promiseå…¨éƒ¨å¤„ç†å®Œæˆåæˆ‘ä»¬å¯ä»¥æ‹¿åˆ°æ¯ä¸ªPromiseçš„çŠ¶æ€ï¼Œè€Œä¸ç®¡å…¶æ˜¯å¦å¤„ç†æˆåŠŸã€‚ 123456Promise.allSettled([Promise.resolve(\"coffe\"), Promise.reject(\"1891\")]).then( arr =&gt; &#123; console.log(arr); //&gt;&gt; [ &#123; status: \"fulfilled\", value: \"coffe\"&#125;, //&gt;&gt; &#123; status: \"rejected\", reason: \"1891\" &#125; ] &#125;); æœ¬ç¯‡ç»“è¯­å¾ˆæ˜¾ç„¶ECMAScriptæ¥ä¸‹æ¥ä¼šæŒç»­ä¸æ–­åœ°æ›´æ–°ï¼ŒæŒ‰TC39çš„è®¡åˆ’æ˜¯æ¯å¹´éƒ½ä¼šå‘ä¸€ä¸ªæ–°ç‰ˆæœ¬ã€‚è™½ç„¶èŠ‚å¥å¾ˆå¿«ï¼Œä½†æ˜¯æˆ‘ä»¬å®Œå…¨æ²¡å¿…è¦æ‹…å¿ƒè·Ÿä¸ä¸ŠèŠ‚å¥ã€‚é™¤äº†ES6è¿™ä¸ªå²æ— å‰ä¾‹çš„ç‰ˆæœ¬å¸¦æ¥äº†è¶…å¤§é‡çš„æ–°ç‰¹æ€§å¤–ï¼Œä¹‹åæ¯å¹´å‘çš„ç‰ˆæœ¬éƒ½ä»…ä»…å¸¦æœ‰å°‘é‡çš„å¢é‡æ›´æ–°ï¼Œä½ åªéœ€è¦èŠ±45åˆ†é’Ÿå°±èƒ½ææ˜ç™½è¿™ä¸€å¹´æ›´æ–°çš„ç‰¹æ€§ã€‚ä¿æŒä¸€é¢—å¥½å¥‡çš„å¿ƒï¼Œä½ ä¼šä¸æ–­è¿›æ­¥ï¼Œå˜å¾—æ›´å¼ºï¼","categories":[{"name":"JavaScript","slug":"JavaScript","permalink":"http://blog.kobingo.xyz/categories/JavaScript/"}],"tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"http://blog.kobingo.xyz/tags/JavaScript/"}]},{"title":"post","slug":"framework-virtual-dom","date":"2020-05-13T17:28:22.000Z","updated":"2021-01-19T06:41:41.218Z","comments":true,"path":"framework-virtual-dom/","link":"","permalink":"http://blog.kobingo.xyz/framework-virtual-dom/","excerpt":"","text":"","categories":[],"tags":[]},{"title":"typeof å®ç°åŸç†","slug":"javascript-typeof","date":"2020-05-06T23:11:22.000Z","updated":"2021-01-19T06:41:41.222Z","comments":true,"path":"javascript-typeof/","link":"","permalink":"http://blog.kobingo.xyz/javascript-typeof/","excerpt":"typeof ä¸€èˆ¬è¢«ç”¨äºåˆ¤æ–­ä¸€ä¸ªå˜é‡çš„ç±»å‹ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨ typeof æ¥åˆ¤æ–­ number, string, object, boolean, function, undefined,symbol è¿™ä¸ƒç§ç±»å‹ï¼Œè¿™ç§åˆ¤æ–­èƒ½å¸®åŠ©æˆ‘ä»¬æå®šä¸€äº›é—®é¢˜ï¼Œæ¯”å¦‚åœ¨åˆ¤æ–­ä¸æ˜¯ object ç±»å‹çš„æ•°æ®çš„æ—¶å€™ï¼Œtypeof èƒ½æ¯”è¾ƒæ¸…æ¥šçš„å‘Šè¯‰æˆ‘ä»¬å…·ä½“æ˜¯å“ªä¸€ç±»çš„ç±»å‹ã€‚ä½†æ˜¯ï¼Œå¾ˆé—æ†¾çš„ä¸€ç‚¹æ˜¯ï¼Œtypeofåœ¨åˆ¤æ–­ä¸€ä¸ª object çš„æ•°æ®çš„æ—¶å€™åªèƒ½å‘Šè¯‰æˆ‘ä»¬è¿™ä¸ªæ•°æ®æ˜¯ object, è€Œä¸èƒ½ç»†è‡´çš„å…·ä½“åˆ°æ˜¯å“ªä¸€ç§ object, æ¯”å¦‚","text":"typeof ä¸€èˆ¬è¢«ç”¨äºåˆ¤æ–­ä¸€ä¸ªå˜é‡çš„ç±»å‹ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨ typeof æ¥åˆ¤æ–­ number, string, object, boolean, function, undefined,symbol è¿™ä¸ƒç§ç±»å‹ï¼Œè¿™ç§åˆ¤æ–­èƒ½å¸®åŠ©æˆ‘ä»¬æå®šä¸€äº›é—®é¢˜ï¼Œæ¯”å¦‚åœ¨åˆ¤æ–­ä¸æ˜¯ object ç±»å‹çš„æ•°æ®çš„æ—¶å€™ï¼Œtypeof èƒ½æ¯”è¾ƒæ¸…æ¥šçš„å‘Šè¯‰æˆ‘ä»¬å…·ä½“æ˜¯å“ªä¸€ç±»çš„ç±»å‹ã€‚ä½†æ˜¯ï¼Œå¾ˆé—æ†¾çš„ä¸€ç‚¹æ˜¯ï¼Œtypeofåœ¨åˆ¤æ–­ä¸€ä¸ª object çš„æ•°æ®çš„æ—¶å€™åªèƒ½å‘Šè¯‰æˆ‘ä»¬è¿™ä¸ªæ•°æ®æ˜¯ object, è€Œä¸èƒ½ç»†è‡´çš„å…·ä½“åˆ°æ˜¯å“ªä¸€ç§ object, æ¯”å¦‚ 123let s = new String(\"abc\");typeof s === \"object\"; // trues instanceof String; // true è¦æƒ³åˆ¤æ–­ä¸€ä¸ªæ•°æ®å…·ä½“æ˜¯å“ªä¸€ç§ object çš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦åˆ©ç”¨ instanceof è¿™ä¸ªæ“ä½œç¬¦æ¥åˆ¤æ–­ï¼Œè¿™ä¸ªæˆ‘ä»¬åé¢ä¼šè¯´åˆ°ã€‚ æ¥è°ˆè°ˆå…³äº typeof çš„åŸç†å§ï¼Œæˆ‘ä»¬å¯ä»¥å…ˆæƒ³ä¸€ä¸ªå¾ˆæœ‰æ„æ€çš„é—®é¢˜ï¼Œjs åœ¨åº•å±‚æ˜¯æ€ä¹ˆå­˜å‚¨æ•°æ®çš„ç±»å‹ä¿¡æ¯å‘¢ï¼Ÿæˆ–è€…è¯´ï¼Œä¸€ä¸ª js çš„å˜é‡ï¼Œåœ¨å®ƒçš„åº•å±‚å®ç°ä¸­ï¼Œå®ƒçš„ç±»å‹ä¿¡æ¯æ˜¯æ€ä¹ˆå®ç°çš„å‘¢ï¼Ÿ å…¶å®ï¼Œjs åœ¨åº•å±‚å­˜å‚¨å˜é‡çš„æ—¶å€™ï¼Œä¼šåœ¨å˜é‡çš„æœºå™¨ç çš„ä½ä½ 1-3 ä½å­˜å‚¨å…¶ç±»å‹ä¿¡æ¯ 000ï¼šå¯¹è±¡ 010ï¼šæµ®ç‚¹æ•° 100ï¼šå­—ç¬¦ä¸² 110ï¼šå¸ƒå°” 1ï¼šæ•´æ•° but, å¯¹äº undefined å’Œ null æ¥è¯´ï¼Œè¿™ä¸¤ä¸ªå€¼çš„ä¿¡æ¯å­˜å‚¨æ˜¯æœ‰ç‚¹ç‰¹æ®Šçš„ã€‚ `null`ï¼šæ‰€æœ‰æœºå™¨ç å‡ä¸º0 `undefined`ï¼šç”¨ âˆ’2^30 æ•´æ•°æ¥è¡¨ç¤ºæ‰€ä»¥ï¼Œtypeof åœ¨åˆ¤æ–­ null çš„æ—¶å€™å°±å‡ºç°é—®é¢˜äº†ï¼Œç”±äº null çš„æ‰€æœ‰æœºå™¨ç å‡ä¸º 0ï¼Œå› æ­¤ç›´æ¥è¢«å½“åšäº†å¯¹è±¡æ¥çœ‹å¾…ã€‚ ç„¶è€Œç”¨ instanceof æ¥åˆ¤æ–­çš„è¯ 1null instanceof null; // TypeError: Right-hand side of 'instanceof' is not an object null ç›´æ¥è¢«åˆ¤æ–­ä¸ºä¸æ˜¯ objectï¼Œè¿™ä¹Ÿæ˜¯ JavaScript çš„å†å²é—ç•™ bugï¼Œå¯ä»¥å‚è€ƒ typeof. å› æ­¤åœ¨ç”¨ typeof æ¥åˆ¤æ–­å˜é‡ç±»å‹çš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦æ³¨æ„ï¼Œæœ€å¥½æ˜¯ç”¨ typeof æ¥åˆ¤æ–­åŸºæœ¬æ•°æ®ç±»å‹ï¼ˆåŒ…æ‹¬ symbolï¼‰ï¼Œé¿å…å¯¹ null çš„åˆ¤æ–­ã€‚ è¿˜æœ‰ä¸€ä¸ªä¸é”™çš„åˆ¤æ–­ç±»å‹çš„æ–¹æ³•ï¼Œå°±æ˜¯ Object.prototype.toStringï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨è¿™ä¸ªæ–¹æ³•æ¥å¯¹ä¸€ä¸ªå˜é‡çš„ç±»å‹æ¥è¿›è¡Œæ¯”è¾ƒå‡†ç¡®çš„åˆ¤æ–­ 123456789Object.prototype.toString.call(1); // \"[object Number]\"Object.prototype.toString.call(\"hi\"); // \"[object String]\"Object.prototype.toString.call(&#123; a: \"hi\" &#125;); // \"[object Object]\"Object.prototype.toString.call([1, \"a\"]); // \"[object Array]\"Object.prototype.toString.call(true); // \"[object Boolean]\"Object.prototype.toString.call(() =&gt; &#123;&#125;); // \"[object Function]\"Object.prototype.toString.call(null); // \"[object Null]\"Object.prototype.toString.call(undefined); // \"[object Undefined]\"Object.prototype.toString.call(Symbol(1)); // \"[object Symbol]\" instanceof æ“ä½œç¬¦çš„å®ç°åŸç†ä¹‹å‰æˆ‘ä»¬æåˆ°äº† instanceof æ¥åˆ¤æ–­å¯¹è±¡çš„å…·ä½“ç±»å‹ï¼Œå…¶å® instanceof ä¸»è¦çš„ä½œç”¨å°±æ˜¯åˆ¤æ–­ä¸€ä¸ªå®ä¾‹æ˜¯å¦å±äºæŸç§ç±»å‹ 123let person = function () &#123;&#125;;let nicole = new person();nicole instanceof person; // true å½“ç„¶ï¼Œinstanceof ä¹Ÿå¯ä»¥åˆ¤æ–­ä¸€ä¸ªå®ä¾‹æ˜¯å¦æ˜¯å…¶çˆ¶ç±»å‹æˆ–è€…ç¥–å…ˆç±»å‹çš„å®ä¾‹ã€‚ 123456let person = function () &#123;&#125;;let programmer = function () &#123;&#125;;programmer.prototype = new person();let nicole = new programmer();nicole instanceof person; // truenicole instanceof programmer; // true instanceof å®ç°åŸç†ï¼š 12345678910111213function new_instance_of(leftVaule, rightVaule) &#123; let rightProto = rightVaule.prototype; // å–å³è¡¨è¾¾å¼çš„ prototype å€¼ leftVaule = leftVaule.__proto__; // å–å·¦è¡¨è¾¾å¼çš„__proto__å€¼ while (true) &#123; if (leftVaule === null) &#123; return false; &#125; if (leftVaule === rightProto) &#123; return true; &#125; leftVaule = leftVaule.__proto__; &#125;&#125; æ€»ç»“ç®€å•æ¥è¯´ï¼Œæˆ‘ä»¬ä½¿ç”¨ typeof æ¥åˆ¤æ–­åŸºæœ¬æ•°æ®ç±»å‹æ˜¯ ok çš„ï¼Œä¸è¿‡éœ€è¦æ³¨æ„å½“ç”¨ typeof æ¥åˆ¤æ–­ null ç±»å‹æ—¶çš„é—®é¢˜ï¼Œå¦‚æœæƒ³è¦åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡çš„å…·ä½“ç±»å‹å¯ä»¥è€ƒè™‘ç”¨ instanceofï¼Œä½†æ˜¯ instanceof ä¹Ÿå¯èƒ½åˆ¤æ–­ä¸å‡†ç¡®ï¼Œæ¯”å¦‚ä¸€ä¸ªæ•°ç»„ï¼Œä»–å¯ä»¥è¢« instanceof åˆ¤æ–­ä¸º Objectã€‚æ‰€ä»¥æˆ‘ä»¬è¦æƒ³æ¯”è¾ƒå‡†ç¡®çš„åˆ¤æ–­å¯¹è±¡å®ä¾‹çš„ç±»å‹æ—¶ï¼Œå¯ä»¥é‡‡å– Object.prototype.toString.call æ–¹æ³•ã€‚","categories":[{"name":"JavaScript","slug":"JavaScript","permalink":"http://blog.kobingo.xyz/categories/JavaScript/"}],"tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"http://blog.kobingo.xyz/tags/JavaScript/"}]},{"title":"ä¸€äº› JS å…³é”®æŠ€æœ¯çš„åº•å±‚å®ç°æ±‡æ€»","slug":"javascript-js-basic-implementation","date":"2020-05-06T22:40:35.000Z","updated":"2021-01-19T06:41:41.222Z","comments":true,"path":"javascript-js-basic-implementation/","link":"","permalink":"http://blog.kobingo.xyz/javascript-js-basic-implementation/","excerpt":"åœ¨è¿™é‡Œæ±‡æ€»ä¸€äº› JS å¸¸ç”¨æŠ€æœ¯çš„æºç å®ç°ï¼Œé€šè¿‡æºç äº†è§£å…¶å†…éƒ¨åŸç†ï¼Œå¯ä»¥åŠ æ·±å¯¹å…¶çš„ç†è§£ã€‚","text":"åœ¨è¿™é‡Œæ±‡æ€»ä¸€äº› JS å¸¸ç”¨æŠ€æœ¯çš„æºç å®ç°ï¼Œé€šè¿‡æºç äº†è§£å…¶å†…éƒ¨åŸç†ï¼Œå¯ä»¥åŠ æ·±å¯¹å…¶çš„ç†è§£ã€‚ Function.prototype.call() Function.prototype.apply() Function.prototype.bind() new çš„åŸç† reduce å®ç°åŸç† åŒå‘ç»‘å®š ç»§æ‰¿ Object.create instanceof å®ç° Array.isArray å®ç° getOwnPropertyNames å®ç° Promise å®ç° é˜²æŠ–/èŠ‚æµ å‡½æ•°æŸ¯é‡ŒåŒ–å®ç° å®ç°ç®€å•æ·±æ‹·è´ Function.prototype.call()call() æ–¹æ³•è°ƒç”¨ä¸€ä¸ªå‡½æ•°, å…¶å…·æœ‰ä¸€ä¸ªæŒ‡å®šçš„ this å€¼å’Œåˆ†åˆ«åœ°æä¾›çš„å‚æ•°ã€‚ è¯­æ³•ï¼šfun.call(thisArg, arg1, arg2, ...) 123456789101112131415161718192021222324252627282930313233/** * callçš„å®ç°åŸç† */const getGlobal = function () &#123; if (typeof self !== \"undefined\") return self; if (typeof window !== \"undefined\") return window; if (typeof global !== \"undefined\") return global;&#125;;Function.prototype.mcall = function (context) &#123; context = context ? Object(context) : getGlobal(); const fn = Symbol(\"anything\"); //åˆ›å»ºä¸€ä¸ªä¸é‡å¤çš„å¸¸é‡ context[fn] = this; let args = [...arguments].slice(1); let r = context[fn](...args); delete context[fn]; return r;&#125;;/** * ä¸€ä¸ªç”¨callå®ç°ç»§æ‰¿çš„ä¾‹å­ * @param &#123;*&#125; name * @param &#123;*&#125; price */function Product(name, price) &#123; this.name = name; this.price = price;&#125;function Fruit(name, price) &#123; Product.mcall(this, name, price); this.category = \"fruit\";&#125;var apple = new Fruit(\"apple\", 5);console.log(apple); Function.prototype.apply()apply()è°ƒç”¨ä¸€ä¸ªæŒ‡å®š this å€¼çš„å‡½æ•°, æ¥æ”¶ä½œä¸ºä¸€ä¸ªæ•°ç»„æˆ–è€…ç±»æ•°ç»„å¯¹è±¡æä¾›çš„å‚æ•°. è¯­æ³•ï¼š func.apply(thisArg, [argsArray]) 1234567891011121314151617181920212223242526272829303132333435const getGlobal = function () &#123; if (typeof self !== \"undefined\") return self; if (typeof window !== \"undefined\") return window; if (typeof global !== \"undefined\") return global;&#125;;/** * applyåŸç† */Function.prototype.apply = function (context, arr) &#123; context = context ? Object(context) : getGlobal(); console.log(\"context\", context); const fn = Symbol(\"anything\"); //åˆ›å»ºä¸€ä¸ªä¸é‡å¤çš„å¸¸é‡ context[fn] = this; // let args = [...arguments][1]; if (!arr) &#123; let r = context[fn](); delete context[fn]; return r; &#125; let r = context[fn](...arr); delete context[fn]; return r;&#125;;//ä½¿ç”¨ä¾‹å­var array = [\"a\", \"b\"];var elements = [0, 1, 2];array.push.apply(array, elements);console.log(\"array\", array); // [\"a\", \"b\", 0, 1, 2]function A(x, y) &#123; console.log(this.b + \" \" + x + \" \" + y);&#125;var B = &#123; b: 1 &#125;;A.apply(B, [2, 3]); Function.prototype.bind()bind()æ–¹æ³•åˆ›å»ºä¸€ä¸ªæ–°å‡½æ•°, åœ¨è°ƒç”¨æ—¶è®¾ç½® this å…³é”®å­—ä¸ºæä¾›çš„å€¼ã€‚ è¯­æ³•ï¼šfun.bind(thisArg, arg1, arg2, ...) 12345678910111213141516171819202122const getGlobal = function () &#123; if (typeof self !== \"undefined\") return self; if (typeof window !== \"undefined\") return window; if (typeof global !== \"undefined\") return global;&#125;;/** * bindå®ç°åŸç† */Function.prototype.bind = function (context) &#123; context = context ? Object(context) : getGlobal(); const me = this; const args = [...arguments].slice(1); return function () &#123; me.apply(context, [...args, ...arguments]); &#125;;&#125;;function A(x, y) &#123; console.log(this.b + \", \" + x + \", \" + y);&#125;var B = &#123; b: 1 &#125;;let fnc = A.bind(B, 2); //1 2 3fnc(3); new çš„åŸç†åœ¨äº†è§£ new åŸç†ä¹‹å‰å…ˆçœ‹çœ‹ js çš„å†…éƒ¨æœºåˆ¶å›¾ æˆ‘ä»¬éœ€è¦çŸ¥é“å½“ new çš„æ—¶å€™åšäº†ä»€ä¹ˆäº‹æƒ… åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ï¼› å°†æ„é€ å‡½æ•°çš„ä½œç”¨åŸŸèµ‹ç»™æ–°å¯¹è±¡ï¼ˆå› æ­¤ this å°±æŒ‡å‘äº†è¿™ä¸ªæ–°å¯¹è±¡ï¼‰ æ‰§è¡Œæ„é€ å‡½æ•°ä¸­çš„ä»£ç ï¼ˆä¸ºè¿™ä¸ªæ–°å¯¹è±¡æ·»åŠ å±æ€§ï¼‰ è¿”å›æ–°å¯¹è±¡ã€‚ new æ²¡æ³•é‡å†™ï¼Œè¿™é‡Œæ˜¯æœ‰ mockNew å‡½æ•°æ¥æ¨¡æ‹Ÿ 1234567891011121314151617181920212223242526272829303132/** * newå®ç°åŸç† */function mockNew() &#123; //åˆ›å»ºä¸€ä¸ªå®ä¾‹ const obj = &#123;&#125;; //è·å¾—æ„é€ å™¨ const constructor = [].shift.call(arguments); //å®ç°ç»§æ‰¿ï¼Œå®ä¾‹å¯ä»¥è®¿é—®æ„é€ å™¨ç†Ÿæ‚‰ obj.__proto__ = constructor.prototype; //è°ƒç”¨æ„é€ å™¨ï¼Œæ”¹å˜thisæŒ‡å‘ä¸ºå®ä¾‹ const res = constructor.apply(obj, arguments); //å¦‚æœæ„é€ å™¨å‡½æ•°è¿”å›å€¼ä¸ºå¯¹è±¡ï¼Œåˆ™è¿”å›è¿™ä¸ªå¯¹è±¡ï¼Œå¦åˆ™è¿”å›æ–°çš„å®ä¾‹å¯¹è±¡ return res instanceof Object ? res : obj;&#125;/** * ä½¿ç”¨ä¾‹å­ * @param &#123;*&#125; color * @param &#123;*&#125; name */function Car(color, name) &#123; this.color = color; return &#123; name: name, &#125;;&#125;let car = mockNew(Car, \"black\", \"BMW\");console.log(car.color);// undefinedconsole.log(car.name);// \"BMW\" reduce å®ç°åŸç†12345678910111213141516171819202122232425262728293031323334/** * å®ç°åŸç† */Array.prototype.mockReduce = function (callback) &#123; const length = this.length; let reducer = undefined, //ç´¯åŠ å™¨ï¼Œæœ€ç»ˆè¿”å›è¿™ä¸ªå€¼ k = 0, //æ•°ç»„ä¸‹æ ‡ initVal = [...arguments].length &gt; 1 ? [...arguments][1] : undefined; //ä¼ å…¥reduceçš„åˆå§‹å€¼ if (typeof callback !== \"function\") &#123; throw new TypeError(callback + \" is not a function\"); &#125; if (length === 0 &amp;&amp; !initVal) &#123; throw new TypeError(\"Reduce of empty array with no initial value\"); &#125; if (initVal) &#123; reducer = initVal; &#125; else &#123; reducer = this[0]; k++; &#125; while (k &lt; length) &#123; if (this.hasOwnProperty(k)) &#123; const kValue = this[k]; reducer = callback(reducer, kValue); &#125; k++; &#125; return reducer;&#125;;const rReduce = [].reduce((a, b) =&gt; a + b, 3);const mReduce = [].mockReduce((a, b) =&gt; a + b);console.log(rReduce, mReduce); åŒå‘ç»‘å®šdefinePropertyå®ç° 123456789101112131415161718// æ•°æ®const data = &#123; text: \"hello\",&#125;;const input = document.getElementById(\"input\");const p = document.getElementById(\"p\");// æ•°æ®åŠ«æŒObject.defineProperty(data, \"text\", &#123; // æ•°æ®å˜åŒ– --&gt; ä¿®æ”¹è§†å›¾ set(newVal) &#123; input.value = newVal; p.innerHTML = newVal; &#125;,&#125;);// è§†å›¾æ›´æ”¹ --&gt; æ•°æ®å˜åŒ–input.addEventListener(\"keyup\", function (e) &#123; data.text = e.target.value;&#125;); proxyå®ç° 12345678910111213141516171819202122// æ•°æ®const data = &#123; text: \"default\",&#125;;const input = document.getElementById(\"input\");const p = document.getElementById(\"p\");// æ•°æ®åŠ«æŒconst handler = &#123; set(target, key, value) &#123; target[key] = value; // æ•°æ®å˜åŒ– --&gt; ä¿®æ”¹è§†å›¾ input.value = value; p.innerHTML = value; return value; &#125;,&#125;;const proxy = new Proxy(data, handler);// è§†å›¾æ›´æ”¹ --&gt; æ•°æ®å˜åŒ–input.addEventListener(\"keyup\", function (e) &#123; proxy.text = e.target.value;&#125;); ç»§æ‰¿12345678910111213141516171819202122232425function inheritPrototype(subType, superType) &#123; var protoType = Object.create(superType.prototype); //åˆ›å»ºå¯¹è±¡ protoType.constructor = subType; //å¢å¼ºå¯¹è±¡ subType.prototype = protoType; //æŒ‡å®šå¯¹è±¡&#125;function SuperType(name) &#123; this.name = name; this.colors = [\"red\", \"blue\", \"green\"];&#125;SuperType.prototype.sayName = function () &#123; alert(this.name);&#125;;function SubType(name, age) &#123; SuperType.call(this, name); this.age = age;&#125;inheritPrototype(SubType, SuperType);SubType.prototype.sayAge = function () &#123; alert(this.age);&#125;;var instance = new SubType(\"Bob\", 18);instance.sayName();instance.sayAge(); Object.create1234567891011121314151617181920if (typeof Object.create !== \"function\") &#123; Object.create = function (prototype, properties) &#123; if (typeof prototype !== \"object\") &#123; throw TypeError(); &#125; function Ctor() &#123;&#125; Ctor.prototype = prototype; var o = new Ctor(); if (prototype) &#123; o.constructor = Ctor; &#125; if (properties !== undefined) &#123; if (properties !== Object(properties)) &#123; throw TypeError(); &#125; Object.defineProperties(o, properties); &#125; return o; &#125;;&#125; instanceof å®ç°åŸç†ï¼š L çš„ __proto__ æ˜¯ä¸æ˜¯ç­‰äº R.prototypeï¼Œä¸ç­‰äºå†æ‰¾ L.__proto__.__proto__ ç›´åˆ° __proto__ ä¸º null 1234567891011// L è¡¨ç¤ºå·¦è¡¨è¾¾å¼ï¼ŒR è¡¨ç¤ºå³è¡¨è¾¾å¼function instance_of(L, R) &#123; var O = R.prototype; L = L.__proto__; while (true) &#123; if (L === null) return false; // è¿™é‡Œé‡ç‚¹ï¼šå½“ O ä¸¥æ ¼ç­‰äº L æ—¶ï¼Œè¿”å› true if (O === L) return true; L = L.__proto__; &#125;&#125; Array.isArray å®ç°12345Array.myIsArray = function (o) &#123; return Object.prototype.toString.call(Object(o)) === \"[object Array]\";&#125;;console.log(Array.myIsArray([])); // true getOwnPropertyNames å®ç°123456789101112131415if (typeof Object.getOwnPropertyNames !== \"function\") &#123; Object.getOwnPropertyNames = function (o) &#123; if (o !== Object(o)) &#123; throw TypeError(\"Object.getOwnPropertyNames called on non-object\"); &#125; var props = [], p; for (p in o) &#123; if (Object.prototype.hasOwnProperty.call(o, p)) &#123; props.push(p); &#125; &#125; return props; &#125;;&#125; Promise å®ç°å®ç°åŸç†ï¼šå…¶å®å°±æ˜¯ä¸€ä¸ªå‘å¸ƒè®¢é˜…è€…æ¨¡å¼ æ„é€ å‡½æ•°æ¥æ”¶ä¸€ä¸ª executor å‡½æ•°ï¼Œå¹¶ä¼šåœ¨ new Promise() æ—¶ç«‹å³æ‰§è¡Œè¯¥å‡½æ•° then æ—¶æ”¶é›†ä¾èµ–ï¼Œå°†å›è°ƒå‡½æ•°æ”¶é›†åˆ° æˆåŠŸ/å¤±è´¥é˜Ÿåˆ— executor å‡½æ•°ä¸­è°ƒç”¨ resolve/reject å‡½æ•° resolve/reject å‡½æ•°è¢«è°ƒç”¨æ—¶ä¼šé€šçŸ¥è§¦å‘é˜Ÿåˆ—ä¸­çš„å›è°ƒ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209const isFunction = variable =&gt; typeof variable === 'function';// å®šä¹‰Promiseçš„ä¸‰ç§çŠ¶æ€å¸¸é‡const PENDING = 'pending';const FULFILLED = 'fulfilled';const REJECTED = 'rejected';class MyPromise &#123; // æ„é€ å‡½æ•°ï¼Œnew æ—¶è§¦å‘ constructor(handle: Function) &#123; try &#123; handle(this._resolve, this._reject); &#125; catch (err) &#123; this._reject(err); &#125; &#125; // çŠ¶æ€ pending fulfilled rejected private _status: string = PENDING; // å‚¨å­˜ valueï¼Œç”¨äº then è¿”å› private _value: string | undefined = undefined; // å¤±è´¥é˜Ÿåˆ—ï¼Œåœ¨ then æ—¶æ³¨å…¥ï¼Œresolve æ—¶è§¦å‘ private _rejectedQueues: any = []; // æˆåŠŸé˜Ÿåˆ—ï¼Œåœ¨ then æ—¶æ³¨å…¥ï¼Œresolve æ—¶è§¦å‘ private _fulfilledQueues: any = []; // resovle æ—¶æ‰§è¡Œçš„å‡½æ•° private _resolve = val =&gt; &#123; const run = () =&gt; &#123; if (this._status !== PENDING) return; this._status = FULFILLED; // ä¾æ¬¡æ‰§è¡ŒæˆåŠŸé˜Ÿåˆ—ä¸­çš„å‡½æ•°ï¼Œå¹¶æ¸…ç©ºé˜Ÿåˆ— const runFulfilled = value =&gt; &#123; let cb; while ((cb = this._fulfilledQueues.shift())) &#123; cb(value); &#125; &#125;; // ä¾æ¬¡æ‰§è¡Œå¤±è´¥é˜Ÿåˆ—ä¸­çš„å‡½æ•°ï¼Œå¹¶æ¸…ç©ºé˜Ÿåˆ— const runRejected = error =&gt; &#123; let cb; while ((cb = this._rejectedQueues.shift())) &#123; cb(error); &#125; &#125;; /* * å¦‚æœresolveçš„å‚æ•°ä¸ºPromiseå¯¹è±¡ï¼Œ * åˆ™å¿…é¡»ç­‰å¾…è¯¥Promiseå¯¹è±¡çŠ¶æ€æ”¹å˜åå½“å‰Promsieçš„çŠ¶æ€æ‰ä¼šæ”¹å˜ * ä¸”çŠ¶æ€å–å†³äºå‚æ•°Promsieå¯¹è±¡çš„çŠ¶æ€ */ if (val instanceof MyPromise) &#123; val.then( value =&gt; &#123; this._value = value; runFulfilled(value); &#125;, err =&gt; &#123; this._value = err; runRejected(err); &#125; ); &#125; else &#123; this._value = val; runFulfilled(val); &#125; &#125;; // å¼‚æ­¥è°ƒç”¨ setTimeout(run); &#125;; // reject æ—¶æ‰§è¡Œçš„å‡½æ•° private _reject = err =&gt; &#123; if (this._status !== PENDING) return; // ä¾æ¬¡æ‰§è¡Œå¤±è´¥é˜Ÿåˆ—ä¸­çš„å‡½æ•°ï¼Œå¹¶æ¸…ç©ºé˜Ÿåˆ— const run = () =&gt; &#123; this._status = REJECTED; this._value = err; let cb; while ((cb = this._rejectedQueues.shift())) &#123; cb(err); &#125; &#125;; // ä¸ºäº†æ”¯æŒåŒæ­¥çš„Promiseï¼Œè¿™é‡Œé‡‡ç”¨å¼‚æ­¥è°ƒç”¨ setTimeout(run); &#125;; // then æ–¹æ³• then(onFulfilled?, onRejected?) &#123; const &#123; _value, _status &#125; = this; // è¿”å›ä¸€ä¸ªæ–°çš„Promiseå¯¹è±¡ return new MyPromise((onFulfilledNext, onRejectedNext) =&gt; &#123; // å°è£…ä¸€ä¸ªæˆåŠŸæ—¶æ‰§è¡Œçš„å‡½æ•° const fulfilled = value =&gt; &#123; try &#123; if (!isFunction(onFulfilled)) &#123; onFulfilledNext(value); &#125; else &#123; const res = onFulfilled(value); if (res instanceof MyPromise) &#123; // å¦‚æœå½“å‰å›è°ƒå‡½æ•°è¿”å›MyPromiseå¯¹è±¡ï¼Œå¿…é¡»ç­‰å¾…å…¶çŠ¶æ€æ”¹å˜ååœ¨æ‰§è¡Œä¸‹ä¸€ä¸ªå›è°ƒ res.then(onFulfilledNext, onRejectedNext); &#125; else &#123; //å¦åˆ™ä¼šå°†è¿”å›ç»“æœç›´æ¥ä½œä¸ºå‚æ•°ï¼Œä¼ å…¥ä¸‹ä¸€ä¸ªthençš„å›è°ƒå‡½æ•°ï¼Œå¹¶ç«‹å³æ‰§è¡Œä¸‹ä¸€ä¸ªthençš„å›è°ƒå‡½æ•° onFulfilledNext(res); &#125; &#125; &#125; catch (err) &#123; // å¦‚æœå‡½æ•°æ‰§è¡Œå‡ºé”™ï¼Œæ–°çš„Promiseå¯¹è±¡çš„çŠ¶æ€ä¸ºå¤±è´¥ onRejectedNext(err); &#125; &#125;; // å°è£…ä¸€ä¸ªå¤±è´¥æ—¶æ‰§è¡Œçš„å‡½æ•° const rejected = error =&gt; &#123; try &#123; if (!isFunction(onRejected)) &#123; onRejectedNext(error); &#125; else &#123; const res = onRejected(error); if (res instanceof MyPromise) &#123; // å¦‚æœå½“å‰å›è°ƒå‡½æ•°è¿”å›MyPromiseå¯¹è±¡ï¼Œå¿…é¡»ç­‰å¾…å…¶çŠ¶æ€æ”¹å˜ååœ¨æ‰§è¡Œä¸‹ä¸€ä¸ªå›è°ƒ res.then(onFulfilledNext, onRejectedNext); &#125; else &#123; //å¦åˆ™ä¼šå°†è¿”å›ç»“æœç›´æ¥ä½œä¸ºå‚æ•°ï¼Œä¼ å…¥ä¸‹ä¸€ä¸ªthençš„å›è°ƒå‡½æ•°ï¼Œå¹¶ç«‹å³æ‰§è¡Œä¸‹ä¸€ä¸ªthençš„å›è°ƒå‡½æ•° onFulfilledNext(res); &#125; &#125; &#125; catch (err) &#123; // å¦‚æœå‡½æ•°æ‰§è¡Œå‡ºé”™ï¼Œæ–°çš„Promiseå¯¹è±¡çš„çŠ¶æ€ä¸ºå¤±è´¥ onRejectedNext(err); &#125; &#125;; switch (_status) &#123; // å½“çŠ¶æ€ä¸ºpendingæ—¶ï¼Œå°†thenæ–¹æ³•å›è°ƒå‡½æ•°åŠ å…¥æ‰§è¡Œé˜Ÿåˆ—ç­‰å¾…æ‰§è¡Œ case PENDING: this._fulfilledQueues.push(fulfilled); this._rejectedQueues.push(rejected); break; // å½“çŠ¶æ€å·²ç»æ”¹å˜æ—¶ï¼Œç«‹å³æ‰§è¡Œå¯¹åº”çš„å›è°ƒå‡½æ•° case FULFILLED: fulfilled(_value); break; case REJECTED: rejected(_value); break; &#125; &#125;); &#125; // catch æ–¹æ³• catch(onRejected) &#123; return this.then(undefined, onRejected); &#125; // finally æ–¹æ³• finally(cb) &#123; return this.then( value =&gt; MyPromise.resolve(cb()).then(() =&gt; value), reason =&gt; MyPromise.resolve(cb()).then(() =&gt; &#123; throw reason; &#125;) ); &#125; // é™æ€ resolve æ–¹æ³• static resolve(value) &#123; // å¦‚æœå‚æ•°æ˜¯MyPromiseå®ä¾‹ï¼Œç›´æ¥è¿”å›è¿™ä¸ªå®ä¾‹ if (value instanceof MyPromise) return value; return new MyPromise(resolve =&gt; resolve(value)); &#125; // é™æ€ reject æ–¹æ³• static reject(value) &#123; return new MyPromise((resolve, reject) =&gt; reject(value)); &#125; // é™æ€ all æ–¹æ³• static all(list) &#123; return new MyPromise((resolve, reject) =&gt; &#123; // è¿”å›å€¼çš„é›†åˆ let values = []; let count = 0; for (let [i, p] of list.entries()) &#123; // æ•°ç»„å‚æ•°å¦‚æœä¸æ˜¯MyPromiseå®ä¾‹ï¼Œå…ˆè°ƒç”¨MyPromise.resolve this.resolve(p).then( res =&gt; &#123; values[i] = res; count++; // æ‰€æœ‰çŠ¶æ€éƒ½å˜æˆfulfilledæ—¶è¿”å›çš„MyPromiseçŠ¶æ€å°±å˜æˆfulfilled if (count === list.length) resolve(values); &#125;, err =&gt; &#123; // æœ‰ä¸€ä¸ªè¢«rejectedæ—¶è¿”å›çš„MyPromiseçŠ¶æ€å°±å˜æˆrejected reject(err); &#125; ); &#125; &#125;); &#125; // æ·»åŠ é™æ€raceæ–¹æ³• static race(list) &#123; return new MyPromise((resolve, reject) =&gt; &#123; for (let p of list) &#123; // åªè¦æœ‰ä¸€ä¸ªå®ä¾‹ç‡å…ˆæ”¹å˜çŠ¶æ€ï¼Œæ–°çš„MyPromiseçš„çŠ¶æ€å°±è·Ÿç€æ”¹å˜ this.resolve(p).then( res =&gt; &#123; resolve(res); &#125;, err =&gt; &#123; reject(err); &#125; ); &#125; &#125;); &#125;&#125; é˜²æŠ–/èŠ‚æµé˜²æŠ–å‡½æ•° onscroll ç»“æŸæ—¶è§¦å‘ä¸€æ¬¡ï¼Œå»¶è¿Ÿæ‰§è¡Œ123456789101112131415function debounce(callback, wait) &#123; let timeout; return function () &#123; let context = this; let args = arguments; if (timeout) clearTimeout(timeout); timeout = setTimeout(() =&gt; &#123; callback.apply(context, args); &#125;, wait); &#125;;&#125;// ä½¿ç”¨window.onscroll = debounce(function () &#123; console.log(\"debounce\");&#125;, 1000); èŠ‚æµå‡½æ•° onscroll æ—¶ï¼Œæ¯éš”ä¸€æ®µæ—¶é—´è§¦å‘ä¸€æ¬¡ï¼Œåƒæ°´æ»´ä¸€æ ·1234567891011121314function throttle(callback, delay) &#123; var prevTime = Date.now(); return function () &#123; var curTime = Date.now(); if (curTime - prevTime &gt; delay) &#123; callback.apply(this, arguments); prevTime = curTime; &#125; &#125;;&#125;// ä½¿ç”¨window.onscroll = throttle(function () &#123; console.log(\"throtte\");&#125;, 1000); å‡½æ•°æŸ¯é‡ŒåŒ–å®ç°å…¶å®æˆ‘ä»¬æ— æ—¶æ— åˆ»ä¸åœ¨ä½¿ç”¨æŸ¯é‡ŒåŒ–å‡½æ•°ï¼Œåªæ˜¯æ²¡æœ‰å°†å®ƒæ€»ç»“å‡ºæ¥è€Œå·²ã€‚å®ƒçš„æœ¬è´¨å°±æ˜¯å°†ä¸€ä¸ªå‚æ•°å¾ˆå¤šçš„å‡½æ•°åˆ†è§£æˆå•ä¸€å‚æ•°çš„å¤šä¸ªå‡½æ•°ã€‚åº”ç”¨åœºæ™¯ï¼š å»¶è¿Ÿè®¡ç®— ï¼ˆç”¨é—­åŒ…æŠŠä¼ å…¥å‚æ•°ä¿å­˜èµ·æ¥ï¼Œå½“ä¼ å…¥å‚æ•°çš„æ•°é‡è¶³å¤Ÿæ‰§è¡Œå‡½æ•°æ—¶ï¼Œå¼€å§‹æ‰§è¡Œå‡½æ•°ï¼‰ åŠ¨æ€åˆ›å»ºå‡½æ•° ï¼ˆå‚æ•°ä¸å¤Ÿæ—¶ä¼šè¿”å›æ¥å—å‰©ä¸‹å‚æ•°çš„å‡½æ•°ï¼‰ å‚æ•°å¤ç”¨ï¼ˆæ¯ä¸ªå‚æ•°å¯ä»¥å¤šæ¬¡å¤ç”¨ï¼‰ 123456789101112const curry = (fn) =&gt; (judge = (...args) =&gt; args.length &gt;= fn.length ? fn(...args) : (...arg) =&gt; judge(...args, ...arg));const sum = (a, b, c, d) =&gt; a + b + c + d;const currySum = curry(sum);currySum(1)(2)(3)(4); // 10currySum(1, 2)(3)(4); // 10currySum(1)(2, 3)(4); // 10 å®ç°ç®€å•æ·±æ‹·è´1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556function getType(obj) &#123; const str = Object.prototype.toString.call(obj); const map = &#123; \"[object Boolean]\": \"boolean\", \"[object Number]\": \"number\", \"[object String]\": \"string\", \"[object Function]\": \"function\", \"[object Array]\": \"array\", \"[object Date]\": \"date\", \"[object RegExp]\": \"regExp\", \"[object Undefined]\": \"undefined\", \"[object Null]\": \"null\", \"[object Object]\": \"object\", &#125;; if (obj instanceof Element) &#123; // åˆ¤æ–­æ˜¯å¦æ˜¯domå…ƒç´ ï¼Œå¦‚divç­‰ return \"element\"; &#125; return map[str];&#125;function deepCopy(original) &#123; const type = getType(original); let copy; switch (type) &#123; case \"array\": return copyArray(original, copy); case \"object\": return copyObject(original, copy); case \"function\": return copyFunction(original, copy); default: return original; &#125;&#125;function copyArray(original, copy = []) &#123; for (const [index, value] of original.entries()) &#123; copy[index] = deepCopy(value); &#125; return copy;&#125;function copyObject(original, copy = &#123;&#125;) &#123; for (const [key, value] of Object.entries(original)) &#123; copy[key] = deepCopy(value); &#125; return copy;&#125;function copyFunction(original, copy = () =&gt; &#123;&#125;) &#123; const fn = eval(original.toString()); fn.prototype = original.prototype; return fn;&#125;const arr1 = [1, 2, [3, 4], &#123; i: 6, j: 6 &#125;, (k, m) =&gt; k + m];console.log(deepCopy(arr1));","categories":[{"name":"JavaScript","slug":"JavaScript","permalink":"http://blog.kobingo.xyz/categories/JavaScript/"}],"tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"http://blog.kobingo.xyz/tags/JavaScript/"}]},{"title":"å‰ç«¯å¦‚ä½•å­¦æ•°æ®ç»“æ„ä¸ç®—æ³• - ä¸€ç¯‡è®²å®Œå…³äº`å †`çš„ä¸€åˆ‡","slug":"algorithms-heap-knowledge","date":"2020-02-17T15:01:41.000Z","updated":"2021-01-19T06:41:41.218Z","comments":true,"path":"algorithms-heap-knowledge/","link":"","permalink":"http://blog.kobingo.xyz/algorithms-heap-knowledge/","excerpt":"å¯¹äºå‰ç«¯æ¥è¯´ï¼Œå †æ˜¯ä¸€ä¸ªä¸å¥½ç†è§£çš„çŸ¥è¯†ï¼Œä½†ä¹Ÿæ˜¯å¿…ä¸å¯å°‘çš„çŸ¥è¯†ç‚¹ï¼Œæ˜¯é¢è¯•æ—¶ç»å¸¸è€ƒçš„é‡éš¾ç‚¹ï¼Œæœ¬æ–‡æ˜¯ç¬”è€…è‡ªèº«å­¦ä¹ å †çš„å¿ƒå¾—è®°å½•ï¼Œæ„åœ¨èƒ½å¯¹å †æœ‰ä¸ªæ›´åŠ ç³»ç»Ÿçš„äº†è§£ã€‚","text":"å¯¹äºå‰ç«¯æ¥è¯´ï¼Œå †æ˜¯ä¸€ä¸ªä¸å¥½ç†è§£çš„çŸ¥è¯†ï¼Œä½†ä¹Ÿæ˜¯å¿…ä¸å¯å°‘çš„çŸ¥è¯†ç‚¹ï¼Œæ˜¯é¢è¯•æ—¶ç»å¸¸è€ƒçš„é‡éš¾ç‚¹ï¼Œæœ¬æ–‡æ˜¯ç¬”è€…è‡ªèº«å­¦ä¹ å †çš„å¿ƒå¾—è®°å½•ï¼Œæ„åœ¨èƒ½å¯¹å †æœ‰ä¸ªæ›´åŠ ç³»ç»Ÿçš„äº†è§£ã€‚ ä¸€ã€ä»€ä¹ˆæ˜¯å †åœ¨äº†è§£ä»€ä¹ˆæ˜¯å †å‰ï¼Œéœ€è¦å…ˆäº†è§£ä»€ä¹ˆæ˜¯å®Œå…¨äºŒå‰æ ‘ã€‚ å®Œå…¨äºŒå‰æ ‘ ä¸€ç§ç‰¹æ®Šçš„äºŒå‰æ ‘ï¼Œå¶å­èŠ‚ç‚¹éƒ½åœ¨æœ€åº•ä¸‹ä¸¤å±‚ï¼Œæœ€åä¸€å±‚å¶å­èŠ‚éƒ½é å·¦æ’åˆ—ï¼Œå¹¶ä¸”é™¤äº†æœ€åä¸€å±‚ï¼Œå…¶ä»–å±‚çš„èŠ‚ç‚¹ä¸ªæ•°éƒ½è¦è¾¾åˆ°æœ€å¤§ï¼Œè¿™ç§äºŒå‰æ ‘å«åšå®Œå…¨äºŒå‰æ ‘ã€‚ å † å †æ˜¯ä¸€ç§ç‰¹æ®Šçš„å®Œå…¨äºŒå‰æ ‘ï¼Œå †ä¸­æ¯ä¸€ä¸ªèŠ‚ç‚¹çš„å€¼éƒ½å¿…é¡»å¤§äºç­‰äºï¼ˆæˆ–å°äºç­‰äºï¼‰å…¶å­æ ‘ä¸­æ¯ä¸ªèŠ‚ç‚¹çš„å€¼ã€‚å¦‚æœå †ä¸Šçš„ä»»æ„èŠ‚ç‚¹éƒ½å¤§äºç­‰äºå­èŠ‚ç‚¹å€¼ï¼Œåˆ™ç§°ä¸º å¤§é¡¶å †;å¦‚æœå †ä¸Šçš„ä»»æ„èŠ‚ç‚¹éƒ½å°äºç­‰äºå­èŠ‚ç‚¹å€¼ï¼Œåˆ™ç§°ä¸º å°é¡¶å †; äºŒã€å †çš„å­˜å‚¨å®Œå…¨äºŒå‰æ ‘å¯ä»¥ç”¨æ•°ç»„å­˜å‚¨ï¼Œå¦‚æœä¸€ä¸ªèŠ‚ç‚¹å­˜å‚¨åœ¨æ•°ç»„ä¸­çš„ä¸‹æ ‡ä¸º iï¼ˆ iä»1å¼€å§‹ï¼‰ ï¼Œé‚£ä¹ˆå®ƒçš„å·¦å­èŠ‚ç‚¹çš„å­˜å‚¨ä¸‹æ ‡ä¸º 2 * i ï¼Œå³å­èŠ‚ç‚¹çš„ä¸‹æ ‡ä¸º 2 * i + 1ï¼Œåè¿‡æ¥ï¼Œä¸‹æ ‡ i / 2 ä½ç½®å­˜å‚¨çš„å°±æ˜¯è¯¥èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹ã€‚å®Œå…¨äºŒå‰æ ‘ç”¨æ•°ç»„æ¥å­˜å‚¨æ˜¯æœ€çœå†…å­˜çš„æ–¹å¼ã€‚ å› ä¸ºå †æ˜¯ä¸€ç§ç‰¹æ®Šçš„å®Œå…¨äºŒå‰æ ‘ï¼Œæ‰€ä»¥å †ä¹Ÿé€‚ç”¨äºä¸Šé¢çš„å­˜å‚¨æ–¹æ³•ã€‚ ä¸‰ã€å¦‚ä½•åˆ›å»ºå †å¸¸ç”¨çš„åˆ›å»ºå †æ–¹å¼æœ‰ä¸¤ç§ï¼š æ’å…¥å¼åˆ›å»ºï¼šæ¯æ¬¡æ’å…¥ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå®ç°ä¸€ä¸ªå¤§é¡¶å †ï¼ˆæˆ–å°é¡¶å †ï¼‰ åŸåœ°åˆ›å»ºï¼šåˆç§°å †åŒ–ï¼Œç»™å®šä¸€ç»„èŠ‚ç‚¹ï¼Œå®ç°ä¸€ä¸ªå¤§é¡¶å †ï¼ˆæˆ–å°é¡¶å †ï¼‰ ä¸‹é¢éƒ½å·²åˆ›å»ºå¤§é¡¶å †ä¸ºä¾‹ã€‚ 3.1 æ’å…¥å¼å»ºå †æ­¥éª¤ï¼š å°†å…ƒç´ æ’å…¥åˆ°é˜Ÿå°¾ï¼› å°†æ’å…¥èŠ‚ç‚¹ä¸å…¶çˆ¶èŠ‚ç‚¹æ¯”è¾ƒï¼Œå¦‚æœæ’å…¥èŠ‚ç‚¹å¤§äºçˆ¶èŠ‚ç‚¹ï¼ˆå¯¹äºå¤§é¡¶å †ï¼‰æˆ–æ’å…¥èŠ‚ç‚¹å°äºçˆ¶èŠ‚ç‚¹ï¼ˆå¯¹äºå°é¡¶å †ï¼‰ï¼Œåˆ™æ’å…¥èŠ‚ç‚¹ä¸çˆ¶èŠ‚ç‚¹è°ƒæ¢ä½ç½®ã€‚ å¦‚æœéœ€è¦è°ƒæ¢ä½ç½®ï¼Œåˆ™è°ƒæ¢åç»§ç»­ç¬¬2æ­¥å‘ä¸Šæ¯”è¾ƒï¼Œç›´åˆ°è¾¾åˆ°æ ¹èŠ‚ç‚¹ï¼Œæˆ–è€…ä¸éœ€è¦è°ƒæ¢ä¸ºæ­¢ã€‚ å®ç°ä»£ç ï¼š 12345678910111213141516171819202122232425262728//æ’å…¥å¼å»ºå †function MaxHeap(params) &#123; let heaps = [,]; //åˆå§‹åŒ–ä¸€ä¸ªå †ï¼Œä»1å¼€å§‹ this.insert = function (value) &#123; heaps.push(value); let i = heaps.length - 1; while (Math.floor(i / 2) &gt; 0 &amp;&amp; heaps[i] &gt; heaps[Math.floor(i / 2)]) &#123; [heaps[i], heaps[Math.floor(i / 2)]] = [ heaps[Math.floor(i / 2)], heaps[i], ]; // äº¤æ¢ i = Math.floor(i / 2); &#125; &#125;; this.get = function (params) &#123; return heaps &#125;&#125;let maxHeap = new MaxHeap();maxHeap.insert(3);maxHeap.insert(5);maxHeap.insert(1);maxHeap.insert(2);maxHeap.insert(3);maxHeap.insert(4);let result = maxHeap.get();console.log(result);// =&gt; [empty, 5, 3, 4, 2, 3, 1] 3.2 åŸåœ°å»ºå †åŸåœ°å»ºå †æœ‰ä¸¤ç§æ€è·¯ï¼š è‡ªä¸‹è€Œä¸Šå¼å †åŒ– ï¼šå°†èŠ‚ç‚¹ä¸å…¶çˆ¶èŠ‚ç‚¹æ¯”è¾ƒï¼Œå¦‚æœèŠ‚ç‚¹å¤§äºçˆ¶èŠ‚ç‚¹ï¼ˆå¤§é¡¶å †ï¼‰æˆ–èŠ‚ç‚¹å°äºçˆ¶èŠ‚ç‚¹ï¼ˆå°é¡¶å †ï¼‰ï¼Œåˆ™èŠ‚ç‚¹ä¸çˆ¶èŠ‚ç‚¹è°ƒæ•´ä½ç½® è‡ªä¸Šå¾€ä¸‹å¼å †åŒ– ï¼šå°†èŠ‚ç‚¹ä¸å…¶å·¦å³å­èŠ‚ç‚¹æ¯”è¾ƒï¼Œå¦‚æœå­˜åœ¨å·¦å³å­èŠ‚ç‚¹å¤§äºè¯¥èŠ‚ç‚¹ï¼ˆå¤§é¡¶å †ï¼‰æˆ–å°äºè¯¥èŠ‚ç‚¹ï¼ˆå°é¡¶å †ï¼‰ï¼Œåˆ™å°†å­èŠ‚ç‚¹çš„æœ€å¤§å€¼ï¼ˆå¤§é¡¶å †ï¼‰æˆ–æœ€å°å€¼ï¼ˆå°é¡¶å †ï¼‰ä¸ä¹‹äº¤æ¢ è‡ªä¸‹è€Œä¸Šå¼å †æ˜¯è°ƒæ•´èŠ‚ç‚¹ä¸çˆ¶èŠ‚ç‚¹ï¼ˆå¾€ä¸Šèµ°ï¼‰ï¼Œè‡ªä¸Šå¾€ä¸‹å¼å †åŒ–æ˜¯è°ƒæ•´èŠ‚ç‚¹ä¸å…¶å·¦å³å­èŠ‚ç‚¹ï¼ˆå¾€ä¸‹èµ°ï¼‰ã€‚ 3.2.1. ä»å‰å¾€åã€è‡ªä¸‹è€Œä¸Šå¼å †åŒ–å»ºå †ã€‚å‡è®¾æœ‰ä¸ªåºåˆ—ï¼š 1let arr = [,4,2,1,3,5,6]; å®ç°ä»£ç ï¼š 123456789101112131415161718function buildHeap(items, heapSize = 1) &#123; while (heapSize &lt; items.length - 1) &#123; heapSize++; heapify(items, heapSize); &#125;&#125;function heapify(items, i) &#123; while (Math.floor(i / 2) &gt; 0 &amp;&amp; items[i] &gt; items[Math.floor(i / 2)]) &#123; [items[i], items[Math.floor(i / 2)]] = [items[Math.floor(i / 2)], items[i]]; //åˆ©ç”¨è§£æ„æ–¹å¼äº¤æ¢å…ƒç´  i = Math.floor(i / 2); &#125;&#125;let arr = [, 4, 2, 1, 3, 5, 6];buildHeap(arr);console.log(arr);// =&gt; [ empty, 6, 4, 5, 2, 3, 1 ] 3.2.2. ä»åå¾€å‰ã€è‡ªä¸Šè€Œä¸‹å¼å †åŒ–å»ºå †å› ä¸ºå¶å­èŠ‚ç‚¹æ²¡æœ‰å­èŠ‚ç‚¹ï¼Œä¸éœ€è¦è‡ªä¸Šè€Œä¸‹å¼å †åŒ–ï¼Œæ‰€ä»¥ä»åå¾€å‰æ˜¯ä»åºåˆ—çš„æœ€åä¸€ä¸ªéå¶å­èŠ‚ç‚¹å¼€å§‹ï¼ˆå³ n/2ï¼‰ã€‚ å‡è®¾æœ‰ä¸ªåºåˆ—ï¼š 1let arr = [,4,2,1,3,5,6]; å®ç°ä»£ç ï¼š 123456789101112131415161718192021222324252627function buildHeap(items) &#123; let heapSize = items.length - 1; // ä»æœ€åä¸€ä¸ªéå¶å­èŠ‚ç‚¹å¼€å§‹éå† for (let i = Math.floor(heapSize / 2); i &gt;= 1; i--) &#123; heapify(items, heapSize, i); &#125;&#125;function heapify(items, heapSize, i) &#123; while (true) &#123; let maxIndex = i; // ç”¨maxIndexè¡¨ç¤º i çš„æœ€å¤§å­èŠ‚ç‚¹çš„ä¸‹æ ‡ if (2 * i &lt;= heapSize &amp;&amp; items[i] &lt; items[2 * i]) &#123; maxIndex = 2 * i; &#125; if (2 * i + 1 &lt;= heapSize &amp;&amp; items[maxIndex] &lt; items[2 * i + 1]) &#123; maxIndex = 2 * i + 1; &#125; if (maxIndex === i) break; [items[maxIndex], items[i]] = [items[i], items[maxIndex]]; //äº¤æ¢ i ä¸å…¶æœ€å¤§çš„å­èŠ‚ç‚¹ i = maxIndex; &#125;&#125;let arr = [, 4, 2, 1, 3, 5, 6];buildHeap(arr);console.log(arr);// =&gt; [ empty, 6, 5, 4, 3, 2, 1 ] å››ã€å †æ’åºç”±äºå¤§é¡¶å †çš„å †é¡¶ç‚¹ï¼ˆi=1ï¼‰å­˜æ”¾çš„æ˜¯æœ€å¤§å€¼ï¼Œæ‰€ä»¥å¯ä»¥æ¯æ¬¡è®©å †é¡¶ä¸æœ€åä¸€ä¸ªèŠ‚ç‚¹äº¤æ¢æ•°æ®ï¼Œæ­¤æ—¶æœ€å¤§å€¼æ”¾å…¥äº†æœ‰æ•ˆåºåˆ—çš„æœ€åä¸€ä½ï¼Œå¹¶ä¸”æœ‰æ•ˆåºåˆ—å‡1ï¼Œæœ‰æ•ˆå †ä¾ç„¶ä¿æŒå®Œå…¨äºŒå‰æ ‘çš„ç»“æ„ï¼Œç„¶åå †åŒ–ï¼Œæˆä¸ºæ–°çš„å¤§é¡¶å †ï¼Œé‡å¤æ­¤æ“ä½œï¼Œç›´åˆ°æœ‰æ•ˆå †çš„é•¿åº¦ä¸º 0ï¼Œæ’åºå®Œæˆã€‚ è¯¦ç»†æ­¥éª¤ï¼š å°†åŸåºåˆ—è½¬åŒ–æˆä¸€ä¸ªå¤§é¡¶å †ï¼› è®¾ç½®å †çš„æœ‰æ•ˆåºåˆ—é•¿åº¦ä¸º heapSizeï¼› å°†å †é¡¶å…ƒç´ ä¸æœ€åä¸€ä¸ªå­å…ƒç´ ï¼ˆæœ€åä¸€ä¸ªæœ‰æ•ˆåºåˆ—ï¼‰äº¤æ¢ï¼Œå¹¶æœ‰æ•ˆåºåˆ—é•¿åº¦å‡1ï¼› å †åŒ–æœ‰æ•ˆåºåˆ—ï¼Œä½¿æœ‰æ•ˆåºåˆ—é‡æ–°ç§°ä¸ºä¸€ä¸ªå¤§é¡¶å †ï¼› é‡å¤ä»¥ä¸Š2ã€3æ­¥ï¼Œç›´åˆ°æœ‰æ•ˆåºåˆ—çš„é•¿åº¦ä¸º 1ï¼Œæ’åºå®Œæˆï¼› å®ç°ä»£ç ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152function heapSort(items) &#123; // è®¾ç½®å †çš„åˆå§‹æœ‰æ•ˆåºåˆ—é•¿åº¦ä¸º items.length - 1 let heapSize = items.length - 1; // æ„å»ºå¤§é¡¶å † buildHeap(items, heapSize); while (heapSize &gt; 1) &#123; // äº¤æ¢å †é¡¶å…ƒç´ ä¸æœ€åä¸€ä¸ªæœ‰æ•ˆå­å…ƒç´  [items[1], items[heapSize]] = [items[heapSize], items[1]]; // æœ‰æ•ˆåºåˆ—é•¿åº¦å‡ 1 heapSize--; heapify(items, heapSize, 1); &#125; return items;&#125;/** * åŸåœ°å»ºå †: è‡ªä¸Šè€Œä¸‹å»ºå †ï¼Œ * @param &#123;åŸå§‹åºåˆ—&#125; items * @param &#123;æœ‰æ•ˆåºåˆ—é•¿åº¦&#125; heapSize */function buildHeap(items, heapSize) &#123; // ä»æœ€åä¸€ä¸ªéå¶å­èŠ‚ç‚¹å¼€å§‹ï¼Œè‡ªä¸Šè€Œä¸‹å¼å †åŒ– for (let i = Math.floor(heapSize / 2); i &gt;= 1; --i) &#123; heapify(items, heapSize, i); &#125;&#125;/** * è¿™é‡Œä¸é€‚åˆç”¨è‡ªä¸‹è€Œä¸Šæ–¹å¼ï¼Œå› ä¸ºäº¤æ¢è¿‡åï¼Œæœ‰æ•ˆåºåˆ—é‡Œå”¯ä¸€æ²¡æœ‰å †åŒ–çš„æ˜¯å †é¡¶å…ƒç´ ï¼Œ * æ‰€ä»¥ç›´æ¥ä»å †é¡¶å¼€å§‹è‡ªä¸Šè€Œä¸‹å †åŒ–æ˜¯æœ€å¿«çš„ */function heapify(items, heapSize, i) &#123; while (true) &#123; let maxIndex = i; // ç”¨maxIndexè¡¨ç¤º i çš„æœ€å¤§å­èŠ‚ç‚¹çš„ä¸‹æ ‡ if (2 * i &lt;= heapSize &amp;&amp; items[i] &lt; items[2 * i]) &#123; maxIndex = 2 * i; &#125; if (2 * i + 1 &lt;= heapSize &amp;&amp; items[maxIndex] &lt; items[2 * i + 1]) &#123; maxIndex = 2 * i + 1; &#125; if (maxIndex === i) break; [items[maxIndex], items[i]] = [items[i], items[maxIndex]]; //äº¤æ¢ i ä¸å…¶æœ€å¤§çš„å­èŠ‚ç‚¹ i = maxIndex; &#125;&#125;// æµ‹è¯•var items = [, 8, 3, 4, 2, 6, 7, 1, 9, 5]heapSort(items)console.log(items);// =&gt; [ empty, 1, 2, 3, 4, 5, 6, 7, 8, 9 ] å¤æ‚åº¦åˆ†æï¼š æ—¶é—´å¤æ‚åº¦ï¼š å»ºå † - O(nlogn), æ’åº - O(nlogn), æ•´ä½“ - O(nlogn); ç©ºé—´å¤æ‚åº¦ï¼š O(1); å †çš„å…¸å‹åº”ç”¨åœºæ™¯ï¼š Top K é—®é¢˜ ä»€ä¹ˆæ˜¯ Top K é—®é¢˜ï¼Ÿç®€å•æ¥è¯´å°±æ˜¯åœ¨ä¸€ç»„æ•°æ®é‡Œé¢æ‰¾åˆ°é¢‘ç‡å‡ºç°æœ€é«˜çš„å‰Kä¸ªæ•°ï¼Œæˆ–å‰Kå¤§ï¼ˆæˆ–å‰Kå°ï¼‰çš„æ•°ã€‚ ä¸‹é¢ä»¥å–å‰Kå¤§ä¸ºä¾‹æ¥è®²è§£ï¼š ä»æ•°ç»„ä¸­å–å‰ K ä¸ªæ•°ï¼Œæ„é€ æˆå°é¡¶å †ï¼› ä» K+1 ä½å¼€å§‹éå†æ•°ç»„ï¼Œæ¯ä¸€ä¸ªæ•°æ®éƒ½å’Œå°é¡¶å †çš„å †é¡¶å…ƒç´ è¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æœå°äºå †é¡¶å…ƒç´ ï¼Œåˆ™ä¸åšä»»ä½•å¤„ç†ï¼Œç»§ç»­éå†ä¸‹ä¸€å…ƒç´ ï¼›å¦‚æœå¤§äºå †é¡¶å…ƒç´ ï¼Œåˆ™å°†è¿™ä¸ªå…ƒç´ æ›¿æ¢æ‰å †é¡¶å…ƒç´ ï¼Œç„¶åå†å †åŒ–æˆä¸€ä¸ªå°é¡¶å †ã€‚ éå†å®Œæˆåï¼Œå †ä¸­çš„æ•°æ®å°±æ˜¯å‰ K å¤§çš„æ•°æ®ï¼› å®ç°ä»£ç ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445function findKthLargest(nums, k) &#123; nums.splice(0, 0, null); buildHeap(nums, k); for (let i = k + 1; i &lt; nums.length; i++) &#123; if (nums[i] &gt; nums[1]) &#123; nums[1] = nums[i]; heapify(nums, k, 1) &#125; &#125; return nums[1]&#125;/** * åŸåœ°å»ºå †: è‡ªä¸Šè€Œä¸‹å»ºå †ï¼Œ * è¿™é‡Œä¸é€‚åˆç”¨è‡ªä¸‹è€Œä¸Šæ–¹å¼ï¼Œå› ä¸ºäº¤æ¢è¿‡åï¼Œæœ‰æ•ˆåºåˆ—é‡Œå”¯ä¸€æ²¡æœ‰å †åŒ–çš„æ˜¯å †é¡¶å…ƒç´ ï¼Œ * æ‰€ä»¥ç›´æ¥ä»å †é¡¶å¼€å§‹è‡ªä¸Šè€Œä¸‹å †åŒ–æ˜¯æœ€å¿«çš„ * @param &#123;åŸå§‹åºåˆ—&#125; items * @param &#123;æœ‰æ•ˆåºåˆ—é•¿åº¦&#125; heapSize */function buildHeap(items, heapSize) &#123; // ä»æœ€åä¸€ä¸ªéå¶å­èŠ‚ç‚¹å¼€å§‹ï¼Œè‡ªä¸Šè€Œä¸‹å¼å †åŒ– for (let i = Math.floor(heapSize / 2); i &gt;= 1; --i) &#123; heapify(items, heapSize, i); &#125;&#125;function heapify(items, heapSize, i) &#123; while (true) &#123; let minIndex = i; // ç”¨minIndexè¡¨ç¤º i çš„æœ€å°å­èŠ‚ç‚¹çš„ä¸‹æ ‡ if (2 * i &lt;= heapSize &amp;&amp; items[i] &gt; items[2 * i]) &#123; minIndex = 2 * i; &#125; if (2 * i + 1 &lt;= heapSize &amp;&amp; items[minIndex] &gt; items[2 * i + 1]) &#123; minIndex = 2 * i + 1; &#125; if (minIndex === i) break; [items[minIndex], items[i]] = [items[i], items[minIndex]]; //äº¤æ¢ i = minIndex; &#125;&#125;// æµ‹è¯•var nums = [2, 1]let kth = findKthLargest(nums, 2)console.log(kth); å¤æ‚åº¦åˆ†æï¼š æ—¶é—´å¤æ‚åº¦ï¼šéå†æ•°ç»„éœ€è¦ O(n) çš„æ—¶é—´å¤æ‚åº¦ï¼Œä¸€æ¬¡å †åŒ–éœ€è¦ O(logk) æ—¶é—´å¤æ‚åº¦ï¼Œæ‰€ä»¥åˆ©ç”¨å †æ±‚ Top k é—®é¢˜çš„æ—¶é—´å¤æ‚åº¦ä¸º O(nlogk) ç©ºé—´å¤æ‚åº¦ï¼šO(k) å½“ç„¶ï¼ŒtopKçš„æœ€ç®€å•å®ç°æ˜¯ç”¨æ’åºï¼Œä½†æ˜¯ç”¨å †æ–¹å¼çš„è¯ï¼Œæœ€å¤§å¥½å¤„å°±æ˜¯æ±‚åŠ¨æ€æ•°ç»„çš„topKã€‚å¦‚æœç”¨æ’åºæ–¹å¼çš„è¯ï¼Œæ¯æ¬¡è¿›æ¥ä¸€ä¸ªæ–°å…ƒç´ éƒ½å¾—é‡æ–°æ’åºï¼Œè¿™æ˜¯éå¸¸ä¸å¯å–çš„ï¼Œè€Œå †æ–¹å¼å¯ä»¥æœ‰æ•ˆå¤„ç†è¿™ä¸ªé—®é¢˜ã€‚","categories":[{"name":"æ•°æ®ç»“æ„ä¸ç®—æ³•","slug":"æ•°æ®ç»“æ„ä¸ç®—æ³•","permalink":"http://blog.kobingo.xyz/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/"}],"tags":[{"name":"å †","slug":"å †","permalink":"http://blog.kobingo.xyz/tags/%E5%A0%86/"}]},{"title":"å‰ç«¯å¦‚ä½•å­¦æ•°æ®ç»“æ„ä¸ç®—æ³• - JavaScripté‡Œçš„æ ˆä¸å †","slug":"algorithms-JavaScripté‡Œçš„æ ˆå†…å­˜ä¸å †å†…å­˜","date":"2019-12-07T15:37:25.000Z","updated":"2021-01-19T06:41:41.218Z","comments":true,"path":"algorithms-JavaScripté‡Œçš„æ ˆå†…å­˜ä¸å †å†…å­˜/","link":"","permalink":"http://blog.kobingo.xyz/algorithms-JavaScript%E9%87%8C%E7%9A%84%E6%A0%88%E5%86%85%E5%AD%98%E4%B8%8E%E5%A0%86%E5%86%85%E5%AD%98/","excerpt":"æœ¬æ–‡ä¸»è¦ä»‹ç»å †ä¸æ ˆï¼Œä»¥åŠä»–ä»¬åœ¨JavaScriptè¯­è¨€åº•å±‚çš„åº”ç”¨ã€‚","text":"æœ¬æ–‡ä¸»è¦ä»‹ç»å †ä¸æ ˆï¼Œä»¥åŠä»–ä»¬åœ¨JavaScriptè¯­è¨€åº•å±‚çš„åº”ç”¨ã€‚ æ ˆ å®šä¹‰ åè¿›è€…å…ˆå‡ºï¼Œå…ˆè¿›è€…åå‡ºï¼Œç®€ç§° åè¿›å…ˆå‡ºï¼ˆLIFOï¼‰ï¼Œè¿™å°±æ˜¯å…¸å‹çš„æ ˆç»“æ„ã€‚ åœ¨æ ˆé‡Œï¼Œæ–°å…ƒç´ éƒ½é è¿‘æ ˆé¡¶ï¼Œæ—§å…ƒç´ éƒ½æ¥è¿‘æ ˆåº•ã€‚ ä»æ ˆçš„æ“ä½œç‰¹æ€§æ¥çœ‹ï¼Œæ˜¯ä¸€ç§ æ“ä½œå—é™çš„çº¿æ€§è¡¨ï¼Œåªå…è®¸åœ¨ä¸€ç«¯æ’å…¥å’Œåˆ é™¤æ•°æ®ã€‚ ä¸åŒ…å«ä»»ä½•å…ƒç´ çš„æ ˆç§°ä¸ºç©ºæ ˆã€‚ æ ˆè¢«ç”¨åœ¨ç¼–ç¨‹è¯­è¨€çš„ç¼–è¯‘å™¨å’Œå†…å­˜ä¸­ä¿å­˜å˜é‡ã€æ–¹æ³•è°ƒç”¨ç­‰ï¼Œæ¯”å¦‚å‡½æ•°çš„è°ƒç”¨æ ˆã€å‰ç«¯è·¯ç”±ç­‰ã€‚ å † å®šä¹‰ å †æ•°æ®ç»“æ„æ˜¯ä¸€ç§æ ‘çŠ¶ç»“æ„ å®ƒçš„å­˜å–æ•°æ®çš„æ–¹å¼ï¼Œä¸ä¹¦æ¶ç›¸ä¼¼ï¼šæˆ‘ä»¬ä¸å…³å¿ƒä¹¦çš„æ”¾ç½®é¡ºåºæ˜¯æ€æ ·çš„ï¼Œåªéœ€çŸ¥é“ä¹¦çš„åå­—å°±å¯ä»¥å–å‡ºæˆ‘ä»¬æƒ³è¦çš„ä¹¦ å †ä¸æ ˆæ¯”è¾ƒ æ ˆï¼Œçº¿æ€§ç»“æ„ï¼Œåè¿›å…ˆå‡ºï¼Œä¾¿äºç®¡ç†ã€‚ å †ï¼Œéçº¿æ€§ç»“æ„ï¼Œæ‚ä¹±æ— ç« ï¼Œæ–¹ä¾¿å­˜å‚¨å’Œå¼€è¾Ÿå†…å­˜ç©ºé—´ã€‚ å †æ˜¯åŠ¨æ€åˆ†é…å†…å­˜ï¼Œå†…å­˜å¤§å°ä¸ä¸€ï¼Œä¸ä¼šè‡ªåŠ¨é‡Šæ”¾ã€‚ æ ˆæ˜¯è‡ªåŠ¨åˆ†é…ç›¸å¯¹å›ºå®šå¤§å°çš„å†…å­˜ç©ºé—´ï¼Œå¹¶ç”±ç³»ç»Ÿè‡ªåŠ¨é‡Šæ”¾ã€‚ JSåœ¨æµè§ˆå™¨ä¸Šçš„è¿è¡Œæœºåˆ¶æˆ‘ä»¬çŸ¥é“ JavaScript æ˜¯å•çº¿ç¨‹çš„ï¼Œæ‰€è°“å•çº¿ç¨‹ï¼Œæ˜¯æŒ‡åœ¨ JavaScript å¼•æ“ä¸­è´Ÿè´£è§£é‡Šå’Œæ‰§è¡Œ JavaScript ä»£ç çš„çº¿ç¨‹å”¯ä¸€ï¼ŒåŒä¸€æ—¶é—´ä¸Šåªèƒ½æ‰§è¡Œä¸€ä»¶ä»»åŠ¡ã€‚ ä¸ºä»€ä¹ˆæ˜¯å•çº¿ç¨‹ï¼Ÿè¿™æ˜¯å› ä¸º JavaScript å¯ä»¥ä¿®æ”¹ DOM ç»“æ„ï¼Œå¦‚æœ JavaScript å¼•æ“çº¿ç¨‹ä¸æ˜¯å•çº¿ç¨‹çš„ï¼Œé‚£ä¹ˆå¯ä»¥åŒæ—¶æ‰§è¡Œå¤šæ®µ JavaScriptï¼Œå¦‚æœè¿™å¤šæ®µ JavaScript éƒ½ä¿®æ”¹ DOMï¼Œé‚£ä¹ˆå°±ä¼šå‡ºç° DOM å†²çªã€‚ ä¸ºäº†é¿å… DOM æ¸²æŸ“çš„å†²çªï¼Œå¯ä»¥é‡‡ç”¨å•çº¿ç¨‹æˆ–è€…æ­»é”ï¼ŒJavaScript é‡‡ç”¨äº†å•çº¿ç¨‹æ–¹æ¡ˆã€‚ ä½†å•çº¿ç¨‹æœ‰ä¸€ä¸ªé—®é¢˜ï¼šå¦‚æœä»»åŠ¡é˜Ÿåˆ—é‡Œæœ‰ä¸€ä¸ªä»»åŠ¡è€—æ—¶å¾ˆé•¿ï¼Œå¯¼è‡´è¿™ä¸ªä»»åŠ¡åé¢çš„ä»»åŠ¡ä¸€ç›´æ’é˜Ÿç­‰å¾…ï¼Œå°±ä¼šå‘ç”Ÿé¡µé¢å¡æ­»ï¼Œä¸¥é‡å½±å“ç”¨æˆ·ä½“éªŒã€‚ ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒJavaScript å°†ä»»åŠ¡çš„æ‰§è¡Œæ¨¡å¼åˆ†ä¸ºä¸¤ç§ï¼šåŒæ­¥å’Œå¼‚æ­¥ã€‚ åŒæ­¥ 123// åŒæ­¥ä»»åŠ¡let a = 1console.log(a) // 1 å¼‚æ­¥ 1234// å¼‚æ­¥ä»»åŠ¡setTimeout(() =&gt; &#123; console.log(1)&#125;, 1000) åŒæ­¥ä»»åŠ¡éƒ½åœ¨ä¸»çº¿ç¨‹ï¼ˆ JavaScript å¼•æ“çº¿ç¨‹ï¼‰ä¸Šæ‰§è¡Œï¼Œä¼šå½¢æˆä¸€ä¸ª è°ƒç”¨æ ˆ(æ‰§è¡Œæ ˆ)ï¼› é™¤äº†ä¸»çº¿ç¨‹å¤–ï¼Œè¿˜æœ‰ä¸€ä¸ªä»»åŠ¡é˜Ÿåˆ—ï¼ˆä¹Ÿç§°æ¶ˆæ¯é˜Ÿåˆ—ï¼‰ï¼Œç”¨äºç®¡ç†å¼‚æ­¥ä»»åŠ¡çš„ äº‹ä»¶å›è°ƒ ï¼Œåœ¨ è°ƒç”¨æ ˆ çš„ä»»åŠ¡æ‰§è¡Œå®Œæ¯•ä¹‹åï¼Œç³»ç»Ÿä¼šæ£€æŸ¥ä»»åŠ¡é˜Ÿåˆ—ï¼Œçœ‹æ˜¯å¦æœ‰å¯ä»¥æ‰§è¡Œçš„å¼‚æ­¥ä»»åŠ¡ã€‚ æ³¨æ„ï¼šä»»åŠ¡é˜Ÿåˆ—å­˜æ”¾çš„æ˜¯å¼‚æ­¥ä»»åŠ¡çš„äº‹ä»¶å›è°ƒ ä¾‹å¦‚ä¸Šä¾‹ï¼š 123setTimeout(() =&gt; &#123; console.log(1)&#125;, 1000) åœ¨æ‰§è¡Œè¿™æ®µä»£ç æ—¶ï¼Œå¹¶ä¸ä¼šç«‹åˆ»æ‰“å° ï¼Œåªæœ‰å®šæ—¶ç»“æŸåï¼ˆ1sï¼‰æ‰æ‰“å°ã€‚ setTimeout æœ¬èº«æ˜¯åŒæ­¥æ‰§è¡Œçš„ï¼Œæ”¾å…¥ä»»åŠ¡é˜Ÿåˆ—çš„æ˜¯å®ƒçš„å›è°ƒå‡½æ•°ã€‚ ä¸‹é¢æˆ‘ä»¬é‡ç‚¹çœ‹ä¸€ä¸‹ä¸»çº¿ç¨‹ä¸Šçš„è°ƒç”¨æ ˆã€‚ è°ƒç”¨æ ˆè°ƒç”¨æ ˆæ˜¯ç”¨æ¥ç®¡ç†å‡½æ•°è°ƒç”¨å…³ç³»çš„ä¸€ç§æ ˆç»“æ„ ã€‚ ä¸‹é¢é€šè¿‡ä¸€ä¸ªç®€å•ä¾‹å­è¯´æ˜è°ƒç”¨æ ˆå¦‚ä½•ç®¡ç†å‡½æ•°è°ƒç”¨å…³ç³»ï¼š 123456789var a = 1function add(a) &#123; var b = 2 let c = 3 return a + b + c&#125;// å‡½æ•°è°ƒç”¨add(a) åœ¨æ‰§è¡Œè¿™æ®µä»£ç ä¹‹å‰ï¼ŒJavaScript å¼•æ“ä¼šå…ˆåˆ›å»ºä¸€ä¸ªå…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡ï¼ŒåŒ…å«æ‰€æœ‰å·²å£°æ˜çš„å‡½æ•°ä¸å˜é‡ï¼š ä»å›¾ä¸­å¯ä»¥çœ‹å‡ºï¼Œä»£ç ä¸­çš„å…¨å±€å˜é‡ a åŠå‡½æ•° add ä¿å­˜åœ¨å˜é‡ç¯å¢ƒä¸­ã€‚ æ‰§è¡Œä¸Šä¸‹æ–‡å‡†å¤‡å¥½åï¼Œå¼€å§‹æ‰§è¡Œå…¨å±€ä»£ç ï¼Œé¦–å…ˆæ‰§è¡Œ a = 1 çš„èµ‹å€¼æ“ä½œï¼Œ èµ‹å€¼å®Œæˆå a çš„å€¼ç”± undefined å˜ä¸º 1ï¼Œç„¶åæ‰§è¡Œ add å‡½æ•°ï¼ŒJavaScript åˆ¤æ–­å‡ºè¿™æ˜¯ä¸€ä¸ªå‡½æ•°è°ƒç”¨ï¼Œç„¶åæ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š é¦–å…ˆï¼Œä»å…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­ï¼Œå–å‡º add å‡½æ•°ä»£ç å…¶æ¬¡ï¼Œå¯¹ add å‡½æ•°çš„è¿™æ®µä»£ç è¿›è¡Œç¼–è¯‘ï¼Œå¹¶åˆ›å»ºè¯¥å‡½æ•°çš„æ‰§è¡Œä¸Šä¸‹æ–‡å’Œå¯æ‰§è¡Œä»£ç ï¼Œå¹¶å°†æ‰§è¡Œä¸Šä¸‹æ–‡å‹å…¥æ ˆä¸­ ç„¶åï¼Œæ‰§è¡Œä»£ç ï¼Œè¿”å›ç»“æœï¼Œå¹¶å°† add çš„æ‰§è¡Œä¸Šä¸‹æ–‡ä¹Ÿä¼šä»æ ˆé¡¶éƒ¨å¼¹å‡ºï¼Œæ­¤æ—¶è°ƒç”¨æ ˆä¸­å°±åªå‰©ä¸‹å…¨å±€ä¸Šä¸‹æ–‡äº†ã€‚ è‡³æ­¤ï¼Œæ•´ä¸ªå‡½æ•°è°ƒç”¨æ‰§è¡Œç»“æŸäº†ã€‚ æ‰€ä»¥è¯´ï¼Œè°ƒç”¨æ ˆæ˜¯ JavaScript ç”¨æ¥ç®¡ç†å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡çš„ä¸€ç§æ•°æ®ç»“æ„ï¼Œå®ƒè®°å½•äº†å½“å‰å‡½æ•°æ‰§è¡Œçš„ä½ç½®ï¼Œå“ªä¸ªå‡½æ•°æ­£åœ¨è¢«æ‰§è¡Œã€‚ å¦‚æœæˆ‘ä»¬æ‰§è¡Œä¸€ä¸ªå‡½æ•°ï¼Œå°±ä¼šä¸ºå‡½æ•°åˆ›å»ºæ‰§è¡Œä¸Šä¸‹æ–‡å¹¶æ”¾å…¥æ ˆé¡¶ã€‚ å¦‚æœæˆ‘ä»¬ä»å‡½æ•°è¿”å›ï¼Œå°±å°†å®ƒçš„æ‰§è¡Œä¸Šä¸‹æ–‡ä»æ ˆé¡¶å¼¹å‡ºã€‚ ä¹Ÿå¯ä»¥è¯´è°ƒç”¨æ ˆæ˜¯ç”¨æ¥ç®¡ç†è¿™ç§æ‰§è¡Œä¸Šä¸‹æ–‡çš„æ ˆï¼Œæˆ–ç§°æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆï¼ˆæ‰§è¡Œæ ˆï¼‰ã€‚ äº†è§£äº†ä»€ä¹ˆæ˜¯è°ƒç”¨æ ˆï¼Œå°±èƒ½æ–¹ä¾¿çš„ç†è§£æ ˆæº¢å‡ºäº†ï¼Œå› ä¸ºè°ƒç”¨æ ˆæ˜¯ä¸€ä¸ªæ ˆç»“æ„ï¼Œå®ƒæœ‰å®¹é‡ä¸Šé™ï¼Œå½“å…¥æ ˆçš„ä¸Šä¸‹æ–‡è¿‡å¤šçš„æ—¶å€™ï¼Œå®ƒå°±ä¼šæŠ¥æ ˆæº¢å‡ºã€‚ å¯ä»¥é€šè¿‡console.trace()æ¥æŸ¥çœ‹å‡½æ•°çš„è°ƒç”¨æ ˆè·¯å¾„ æ ˆå†…å­˜ä¸å †å†…å­˜JavaScript ä¸­çš„å˜é‡åˆ†ä¸ºåŸºæœ¬ç±»å‹å’Œå¼•ç”¨ç±»å‹ã€‚ åŸºæœ¬ç±»å‹æ˜¯ä¿å­˜åœ¨æ ˆå†…å­˜ä¸­çš„ç®€å•æ•°æ®æ®µï¼Œå®ƒä»¬çš„å€¼éƒ½æœ‰å›ºå®šçš„å¤§å°ï¼Œé€šè¿‡æŒ‰å€¼è®¿é—®ï¼Œå¹¶ç”±ç³»ç»Ÿè‡ªåŠ¨åˆ†é…å’Œè‡ªåŠ¨é‡Šæ”¾ã€‚ è¿™æ ·å¸¦æ¥çš„å¥½å¤„å°±æ˜¯ï¼Œå†…å­˜å¯ä»¥åŠæ—¶å¾—åˆ°å›æ”¶ï¼Œç›¸å¯¹äºå †æ¥è¯´ï¼Œæ›´åŠ å®¹æ˜“ç®¡ç†å†…å­˜ç©ºé—´ã€‚ JavaScript ä¸­çš„ Booleanã€Nullã€Undefinedã€Numberã€Stringã€Symbol éƒ½æ˜¯åŸºæœ¬ç±»å‹ã€‚ å¼•ç”¨ç±»å‹ï¼ˆå¦‚å¯¹è±¡ã€æ•°ç»„ã€å‡½æ•°ç­‰ï¼‰æ˜¯ä¿å­˜åœ¨å †å†…å­˜ä¸­çš„å¯¹è±¡ï¼Œå€¼å¤§å°ä¸å›ºå®šï¼Œæ ˆå†…å­˜ä¸­å­˜æ”¾çš„è¯¥å¯¹è±¡çš„è®¿é—®åœ°å€æŒ‡å‘å †å†…å­˜ä¸­çš„å¯¹è±¡ï¼ŒJavaScript ä¸å…è®¸ç›´æ¥è®¿é—®å †å†…å­˜ä¸­çš„ä½ç½®ï¼Œå› æ­¤æ“ä½œå¯¹è±¡æ—¶ï¼Œå®é™…æ“ä½œå¯¹è±¡çš„å¼•ç”¨ã€‚ JavaScript ä¸­çš„ Objectã€Arrayã€Functionã€RegExpã€Dateæ˜¯å¼•ç”¨ç±»å‹ã€‚ ç¤ºä¾‹ï¼š 12345678var a = 1function foo() &#123; var b = 2 var c = &#123; name: 'an' &#125;&#125;// å‡½æ•°è°ƒç”¨foo() å½“æˆ‘ä»¬è¦è®¿é—®å †å†…å­˜ä¸­çš„å¼•ç”¨æ•°æ®ç±»å‹æ—¶: ä»æ ˆä¸­è·å–è¯¥å¯¹è±¡çš„åœ°å€å¼•ç”¨; å†ä»å †å†…å­˜ä¸­å–å¾—æˆ‘ä»¬éœ€è¦çš„æ•°æ®; å¤åˆ¶åŸºæœ¬ç±»å‹ 1234let a = 20;let b = a;b = 30;console.log(a); // 20 åœ¨æ ˆå†…å­˜ä¸­çš„æ•°æ®å‘ç”Ÿå¤åˆ¶è¡Œä¸ºæ—¶ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨ä¸ºæ–°çš„å˜é‡åˆ†é…ä¸€ä¸ªæ–°å€¼ï¼Œæœ€åè¿™äº›å˜é‡éƒ½æ˜¯ ç›¸äº’ç‹¬ç«‹ï¼Œäº’ä¸å½±å“çš„ã€‚ å¤åˆ¶å¼•ç”¨ç±»å‹ 1234let a = &#123; x: 10, y: 20 &#125;let b = a;b.x = 5;console.log(a.x); // 5 å¼•ç”¨ç±»å‹çš„å¤åˆ¶ï¼ŒåŒæ ·ä¸ºæ–°çš„å˜é‡ b åˆ†é…ä¸€ä¸ªæ–°çš„å€¼ï¼Œä¿å­˜åœ¨æ ˆå†…å­˜ä¸­ï¼Œä¸åŒçš„æ˜¯ï¼Œè¿™ä¸ªå€¼ä»…ä»…æ˜¯å¼•ç”¨ç±»å‹çš„ä¸€ä¸ªåœ°å€æŒ‡é’ˆã€‚ä»–ä»¬ä¸¤ä¸ªæŒ‡å‘åŒä¸€ä¸ªå †å†…å­˜ç©ºé—´ï¼Œåœ¨å †å†…å­˜ä¸­è®¿é—®åˆ°çš„å…·ä½“å¯¹è±¡å®é™…ä¸Šæ˜¯åŒä¸€ä¸ªã€‚å› æ­¤æ”¹å˜ b.x æ—¶ï¼Œa.x ä¹Ÿå‘ç”Ÿäº†å˜åŒ–ï¼Œè¿™å°±æ˜¯å¼•ç”¨ç±»å‹çš„ç‰¹æ€§ã€‚ æ€»ç»“ æ ˆå†…å­˜ å †å†…å­˜ å­˜å‚¨åŸºç¡€æ•°æ®ç±»å‹ å­˜å‚¨å¼•ç”¨æ•°æ®ç±»å‹ æŒ‰å€¼è®¿é—® æŒ‰å¼•ç”¨è®¿é—® å­˜å‚¨çš„å€¼å¤§å°å›ºå®š å­˜å‚¨çš„å€¼å¤§å°ä¸å®šï¼Œå¯åŠ¨æ€è°ƒæ•´ ç”±ç³»ç»Ÿè‡ªåŠ¨åˆ†é…å†…å­˜ç©ºé—´ ç”±ä»£ç è¿›è¡ŒæŒ‡å®šåˆ†é… ç©ºé—´å°ï¼Œè¿è¡Œæ•ˆç‡é«˜ ç©ºé—´å¤§ï¼Œè¿è¡Œæ•ˆç‡ç›¸å¯¹è¾ƒä½ å…ˆè¿›åå‡ºï¼Œåè¿›å…ˆå‡º æ— åºå­˜å‚¨ï¼Œå¯æ ¹æ®å¼•ç”¨ç›´æ¥è·å– æµ…æ‹·è´ ä¸ æ·±æ‹·è´ä¸Šé¢è®²çš„å¼•ç”¨ç±»å‹çš„å¤åˆ¶å°±æ˜¯æµ…æ‹·è´ï¼Œå¤åˆ¶å¾—åˆ°çš„è®¿é—®åœ°å€éƒ½æŒ‡å‘åŒä¸€ä¸ªå†…å­˜ç©ºé—´ã€‚æ‰€ä»¥ä¿®æ”¹äº†å…¶ä¸­ä¸€ä¸ªçš„å€¼ï¼Œå¦å¤–ä¸€ä¸ªä¹Ÿè·Ÿç€æ”¹å˜äº†ã€‚ æ·±æ‹·è´ï¼šå¤åˆ¶å¾—åˆ°çš„è®¿é—®åœ°å€æŒ‡å‘ä¸åŒçš„å†…å­˜ç©ºé—´ï¼Œäº’ä¸ç›¸å¹²ã€‚æ‰€ä»¥ä¿®æ”¹å…¶ä¸­ä¸€ä¸ªå€¼ï¼Œå¦å¤–ä¸€ä¸ªä¸ä¼šæ”¹å˜ã€‚ æµ…æ‹·è´çš„ä¼˜åŠ¿åœ¨äºæ€§èƒ½å‡ºè‰²ï¼Œä½†æ˜¯å¹¶ä¸èƒ½éƒ½æ»¡è¶³æ—¥å¸¸éœ€æ±‚ï¼Œå¾ˆå¤šæ—¶å€™æˆ‘ä»¬éœ€è¦æ”¹å˜æ‹·è´æ•°ç»„çš„æ—¶å€™ï¼ŒåŸæ•°ç»„ä¸å—å½±å“ï¼Œè¿™æ—¶å€™å°±éœ€è¦ç”¨åˆ°æ·±æ‹·è´äº†ã€‚ ä¸€ä¸ªé€šç”¨æ·±æ‹·è´çš„å®ç°ä¸»è¦æ€æƒ³ï¼š é€šè¿‡åˆ¤æ–­æ‹·è´å¯¹è±¡çš„ç±»å‹ï¼Œå¦‚æœæ˜¯åŸºæœ¬ç±»å‹ï¼Œç›´æ¥èµ‹å€¼ï¼Œå¦‚æœæ˜¯å¼•ç”¨ç±»å‹(array/object/function),åˆ™è¿›å…¥æ ¸å¿ƒæ­¥éª¤ æ·±æ‹·è´çš„å®ç°æœ€é‡è¦çš„æ˜¯å¤„ç†å¾ªç¯å¼•ç”¨çš„é—®é¢˜ï¼Œä»¥ä¸‹ç”¨WeakMapçš„æ–¹å¼é˜»æ­¢å¾ªç¯å¼•ç”¨:12345// é˜»æ­¢å¾ªç¯å¼•ç”¨if (cache.has(target)) &#123; return cache.get(target);&#125;cache.set(target, copy); å®Œæ•´å®ç°ä»£ç å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677function getType(obj) &#123; const str = Object.prototype.toString.call(obj); const map = &#123; \"[object Boolean]\": \"boolean\", \"[object Number]\": \"number\", \"[object String]\": \"string\", \"[object Function]\": \"function\", \"[object Array]\": \"array\", \"[object Date]\": \"date\", \"[object RegExp]\": \"regExp\", \"[object Undefined]\": \"undefined\", \"[object Null]\": \"null\", \"[object Object]\": \"object\", &#125;; return map[str];&#125;function deepCopy(target, cache = new WeakMap()) &#123; const type = getType(target); // å€¼ç±»å‹æ•°ç»„ const valTypes = [ \"undefined\", \"null\", \"boolean\", \"number\", \"string\", \"symbol\", \"bigInt\", ]; if (valTypes.includes(type)) &#123; return target; &#125; let copy; // åˆå§‹åŒ–cloneå€¼ if (type === \"function\") &#123; copy = &#123;&#125;; &#125; else &#123; copy = new target.constructor(); &#125; // é˜»æ­¢å¾ªç¯å¼•ç”¨ if (cache.has(target)) &#123; return cache.get(target); &#125; cache.set(target, copy); switch (type) &#123; case \"array\": return copyArray(target, copy, cache); case \"object\": return copyObject(target, copy, cache); case \"function\": return copyFunction(target, cache); default: return target; &#125;&#125;function copyArray(target, copy = [], cache) &#123; for (const [index, value] of target.entries()) &#123; copy[index] = deepCopy(value, cache); &#125; return copy;&#125;function copyObject(target, copy = &#123;&#125;, cache) &#123; for (const [key, value] of Object.entries(target)) &#123; copy[key] = deepCopy(value, cache); &#125; return copy;&#125;function copyFunction(target, copy = () =&gt; &#123;&#125;) &#123; const fn = eval(target.toString()); fn.prototype = target.prototype; return fn;&#125; åƒåœ¾å›æ”¶JavaScript ä¸­çš„åƒåœ¾æ•°æ®éƒ½æ˜¯ç”±åƒåœ¾å›æ”¶å™¨è‡ªåŠ¨å›æ”¶çš„ï¼Œä¸éœ€è¦æ‰‹åŠ¨é‡Šæ”¾ã€‚ å›æ”¶æ ˆç©ºé—´åœ¨ JavaScript æ‰§è¡Œä»£ç æ—¶ï¼Œä¸»çº¿ç¨‹ä¸Šä¼šå­˜åœ¨ ESP æŒ‡é’ˆï¼Œç”¨æ¥æŒ‡å‘è°ƒç”¨æ ˆä¸­å½“å‰æ­£åœ¨æ‰§è¡Œçš„ä¸Šä¸‹æ–‡ã€‚ å½“ foo å‡½æ•°æ‰§è¡Œå®Œæˆåï¼ŒESP å‘ä¸‹æŒ‡å‘å…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œfoo å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡å°±å˜æˆæ— æ•ˆçš„ï¼Œå½“æœ‰æ–°çš„æ‰§è¡Œä¸Šä¸‹æ–‡è¿›æ¥æ—¶ï¼Œå¯ä»¥ç›´æ¥è¦†ç›–è¿™å—å†…å­˜ç©ºé—´ã€‚ JavaScript å¼•æ“é€šè¿‡å‘ä¸‹ç§»åŠ¨ ESP æŒ‡é’ˆæ¥é”€æ¯å­˜æ”¾åœ¨æ ˆç©ºé—´ä¸­çš„æ‰§è¡Œä¸Šä¸‹æ–‡ã€‚ å›æ”¶å †ç©ºé—´V8 ä¸­æŠŠå †åˆ†æˆæ–°ç”Ÿä»£ä¸è€ç”Ÿä»£ä¸¤ä¸ªåŒºåŸŸï¼š æ–°ç”Ÿä»£ï¼šç”¨æ¥å­˜æ”¾ç”Ÿå­˜å‘¨æœŸè¾ƒçŸ­çš„å°å¯¹è±¡ï¼Œä¸€èˆ¬åªæ”¯æŒ1ï½8Mçš„å®¹é‡ è€ç”Ÿä»£ï¼šç”¨æ¥å­˜æ”¾ç”Ÿå­˜å‘¨æœŸè¾ƒé•¿çš„å¯¹è±¡æˆ–å¤§å¯¹è±¡ V8 å¯¹è¿™ä¸¤å—åŒºåŸŸä½¿ç”¨äº†ä¸åŒçš„å›æ”¶å™¨ï¼š æ–°ç”Ÿä»£ä½¿ç”¨å‰¯åƒåœ¾å›æ”¶å™¨ è€ç”Ÿä»£ä½¿ç”¨ä¸»åƒåœ¾å›æ”¶å™¨ å‰¯åƒåœ¾å›æ”¶å™¨: é‡‡ç”¨ Scavenge ç®—æ³•åŠå¯¹è±¡æ™‹å‡ç­–ç•¥æ¥è¿›è¡Œåƒåœ¾å›æ”¶ æ‰€è°“ Scavenge ç®—æ³•ï¼Œå³æŠŠæ–°ç”Ÿä»£ç©ºé—´å¯¹åŠåˆ’åˆ†ä¸ºä¸¤ä¸ªåŒºåŸŸï¼Œä¸€åŠæ˜¯å¯¹è±¡åŒºåŸŸï¼Œä¸€åŠæ˜¯ç©ºé—²åŒºåŸŸã€‚ æ–°åŠ å…¥çš„å¯¹è±¡éƒ½åŠ å…¥å¯¹è±¡åŒºåŸŸï¼Œå½“å¯¹è±¡åŒºæ»¡çš„æ—¶å€™ï¼Œå°±æ‰§è¡Œä¸€æ¬¡åƒåœ¾å›æ”¶ï¼Œæ‰§è¡Œæµç¨‹å¦‚ä¸‹ï¼š æ ‡è®°ï¼šé¦–å…ˆè¦å¯¹åŒºåŸŸå†…çš„å¯¹è±¡è¿›è¡Œæ ‡è®°ï¼ˆæ´»åŠ¨å¯¹è±¡ã€éæ´»åŠ¨å¯¹è±¡ï¼‰ åƒåœ¾æ¸…ç†ï¼šå°†å¯¹è±¡åŒºçš„æ´»åŠ¨å¯¹è±¡å¤åˆ¶åˆ°ç©ºé—²åŒºåŸŸï¼Œå¹¶è¿›è¡Œæœ‰åºçš„æ’åˆ—ï¼Œå½“å¤åˆ¶å®Œæˆåï¼Œå¯¹è±¡åŒºåŸŸä¸ç©ºé—²åŒºåŸŸè¿›è¡Œç¿»è½¬ï¼Œç©ºé—²åŒºåŸŸæ™‹å‡ä¸ºå¯¹è±¡åŒºåŸŸï¼Œå¯¹è±¡åŒºåŸŸä¸ºç©ºé—²åŒºåŸŸ ç¿»è½¬åï¼Œå¯¹è±¡åŒºåŸŸæ˜¯æ²¡æœ‰ç¢ç‰‡çš„ï¼Œæ­¤æ—¶ä¸éœ€è¦è¿›è¡Œå†…å­˜æ•´ç†ã€‚ æ‰€è°“å¯¹è±¡æ™‹å‡ç­–ç•¥ï¼Œå› ä¸ºæ–°ç”Ÿä»£åŒºåŸŸå¾ˆå°çš„ï¼Œä¸€èˆ¬1ï½8Mçš„å®¹é‡ï¼Œæ‰€ä»¥å®ƒå¾ˆå®¹æ˜“æ»¡ï¼Œæ‰€ä»¥ï¼ŒJavaScript å¼•æ“é‡‡ç”¨å¯¹è±¡æ™‹å‡ç­–ç•¥æ¥å¤„ç†: å³åªè¦å¯¹è±¡ç»è¿‡ ä¸¤æ¬¡ åƒåœ¾å›æ”¶ä¹‹åä¾ç„¶ç»§ç»­å­˜æ´»ï¼Œå°±ä¼šè¢«æ™‹å‡åˆ°è€ç”Ÿä»£åŒºåŸŸä¸­ã€‚ ä¸»åƒåœ¾å›æ”¶å™¨ï¼š è€ç”Ÿä»£åŒºåŸŸé‡Œæœ‰ä¸¤å—å¯¹è±¡ï¼š ä»æ–°ç”Ÿä»£æ™‹å‡æ¥çš„å­˜æ´»æ—¶é—´ä¹…çš„å¯¹è±¡ å¤§å¯¹è±¡ï¼ˆç›´æ¥åˆ†é…åˆ°è€ç”Ÿä»£ï¼‰ V8 ä¸­ä¸»åƒåœ¾å›æ”¶å™¨ä¸»è¦é‡‡ç”¨æ ‡è®°-æ¸…é™¤æ³•è¿›è¡Œåƒåœ¾å›æ”¶ã€‚ ä¸»è¦æµç¨‹å¦‚ä¸‹ï¼š æ ‡è®°ï¼šéå†è°ƒç”¨æ ˆï¼Œçœ‹è€ç”Ÿä»£åŒºåŸŸå †ä¸­çš„å¯¹è±¡æ˜¯å¦è¢«å¼•ç”¨ï¼Œè¢«å¼•ç”¨çš„å¯¹è±¡æ ‡è®°ä¸ºæ´»åŠ¨å¯¹è±¡ï¼Œæ²¡æœ‰è¢«å¼•ç”¨çš„å¯¹è±¡ï¼ˆå¾…æ¸…ç†ï¼‰æ ‡è®°ä¸ºåƒåœ¾æ•°æ®ã€‚ åƒåœ¾æ¸…ç†ï¼šå°†æ‰€æœ‰åƒåœ¾æ•°æ®æ¸…ç†æ‰ å†…å­˜æ•´ç†ï¼šæ ‡è®°-æ•´ç†ç­–ç•¥ï¼Œå°†æ´»åŠ¨å¯¹è±¡æ•´ç†åˆ°ä¸€èµ· å¢é‡æ ‡è®°ï¼š V8 æµè§ˆå™¨ä¼šè‡ªåŠ¨æ‰§è¡Œåƒåœ¾å›æ”¶ï¼Œä½†ç”±äº åƒåœ¾å›æ”¶ ä¹Ÿæ˜¯è¿è¡Œåœ¨ä¸»çº¿ç¨‹ä¸Šçš„ï¼Œä¸€æ—¦æ‰§è¡Œåƒåœ¾å›æ”¶ï¼Œå°±è¦æ‰“æ–­ JavaScript çš„è¿è¡Œï¼Œå¯èƒ½ä¼šé€ æˆé¡µé¢çš„å¡é¡¿ï¼Œå½±å“ç”¨æˆ·ä½“éªŒï¼Œæ‰€ä»¥ V8 é‡‡ç”¨å¢é‡ æ ‡è®°ç®—æ³•å›æ”¶ï¼š å³æŠŠåƒåœ¾å›æ”¶æ‹†æˆä¸€ä¸ªä¸ªå°ä»»åŠ¡ï¼Œç©¿æ’åœ¨ JavaScript ä¸­æ‰§è¡Œã€‚ æ€»ç»“æœ¬æ–‡å†…å®¹å›é¡¾ï¼š æ ˆä¸å †çš„å®šä¹‰ä¸å¯¹æ¯”ï¼š æ ˆï¼šçº¿æ€§ç»“æ„ï¼ŒLIFO å †ï¼šéçº¿æ€§ç»“æ„ï¼Œæ‚ä¹±æ— ç« ï¼Œæ–¹ä¾¿å­˜å‚¨ä¸å¼€è¾Ÿå†…å­˜ç©ºé—´ ä»¥åŠJSçš„è¿è¡Œæœºåˆ¶ï¼š è°ƒç”¨æ ˆ ä»»åŠ¡é˜Ÿåˆ— è°ƒç”¨æ ˆ è°ƒç”¨æ ˆæ˜¯ JavaScript ç”¨æ¥ç®¡ç†å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡çš„ä¸€ç§æ•°æ®ç»“æ„ï¼Œå®ƒè®°å½•äº†å½“å‰å‡½æ•°æ‰§è¡Œçš„ä½ç½®ï¼Œå“ªä¸ªå‡½æ•°æ­£åœ¨è¢«æ‰§è¡Œ æ ˆå†…å­˜ä¸å †å†…å­˜ æ ˆå†…å­˜ï¼š åŸºæœ¬ç±»å‹ï¼ˆBooleanã€Nullã€Undefinedã€Numberã€Stringã€Symbolï¼‰ å †å†…å­˜ï¼š å¼•ç”¨ç±»å‹ï¼ˆObjectã€Arrayã€Functionã€RegExpã€Dateï¼‰ æµ…æ‹·è´ ä¸ æ·±æ‹·è´ åƒåœ¾å›æ”¶ å›æ”¶æ ˆç©ºé—´ï¼š JavaScript å¼•æ“é€šè¿‡å‘ä¸‹ç§»åŠ¨ ESP æŒ‡é’ˆæ¥é”€æ¯å­˜æ”¾åœ¨æ ˆç©ºé—´ä¸­çš„æ‰§è¡Œä¸Šä¸‹æ–‡ã€‚ å›æ”¶å †ç©ºé—´ï¼š å‰¯åƒåœ¾å›æ”¶å™¨ ä¸ ä¸»åƒåœ¾å›æ”¶å™¨ çš„åŒºåˆ« å¢é‡æ ‡è®°ï¼š è§£å†³é˜»å¡ä¸»è¿›ç¨‹é—®é¢˜","categories":[{"name":"æ•°æ®ç»“æ„ä¸ç®—æ³•","slug":"æ•°æ®ç»“æ„ä¸ç®—æ³•","permalink":"http://blog.kobingo.xyz/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/"}],"tags":[{"name":"æ ˆ","slug":"æ ˆ","permalink":"http://blog.kobingo.xyz/tags/%E6%A0%88/"},{"name":"å †","slug":"å †","permalink":"http://blog.kobingo.xyz/tags/%E5%A0%86/"}]},{"title":"å‰ç«¯å¦‚ä½•å­¦æ•°æ®ç»“æ„ä¸ç®—æ³• - çº¿æ€§è¡¨","slug":"algorithms-çº¿æ€§è¡¨åŸºç¡€æ±‡æ€»","date":"2019-12-05T14:25:24.000Z","updated":"2021-01-19T06:41:41.218Z","comments":true,"path":"algorithms-çº¿æ€§è¡¨åŸºç¡€æ±‡æ€»/","link":"","permalink":"http://blog.kobingo.xyz/algorithms-%E7%BA%BF%E6%80%A7%E8%A1%A8%E5%9F%BA%E7%A1%80%E6%B1%87%E6%80%BB/","excerpt":"æ•°æ®ç»“æ„å’Œç®—æ³•æ˜¯ç¼–ç¨‹çš„å†…åŠŸï¼Œæ·±åšçš„å†…åŠŸå¯ä»¥æœ‰æ•ˆä¿éšœå†™å‡ºçš„ä»£ç æ€§èƒ½è‰¯å¥½ï¼Œå¯ä»¥æå‰é¢„ä¼°ä»£ç è¿è¡Œè¾¾åˆ°é¢„æœŸç›®çš„ï¼Œæé«˜å·¥ä½œäº§å‡ºï¼Œä¹Ÿèƒ½è®©å­¦ä¹ å…¶ä»–ç¼–ç¨‹è¯­è¨€å’Œæ¡†æ¶å˜å¾—äº‹åŠåŠŸå€ã€‚ æœ¬ç³»åˆ—æ‰€æœ‰ç¤ºä¾‹å‡é‡‡ç”¨JavaScriptï¼Œæ—¨åœ¨å…¥é—¨æ•°æ®ç»“æ„ä¸ç®—æ³•ã€‚ æœ¬èŠ‚ä¸»è¦æ˜¯è®²è§£ä¸‹åŸºç¡€æ•°æ®ç»“æ„ - çº¿æ€§è¡¨ ç›¸å…³çš„å†…å®¹ã€‚","text":"æ•°æ®ç»“æ„å’Œç®—æ³•æ˜¯ç¼–ç¨‹çš„å†…åŠŸï¼Œæ·±åšçš„å†…åŠŸå¯ä»¥æœ‰æ•ˆä¿éšœå†™å‡ºçš„ä»£ç æ€§èƒ½è‰¯å¥½ï¼Œå¯ä»¥æå‰é¢„ä¼°ä»£ç è¿è¡Œè¾¾åˆ°é¢„æœŸç›®çš„ï¼Œæé«˜å·¥ä½œäº§å‡ºï¼Œä¹Ÿèƒ½è®©å­¦ä¹ å…¶ä»–ç¼–ç¨‹è¯­è¨€å’Œæ¡†æ¶å˜å¾—äº‹åŠåŠŸå€ã€‚ æœ¬ç³»åˆ—æ‰€æœ‰ç¤ºä¾‹å‡é‡‡ç”¨JavaScriptï¼Œæ—¨åœ¨å…¥é—¨æ•°æ®ç»“æ„ä¸ç®—æ³•ã€‚ æœ¬èŠ‚ä¸»è¦æ˜¯è®²è§£ä¸‹åŸºç¡€æ•°æ®ç»“æ„ - çº¿æ€§è¡¨ ç›¸å…³çš„å†…å®¹ã€‚ çº¿æ€§è¡¨ ä¸ éçº¿æ€§è¡¨çº¿æ€§è¡¨ï¼ˆLinear Listï¼‰ï¼šå°±æ˜¯æ•°æ®æ’æˆåƒä¸€æ¡çº¿ä¸€æ ·çš„ç»“æ„ã€‚æ¯ä¸ªçº¿æ€§è¡¨ä¸Šçš„æ•°æ®æœ€å¤šåªæœ‰å‰å’Œåä¸¤ä¸ªæ–¹å‘ã€‚æ•°ç»„ã€é“¾è¡¨ã€é˜Ÿåˆ—ã€æ ˆ ç­‰å°±æ˜¯å…¸å‹çº¿æ€§è¡¨ç»“æ„ã€‚ éçº¿æ€§è¡¨ï¼šæ•°æ®ä¹‹é—´å¹¶ä¸æ˜¯ç®€å•çš„å‰åå…³ç³»ã€‚äºŒå‰æ ‘ã€å †ã€å›¾ å°±æ˜¯éçº¿æ€§è¡¨ã€‚ æ•°ç»„ å®šä¹‰æ•°ç»„ (Array) æ˜¯ä¸€ä¸ªæœ‰åºçš„æ•°æ®é›†åˆï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æ•°ç»„åç§° (name) å’Œç´¢å¼• (index) è¿›è¡Œè®¿é—®ã€‚æ•°ç»„çš„ç´¢å¼•æ˜¯ä» 0 å¼€å§‹çš„ã€‚ ç‰¹ç‚¹æ•°ç»„æ˜¯ç”¨ä¸€ç»„è¿ç»­çš„å†…å­˜ç©ºé—´æ¥å­˜å‚¨çš„ã€‚ æ‰€ä»¥æ•°ç»„æ”¯æŒ éšæœºè®¿é—®ï¼Œæ ¹æ®ä¸‹æ ‡éšæœºè®¿é—®çš„æ—¶é—´å¤æ‚åº¦ä¸º O(1)ã€‚ ä½æ•ˆçš„æ’å…¥å’Œåˆ é™¤ã€‚ æ•°ç»„ä¸ºäº†ä¿æŒå†…å­˜æ•°æ®çš„è¿ç»­æ€§ï¼Œä¼šå¯¼è‡´æ’å…¥ã€åˆ é™¤è¿™ä¸¤ä¸ªæ“ä½œæ¯”è¾ƒä½æ•ˆï¼Œå› ä¸ºåº•å±‚é€šå¸¸æ˜¯è¦è¿›è¡Œå¤§é‡çš„æ•°æ®æ¬ç§»æ¥ä¿æŒæ•°æ®çš„è¿ç»­æ€§ã€‚ æ’å…¥ä¸åˆ é™¤çš„æ—¶é—´å¤æ‚åº¦å¦‚ä¸‹ï¼š æ’å…¥ï¼šä»æœ€å¥½ O(1) ï¼Œæœ€å O(n) ï¼Œå¹³å‡ O(n) åˆ é™¤ï¼šä»æœ€å¥½ O(1) ï¼Œæœ€å O(n) ï¼Œå¹³å‡ O(n) å®ç°JavaScript åŸç”Ÿæ”¯æŒæ•°ç»„ï¼Œè€Œä¸”æä¾›äº†å¾ˆå¤šæ“ä½œæ–¹æ³•ï¼ŒJavaScriptæ•°ç»„æ”¯æŒçš„æ–¹æ³•å¯è§ä¸‹è¡¨ï¼š æ–¹æ³• æè¿° concat() è¿æ¥ä¸¤ä¸ªæˆ–æ›´å¤šçš„æ•°ç»„ï¼Œå¹¶è¿”å›ç»“æœã€‚ copyWithin() ä»æ•°ç»„çš„æŒ‡å®šä½ç½®æ‹·è´å…ƒç´ åˆ°æ•°ç»„çš„å¦ä¸€ä¸ªæŒ‡å®šä½ç½®ä¸­ã€‚ entries() è¿”å›æ•°ç»„çš„å¯è¿­ä»£å¯¹è±¡ã€‚ every() æ£€æµ‹æ•°å€¼å…ƒç´ çš„æ¯ä¸ªå…ƒç´ æ˜¯å¦éƒ½ç¬¦åˆæ¡ä»¶ã€‚ fill() ä½¿ç”¨ä¸€ä¸ªå›ºå®šå€¼æ¥å¡«å……æ•°ç»„ã€‚ filter() æ£€æµ‹æ•°å€¼å…ƒç´ ï¼Œå¹¶è¿”å›ç¬¦åˆæ¡ä»¶æ‰€æœ‰å…ƒç´ çš„æ•°ç»„ã€‚ find() è¿”å›ç¬¦åˆä¼ å…¥æµ‹è¯•ï¼ˆå‡½æ•°ï¼‰æ¡ä»¶çš„æ•°ç»„å…ƒç´ ã€‚ findIndex() è¿”å›ç¬¦åˆä¼ å…¥æµ‹è¯•ï¼ˆå‡½æ•°ï¼‰æ¡ä»¶çš„æ•°ç»„å…ƒç´ ç´¢å¼•ã€‚ forEach() æ•°ç»„æ¯ä¸ªå…ƒç´ éƒ½æ‰§è¡Œä¸€æ¬¡å›è°ƒå‡½æ•°ã€‚ from() é€šè¿‡ç»™å®šçš„å¯¹è±¡ä¸­åˆ›å»ºä¸€ä¸ªæ•°ç»„ã€‚ includes() åˆ¤æ–­ä¸€ä¸ªæ•°ç»„æ˜¯å¦åŒ…å«ä¸€ä¸ªæŒ‡å®šçš„å€¼ã€‚ indexOf() æœç´¢æ•°ç»„ä¸­çš„å…ƒç´ ï¼Œå¹¶è¿”å›å®ƒæ‰€åœ¨çš„ä½ç½®ã€‚ isArray() åˆ¤æ–­å¯¹è±¡æ˜¯å¦ä¸ºæ•°ç»„ã€‚ join() æŠŠæ•°ç»„çš„æ‰€æœ‰å…ƒç´ æ”¾å…¥ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚ keys() è¿”å›æ•°ç»„çš„å¯è¿­ä»£å¯¹è±¡ï¼ŒåŒ…å«åŸå§‹æ•°ç»„çš„é”®(key)ã€‚ lastIndexOf() æœç´¢æ•°ç»„ä¸­çš„å…ƒç´ ï¼Œå¹¶è¿”å›å®ƒæœ€åå‡ºç°çš„ä½ç½®ã€‚ map() é€šè¿‡æŒ‡å®šå‡½æ•°å¤„ç†æ•°ç»„çš„æ¯ä¸ªå…ƒç´ ï¼Œå¹¶è¿”å›å¤„ç†åçš„æ•°ç»„ã€‚ pop() åˆ é™¤æ•°ç»„çš„æœ€åä¸€ä¸ªå…ƒç´ å¹¶è¿”å›åˆ é™¤çš„å…ƒç´ ã€‚ push() å‘æ•°ç»„çš„æœ«å°¾æ·»åŠ ä¸€ä¸ªæˆ–æ›´å¤šå…ƒç´ ï¼Œå¹¶è¿”å›æ–°çš„é•¿åº¦ã€‚ reduce() å°†æ•°ç»„å…ƒç´ è®¡ç®—ä¸ºä¸€ä¸ªå€¼ï¼ˆä»å·¦åˆ°å³ï¼‰ã€‚ reduceRight() å°†æ•°ç»„å…ƒç´ è®¡ç®—ä¸ºä¸€ä¸ªå€¼ï¼ˆä»å³åˆ°å·¦ï¼‰ã€‚ reverse() åè½¬æ•°ç»„çš„å…ƒç´ é¡ºåºã€‚ shift() åˆ é™¤å¹¶è¿”å›æ•°ç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ ã€‚ slice() é€‰å–æ•°ç»„çš„çš„ä¸€éƒ¨åˆ†ï¼Œå¹¶è¿”å›ä¸€ä¸ªæ–°æ•°ç»„ã€‚ some() æ£€æµ‹æ•°ç»„å…ƒç´ ä¸­æ˜¯å¦æœ‰å…ƒç´ ç¬¦åˆæŒ‡å®šæ¡ä»¶ã€‚ sort() å¯¹æ•°ç»„çš„å…ƒç´ è¿›è¡Œæ’åºã€‚ splice() ä»æ•°ç»„ä¸­æ·»åŠ æˆ–åˆ é™¤å…ƒç´ ã€‚ toString() æŠŠæ•°ç»„è½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼Œå¹¶è¿”å›ç»“æœã€‚ unshift() å‘æ•°ç»„çš„å¼€å¤´æ·»åŠ ä¸€ä¸ªæˆ–æ›´å¤šå…ƒç´ ï¼Œå¹¶è¿”å›æ–°çš„é•¿åº¦ã€‚ valueOf() è¿”å›æ•°ç»„å¯¹è±¡çš„åŸå§‹å€¼ã€‚ æ ˆ å®šä¹‰ åè¿›è€…å…ˆå‡ºï¼Œå…ˆè¿›è€…åå‡ºï¼Œç®€ç§° åè¿›å…ˆå‡ºï¼ˆLIFOï¼‰ï¼Œè¿™å°±æ˜¯å…¸å‹çš„æ ˆç»“æ„ã€‚ åœ¨æ ˆé‡Œï¼Œæ–°å…ƒç´ éƒ½é è¿‘æ ˆé¡¶ï¼Œæ—§å…ƒç´ éƒ½æ¥è¿‘æ ˆåº•ã€‚ ä»æ ˆçš„æ“ä½œç‰¹æ€§æ¥çœ‹ï¼Œæ˜¯ä¸€ç§ æ“ä½œå—é™çš„çº¿æ€§è¡¨ï¼Œåªå…è®¸åœ¨ä¸€ç«¯æ’å…¥å’Œåˆ é™¤æ•°æ®ã€‚ ä¸åŒ…å«ä»»ä½•å…ƒç´ çš„æ ˆç§°ä¸ºç©ºæ ˆã€‚ æ ˆè¢«ç”¨åœ¨ç¼–ç¨‹è¯­è¨€çš„ç¼–è¯‘å™¨å’Œå†…å­˜ä¸­ä¿å­˜å˜é‡ã€æ–¹æ³•è°ƒç”¨ç­‰ï¼Œæ¯”å¦‚å‡½æ•°çš„è°ƒç”¨æ ˆã€å‰ç«¯è·¯ç”±ç­‰ã€‚ å®ç° 1234567891011121314151617181920212223242526272829303132333435363738394041424344function Stack() &#123; this.data = []; /** * æ·»åŠ ä¸€ä¸ªï¼ˆæˆ–å‡ ä¸ªï¼‰æ–°å…ƒç´ åˆ°æ ˆé¡¶ã€‚ */ this.push = function (element) &#123; this.data.push(element); &#125;; /** * ç§»é™¤æ ˆé¡¶çš„å…ƒç´ ï¼ŒåŒæ—¶è¿”å›è¢«ç§»é™¤çš„å…ƒç´ ã€‚ */ this.pop = function () &#123; return this.data.pop(); &#125;; /** * è¿”å›æ ˆé¡¶çš„å…ƒç´ ï¼Œä¸å¯¹æ ˆåšä»»ä½•ä¿®æ”¹ã€‚ */ this.peek = function () &#123; return this.data[this.data.length - 1]; &#125;; /** * å¦‚æœæ ˆé‡Œæ²¡æœ‰ä»»ä½•å…ƒç´ å°±è¿”å› trueï¼Œå¦åˆ™è¿”å› false */ this.isEmpty = function () &#123; return this.data.length === 1; &#125;; /** * ç§»é™¤æ ˆé‡Œçš„æ‰€æœ‰å…ƒç´  */ this.clear = function () &#123; this.data = []; &#125;; /** * è¿”å›æ ˆé‡Œçš„å…ƒç´ ä¸ªæ•°ã€‚ */ this.size = function () &#123; return this.data.length; &#125;; // æ‰“å°æ ˆé‡Œçš„å…ƒç´  this.print = function () &#123; console.log(this.data.toString()); &#125;;&#125; ä½¿ç”¨åœºæ™¯ ä¸¾ä¸€ä¸ªåˆ¤æ–­å›æ–‡çš„ä¾‹å­ï¼š 12345678910111213141516function isPalindrome(word) &#123; var s = new Stack(); for (var i = 0; i &lt; word.length; i++) &#123; s.push(word[i]); &#125; var rword = \"\"; while (s.length() &gt; 0) &#123; rword += s.pop(); &#125; return word == rword;&#125;console.log(isPalindrome(\"level\")); // trueconsole.log(isPalindrome(\"1001\")); // trueconsole.log(isPalindrome(\"word\")); // false é˜Ÿåˆ— å®šä¹‰ é˜Ÿåˆ—æ˜¯éµå¾ª FIFOï¼ˆFirst In First Outï¼Œå…ˆè¿›å…ˆå‡ºï¼‰åŸåˆ™çš„ä¸€ç»„æœ‰åºçš„é¡¹ã€‚ é˜Ÿåˆ—åœ¨å°¾éƒ¨æ·»åŠ æ–°å…ƒç´ ï¼Œå¹¶ä»é¡¶éƒ¨ç§»é™¤å…ƒç´ ã€‚ æœ€æ–°æ·»åŠ çš„å…ƒç´ å¿…é¡»æ’åœ¨é˜Ÿåˆ—çš„æœ«å°¾ã€‚ é˜Ÿåˆ—åªæœ‰ å…¥é˜Ÿ push() å’Œå‡ºé˜Ÿ pop()ã€‚ é˜Ÿåˆ—åˆå¯ä»¥ç»†åˆ†ä¸ºæ™®é€šé˜Ÿåˆ—ã€ä¼˜å…ˆé˜Ÿåˆ—ã€å¾ªç¯é˜Ÿåˆ—ã€‚ æ™®é€šé˜Ÿåˆ— å®ç° 123456789101112131415161718192021222324252627282930313233343536373839// Queueç±»function Queue() &#123; this.data = []; // å‘é˜Ÿåˆ—å°¾éƒ¨æ·»åŠ å…ƒç´  this.enqueue = function (element) &#123; this.data.push(element); &#125;; // ç§»é™¤é˜Ÿåˆ—çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œå¹¶è¿”å›è¢«ç§»é™¤çš„å…ƒç´  this.dequeue = function () &#123; return this.data.shift(); &#125;; // è¿”å›é˜Ÿåˆ—çš„ç¬¬ä¸€ä¸ªå…ƒç´  this.front = function () &#123; return this.data[0]; &#125;; // åˆ¤æ–­æ˜¯å¦ä¸ºç©ºé˜Ÿåˆ— this.isEmpty = function () &#123; return this.data.length === 0; &#125;; // è·å–é˜Ÿåˆ—çš„é•¿åº¦ this.size = function () &#123; return this.data.length; &#125;; // æ¸…ç©ºé˜Ÿåˆ— this.clear = function () &#123; this.data = []; &#125;; // æ‰“å°é˜Ÿåˆ—é‡Œçš„å…ƒç´  this.print = function () &#123; console.log(this.data.toString()); &#125;;&#125; ä¼˜å…ˆé˜Ÿåˆ— å®šä¹‰ä¼˜å…ˆé˜Ÿåˆ—ä¸­å…ƒç´ çš„æ·»åŠ å’Œç§»é™¤ä¼šæ ¹æ®ä¼˜å…ˆçº§æ¥å¤„ç† åœºæ™¯ä¼˜å…ˆé˜Ÿåˆ—ä¸€ä¸ªå…¸å‹çš„åœºæ™¯å°±æ˜¯æœºåœºç™»æœºï¼Œå¤´ç­‰èˆ±å’Œå•†åŠ¡èˆ±ä¹˜å®¢çš„ä¼˜å…ˆçº§è¦é«˜äºç»æµèˆ±ä¹˜å®¢ã€‚ åˆ†ç±» æœ€å°ä¼˜å…ˆé˜Ÿåˆ—ï¼Œä¼˜å…ˆçº§å€¼è¶Šå°çš„å…ƒç´ åœ¨è¶Šå‰é¢ æœ€å¤§ä¼˜å…ˆé˜Ÿåˆ—ï¼Œä¼˜å…ˆçº§å€¼è¶Šå¤§çš„å…ƒç´ åœ¨è¶Šå‰é¢ å®ç°å®ç°æœ€å°ä¼˜å…ˆé˜Ÿåˆ— 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455// MinPriorityQueueç±»function MinPriorityQueue() &#123; this.data = []; // å‘é˜Ÿåˆ—å°¾éƒ¨æ·»åŠ å…ƒç´  this.enqueue = function (element, priority) &#123; //è‹¥é˜Ÿåˆ—ä¸ºç©ºåˆ™ç›´æ¥å°†å…ƒç´ å…¥åˆ—ï¼Œå¦åˆ™éœ€è¦æ¯”è¾ƒè¯¥å…ƒç´ ä¸å…¶ä»–å…ƒç´ çš„ä¼˜å…ˆçº§ if (this.isEmpty()) &#123; this.data.push(&#123; element, priority &#125;); &#125; else &#123; let added = false; for (let i = 0, length = this.size(); i &lt; length; i++) &#123; if (priority &lt; this.data[i].priority) &#123; this.data.splice(i, 0, &#123; element, priority &#125;); added = true; break; &#125; &#125; if (!added) &#123; this.data.push(&#123; element, priority &#125;); &#125; &#125; &#125;; // ç§»é™¤é˜Ÿåˆ—çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œå¹¶è¿”å›è¢«ç§»é™¤çš„å…ƒç´  this.dequeue = function () &#123; return this.data.shift(); &#125;; // è¿”å›é˜Ÿåˆ—çš„ç¬¬ä¸€ä¸ªå…ƒç´  this.front = function () &#123; return this.data[0]; &#125;; // åˆ¤æ–­æ˜¯å¦ä¸ºç©ºé˜Ÿåˆ— this.isEmpty = function () &#123; return this.data.length === 0; &#125;; // è·å–é˜Ÿåˆ—çš„é•¿åº¦ this.size = function () &#123; return this.data.length; &#125;; // æ¸…ç©ºé˜Ÿåˆ— this.clear = function () &#123; this.data = []; &#125;; // æ‰“å°é˜Ÿåˆ—é‡Œçš„å…ƒç´  this.print = function () &#123; const info = this.data.map((item) =&gt; `$&#123;item.priority&#125;: $&#123;item.element&#125;`); console.log(info.toString()); &#125;;&#125; å®ç°æœ€å¤§ä¼˜å…ˆé˜Ÿåˆ— 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455// MaxPriorityQueueç±»function MaxPriorityQueue() &#123; this.data = []; // å‘é˜Ÿåˆ—å°¾éƒ¨æ·»åŠ å…ƒç´  this.enqueue = function (element, priority) &#123; //è‹¥é˜Ÿåˆ—ä¸ºç©ºåˆ™ç›´æ¥å°†å…ƒç´ å…¥åˆ—ï¼Œå¦åˆ™éœ€è¦æ¯”è¾ƒè¯¥å…ƒç´ ä¸å…¶ä»–å…ƒç´ çš„ä¼˜å…ˆçº§ if (this.isEmpty()) &#123; this.data.push(&#123; element, priority &#125;); &#125; else &#123; let added = false; for (let i = 0, length = this.size(); i &lt; length; i++) &#123; if (priority &gt; this.data[i].priority) &#123; this.data.splice(i, 0, &#123; element, priority &#125;); added = true; break; &#125; &#125; if (!added) &#123; this.data.push(&#123; element, priority &#125;); &#125; &#125; &#125;; // ç§»é™¤é˜Ÿåˆ—çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œå¹¶è¿”å›è¢«ç§»é™¤çš„å…ƒç´  this.dequeue = function () &#123; return this.data.shift(); &#125;; // è¿”å›é˜Ÿåˆ—çš„ç¬¬ä¸€ä¸ªå…ƒç´  this.front = function () &#123; return this.data[0]; &#125;; // åˆ¤æ–­æ˜¯å¦ä¸ºç©ºé˜Ÿåˆ— this.isEmpty = function () &#123; return this.data.length === 0; &#125;; // è·å–é˜Ÿåˆ—çš„é•¿åº¦ this.size = function () &#123; return this.data.length; &#125;; // æ¸…ç©ºé˜Ÿåˆ— this.clear = function () &#123; this.data = []; &#125;; // æ‰“å°é˜Ÿåˆ—é‡Œçš„å…ƒç´  this.print = function () &#123; const info = this.data.map((item) =&gt; `$&#123;item.priority&#125;: $&#123;item.element&#125;`); console.log(info.toString()); &#125;;&#125; å¾ªç¯é˜Ÿåˆ—å¾ªç¯é˜Ÿåˆ—çš„ä¸€ä¸ªä¾‹å­å°±æ˜¯å‡»é¼“ä¼ èŠ±æ¸¸æˆï¼ˆHot Potatoï¼‰ã€‚åœ¨è¿™ä¸ªæ¸¸æˆä¸­ï¼Œå­©å­ä»¬å›´åŸä¸€ä¸ªåœ†åœˆï¼Œå‡»é¼“çš„æ—¶å€™æŠŠèŠ±å°½å¿«çš„ä¼ é€’ç»™æ—è¾¹çš„äººã€‚æŸä¸€æ—¶åˆ»å‡»é¼“åœæ­¢ï¼Œè¿™æ—¶èŠ±åœ¨è°çš„æ‰‹é‡Œï¼Œè°å°±é€€å‡ºåœ†åœˆç›´åˆ°æ¸¸æˆç»“æŸã€‚é‡å¤è¿™ä¸ªè¿‡ç¨‹ï¼Œç›´åˆ°æœ€åä¸€ä¸ªå­©å­ä¸ºæœ€åèƒœåˆ©è€…ã€‚ åŸºäºä¸Šé¢çš„æ™®é€šé˜Ÿåˆ—ï¼Œå®ç°è¿™ä¸ªæ¸¸æˆï¼š 1234567891011121314151617181920212223242526272829303132333435// å®ç°å‡»é¼“ä¼ èŠ±function hotPotato(nameList, num) &#123; var queue = new Queue(); for (var i = 0; i &lt; nameList.length; i++) &#123; queue.enqueue(nameList[i]); &#125; var eliminated = \"\"; while (queue.size() &gt; 1) &#123; // å¾ªç¯ num æ¬¡ï¼Œé˜Ÿé¦–å‡ºæ¥å»åˆ°é˜Ÿå°¾ for (var i = 0; i &lt; num; i++) &#123; queue.enqueue(queue.dequeue()); &#125; // å¾ªç¯ num æ¬¡è¿‡åï¼Œç§»é™¤å½“å‰é˜Ÿé¦–çš„å…ƒç´  eliminated = queue.dequeue(); console.log(`$&#123;eliminated&#125; åœ¨å‡»é¼“ä¼ èŠ±ä¸­è¢«æ·˜æ±°ï¼`); &#125; // æœ€ååªå‰©ä¸€ä¸ªå…ƒç´  return queue.dequeue();&#125;// æµ‹è¯•var nameList = [\"å¼ ä¸‰\", \"æå››\", \"ç‹äº”\", \"é©¬å…­\", \"ç‰›ä¸ƒ\"];var winner = hotPotato(nameList, 5);console.log(`æœ€åçš„èƒœåˆ©è€…æ˜¯ï¼š$&#123;winner&#125;`);// =&gt; ç‰›ä¸ƒ åœ¨å‡»é¼“ä¼ èŠ±ä¸­è¢«æ·˜æ±°ï¼// =&gt; å¼ ä¸‰ åœ¨å‡»é¼“ä¼ èŠ±ä¸­è¢«æ·˜æ±°ï¼// =&gt; ç‹äº” åœ¨å‡»é¼“ä¼ èŠ±ä¸­è¢«æ·˜æ±°ï¼// =&gt; é©¬å…­ åœ¨å‡»é¼“ä¼ èŠ±ä¸­è¢«æ·˜æ±°ï¼// =&gt; æœ€åçš„èƒœåˆ©è€…æ˜¯ï¼šæå›› é“¾è¡¨ å®šä¹‰é“¾è¡¨å­˜å‚¨æœ‰åºçš„å…ƒç´ é›†åˆï¼Œä½†ä¸åŒäºæ•°ç»„ï¼Œé“¾è¡¨ä¸­çš„å…ƒç´ åœ¨å†…å­˜ä¸­å¹¶ä¸æ˜¯è¿ç»­æ”¾ç½®çš„ï¼Œå®ƒæ˜¯é€šè¿‡ æŒ‡é’ˆ å°† é›¶æ•£çš„å†…å­˜å— ä¸²è¿èµ·æ¥çš„ã€‚ æ¯ä¸ªå…ƒç´ ç”±ä¸€ä¸ªå­˜å‚¨å…ƒç´ æœ¬èº«çš„ èŠ‚ç‚¹å’Œä¸€ä¸ªæŒ‡å‘ä¸‹ä¸€ä¸ªå…ƒç´ çš„ æŒ‡é’ˆç»„æˆã€‚ ç®€å•çš„é“¾æ¥ç»“æ„å›¾: ä¸Šå›¾ä¸­ï¼Œdata ä¸­ä¿å­˜ç€æ•°æ®ï¼Œnext ä¿å­˜ç€ä¸‹ä¸€ä¸ªé“¾è¡¨çš„æŒ‡é’ˆã€‚ ä¸Šå›¾ä¸­ï¼Œæˆ‘ä»¬è¯´ data2 è·Ÿåœ¨ data1 åé¢ï¼Œè€Œä¸æ˜¯è¯´ data2 æ˜¯é“¾è¡¨ä¸­çš„ç¬¬äºŒä¸ªå…ƒç´ ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæˆ‘ä»¬å°†é“¾è¡¨çš„å°¾å…ƒç´ æŒ‡å‘äº† null èŠ‚ç‚¹ï¼Œè¡¨ç¤ºé“¾æ¥ç»“æŸçš„ä½ç½®ã€‚ ç‰¹ç‚¹ ä½æ•ˆçš„è®¿é—®ï¼š é“¾è¡¨æ˜¯é€šè¿‡æŒ‡é’ˆå°†é›¶æ•£çš„å†…å­˜å—ä¸²è¿èµ·æ¥çš„ã€‚ æ‰€ä»¥é“¾è¡¨ä¸æ”¯æŒ éšæœºè®¿é—®ï¼Œå¦‚æœè¦æ‰¾ç‰¹å®šçš„é¡¹ï¼Œåªèƒ½ä»å¤´å¼€å§‹éå†ï¼Œç›´åˆ°æ‰¾åˆ°æŸä¸ªé¡¹ã€‚ æ‰€ä»¥è®¿é—®çš„æ—¶é—´å¤æ‚åº¦ä¸º O(n)ã€‚ é«˜æ•ˆçš„æ’å…¥å’Œåˆ é™¤ã€‚ é“¾è¡¨ä¸­æ’å…¥æˆ–è€…åˆ é™¤ä¸€ä¸ªæ•°æ®ï¼Œæˆ‘ä»¬å¹¶ä¸éœ€è¦ä¸ºäº†ä¿æŒå†…å­˜çš„è¿ç»­æ€§è€Œæ¬ç§»èŠ‚ç‚¹ï¼Œå› ä¸ºé“¾è¡¨çš„å­˜å‚¨ç©ºé—´æœ¬èº«å°±ä¸æ˜¯è¿ç»­çš„ï¼Œåªéœ€è¦è€ƒè™‘ç›¸é‚»èŠ‚ç‚¹çš„æŒ‡é’ˆæ”¹å˜ã€‚ æ‰€ä»¥ï¼Œåœ¨é“¾è¡¨ä¸­æ’å…¥å’Œåˆ é™¤ä¸€ä¸ªæ•°æ®æ˜¯éå¸¸å¿«é€Ÿçš„ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º O(1)ã€‚ åˆ†ç±»å¸¸è§åˆ—è¡¨å¯ä»¥åˆ†ä¸ºä¸‰ç±»ï¼š å•å‘é“¾è¡¨ åŒå‘é“¾è¡¨ å¾ªç¯é“¾è¡¨ å•å‘é“¾è¡¨ å®šä¹‰ ç”±äºé“¾è¡¨çš„èµ·å§‹ç‚¹çš„ç¡®å®šæ¯”è¾ƒéº»çƒ¦ï¼Œå› æ­¤å¾ˆå¤šé“¾è¡¨çš„å®ç°éƒ½ä¼šåœ¨é“¾è¡¨çš„æœ€å‰é¢æ·»åŠ ä¸€ä¸ªç‰¹æ®Šçš„èŠ‚ç‚¹ï¼Œç§°ä¸º å¤´èŠ‚ç‚¹ï¼Œè¡¨ç¤ºé“¾è¡¨çš„å¤´éƒ¨ã€‚ ç‰¹ç‚¹ åªèƒ½å•å‘éå†ï¼Œæ“ä½œçµæ´»æ€§ä¸é«˜ å®ç° éœ€è¦å®ç°çš„ä»¥ä¸‹å¸¸ç”¨æ“ä½œï¼š æ–¹æ³•å æè¿° append(element) å°¾éƒ¨æ·»åŠ å…ƒç´ ã€‚ insert(position, element) ç‰¹å®šä½ç½®æ’å…¥ä¸€ä¸ªæ–°çš„é¡¹ã€‚ removeAt(position) ç‰¹å®šä½ç½®ç§»é™¤ä¸€é¡¹ã€‚ remove(element) ç§»é™¤ä¸€é¡¹ã€‚ indexOf(element) è¿”å›å…ƒç´ åœ¨é“¾è¡¨ä¸­çš„ç´¢å¼•ã€‚å¦‚æœé“¾è¡¨ä¸­æ²¡æœ‰è¯¥å…ƒç´ åˆ™è¿”å› -1ã€‚ isEmpty() å¦‚æœé“¾è¡¨ä¸­ä¸åŒ…å«ä»»ä½•å…ƒç´ ï¼Œè¿”å› trueï¼Œå¦‚æœé“¾è¡¨é•¿åº¦å¤§äº 0ï¼Œè¿”å› falseã€‚ size() è¿”å›é“¾è¡¨åŒ…å«çš„å…ƒç´ ä¸ªæ•°ï¼Œä¸æ•°ç»„çš„ length å±æ€§ç±»ä¼¼ã€‚ getHead() è¿”å›é“¾è¡¨çš„ç¬¬ä¸€ä¸ªå…ƒç´ ã€‚ toString() ç”±äºé“¾è¡¨ä½¿ç”¨äº† Node ç±»ï¼Œå°±éœ€è¦é‡å†™ç»§æ‰¿è‡ª JavaScript å¯¹è±¡é»˜è®¤çš„ toString() æ–¹æ³•ï¼Œè®©å…¶åªè¾“å‡ºå…ƒç´ çš„å€¼ã€‚ print() æ‰“å°é“¾è¡¨çš„æ‰€æœ‰å…ƒç´ ã€‚ list() è·å–æ•´ä¸ªé“¾è¡¨ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157// å•é“¾è¡¨function SinglyLinkedList() &#123; // èŠ‚ç‚¹ function Node(element) &#123; this.element = element; // å½“å‰èŠ‚ç‚¹çš„å…ƒç´  this.next = null; // ä¸‹ä¸€ä¸ªèŠ‚ç‚¹æŒ‡é’ˆ &#125; let length = 0; // é“¾è¡¨çš„é•¿åº¦ let head = null; // é“¾è¡¨çš„å¤´èŠ‚ç‚¹ // å‘é“¾è¡¨å°¾éƒ¨æ·»åŠ ä¸€ä¸ªæ–°çš„èŠ‚ç‚¹ this.append = function (element) &#123; let node = new Node(element); // åˆ¤æ–­æ˜¯å¦ä¸ºç©ºé“¾è¡¨ if (head === null) &#123; // æ˜¯ç©ºé“¾è¡¨ï¼Œå°±æŠŠå½“å‰èŠ‚ç‚¹ä½œä¸ºå¤´éƒ¨èŠ‚ç‚¹ head = node; &#125; else &#123; let currentNode = head; // ä» head å¼€å§‹ä¸€ç›´æ‰¾åˆ°æœ€åä¸€ä¸ª node while (currentNode.next) &#123; // åé¢è¿˜æœ‰ node currentNode = currentNode.next; &#125; // æŠŠæœ€åä¸€ä¸ªèŠ‚ç‚¹çš„ next æŒ‡é’ˆæŒ‡å‘æ–°çš„èŠ‚ç‚¹ currentNode.next = node; &#125; // é“¾è¡¨çš„é•¿åº¦åŠ  1 length++; &#125;; // å‘é“¾è¡¨ç‰¹å®šä½ç½®æ’å…¥ä¸€ä¸ªæ–°èŠ‚ç‚¹ this.insert = function (position, element) &#123; if (position &lt; 0 || position &gt; length) &#123; // è¶Šç•Œ return false; &#125; else &#123; let node = new Node(element); let index = 0; let currentNode = head; let previousNode; // åœ¨æœ€å‰æ’å…¥èŠ‚ç‚¹ if (position === 0) &#123; node.next = currentNode; head = node; &#125; else &#123; // å¾ªç¯æ‰¾åˆ°ä½ç½® while (index &lt; position) &#123; index++; previousNode = currentNode; currentNode = currentNode.next; &#125; // æŠŠå‰ä¸€ä¸ªèŠ‚ç‚¹çš„æŒ‡é’ˆæŒ‡å‘æ–°èŠ‚ç‚¹ï¼Œæ–°èŠ‚ç‚¹çš„æŒ‡é’ˆæŒ‡å‘å½“å‰èŠ‚ç‚¹ï¼Œä¿æŒè¿æ¥æ€§ previousNode.next = node; node.next = currentNode; &#125; length++; return true; &#125; &#125;; // ä»é“¾è¡¨çš„ç‰¹å®šä½ç½®ç§»é™¤ä¸€é¡¹ this.removeAt = function (position) &#123; if ((position &lt; 0 || position &gt;= length) || length === 0) &#123; // è¶Šç•Œ return false; &#125; else &#123; let currentNode = head; let index = 0; let previousNode; if (position === 0) &#123; head = currentNode.next; &#125; else &#123; // å¾ªç¯æ‰¾åˆ°ä½ç½® while (index &lt; position) &#123; index++; previousNode = currentNode; currentNode = currentNode.next; &#125; // æŠŠå½“å‰èŠ‚ç‚¹çš„ next æŒ‡é’ˆ æŒ‡å‘ å½“å‰èŠ‚ç‚¹çš„ next æŒ‡é’ˆï¼Œå³æ˜¯ åˆ é™¤äº†å½“å‰èŠ‚ç‚¹ previousNode.next = currentNode.next; &#125; length--; return true; &#125; &#125;; // ä»é“¾è¡¨ä¸­ç§»é™¤æŒ‡å®šé¡¹ this.remove = function (element) &#123; let index = this.indexOf(element); return this.removeAt(index); &#125;; // è¿”å›å…ƒç´ åœ¨é“¾è¡¨çš„ç´¢å¼•ï¼Œå¦‚æœé“¾è¡¨ä¸­æ²¡æœ‰è¯¥å…ƒç´ åˆ™è¿”å› -1 this.indexOf = function (element) &#123; let currentNode = head; let index = 0; while (currentNode) &#123; if (currentNode.element === element) &#123; return index; &#125; index++; currentNode = currentNode.next; &#125; return -1; &#125;; // å¦‚æœé“¾è¡¨ä¸­ä¸åŒ…å«ä»»ä½•å…ƒç´ ï¼Œè¿”å› trueï¼Œå¦‚æœé“¾è¡¨é•¿åº¦å¤§äº 0ï¼Œè¿”å› false this.isEmpty = function () &#123; return length === 0; &#125;; // è¿”å›é“¾è¡¨åŒ…å«çš„å…ƒç´ ä¸ªæ•°ï¼Œä¸æ•°ç»„çš„ length å±æ€§ç±»ä¼¼ this.size = function () &#123; return length; &#125;; // è·å–é“¾è¡¨å¤´éƒ¨å…ƒç´  this.getHead = function () &#123; return head.element; &#125;; // ç”±äºé“¾è¡¨ä½¿ç”¨äº† Node ç±»ï¼Œå°±éœ€è¦é‡å†™ç»§æ‰¿è‡ª JavaScript å¯¹è±¡é»˜è®¤çš„ toString() æ–¹æ³•ï¼Œè®©å…¶åªè¾“å‡ºå…ƒç´ çš„å€¼ this.toString = function (cur) &#123; let currentNode = cur || head; let string = \"\"; while (currentNode) &#123; string += \",\" + currentNode.element; currentNode = currentNode.next; &#125; return string.slice(1); &#125;; // æ‰“å°é“¾è¡¨æ•°æ® this.print = function (cur) &#123; console.log(this.toString(cur)); &#125;; // è·å–æ•´ä¸ªé“¾è¡¨ this.list = function () &#123; console.log(\"head: \", head); return head; &#125;;&#125; åŒå‘é“¾è¡¨ä¸Šé¢è¯´çš„å•å‘é“¾è¡¨åªæœ‰ä¸€ä¸ªæ–¹å‘ï¼ŒèŠ‚ç‚¹åªæœ‰ä¸€ä¸ªåç»§æŒ‡é’ˆ next æŒ‡å‘åé¢çš„èŠ‚ç‚¹ã€‚ æœ€ä¸ºå¯¹æ¯”ï¼ŒåŒå‘é“¾è¡¨å°±æœ‰ä¸¤ä¸ªæ–¹å‘çš„æŒ‡é’ˆï¼Œæ¯ä¸ªèŠ‚ç‚¹ä¸æ­¢æœ‰ä¸€ä¸ªåç»§æŒ‡é’ˆ next æŒ‡å‘åé¢çš„èŠ‚ç‚¹ï¼Œè¿˜æœ‰ä¸€ä¸ªå‰é©±æŒ‡é’ˆ prev æŒ‡å‘å‰é¢çš„èŠ‚ç‚¹ã€‚ ä¸å•å‘åˆ—è¡¨æ¯”è¾ƒ å†…å­˜ç©ºé—´æ¯”å•å‘é“¾è¡¨å¤§ï¼ŒåŒå‘é“¾è¡¨éœ€è¦é¢å¤–çš„ä¸¤ä¸ªç©ºé—´æ¥å­˜å‚¨åç»§ç»“ç‚¹å’Œå‰é©±ç»“ç‚¹çš„åœ°å€ å¯ä»¥åŒå‘æ“ä½œï¼Œçµæ´»æ€§æ›´é«˜ï¼ŒæŸ¥æ‰¾/æ’å…¥/åˆ é™¤æ›´é«˜æ•ˆ å®ç°åœ¨å®ç°äº†å•å‘é“¾è¡¨åï¼ŒåŒå‘é“¾è¡¨å°±æ²¡é‚£ä¹ˆéš¾äº†ï¼Œç›´æ¥ä¸Šä»£ç ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216// åˆ›å»ºåŒå‘é“¾è¡¨ DoublyLinkedList ç±»function DoublyLinkedList() &#123; function Node(element) &#123; this.element = element; //å½“å‰èŠ‚ç‚¹çš„å…ƒç´  this.next = null; //ä¸‹ä¸€ä¸ªèŠ‚ç‚¹æŒ‡é’ˆ this.previous = null; //ä¸Šä¸€ä¸ªèŠ‚ç‚¹æŒ‡é’ˆ &#125; let length = 0; // é“¾è¡¨é•¿åº¦ let head = null; // é“¾è¡¨å¤´éƒ¨ let tail = null; // é“¾è¡¨å°¾éƒ¨ // å‘é“¾è¡¨å°¾éƒ¨æ·»åŠ ä¸€ä¸ªæ–°çš„é¡¹ this.append = function (element) &#123; let node = new Node(element); let currentNode = tail; // åˆ¤æ–­æ˜¯å¦ä¸ºç©ºé“¾è¡¨ if (currentNode === null) &#123; // ç©ºé“¾è¡¨ head = node; tail = node; &#125; else &#123; currentNode.next = node; node.previous = currentNode; tail = node; &#125; length++; &#125;; // å‘é“¾è¡¨ç‰¹å®šä½ç½®æ’å…¥ä¸€ä¸ªæ–°çš„é¡¹ this.insert = function (position, element) &#123; if (position &lt; 0 || position &gt; length) &#123; // è¶Šç•Œ return false; &#125; else &#123; let node = new Node(element); let index = 0; let currentNode = head; let previousNode; if (position === 0) &#123; //åœ¨å¤´éƒ¨æ·»åŠ  if (!head) &#123; head = node; tail = node; &#125; else &#123; node.next = currentNode; currentNode.previous = node; head = node; &#125; &#125; else if (position === length) &#123; //åœ¨æœ«å°¾æ·»åŠ  this.append(element); return true; &#125; else if (length - 1 - position &gt; position) &#123; //positionç¦»headæ›´è¿‘ while (index &lt; position) &#123; index++; previousNode = currentNode; currentNode = currentNode.next; &#125; previousNode.next = node; node.next = currentNode; node.previous = previousNode; currentNode.previous = node; &#125; else &#123; //positionç¦»tailæ›´è¿‘ï¼Œåˆ™ä»tailå¼€å§‹å‘å‰æŸ¥æ‰¾ index = length - 1; currentNode = tail; while (index &gt; position) &#123; index--; currentNode = currentNode.previous; previousNode = currentNode.previous; &#125; previousNode.next = node; node.next = currentNode; node.previous = previousNode; currentNode.previous = node; &#125; length++; return true; &#125; &#125;; // ä»é“¾è¡¨çš„ç‰¹å®šä½ç½®ç§»é™¤ä¸€é¡¹ this.removeAt = function (position) &#123; if (position &lt; 0 || position &gt;= length || length === 0) &#123; // è¶Šç•Œ return false; &#125; else &#123; let currentNode = head; let index = 0; let previousNode; if (position === 0) &#123; // ç§»é™¤ç¬¬ä¸€é¡¹ if (length === 1) &#123; head = null; tail = null; &#125; else &#123; head = currentNode.next; head.previous = null; &#125; &#125; else if (position === length - 1) &#123; // ç§»é™¤æœ€åä¸€é¡¹ if (length === 1) &#123; head = null; tail = null; &#125; else &#123; currentNode = tail; tail = currentNode.previous; tail.next = null; &#125; &#125; else if (length - 1 - position &gt; position) &#123; //positionç¦»headæ›´è¿‘ while (index &lt; position) &#123; index++; previousNode = currentNode; currentNode = currentNode.next; &#125; previousNode.next = currentNode.next; currentNode.next.previous = previousNode; &#125; else &#123; //positionç¦»tailæ›´è¿‘ï¼Œåˆ™ä»tailå¼€å§‹å‘å‰æŸ¥æ‰¾ index = length - 1; currentNode = tail; while (index &gt; position) &#123; index--; currentNode = currentNode.previous; previousNode = currentNode.previous; &#125; previousNode.next = currentNode.next; currentNode.next.previous = previousNode; &#125; length--; return true; &#125; &#125;; // ä»é“¾è¡¨ä¸­ç§»é™¤æŒ‡å®šé¡¹ this.remove = function (element) &#123; let index = this.indexOf(element); return this.removeAt(index); &#125;; // è¿”å›å…ƒç´ åœ¨é“¾è¡¨çš„ç´¢å¼•ï¼Œå¦‚æœé“¾è¡¨ä¸­æ²¡æœ‰è¯¥å…ƒç´ åˆ™è¿”å› -1 this.indexOf = function (element) &#123; let currentNode = head; let index = 0; let currentNode2 = tail; let index2 = length - 1; while (currentNode) &#123; if (currentNode.element === element) &#123; return index; &#125; if (currentNode2.element === element) &#123; return index2; &#125; index++; currentNode = currentNode.next; index2--; currentNode2 = currentNode2.previous; &#125; return -1; &#125;; // å¦‚æœé“¾è¡¨ä¸­ä¸åŒ…å«ä»»ä½•å…ƒç´ ï¼Œè¿”å› true ï¼Œå¦‚æœé“¾è¡¨é•¿åº¦å¤§äº 0 ï¼Œè¿”å› false this.isEmpty = function () &#123; return length == 0; &#125;; // è¿”å›é“¾è¡¨åŒ…å«çš„å…ƒç´ ä¸ªæ•°ï¼Œä¸æ•°ç»„çš„ length å±æ€§ç±»ä¼¼ this.size = function () &#123; return length; &#125;; // è·å–é“¾è¡¨å¤´éƒ¨å…ƒç´  this.getHead = function () &#123; return head.element; &#125;; // ç”±äºé“¾è¡¨ä½¿ç”¨äº† Node ç±»ï¼Œå°±éœ€è¦é‡å†™ç»§æ‰¿è‡ª JavaScript å¯¹è±¡é»˜è®¤çš„ toString() æ–¹æ³•ï¼Œè®©å…¶åªè¾“å‡ºå…ƒç´ çš„å€¼ this.toString = function () &#123; let currentNode = head; let string = \"\"; while (currentNode) &#123; string += \",\" + currentNode.element; currentNode = currentNode.next; &#125; return string.slice(1); &#125;; this.print = function () &#123; console.log(this.toString()); &#125;; // è·å–æ•´ä¸ªé“¾è¡¨ this.list = function () &#123; console.log(\"head: \", head); return head; &#125;;&#125; å•å‘é“¾è¡¨ VS åŒå‘é“¾è¡¨ æ€§èƒ½å¯¹æ¯”1234567891011121314151617let singlyList = new SinglyLinkedList();console.time(\"singlyList-time\");for (let i = 0; i &lt; 100000; i++) &#123; singlyList.insert(i, \"Tom\" + i);&#125;console.timeEnd(\"singlyList-time\");let doublyList = new DoublyLinkedList();console.time(\"doublyLinked-time\");for (let i = 0; i &lt; 100000; i++) &#123; doublyList.insert(i, \"Tom\" + i);&#125;console.timeEnd(\"doublyList-time\");// &gt;&gt; singlyList-time: 34532.815ms// &gt;&gt; doublyList-time: 64.111ms ç»“è®ºï¼š åŒæ ·æ’å…¥100000æ¡æ•°æ®ï¼ŒåŒå‘é“¾è¡¨çš„é€Ÿåº¦ä¼˜åŠ¿æ˜æ˜¾ï¼› å¾ªç¯é“¾è¡¨å¾ªç¯é“¾è¡¨æ˜¯ä¸€ç§ç‰¹æ®Šçš„å•é“¾è¡¨ã€‚ å¾ªç¯é“¾è¡¨å’Œå•é“¾è¡¨ç›¸ä¼¼ï¼ŒèŠ‚ç‚¹ç±»å‹éƒ½æ˜¯ä¸€æ ·ã€‚ å”¯ä¸€çš„åŒºåˆ«æ˜¯ï¼Œå¾ªç¯é“¾è¡¨çš„å°¾èŠ‚ç‚¹æŒ‡å‘äº†å¤´èŠ‚ç‚¹ï¼Œå½¢æˆäº†ä¸€ä¸ªå¾ªç¯ã€‚å¦‚ä¸‹å›¾æ‰€ç¤º: å®ç°åŸºäºå•å‘é“¾è¡¨å®ç°å¾ªç¯é“¾è¡¨ï¼Œä¸»è¦åŒºåˆ«åœ¨äºè¦å°†å¾ªç¯é“¾è¡¨çš„å°¾èŠ‚ç‚¹æŒ‡å‘å¤´èŠ‚ç‚¹ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170// å¾ªç¯é“¾è¡¨function CircularLinkedList() &#123; // èŠ‚ç‚¹ function Node(element) &#123; this.element = element; // å½“å‰èŠ‚ç‚¹çš„å…ƒç´  this.next = null; // ä¸‹ä¸€ä¸ªèŠ‚ç‚¹æŒ‡é’ˆ &#125; let length = 0; // é“¾è¡¨çš„é•¿åº¦ let head = null; // é“¾è¡¨çš„å¤´èŠ‚ç‚¹ let tail = null; // é“¾è¡¨çš„å°¾èŠ‚ç‚¹ // å‘é“¾è¡¨å°¾éƒ¨æ·»åŠ ä¸€ä¸ªæ–°çš„èŠ‚ç‚¹ this.append = function (element) &#123; let node = new Node(element); // åˆ¤æ–­æ˜¯å¦ä¸ºç©ºé“¾è¡¨ if (head === null) &#123; // æ˜¯ç©ºé“¾è¡¨ï¼Œå°±æŠŠå½“å‰èŠ‚ç‚¹ä½œä¸ºå¤´éƒ¨èŠ‚ç‚¹ head = node; head.next = head; tail = head;//åŒºåˆ«äºå•å‘é“¾è¡¨çš„ç‚¹ &#125; else &#123; let currentNode = head; // ä» head å¼€å§‹ä¸€ç›´æ‰¾åˆ°æœ€åä¸€ä¸ª node while (currentNode.next !== head) &#123; // åé¢è¿˜æœ‰ node currentNode = currentNode.next; &#125; // æŠŠæœ€åä¸€ä¸ªèŠ‚ç‚¹çš„ next æŒ‡é’ˆæŒ‡å‘æ–°çš„èŠ‚ç‚¹ currentNode.next = node; // æŠŠæ–°æ’å…¥çš„èŠ‚ç‚¹çš„nextæŒ‡å‘head node.next = head; tail = node; // æŠŠæ–°åŠ å…¥çš„èŠ‚ç‚¹è®¾ä¸ºå°¾èŠ‚ç‚¹ &#125; // é“¾è¡¨çš„é•¿åº¦åŠ  1 length++; &#125;; // å‘é“¾è¡¨ç‰¹å®šä½ç½®æ’å…¥ä¸€ä¸ªæ–°èŠ‚ç‚¹ this.insert = function (position, element) &#123; if (position &lt; 0 || position &gt; length) &#123; // è¶Šç•Œ return false; &#125; else if (length === 0) &#123; //ç©ºé“¾è¡¨æ—¶ä½¿ç”¨appendæ’å…¥ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ this.append(element); &#125; else &#123; let node = new Node(element); let index = 0; let currentNode = head; let previousNode; // åœ¨æœ€å‰æ’å…¥èŠ‚ç‚¹ if (position === 0) &#123; node.next = head; head = node; tail.next = head; //åŒºåˆ«äºå•å‘é“¾è¡¨çš„ç‚¹ &#125; else &#123; // å¾ªç¯æ‰¾åˆ°ä½ç½® while (index &lt; position) &#123; index++; previousNode = currentNode; currentNode = currentNode.next; &#125; // æŠŠå‰ä¸€ä¸ªèŠ‚ç‚¹çš„æŒ‡é’ˆæŒ‡å‘æ–°èŠ‚ç‚¹ï¼Œæ–°èŠ‚ç‚¹çš„æŒ‡é’ˆæŒ‡å‘å½“å‰èŠ‚ç‚¹ï¼Œä¿æŒè¿æ¥æ€§ previousNode.next = node; node.next = currentNode; &#125; length++; return true; &#125; &#125;; // ä»é“¾è¡¨çš„ç‰¹å®šä½ç½®ç§»é™¤ä¸€é¡¹ this.removeAt = function (position) &#123; if (position &lt; 0 || position &gt;= length || length === 0) &#123; // è¶Šç•Œ return false; &#125; else &#123; let currentNode = head; let index = 0; let previousNode; if (position === 0) &#123; head = head.next; tail.next = head; //åŒºåˆ«äºå•å‘é“¾è¡¨çš„ç‚¹ &#125; else &#123; // å¾ªç¯æ‰¾åˆ°ä½ç½® while (index &lt; position) &#123; index++; previousNode = currentNode; currentNode = currentNode.next; &#125; // æŠŠå½“å‰èŠ‚ç‚¹çš„ next æŒ‡é’ˆ æŒ‡å‘ å½“å‰èŠ‚ç‚¹çš„ next æŒ‡é’ˆï¼Œå³æ˜¯ åˆ é™¤äº†å½“å‰èŠ‚ç‚¹ previousNode.next = currentNode.next; &#125; length--; return true; &#125; &#125;; // ä»é“¾è¡¨ä¸­ç§»é™¤æŒ‡å®šé¡¹ this.remove = function (element) &#123; let index = this.indexOf(element); return this.removeAt(index); &#125;; // è¿”å›å…ƒç´ åœ¨é“¾è¡¨çš„ç´¢å¼•ï¼Œå¦‚æœé“¾è¡¨ä¸­æ²¡æœ‰è¯¥å…ƒç´ åˆ™è¿”å› -1 this.indexOf = function (element) &#123; let currentNode = head; let index = 0; while (currentNode) &#123; if (currentNode.element === element) &#123; return index; &#125; index++; currentNode = currentNode.next; &#125; return -1; &#125;; // å¦‚æœé“¾è¡¨ä¸­ä¸åŒ…å«ä»»ä½•å…ƒç´ ï¼Œè¿”å› trueï¼Œå¦‚æœé“¾è¡¨é•¿åº¦å¤§äº 0ï¼Œè¿”å› false this.isEmpty = function () &#123; return length === 0; &#125;; // è¿”å›é“¾è¡¨åŒ…å«çš„å…ƒç´ ä¸ªæ•°ï¼Œä¸æ•°ç»„çš„ length å±æ€§ç±»ä¼¼ this.size = function () &#123; return length; &#125;; // è·å–é“¾è¡¨å¤´éƒ¨å…ƒç´  this.getHead = function () &#123; return head.element; &#125;; // ç”±äºé“¾è¡¨ä½¿ç”¨äº† Node ç±»ï¼Œå°±éœ€è¦é‡å†™ç»§æ‰¿è‡ª JavaScript å¯¹è±¡é»˜è®¤çš„ toString() æ–¹æ³•ï¼Œè®©å…¶åªè¾“å‡ºå…ƒç´ çš„å€¼ this.toString = function () &#123; let currentNode = head; let string = \"\"; let index = 0; while (currentNode &amp;&amp; index &lt; length) &#123; string += \",\" + currentNode.element; currentNode = currentNode.next; index++; &#125; return string.slice(1); &#125;; // æ‰“å°é“¾è¡¨æ•°æ® this.print = function (cur) &#123; console.log(this.toString(cur)); &#125;; // è·å–æ•´ä¸ªé“¾è¡¨ this.list = function () &#123; console.log(\"head: \", head); return head; &#125;;&#125;","categories":[{"name":"æ•°æ®ç»“æ„ä¸ç®—æ³•","slug":"æ•°æ®ç»“æ„ä¸ç®—æ³•","permalink":"http://blog.kobingo.xyz/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/"}],"tags":[{"name":"æ•°æ®ç»“æ„ä¸ç®—æ³•","slug":"æ•°æ®ç»“æ„ä¸ç®—æ³•","permalink":"http://blog.kobingo.xyz/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/"}]},{"title":"Nodejsè¯»å–æ§åˆ¶å°è¾“å…¥(stdin)çš„æ–¹æ³•æ€»ç»“","slug":"node-node-stdin","date":"2019-09-23T14:35:46.000Z","updated":"2021-01-19T06:41:41.222Z","comments":true,"path":"node-node-stdin/","link":"","permalink":"http://blog.kobingo.xyz/node-node-stdin/","excerpt":"åœ¨ç”¨ Nodejs å†™ CLI åº”ç”¨æˆ–è€…åšOJçš„æ—¶å€™ç»å¸¸ä¼šé‡åˆ°è¦ä» stdin è¯»å–è¾“å…¥çš„æƒ…å†µï¼Œè¿™é‡Œæ€»ç»“äº†å‡ ç§ä¸ä¾èµ–ç¬¬ä¸‰æ–¹åº“æ¥æŒ‰è¡Œè¯»å–è¾“å…¥çš„æ–¹æ³•ã€‚","text":"åœ¨ç”¨ Nodejs å†™ CLI åº”ç”¨æˆ–è€…åšOJçš„æ—¶å€™ç»å¸¸ä¼šé‡åˆ°è¦ä» stdin è¯»å–è¾“å…¥çš„æƒ…å†µï¼Œè¿™é‡Œæ€»ç»“äº†å‡ ç§ä¸ä¾èµ–ç¬¬ä¸‰æ–¹åº“æ¥æŒ‰è¡Œè¯»å–è¾“å…¥çš„æ–¹æ³•ã€‚ ReadlineåŸºç¡€ä½¿ç”¨ ä¼˜ç‚¹ï¼šç®€æ´æ–¹ä¾¿ï¼Œå¹³å°æ— å…³ã€‚å¯ç”¨äºç¼–å†™ REPL åº”ç”¨ã€‚ ç¼ºç‚¹ï¼šæŸäº› OJ çš„ node ç‰ˆæœ¬å¯èƒ½ä¸æ”¯æŒreadlineï¼Œå¯¹æ­¤è¯·å‚è€ƒOJä¸“ç”¨çš„æ–¹æ³•ã€‚ 123456789require(\"readline\") .createInterface(&#123; input: process.stdin, output: process.stdout, &#125;) .on(\"line\", function (line) &#123; console.log(\"the input is: \", line.trim()); this.close(); &#125;); å®ç°äº’åŠ¨é—®ç­” ä¼˜ç‚¹ï¼šä¾¿äºå¼•å¯¼ç”¨æˆ·æ­£ç¡®è¾“å…¥ã€‚ 1234567891011121314151617181920212223242526const rl = require(\"readline\").createInterface(&#123; input: process.stdin, output: process.stdout,&#125;);const wait = (ms) =&gt; new Promise((resolve) =&gt; setTimeout(resolve, ms));const question = (query) =&gt; new Promise((resolve) =&gt; rl.question(query, (answer) =&gt; resolve(answer)));(async () =&gt; &#123; let answer = await question(\"ä½ è§‰å¾—nodeæ˜¯æœ€æ£’çš„å—ï¼Ÿ \"); console.log(`æ‚¨çš„ç­”æ¡ˆæ˜¯ï¼š$&#123;answer&#125;`); answer = await question(\"async/awaitå¥½ä¸å¥½ç”¨å•Š \"); console.log(`æ‚¨çš„ç­”æ¡ˆæ˜¯ï¼š$&#123;answer&#125;`); answer = await question(\"ç­‰å¾…å¤šå°‘ç§’ç»§ç»­æ‰§è¡Œï¼Ÿ \"); rl.pause(); await wait(parseInt(answer) * 1000); rl.resume(); while ((await question(\"è¾“å…¥byeé€€å‡º \")).trim() !== \"bye\"); console.log(\"Good day.\"); rl.close();&#125;)(); process.stdin1234567891011121314151617181920process.stdin.setEncoding(\"utf8\");process.stdin.on(\"readable\", () =&gt; &#123; var chunk = process.stdin.read(); if (typeof chunk === \"string\") &#123; chunk = chunk.slice(0, -1); process.stdout.write(`stringLength:$&#123;chunk.length&#125;\\n`); &#125; if (chunk === \"\") &#123; process.stdin.emit(\"end\"); return; &#125; if (chunk !== null) &#123; process.stdout.write(`data: $&#123;chunk&#125;\\n`); &#125;&#125;);process.stdin.on(\"end\", () =&gt; &#123; process.stdout.write(\"end\");&#125;);","categories":[{"name":"node","slug":"node","permalink":"http://blog.kobingo.xyz/categories/node/"}],"tags":[{"name":"node","slug":"node","permalink":"http://blog.kobingo.xyz/tags/node/"},{"name":"stdin","slug":"stdin","permalink":"http://blog.kobingo.xyz/tags/stdin/"}]},{"title":"promiseé«˜çº§ç”¨æ³•","slug":"javascript-promiseé«˜çº§ç”¨æ³•","date":"2019-08-02T22:49:39.000Z","updated":"2021-01-19T06:41:41.222Z","comments":true,"path":"javascript-promiseé«˜çº§ç”¨æ³•/","link":"","permalink":"http://blog.kobingo.xyz/javascript-promise%E9%AB%98%E7%BA%A7%E7%94%A8%E6%B3%95/","excerpt":"å¯¹äºPromiseé«˜çº§ç”¨æ³•çš„ä½¿ç”¨æ±‡æ€»ï¼ŒåŒ…æ‹¬å¤šä¸ªpromiseä¸²è¡Œæ‰§è¡Œã€å¤šä¸ªpromiseå¹¶è¡Œæ‰§è¡Œä»¥åŠé™åˆ¶å¹¶è¡Œç­‰","text":"å®ç°å¤šä¸ªpromiseä¸²è¡Œæ‰§è¡Œåœ¨ async/await ä»¥å‰ Promise ä¸²è¡Œæ‰§è¡Œè¿˜æ˜¯æ¯”è¾ƒéº»çƒ¦çš„ï¼Œé™¤äº†ä¾èµ– asyncã€promise-fun ç­‰å·¥å…·åº“ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨ Array.prototype.reduce() è‡ªå·±å®ç°ä¸€ä¸ªç®€å•çš„ä¸²è¡ŒPromiseäº†ï¼š 123456789/** * æ ¸å¿ƒä»£ç  **/function runPromiseByQueue(myPromises) &#123; myPromises.reduce( (previousPromise, nextPromise) =&gt; previousPromise.then(() =&gt; nextPromise()), Promise.resolve() );&#125; å½“ä¸Šä¸€ä¸ª Promise å¼€å§‹æ‰§è¡Œï¼ˆpreviousPromise.thenï¼‰ï¼Œå½“å…¶æ‰§è¡Œå®Œæ¯•åå†è°ƒç”¨ä¸‹ä¸€ä¸ª Promiseï¼Œå¹¶ä½œä¸ºä¸€ä¸ªæ–° Promise è¿”å›ï¼Œä¸‹æ¬¡è¿­ä»£å°±ä¼šç»§ç»­è¿™ä¸ªå¾ªç¯ã€‚ ä¸¾ä¸ªä¾‹å­ï¼š 12345678910111213141516171819const createPromise = (time, id) =&gt; () =&gt; new Promise((solve) =&gt; &#123; console.time(\"time\" + id); setTimeout(() =&gt; &#123; console.log(\"promise\", id); console.timeEnd(\"time\" + id); if (id == 3) &#123; console.timeEnd(\"timeall\"); &#125; solve(); &#125;, time); &#125;);console.time(\"timeall\");runPromiseByQueue([ createPromise(3000, 1), createPromise(2000, 2), createPromise(1000, 3),]); æœ€åçš„è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š è¯´æ˜ç¡®å®æ˜¯ä¸²è¡Œä¾æ¬¡æ‰§è¡Œäº†ä¸‰ä¸ªpromiseã€‚ å®ç°å¤šä¸ªpromiseå¹¶è¡Œæ‰§è¡Œè¿™ä¸ªç›®å‰ESå®˜æ–¹å·²ç»å®ç°äº†promise.all/promise.allSettled/promise.raceç­‰æ–¹æ³•ï¼Œä»¥promise.all()ä¸ºä¾‹ï¼š 12345678910const promise1 = Promise.resolve(3);const promise2 = 42;const promise3 = new Promise((resolve, reject) =&gt; &#123; setTimeout(resolve, 100, 'foo');&#125;);Promise.all([promise1, promise2, promise3]).then((values) =&gt; &#123; console.log(values);&#125;);// expected output: Array [3, 42, \"foo\"] Promise.allå¯ä»¥ä¿è¯ï¼Œpromisesæ•°ç»„ä¸­æ‰€æœ‰promiseå¯¹è±¡éƒ½è¾¾åˆ°resolveçŠ¶æ€ï¼Œæ‰æ‰§è¡Œthenå›è°ƒã€‚ é‚£ä¹ˆå¦‚æœpromisesæ•°ç»„æ˜¯åŒ…å«å‡ åä¸ªç”šè‡³å‡ ç™¾ä¸ªhttpè¯·æ±‚ï¼Œç›´æ¥ç”¨Promise.allçš„è¯ï¼Œä¼šç¬é—´å‘å‡ºæ‰€æœ‰çš„httpè¯·æ±‚ï¼Œé€ æˆè¯·æ±‚æ‹¥å µç”šè‡³å¤±è´¥ã€‚ è¿™æ—¶å€™å°±éœ€è¦å¯¹Promise.allåšå¹¶å‘é™åˆ¶ã€‚ promise.allå¹¶è¡Œé™åˆ¶é¦–å…ˆéœ€è¦æ˜ç™½çš„æ˜¯ï¼Œpromiseå¹¶ä¸æ˜¯åœ¨è°ƒç”¨Promise.allæ‰æ‰§è¡Œï¼Œè€Œæ˜¯åœ¨å®ä¾‹åŒ–promiseå¯¹è±¡çš„æ—¶å€™å°±æ‰§è¡Œäº†ï¼Œåœ¨ç†è§£è¿™ä¸€ç‚¹çš„åŸºç¡€ä¸Šï¼Œå°±å¯ä»¥ä»promiseå®ä¾‹åŒ–ä¸Šä¸‹æ‰‹å®ç°å¹¶å‘é™åˆ¶ã€‚å…·ä½“å®ç°ä»£ç å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940/** * Promiseå¹¶å‘é™åˆ¶ * @param &#123;Array&#125; array * @param &#123;Number&#125; poolLimit */function LimitPromiseAll(array, poolLimit) &#123; let i = 0; //å¾…æ‰§è¡Œå…ƒç´ çš„æ•°ç»„ä¸‹æ ‡ const results = []; // promise.allçš„promisesæ•°ç»„ const executing = []; // å­˜æ”¾æ­£åœ¨æ‰§è¡Œ const enqueue = function () &#123; // è¾¹ç•Œå¤„ç†ï¼Œarrayä¸ºç©ºæ•°ç»„ if (i === array.length) &#123; return Promise.resolve(); &#125; // æ¯è°ƒä¸€æ¬¡enqueueï¼Œåˆå§‹åŒ–ä¸€ä¸ªpromise const fn = array[i++]; // å¦‚æœcurPromiseä¸æ˜¯Promiseå¯¹è±¡ã€‚åˆ™è½¬æˆPromise å¯¹è±¡ // ç­‰åŒäº const p = Promise.resolve(fn()); const p = Promise.resolve().then(() =&gt; fn()); // æ”¾å…¥promisesæ•°ç»„ results.push(p); // promiseæ‰§è¡Œå®Œæ¯•ï¼Œä»executingæ•°ç»„ä¸­åˆ é™¤ const e = p.then((res) =&gt; &#123; executing.splice(executing.indexOf(e), 1); &#125;); //æ­£åœ¨æ‰§è¡Œçš„promise, æ’å…¥executingæ•°ç»„ executing.push(e); // å½“executingæ•°ç»„ä¸­promiseæ•°é‡ä½äºpoolLimitï¼Œå°±å®ä¾‹åŒ–æ–°çš„promiseå¹¶æ‰§è¡Œ, // å¦åˆ™è°ƒç”¨promise.race()è·å–åˆ°æœ€å¿«æ‰§è¡Œå®Œæˆçš„promiseï¼ˆå°†å…¶ä»executingæ•°ç»„åˆ é™¤ï¼Œä¾¿å¯ç»§ç»­åç»­æ‰§è¡Œï¼‰ let r = Promise.resolve(); if (executing.length &gt;= poolLimit) &#123; r = Promise.race(executing); &#125; // é€’å½’ï¼Œç›´åˆ°éå†å®Œarray return r.then(() =&gt; enqueue()); &#125;; return enqueue().then(() =&gt; Promise.all(results));&#125; ä½¿ç”¨ä¾‹å­ï¼š 1234567891011121314151617181920console.time(\"all-time\");const timeout = (i) =&gt; new Promise((resolve) =&gt; setTimeout(() =&gt; resolve(i), i));LimitPromiseAll( [ timeout.bind(null, 1000), timeout.bind(null, 5000), timeout.bind(null, 2000), timeout.bind(null, 4000), ], 2).then((res) =&gt; &#123; console.log(res); console.timeEnd(\"all-time\");&#125;);/**è¾“å‡ºï¼š [ 1000, 5000, 2000, 4000 ] all-time: 7037.285ms **/ å…¶å®ï¼Œç›®å‰ç¤¾åŒºé‡Œå·²ç»æœ‰ä¸€äº›å¼€æºåŒ…å®ç°äº†è¿™ä¸ªåŠŸèƒ½ï¼Œæ¯”å¦‚async-poolã€es6-promise-poolã€p-limitã€‚ä¸Šè¿°å®ç°ä»£ç ä¹Ÿæ˜¯å‚è€ƒasync-poolçš„å®ç°ã€‚ ä½¿ç”¨Promiseå®ç°fetchè¶…æ—¶å¤„ç†å› ä¸ºfetché»˜è®¤æ²¡æœ‰è¯·æ±‚è¶…æ—¶è®¾ç½®ï¼Œä»¥åŠä¸­æ–­è¯·æ±‚æ“ä½œï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬å°è¯•ä½¿ç”¨Promiseç»“åˆAbortControllerå°è£…ä¸€ä¸ªç®€å•çš„è¯·æ±‚è¶…æ—¶å’Œä¸­æ–­è¯·æ±‚çš„fetchã€‚ AbortControlleræ¥å£ä»£è¡¨ä¸€ä¸ªæ§åˆ¶å™¨å¯¹è±¡ï¼Œå…è®¸ä½ åœ¨éœ€è¦æ—¶ä¸­æ­¢ä¸€ä¸ªæˆ–å¤šä¸ªDOMè¯·æ±‚ç›®å‰IEå¤–çš„ä¸»æµæµè§ˆå™¨åŸºæœ¬éƒ½å®ç°äº†AbortControlleråŠŸèƒ½ï¼› AbortControllerçš„æµè§ˆå™¨å…¼å®¹æƒ…å†µï¼š æ ¸å¿ƒä»£ç å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031323334353637function TimeoutFetch(params) &#123; this.controller = new AbortController(); //å®ä¾‹åŒ–AbortController this.signal = this.controller.signal; //signalç”¨æ¥ abort è¯·æ±‚ this.timeout = 5000; //é»˜è®¤è¶…æ—¶æ—¶é—´&#125;/** * è®¾ç½®è¶…æ—¶æ—¶é—´ */TimeoutFetch.prototype.setTimeout = function (ms) &#123; this.timeout = ms;&#125;;/** * å°è£…fetchè¯·æ±‚ */TimeoutFetch.prototype.fetch = function (url, data = &#123;&#125;) &#123; const timeoutPromise = new Promise((resolve) =&gt; &#123; setTimeout(() =&gt; &#123; resolve(&#123; code: 1, msg: `timeout of $&#123;this.timeout&#125;ms`, &#125;); this.controller.abort(); &#125;, this.timeout); &#125;); const fetchPromise = fetch(url, &#123; signal: this.signal, //è®¾ç½®ä¿¡å· ...data, &#125;); return Promise.race([fetchPromise, timeoutPromise]);&#125;;/** * æ‰‹åŠ¨ä¸­æ–­è¯·æ±‚ */TimeoutFetch.prototype.abort = function () &#123; this.controller.abort();&#125;; ä½¿ç”¨ä¾‹å­ï¼š 12345const timeoutFetch = new TimeoutFetch();timeoutFetch.setTimeout(30);timeoutFetch.fetch(\"http://localhost/data\").then((res) =&gt; &#123; console.log(res);&#125;);","categories":[{"name":"JavaScript","slug":"JavaScript","permalink":"http://blog.kobingo.xyz/categories/JavaScript/"}],"tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"http://blog.kobingo.xyz/tags/JavaScript/"},{"name":"promise","slug":"promise","permalink":"http://blog.kobingo.xyz/tags/promise/"}]},{"title":"é€šè¿‡iframeä¸‹è½½æ–‡ä»¶å¦‚ä½•åˆ¤æ–­ä¸‹è½½å®Œæˆ","slug":"javascript-iframe-download-complete","date":"2019-07-06T22:24:20.000Z","updated":"2021-01-19T06:41:41.222Z","comments":true,"path":"javascript-iframe-download-complete/","link":"","permalink":"http://blog.kobingo.xyz/javascript-iframe-download-complete/","excerpt":"å½“ä½¿ç”¨ iframe ä½œä¸ºæ–‡ä»¶ä¸‹è½½çš„è½½ä½“æ—¶ï¼Œå¦‚ä½•çŸ¥é“æ–‡ä»¶å·²ç»ä¸‹è½½å®Œæ¯•ã€‚ç°æœ‰çš„ iframe çš„ onLoad æ–¹æ³•å…·æœ‰å…¼å®¹æ€§é—®é¢˜ï¼Œåœ¨ chromeã€IE ä¸‹æ— æ³•ç›‘å¬ onLoad äº‹ä»¶ç›‘å¬æ–‡ä»¶ä¸‹è½½å®Œæ¯•ï¼Œå› ä¸º onLoad äº‹ä»¶æœ¬èº«ä¹Ÿæ˜¯å¯¹ iframe ä¸­çš„ html ç»“æ„çš„åŠ è½½è¿›åº¦ç›‘å¬ã€‚","text":"é—®é¢˜å½“ä½¿ç”¨ iframe ä½œä¸ºæ–‡ä»¶ä¸‹è½½çš„è½½ä½“æ—¶ï¼Œå¦‚ä½•çŸ¥é“æ–‡ä»¶å·²ç»ä¸‹è½½å®Œæ¯•ã€‚ç°æœ‰çš„ iframe çš„ onLoad æ–¹æ³•å…·æœ‰å…¼å®¹æ€§é—®é¢˜ï¼Œåœ¨ chromeã€IE ä¸‹æ— æ³•ç›‘å¬ onLoad äº‹ä»¶ç›‘å¬æ–‡ä»¶ä¸‹è½½å®Œæ¯•ï¼Œå› ä¸º onLoad äº‹ä»¶æœ¬èº«ä¹Ÿæ˜¯å¯¹ iframe ä¸­çš„ html ç»“æ„çš„åŠ è½½è¿›åº¦ç›‘å¬ã€‚ 123456789var url = \"http://www.example.com/file.zip\";var iframe = document.createElement(\"iframe\");iframe.src = url;iframe.style.display = \"none\";iframe.onload = function () &#123; console.debug(\"start downloading...\"); document.body.removeAttribute(iframe);&#125;;document.body.appendChild(iframe); å½“ chromeã€IE ä¸‹æ—¶ï¼Œå¦‚æœ HTTP æ–‡ä»¶å¤´ä¸­åŒ…å« Content-disposition: attachmentï¼›å³ä¸‹è½½æ–‡ä»¶çš„é“¾æ¥çš„è¯ï¼Œä¸ä¼šè§¦å‘è¿™ä¸ªäº‹ä»¶ onLoad äº‹ä»¶ã€‚ è¿™é‡Œè¯´ä¸€ä¸‹ Content-dispositionï¼š Content-disposition æ˜¯ MIME åè®®çš„æ‰©å±•ï¼ŒMIME åè®®æŒ‡ç¤º MIME ç”¨æˆ·ä»£ç†å¦‚ä½•æ˜¾ç¤ºé™„åŠ çš„æ–‡ä»¶ã€‚Content-dispositionå…¶å®å¯ä»¥æ§åˆ¶ç”¨æˆ·è¯·æ±‚æ‰€å¾—çš„å†…å®¹å­˜ä¸ºä¸€ä¸ªæ–‡ä»¶çš„æ—¶å€™æä¾›ä¸€ä¸ªé»˜è®¤çš„æ–‡ä»¶åï¼Œæ–‡ä»¶ç›´æ¥åœ¨æµè§ˆå™¨ä¸Šæ˜¾ç¤ºæˆ–è€…åœ¨è®¿é—®æ—¶å¼¹å‡ºæ–‡ä»¶ä¸‹è½½å¯¹è¯æ¡†ã€‚ Content-Dispositionä¸ºå±æ€§ådisposition-typeæ˜¯ä»¥ä»€ä¹ˆæ–¹å¼ä¸‹è½½ï¼Œå¦‚attachmentä¸ºä»¥é™„ä»¶æ–¹å¼ä¸‹è½½disposition-parmä¸ºé»˜è®¤ä¿å­˜æ—¶çš„æ–‡ä»¶åæœåŠ¡ç«¯å‘å®¢æˆ·ç«¯æ¸¸è§ˆå™¨å‘é€æ–‡ä»¶æ—¶ï¼Œå¦‚æœæ˜¯æµè§ˆå™¨æ”¯æŒçš„æ–‡ä»¶ç±»å‹ï¼Œä¸€èˆ¬ä¼šé»˜è®¤ä½¿ç”¨æµè§ˆå™¨æ‰“å¼€ï¼Œæ¯”å¦‚txtã€jpgç­‰ï¼Œä¼šç›´æ¥åœ¨æµè§ˆå™¨ä¸­æ˜¾ç¤º æ³¨æ„äº‹é¡¹ï¼š 1.å½“ä»£ç é‡Œé¢ä½¿ç”¨Content-Dispositionæ¥ç¡®ä¿æµè§ˆå™¨å¼¹å‡ºä¸‹è½½å¯¹è¯æ¡†çš„æ—¶å€™ã€‚ response.addHeader(&#39;Content-Disposition&#39;, &#39;attachment&#39;);ä¸€å®šè¦ç¡®ä¿æ²¡æœ‰åšè¿‡å…³äºç¦æ­¢æµè§ˆå™¨ç¼“å­˜çš„æ“ä½œã€‚ ä»£ç å¦‚ä¸‹: response.setHeader(&#39;Pragma&#39;, &#39;No-cache&#39;); response.setHeader(&#39;Cache-Control&#39;, &#39;No-cache&#39;); response.setDateHeader(&#39;Expires&#39;, 0); ä¸ç„¶ä¼šå‘ç°ä¸‹è½½åŠŸèƒ½åœ¨operaå’Œfirefoxé‡Œé¢å¥½å¥½çš„æ²¡é—®é¢˜ï¼Œåœ¨IEä¸‹é¢å°±æ˜¯ä¸è¡Œ è§£å†³æ€è·¯ä¸€ï¼šåˆ©ç”¨ cookieåç«¯å°†æ–‡ä»¶ä¸‹è½½è¿›åº¦æ”¾åœ¨ cookie ä¸­ï¼Œé€šè¿‡è½®è¯¢ cookie çš„æ–¹å¼ï¼Œå¯¹æ–‡ä»¶ä¸‹è½½è¿›åº¦è¿›è¡Œè·å–ï¼Œåˆ¤æ–­æ–‡ä»¶æ˜¯å¦å·²ç»ä¸‹è½½å®Œæ¯•ã€‚ ç¼ºé™·ï¼š 1ã€éœ€è¦åç«¯é…åˆ 2ã€å¦‚æœå®¢æˆ·ç«¯ç¦ç”¨äº† cookieï¼Œåˆ™è¯¥æ–¹æ¡ˆå®Œå…¨å¤±æ•ˆï¼›åœ¨æ— ç—•æµè§ˆæ¨¡å¼ä¸‹ï¼Œè¯»å– cookieï¼Œç”šè‡³ä»£ç æŠ¥é”™ã€‚ è§£å†³æ€è·¯äºŒï¼šæ·»åŠ  header é…ç½®123456// ä¸è®©æµè§ˆå™¨è‡ªåŠ¨æ£€æµ‹æ–‡ä»¶ç±»å‹// è¯´æ˜èµ„æ–™ï¼šhttp://drops.wooyun.org/tips/1166response.addHeader(\"X-Content-Type-Options\", \"nosniff\");// æç¤ºæµè§ˆå™¨ä¸è®©å…¶åœ¨frameæˆ–iframeä¸­åŠ è½½èµ„æºçš„æ–‡ä»¶å†…å®¹// https://developer.mozilla.org/zh-CN/docs/Web/HTTP/X-Frame-Optionsresponse.addHeader(\"X-Frame-Options\", \"deny\"); ä½†æ˜¯åœ¨ chorome v58 ç‰ˆæœ¬å°† header çš„ X-Frame-Options è®¾ä¸º deny ä¼šæŠ¥é”™ã€‚å¹¶ä¸”ä¸‹è½½çš„æ—¶å€™ç½‘ç»œè¿æ¥ä¼šå‡ºç°å¤±è´¥ã€‚ è§£å†³æ€è·¯ä¸‰ï¼šè½®è¯¢ç›‘å¬ readyStateå®šæ—¶å™¨è½®è¯¢ç›‘å¬ readyState çš„çŠ¶æ€ï¼Œå¦‚æœæ˜¯ complete æˆ–è€… interactive è¯´æ˜æ–‡ä»¶åŠ è½½å®Œæˆã€‚ 12345678910111213var timer = setInterval(function () &#123; iframe = document.getElementById(\"iframedownload\"); var iframeDoc = iframe.contentDocument || iframe.contentWindow.document; // Check if loading is complete if ( iframeDoc.readyState == \"complete\" || iframeDoc.readyState == \"interactive\" ) &#123; loadingOff(); clearInterval(timer); return; &#125;&#125;, 4000); æ€»ç»“ç¬¬ä¸‰ç§æ–¹æ³•æ¯”è¾ƒå¥½ï¼Œå› ä¸ºä¸éœ€è¦åç«¯è¿›è¡Œé…åˆï¼Œä¸”ä¸ä¾èµ–ä¸ cookie ç­‰å˜é‡å¸¦æ¥çš„é—®é¢˜ï¼Œèƒ½æ›´å¥½å®ç°æˆ‘ä»¬çš„éœ€æ±‚ã€‚","categories":[{"name":"JavaScript","slug":"JavaScript","permalink":"http://blog.kobingo.xyz/categories/JavaScript/"}],"tags":[{"name":"iframe","slug":"iframe","permalink":"http://blog.kobingo.xyz/tags/iframe/"},{"name":"download","slug":"download","permalink":"http://blog.kobingo.xyz/tags/download/"}]},{"title":"å‰ç«¯å¦‚ä½•å­¦æ•°æ®ç»“æ„ä¸ç®—æ³• - ä¸€ç¯‡è®²å®Œç»å…¸æ’åºç®—æ³•","slug":"algorithms-sort-knowledge","date":"2019-06-30T16:48:08.000Z","updated":"2021-01-19T06:41:41.218Z","comments":true,"path":"algorithms-sort-knowledge/","link":"","permalink":"http://blog.kobingo.xyz/algorithms-sort-knowledge/","excerpt":"æ–‡ä¸­åŒ…å«äº† åå¤§ç»å…¸æ’åºç®—æ³• çš„æ€æƒ³ã€ä»£ç å®ç°ã€ä¸€äº›ä¾‹å­ã€å¤æ‚åº¦åˆ†æã€åŠ¨ç”»ã€è¿˜æœ‰ç®—æ³•å¯è§†åŒ–å·¥å…·ã€‚","text":"æ–‡ä¸­åŒ…å«äº† åå¤§ç»å…¸æ’åºç®—æ³• çš„æ€æƒ³ã€ä»£ç å®ç°ã€ä¸€äº›ä¾‹å­ã€å¤æ‚åº¦åˆ†æã€åŠ¨ç”»ã€è¿˜æœ‰ç®—æ³•å¯è§†åŒ–å·¥å…·ã€‚ 1. å‰è¨€ ç®—æ³•ä¸ºç‹ã€‚ æƒ³å­¦å¥½å‰ç«¯ï¼Œå…ˆç»ƒå¥½å†…åŠŸï¼Œå†…åŠŸä¸è¡Œï¼Œå°±ç®—æ‹›å¼ç»ƒçš„å†èŠ±å“¨ï¼Œç»ˆç©¶æˆä¸äº†é«˜æ‰‹ï¼›åªæœ‰å†…åŠŸæ·±åšè€…ï¼Œå‰ç«¯ä¹‹è·¯æ‰ä¼šèµ°å¾—æ›´è¿œã€‚ ç¬”è€…å†™çš„ JavaScript æ•°æ®ç»“æ„ä¸ç®—æ³•ä¹‹ç¾ ç³»åˆ—ç”¨çš„è¯­è¨€æ˜¯ JavaScript ï¼Œæ—¨åœ¨å…¥é—¨æ•°æ®ç»“æ„ä¸ç®—æ³•å’Œæ–¹ä¾¿ä»¥åå¤ä¹ ã€‚ æ–‡ä¸­åŒ…å«äº† åå¤§ç»å…¸æ’åºç®—æ³• çš„æ€æƒ³ã€ä»£ç å®ç°ã€ä¸€äº›ä¾‹å­ã€å¤æ‚åº¦åˆ†æã€åŠ¨ç”»ã€è¿˜æœ‰ç®—æ³•å¯è§†åŒ–å·¥å…·ã€‚ è¿™åº”è¯¥æ˜¯ç›®å‰æœ€å…¨çš„ JavaScript åå¤§ç»å…¸æ’åºç®—æ³• çš„è®²è§£äº†å§ã€‚ 2. å¦‚ä½•åˆ†æä¸€ä¸ªæ’åºç®—æ³•å¤æ‚åº¦åˆ†ææ˜¯æ•´ä¸ªç®—æ³•å­¦ä¹ çš„ç²¾é«“ã€‚ æ—¶é—´å¤æ‚åº¦: ä¸€ä¸ªç®—æ³•æ‰§è¡Œæ‰€è€—è´¹çš„æ—¶é—´ã€‚ ç©ºé—´å¤æ‚åº¦: è¿è¡Œå®Œä¸€ä¸ªç¨‹åºæ‰€éœ€å†…å­˜çš„å¤§å°ã€‚ æ—¶é—´å’Œç©ºé—´å¤æ‚åº¦çš„è¯¦è§£ï¼Œè¯·çœ‹ JavaScript æ•°æ®ç»“æ„ä¸ç®—æ³•ä¹‹ç¾ - æ—¶é—´å’Œç©ºé—´å¤æ‚åº¦ã€‚ å­¦ä¹ æ’åºç®—æ³•ï¼Œæˆ‘ä»¬é™¤äº†å­¦ä¹ å®ƒçš„ç®—æ³•åŸç†ã€ä»£ç å®ç°ä¹‹å¤–ï¼Œæ›´é‡è¦çš„æ˜¯è¦å­¦ä¼šå¦‚ä½•è¯„ä»·ã€åˆ†æä¸€ä¸ªæ’åºç®—æ³•ã€‚ åˆ†æä¸€ä¸ªæ’åºç®—æ³•ï¼Œè¦ä» æ‰§è¡Œæ•ˆç‡ã€å†…å­˜æ¶ˆè€—ã€ç¨³å®šæ€§ ä¸‰æ–¹é¢å…¥æ‰‹ã€‚ 2.1 æ‰§è¡Œæ•ˆç‡1. æœ€å¥½æƒ…å†µã€æœ€åæƒ…å†µã€å¹³å‡æƒ…å†µæ—¶é—´å¤æ‚åº¦ æˆ‘ä»¬åœ¨åˆ†ææ’åºç®—æ³•çš„æ—¶é—´å¤æ‚åº¦æ—¶ï¼Œè¦åˆ†åˆ«ç»™å‡ºæœ€å¥½æƒ…å†µã€æœ€åæƒ…å†µã€å¹³å‡æƒ…å†µä¸‹çš„æ—¶é—´å¤æ‚åº¦ã€‚ é™¤æ­¤ä¹‹å¤–ï¼Œä½ è¿˜è¦è¯´å‡ºæœ€å¥½ã€æœ€åæ—¶é—´å¤æ‚åº¦å¯¹åº”çš„è¦æ’åºçš„åŸå§‹æ•°æ®æ˜¯ä»€ä¹ˆæ ·çš„ã€‚ 2. æ—¶é—´å¤æ‚åº¦çš„ç³»æ•°ã€å¸¸æ•° ã€ä½é˜¶ æˆ‘ä»¬çŸ¥é“ï¼Œæ—¶é—´å¤æ‚åº¦ååº”çš„æ˜¯æ•°æ®è§„æ¨¡ n å¾ˆå¤§çš„æ—¶å€™çš„ä¸€ä¸ªå¢é•¿è¶‹åŠ¿ï¼Œæ‰€ä»¥å®ƒè¡¨ç¤ºçš„æ—¶å€™ä¼šå¿½ç•¥ç³»æ•°ã€å¸¸æ•°ã€ä½é˜¶ã€‚ ä½†æ˜¯å®é™…çš„è½¯ä»¶å¼€å‘ä¸­ï¼Œæˆ‘ä»¬æ’åºçš„å¯èƒ½æ˜¯ 10 ä¸ªã€100 ä¸ªã€1000 ä¸ªè¿™æ ·è§„æ¨¡å¾ˆå°çš„æ•°æ®ï¼Œæ‰€ä»¥ï¼Œåœ¨å¯¹åŒä¸€é˜¶æ—¶é—´å¤æ‚åº¦çš„æ’åºç®—æ³•æ€§èƒ½å¯¹æ¯”çš„æ—¶å€™ï¼Œæˆ‘ä»¬å°±è¦æŠŠç³»æ•°ã€å¸¸æ•°ã€ä½é˜¶ä¹Ÿè€ƒè™‘è¿›æ¥ã€‚ 3. æ¯”è¾ƒæ¬¡æ•°å’Œäº¤æ¢ï¼ˆæˆ–ç§»åŠ¨ï¼‰æ¬¡æ•° è¿™ä¸€èŠ‚å’Œä¸‹ä¸€èŠ‚è®²çš„éƒ½æ˜¯åŸºäºæ¯”è¾ƒçš„æ’åºç®—æ³•ã€‚åŸºäºæ¯”è¾ƒçš„æ’åºç®—æ³•çš„æ‰§è¡Œè¿‡ç¨‹ï¼Œä¼šæ¶‰åŠä¸¤ç§æ“ä½œï¼Œä¸€ç§æ˜¯å…ƒç´ æ¯”è¾ƒå¤§å°ï¼Œå¦ä¸€ç§æ˜¯å…ƒç´ äº¤æ¢æˆ–ç§»åŠ¨ã€‚ æ‰€ä»¥ï¼Œå¦‚æœæˆ‘ä»¬åœ¨åˆ†ææ’åºç®—æ³•çš„æ‰§è¡Œæ•ˆç‡çš„æ—¶å€™ï¼Œåº”è¯¥æŠŠæ¯”è¾ƒæ¬¡æ•°å’Œäº¤æ¢ï¼ˆæˆ–ç§»åŠ¨ï¼‰æ¬¡æ•°ä¹Ÿè€ƒè™‘è¿›å»ã€‚ 2.2 å†…å­˜æ¶ˆè€—ä¹Ÿå°±æ˜¯çœ‹ç©ºé—´å¤æ‚åº¦ã€‚ è¿˜éœ€è¦çŸ¥é“å¦‚ä¸‹æœ¯è¯­ï¼š å†…æ’åºï¼šæ‰€æœ‰æ’åºæ“ä½œéƒ½åœ¨å†…å­˜ä¸­å®Œæˆï¼› å¤–æ’åºï¼šç”±äºæ•°æ®å¤ªå¤§ï¼Œå› æ­¤æŠŠæ•°æ®æ”¾åœ¨ç£ç›˜ä¸­ï¼Œè€Œæ’åºé€šè¿‡ç£ç›˜å’Œå†…å­˜çš„æ•°æ®ä¼ è¾“æ‰èƒ½è¿›è¡Œï¼› åŸåœ°æ’åºï¼šåŸåœ°æ’åºç®—æ³•ï¼Œå°±æ˜¯ç‰¹æŒ‡ç©ºé—´å¤æ‚åº¦æ˜¯ O(1) çš„æ’åºç®—æ³•ã€‚ 2.3 ç¨³å®šæ€§ ç¨³å®šï¼šå¦‚æœå¾…æ’åºçš„åºåˆ—ä¸­å­˜åœ¨å€¼ç›¸ç­‰çš„å…ƒç´ ï¼Œç»è¿‡æ’åºä¹‹åï¼Œç›¸ç­‰å…ƒç´ ä¹‹é—´åŸæœ‰çš„å…ˆåé¡ºåºä¸å˜ã€‚ æ¯”å¦‚ï¼š a åŸæœ¬åœ¨ b å‰é¢ï¼Œè€Œ a = bï¼Œæ’åºä¹‹åï¼Œa ä»ç„¶åœ¨ b çš„å‰é¢ï¼› ä¸ç¨³å®šï¼šå¦‚æœå¾…æ’åºçš„åºåˆ—ä¸­å­˜åœ¨å€¼ç›¸ç­‰çš„å…ƒç´ ï¼Œç»è¿‡æ’åºä¹‹åï¼Œç›¸ç­‰å…ƒç´ ä¹‹é—´åŸæœ‰çš„å…ˆåé¡ºåºæ”¹å˜ã€‚ æ¯”å¦‚ï¼ša åŸæœ¬åœ¨ b çš„å‰é¢ï¼Œè€Œ a = bï¼Œæ’åºä¹‹åï¼Œ a åœ¨ b çš„åé¢ï¼› 3. åå¤§ç»å…¸æ’åºç®—æ³•3.1 å†’æ³¡æ’åºï¼ˆBubble Sortï¼‰ æ€æƒ³ å†’æ³¡æ’åºåªä¼šæ“ä½œç›¸é‚»çš„ä¸¤ä¸ªæ•°æ®ã€‚ æ¯æ¬¡å†’æ³¡æ“ä½œéƒ½ä¼šå¯¹ç›¸é‚»çš„ä¸¤ä¸ªå…ƒç´ è¿›è¡Œæ¯”è¾ƒï¼Œçœ‹æ˜¯å¦æ»¡è¶³å¤§å°å…³ç³»è¦æ±‚ã€‚å¦‚æœä¸æ»¡è¶³å°±è®©å®ƒä¿©äº’æ¢ã€‚ ä¸€æ¬¡å†’æ³¡ä¼šè®©è‡³å°‘ä¸€ä¸ªå…ƒç´ ç§»åŠ¨åˆ°å®ƒåº”è¯¥åœ¨çš„ä½ç½®ï¼Œé‡å¤ n æ¬¡ï¼Œå°±å®Œæˆäº† n ä¸ªæ•°æ®çš„æ’åºå·¥ä½œã€‚ ç‰¹ç‚¹ ä¼˜ç‚¹ï¼šæ’åºç®—æ³•çš„åŸºç¡€ï¼Œç®€å•å®ç”¨æ˜“äºç†è§£ã€‚ ç¼ºç‚¹ï¼šæ¯”è¾ƒæ¬¡æ•°å¤šï¼Œæ•ˆç‡è¾ƒä½ã€‚ å®ç° const bubbleSort = arr =&gt; { console.time(&apos;æ”¹è¿›å‰å†’æ³¡æ’åºè€—æ—¶&apos;); const length = arr.length; if (length &lt;= 1) return; for (let i = 0; i &lt; length - 1; i++) { for (let j = 0; j &lt; length - i - 1; j++) { if (arr[j] &gt; arr[j + 1]) { const temp = arr[j]; arr[j] = arr[j + 1]; arr[j + 1] = temp; } } } console.log(&apos;æ”¹è¿›å‰ arr :&apos;, arr); console.timeEnd(&apos;æ”¹è¿›å‰å†’æ³¡æ’åºè€—æ—¶&apos;); };ä¼˜åŒ–ï¼šå½“æŸæ¬¡å†’æ³¡æ“ä½œå·²ç»æ²¡æœ‰æ•°æ®äº¤æ¢æ—¶ï¼Œè¯´æ˜å·²ç»è¾¾åˆ°å®Œå…¨æœ‰åºï¼Œä¸ç”¨å†ç»§ç»­æ‰§è¡Œåç»­çš„å†’æ³¡æ“ä½œã€‚ const bubbleSort2 = arr =&gt; { console.time(&apos;æ”¹è¿›åå†’æ³¡æ’åºè€—æ—¶&apos;); const length = arr.length; if (length &lt;= 1) return; for (let i = 0; i &lt; length - 1; i++) { let hasChange = false; for (let j = 0; j &lt; length - i - 1; j++) { if (arr[j] &gt; arr[j + 1]) { const temp = arr[j]; arr[j] = arr[j + 1]; arr[j + 1] = temp; hasChange = true; } } if (!hasChange) break; } console.log(&apos;æ”¹è¿›å arr :&apos;, arr); console.timeEnd(&apos;æ”¹è¿›åå†’æ³¡æ’åºè€—æ—¶&apos;); };æµ‹è¯• // æµ‹è¯• const arr = [7, 8, 4, 5, 6, 3, 2, 1]; bubbleSort(arr); // æ”¹è¿›å‰ arr : [1, 2, 3, 4, 5, 6, 7, 8] // æ”¹è¿›å‰å†’æ³¡æ’åºè€—æ—¶: 0.43798828125ms const arr2 = [7, 8, 4, 5, 6, 3, 2, 1]; bubbleSort2(arr2); // æ”¹è¿›å arr : [1, 2, 3, 4, 5, 6, 7, 8] // æ”¹è¿›åå†’æ³¡æ’åºè€—æ—¶: 0.318115234375msåˆ†æ ç¬¬ä¸€ï¼Œå†’æ³¡æ’åºæ˜¯åŸåœ°æ’åºç®—æ³•å— ï¼Ÿ å†’æ³¡çš„è¿‡ç¨‹åªæ¶‰åŠç›¸é‚»æ•°æ®çš„äº¤æ¢æ“ä½œï¼Œåªéœ€è¦å¸¸é‡çº§çš„ä¸´æ—¶ç©ºé—´ï¼Œæ‰€ä»¥å®ƒçš„ç©ºé—´å¤æ‚åº¦ä¸º O(1)ï¼Œæ˜¯ä¸€ä¸ªåŸåœ°æ’åºç®—æ³•ã€‚ ç¬¬äºŒï¼Œå†’æ³¡æ’åºæ˜¯ç¨³å®šçš„æ’åºç®—æ³•å— ï¼Ÿ åœ¨å†’æ³¡æ’åºä¸­ï¼Œåªæœ‰äº¤æ¢æ‰å¯ä»¥æ”¹å˜ä¸¤ä¸ªå…ƒç´ çš„å‰åé¡ºåºã€‚ ä¸ºäº†ä¿è¯å†’æ³¡æ’åºç®—æ³•çš„ç¨³å®šæ€§ï¼Œå½“æœ‰ç›¸é‚»çš„ä¸¤ä¸ªå…ƒç´ å¤§å°ç›¸ç­‰çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¸åšäº¤æ¢ï¼Œç›¸åŒå¤§å°çš„æ•°æ®åœ¨æ’åºå‰åä¸ä¼šæ”¹å˜é¡ºåºã€‚ æ‰€ä»¥å†’æ³¡æ’åºæ˜¯ç¨³å®šçš„æ’åºç®—æ³•ã€‚ ç¬¬ä¸‰ï¼Œå†’æ³¡æ’åºçš„æ—¶é—´å¤æ‚åº¦æ˜¯å¤šå°‘ ï¼Ÿ æœ€ä½³æƒ…å†µï¼šT(n) = O(n)ï¼Œå½“æ•°æ®å·²ç»æ˜¯æ­£åºæ—¶ã€‚ æœ€å·®æƒ…å†µï¼šT(n) = O(n2)ï¼Œå½“æ•°æ®æ˜¯ååºæ—¶ã€‚ å¹³å‡æƒ…å†µï¼šT(n) = O(n2)ã€‚ åŠ¨ç”» 3.2 æ’å…¥æ’åºï¼ˆInsertion Sortï¼‰æ’å…¥æ’åºåˆä¸ºåˆ†ä¸º ç›´æ¥æ’å…¥æ’åº å’Œä¼˜åŒ–åçš„ æ‹†åŠæ’å…¥æ’åº ä¸ å¸Œå°”æ’åºï¼Œæˆ‘ä»¬é€šå¸¸è¯´çš„æ’å…¥æ’åºæ˜¯æŒ‡ç›´æ¥æ’å…¥æ’åºã€‚ ä¸€ã€ç›´æ¥æ’å…¥ æ€æƒ³ ä¸€èˆ¬äººæ‰“æ‰‘å…‹ç‰Œï¼Œæ•´ç†ç‰Œçš„æ—¶å€™ï¼Œéƒ½æ˜¯æŒ‰ç‰Œçš„å¤§å°ï¼ˆä»å°åˆ°å¤§æˆ–è€…ä»å¤§åˆ°å°ï¼‰æ•´ç†ç‰Œçš„ï¼Œé‚£æ¯æ‘¸ä¸€å¼ æ–°ç‰Œï¼Œå°±æ‰«æè‡ªå·±çš„ç‰Œï¼ŒæŠŠæ–°ç‰Œæ’å…¥åˆ°ç›¸åº”çš„ä½ç½®ã€‚ æ’å…¥æ’åºçš„å·¥ä½œåŸç†ï¼šé€šè¿‡æ„å»ºæœ‰åºåºåˆ—ï¼Œå¯¹äºæœªæ’åºæ•°æ®ï¼Œåœ¨å·²æ’åºåºåˆ—ä¸­ä»åå‘å‰æ‰«æï¼Œæ‰¾åˆ°ç›¸åº”ä½ç½®å¹¶æ’å…¥ã€‚ æ­¥éª¤ ä»ç¬¬ä¸€ä¸ªå…ƒç´ å¼€å§‹ï¼Œè¯¥å…ƒç´ å¯ä»¥è®¤ä¸ºå·²ç»è¢«æ’åºï¼› å–å‡ºä¸‹ä¸€ä¸ªå…ƒç´ ï¼Œåœ¨å·²ç»æ’åºçš„å…ƒç´ åºåˆ—ä¸­ä»åå‘å‰æ‰«æï¼› å¦‚æœè¯¥å…ƒç´ ï¼ˆå·²æ’åºï¼‰å¤§äºæ–°å…ƒç´ ï¼Œå°†è¯¥å…ƒç´ ç§»åˆ°ä¸‹ä¸€ä½ç½®ï¼› é‡å¤æ­¥éª¤ 3ï¼Œç›´åˆ°æ‰¾åˆ°å·²æ’åºçš„å…ƒç´ å°äºæˆ–è€…ç­‰äºæ–°å…ƒç´ çš„ä½ç½®ï¼› å°†æ–°å…ƒç´ æ’å…¥åˆ°è¯¥ä½ç½®åï¼› é‡å¤æ­¥éª¤ 2 ~ 5ã€‚ å®ç° const insertionSort = array =&gt; { const len = array.length; if (len &lt;= 1) return let preIndex, current; for (let i = 1; i &lt; len; i++) { preIndex = i - 1; current = array[i]; while (preIndex &gt;= 0 &amp;&amp; array[preIndex] &gt; current) { array[preIndex + 1] = array[preIndex]; preIndex--; } if (preIndex + 1 != i) { array[preIndex + 1] = current; console.log(&apos;array :&apos;, array); } } return array; };æµ‹è¯• // æµ‹è¯• const array = [5, 4, 3, 2, 1]; console.log(&quot;åŸå§‹ array :&quot;, array); insertionSort(array); // åŸå§‹ array: [5, 4, 3, 2, 1] // array: [4, 5, 3, 2, 1] // array: [3, 4, 5, 2, 1] // array: [2, 3, 4, 5, 1] // array: [1, 2, 3, 4, 5]åˆ†æ ç¬¬ä¸€ï¼Œæ’å…¥æ’åºæ˜¯åŸåœ°æ’åºç®—æ³•å— ï¼Ÿ æ’å…¥æ’åºç®—æ³•çš„è¿è¡Œå¹¶ä¸éœ€è¦é¢å¤–çš„å­˜å‚¨ç©ºé—´ï¼Œæ‰€ä»¥ç©ºé—´å¤æ‚åº¦æ˜¯ O(1)ï¼Œæ‰€ä»¥ï¼Œè¿™æ˜¯ä¸€ä¸ªåŸåœ°æ’åºç®—æ³•ã€‚ ç¬¬äºŒï¼Œæ’å…¥æ’åºæ˜¯ç¨³å®šçš„æ’åºç®—æ³•å— ï¼Ÿ åœ¨æ’å…¥æ’åºä¸­ï¼Œå¯¹äºå€¼ç›¸åŒçš„å…ƒç´ ï¼Œæˆ‘ä»¬å¯ä»¥é€‰æ‹©å°†åé¢å‡ºç°çš„å…ƒç´ ï¼Œæ’å…¥åˆ°å‰é¢å‡ºç°å…ƒç´ çš„åé¢ï¼Œè¿™æ ·å°±å¯ä»¥ä¿æŒåŸæœ‰çš„å‰åé¡ºåºä¸å˜ï¼Œæ‰€ä»¥æ’å…¥æ’åºæ˜¯ç¨³å®šçš„æ’åºç®—æ³•ã€‚ ç¬¬ä¸‰ï¼Œæ’å…¥æ’åºçš„æ—¶é—´å¤æ‚åº¦æ˜¯å¤šå°‘ ï¼Ÿ æœ€ä½³æƒ…å†µï¼šT(n) = O(n)ï¼Œå½“æ•°æ®å·²ç»æ˜¯æ­£åºæ—¶ã€‚ æœ€å·®æƒ…å†µï¼šT(n) = O(n2)ï¼Œå½“æ•°æ®æ˜¯ååºæ—¶ã€‚ å¹³å‡æƒ…å†µï¼šT(n) = O(n2)ã€‚ åŠ¨ç”» äºŒã€æ‹†åŠæ’å…¥ æ’å…¥æ’åºä¹Ÿæœ‰ä¸€ç§ä¼˜åŒ–ç®—æ³•ï¼Œå«åšæ‹†åŠæ’å…¥ã€‚ æ€æƒ³ æŠ˜åŠæ’å…¥æ’åºæ˜¯ç›´æ¥æ’å…¥æ’åºçš„å‡çº§ç‰ˆï¼Œé‰´äºæ’å…¥æ’åºç¬¬ä¸€éƒ¨åˆ†ä¸ºå·²æ’å¥½åºçš„æ•°ç»„ï¼Œæˆ‘ä»¬ä¸å¿…æŒ‰é¡ºåºä¾æ¬¡å¯»æ‰¾æ’å…¥ç‚¹ï¼Œåªéœ€æ¯”è¾ƒå®ƒä»¬çš„ä¸­é—´å€¼ä¸å¾…æ’å…¥å…ƒç´ çš„å¤§å°å³å¯ã€‚ æ­¥éª¤ å– 0 ~ i-1 çš„ä¸­é—´ç‚¹ ( m = (i-1) &gt;&gt; 1 )ï¼Œarray[i] ä¸ array[m] è¿›è¡Œæ¯”è¾ƒï¼Œè‹¥ array[i] &lt; array[m]ï¼Œåˆ™è¯´æ˜å¾…æ’å…¥çš„å…ƒç´  array[i] åº”è¯¥å¤„äºæ•°ç»„çš„ 0 ~ m ç´¢å¼•ä¹‹é—´ï¼›åä¹‹ï¼Œåˆ™è¯´æ˜å®ƒåº”è¯¥å¤„äºæ•°ç»„çš„ m ~ i-1 ç´¢å¼•ä¹‹é—´ã€‚ é‡å¤æ­¥éª¤ 1ï¼Œæ¯æ¬¡ç¼©å°ä¸€åŠçš„æŸ¥æ‰¾èŒƒå›´ï¼Œç›´è‡³æ‰¾åˆ°æ’å…¥çš„ä½ç½®ã€‚ å°†æ•°ç»„ä¸­æ’å…¥ä½ç½®ä¹‹åçš„å…ƒç´ å…¨éƒ¨åç§»ä¸€ä½ã€‚ åœ¨æŒ‡å®šä½ç½®æ’å…¥ç¬¬ i ä¸ªå…ƒç´ ã€‚ æ³¨ï¼šx &gt;&gt; 1 æ˜¯ä½è¿ç®—ä¸­çš„å³ç§»è¿ç®—ï¼Œè¡¨ç¤ºå³ç§»ä¸€ä½ï¼Œç­‰åŒäº x é™¤ä»¥ 2 å†å–æ•´ï¼Œå³ x &gt;&gt; 1 == Math.floor(x/2) ã€‚ const binaryInsertionSort = array =&gt; { const len = array.length; if (len &lt;= 1) return; let current, i, j, low, high, m; for (i = 1; i &lt; len; i++) { low = 0; high = i - 1; current = array[i]; while (low &lt;= high) { m = (low + high) &gt;&gt; 1; if (array[i] &gt;= array[m]) { low = m + 1; } else { high = m - 1; } } for (j = i; j &gt; low; j--) { array[j] = array[j - 1]; console.log(&apos;array2 :&apos;, JSON.parse(JSON.stringify(array))); } array[low] = current; } console.log(&apos;array2 :&apos;, JSON.parse(JSON.stringify(array))); return array; };æµ‹è¯• const array2 = [5, 4, 3, 2, 1]; console.log(&apos;åŸå§‹ array2:&apos;, array2); binaryInsertionSort(array2); // åŸå§‹ array2: [5, 4, 3, 2, 1] // array2 : [5, 5, 3, 2, 1] // array2 : [4, 5, 5, 2, 1] // array2 : [4, 4, 5, 2, 1] // array2 : [3, 4, 5, 5, 1] // array2 : [3, 4, 4, 5, 1] // array2 : [3, 3, 4, 5, 1] // array2 : [2, 3, 4, 5, 5] // array2 : [2, 3, 4, 4, 5] // array2 : [2, 3, 3, 4, 5] // array2 : [2, 2, 3, 4, 5] // array2 : [1, 2, 3, 4, 5]æ³¨æ„ï¼šå’Œç›´æ¥æ’å…¥æ’åºç±»ä¼¼ï¼ŒæŠ˜åŠæ’å…¥æ’åºæ¯æ¬¡äº¤æ¢çš„æ˜¯ç›¸é‚»çš„ä¸”å€¼ä¸ºä¸åŒçš„å…ƒç´ ï¼Œå®ƒå¹¶ä¸ä¼šæ”¹å˜å€¼ç›¸åŒçš„å…ƒç´ ä¹‹é—´çš„é¡ºåºï¼Œå› æ­¤å®ƒæ˜¯ç¨³å®šçš„ã€‚ ä¸‰ã€å¸Œå°”æ’åº å¸Œå°”æ’åºæ˜¯ä¸€ä¸ªå¹³å‡æ—¶é—´å¤æ‚åº¦ä¸º O(n log n) çš„ç®—æ³•ï¼Œä¼šåœ¨ä¸‹ä¸€ä¸ªç« èŠ‚å’Œ å½’å¹¶æ’åºã€å¿«é€Ÿæ’åºã€å †æ’åº ä¸€èµ·è®²ï¼Œæœ¬æ–‡å°±ä¸å±•å¼€äº†ã€‚ 3.3 é€‰æ‹©æ’åºï¼ˆSelection Sortï¼‰æ€è·¯ é€‰æ‹©æ’åºç®—æ³•çš„å®ç°æ€è·¯æœ‰ç‚¹ç±»ä¼¼æ’å…¥æ’åºï¼Œä¹Ÿåˆ†å·²æ’åºåŒºé—´å’Œæœªæ’åºåŒºé—´ã€‚ä½†æ˜¯é€‰æ‹©æ’åºæ¯æ¬¡ä¼šä»æœªæ’åºåŒºé—´ä¸­æ‰¾åˆ°æœ€å°çš„å…ƒç´ ï¼Œå°†å…¶æ”¾åˆ°å·²æ’åºåŒºé—´çš„æœ«å°¾ã€‚ æ­¥éª¤ é¦–å…ˆåœ¨æœªæ’åºåºåˆ—ä¸­æ‰¾åˆ°æœ€å°ï¼ˆå¤§ï¼‰å…ƒç´ ï¼Œå­˜æ”¾åˆ°æ’åºåºåˆ—çš„èµ·å§‹ä½ç½®ã€‚ å†ä»å‰©ä½™æœªæ’åºå…ƒç´ ä¸­ç»§ç»­å¯»æ‰¾æœ€å°ï¼ˆå¤§ï¼‰å…ƒç´ ï¼Œç„¶åæ”¾åˆ°å·²æ’åºåºåˆ—çš„æœ«å°¾ã€‚ é‡å¤ç¬¬äºŒæ­¥ï¼Œç›´åˆ°æ‰€æœ‰å…ƒç´ å‡æ’åºå®Œæ¯•ã€‚ å®ç° const selectionSort = array =&gt; { const len = array.length; let minIndex, temp; for (let i = 0; i &lt; len - 1; i++) { minIndex = i; for (let j = i + 1; j &lt; len; j++) { if (array[j] &lt; array[minIndex]) { minIndex = j; } } temp = array[i]; array[i] = array[minIndex]; array[minIndex] = temp; console.log(&apos;array: &apos;, array); } return array; };æµ‹è¯• // æµ‹è¯• const array = [5, 4, 3, 2, 1]; console.log(&apos;åŸå§‹array:&apos;, array); selectionSort(array); // åŸå§‹ array: [5, 4, 3, 2, 1] // array: [1, 4, 3, 2, 5] // array: [1, 2, 3, 4, 5] // array: [1, 2, 3, 4, 5] // array: [1, 2, 3, 4, 5]åˆ†æ ç¬¬ä¸€ï¼Œé€‰æ‹©æ’åºæ˜¯åŸåœ°æ’åºç®—æ³•å— ï¼Ÿ é€‰æ‹©æ’åºç©ºé—´å¤æ‚åº¦ä¸º O(1)ï¼Œæ˜¯ä¸€ç§åŸåœ°æ’åºç®—æ³•ã€‚ ç¬¬äºŒï¼Œé€‰æ‹©æ’åºæ˜¯ç¨³å®šçš„æ’åºç®—æ³•å— ï¼Ÿ é€‰æ‹©æ’åºæ¯æ¬¡éƒ½è¦æ‰¾å‰©ä½™æœªæ’åºå…ƒç´ ä¸­çš„æœ€å°å€¼ï¼Œå¹¶å’Œå‰é¢çš„å…ƒç´ äº¤æ¢ä½ç½®ï¼Œè¿™æ ·ç ´åäº†ç¨³å®šæ€§ã€‚æ‰€ä»¥ï¼Œé€‰æ‹©æ’åºæ˜¯ä¸€ç§ä¸ç¨³å®šçš„æ’åºç®—æ³•ã€‚ ç¬¬ä¸‰ï¼Œé€‰æ‹©æ’åºçš„æ—¶é—´å¤æ‚åº¦æ˜¯å¤šå°‘ ï¼Ÿ æ— è®ºæ˜¯æ­£åºè¿˜æ˜¯é€†åºï¼Œé€‰æ‹©æ’åºéƒ½ä¼šéå† n2 / 2 æ¬¡æ¥æ’åºï¼Œæ‰€ä»¥ï¼Œæœ€ä½³ã€æœ€å·®å’Œå¹³å‡çš„å¤æ‚åº¦æ˜¯ä¸€æ ·çš„ã€‚ æœ€ä½³æƒ…å†µï¼šT(n) = O(n2)ã€‚ æœ€å·®æƒ…å†µï¼šT(n) = O(n2)ã€‚ å¹³å‡æƒ…å†µï¼šT(n) = O(n2)ã€‚ åŠ¨ç”» 3.4 å½’å¹¶æ’åºï¼ˆMerge Sortï¼‰æ€æƒ³ æ’åºä¸€ä¸ªæ•°ç»„ï¼Œæˆ‘ä»¬å…ˆæŠŠæ•°ç»„ä»ä¸­é—´åˆ†æˆå‰åä¸¤éƒ¨åˆ†ï¼Œç„¶åå¯¹å‰åä¸¤éƒ¨åˆ†åˆ†åˆ«æ’åºï¼Œå†å°†æ’å¥½åºçš„ä¸¤éƒ¨åˆ†åˆå¹¶åœ¨ä¸€èµ·ï¼Œè¿™æ ·æ•´ä¸ªæ•°ç»„å°±éƒ½æœ‰åºäº†ã€‚ å½’å¹¶æ’åºé‡‡ç”¨çš„æ˜¯åˆ†æ²»æ€æƒ³ã€‚ åˆ†æ²»ï¼Œé¡¾åæ€ä¹‰ï¼Œå°±æ˜¯åˆ†è€Œæ²»ä¹‹ï¼Œå°†ä¸€ä¸ªå¤§é—®é¢˜åˆ†è§£æˆå°çš„å­é—®é¢˜æ¥è§£å†³ã€‚å°çš„å­é—®é¢˜è§£å†³äº†ï¼Œå¤§é—®é¢˜ä¹Ÿå°±è§£å†³äº†ã€‚ æ³¨ï¼šx &gt;&gt; 1 æ˜¯ä½è¿ç®—ä¸­çš„å³ç§»è¿ç®—ï¼Œè¡¨ç¤ºå³ç§»ä¸€ä½ï¼Œç­‰åŒäº x é™¤ä»¥ 2 å†å–æ•´ï¼Œå³ x &gt;&gt; 1 === Math.floor(x / 2) ã€‚ å®ç° const mergeSort = arr =&gt; { const len = arr.length; if (len &lt; 2) { return arr; } let middle = Math.floor(len / 2), left = arr.slice(0, middle), right = arr.slice(middle); return merge(mergeSort(left), mergeSort(right)); }; const merge = (left, right) =&gt; { const result = []; while (left.length &amp;&amp; right.length) { if (left[0] &lt;= right[0]) { result.push(left.shift()); } else { result.push(right.shift()); } } while (left.length) result.push(left.shift()); while (right.length) result.push(right.shift()); return result; };æµ‹è¯• // æµ‹è¯• const arr = [3, 44, 38, 5, 47, 15, 36, 26, 27, 2, 46, 4, 19, 50, 48]; console.time(&apos;å½’å¹¶æ’åºè€—æ—¶&apos;); console.log(&apos;arr :&apos;, mergeSort(arr)); console.timeEnd(&apos;å½’å¹¶æ’åºè€—æ—¶&apos;); // arr : [2, 3, 4, 5, 15, 19, 26, 27, 36, 38, 44, 46, 47, 48, 50] // å½’å¹¶æ’åºè€—æ—¶: 0.739990234375msåˆ†æ ç¬¬ä¸€ï¼Œå½’å¹¶æ’åºæ˜¯åŸåœ°æ’åºç®—æ³•å— ï¼Ÿ è¿™æ˜¯å› ä¸ºå½’å¹¶æ’åºçš„åˆå¹¶å‡½æ•°ï¼Œåœ¨åˆå¹¶ä¸¤ä¸ªæœ‰åºæ•°ç»„ä¸ºä¸€ä¸ªæœ‰åºæ•°ç»„æ—¶ï¼Œéœ€è¦å€ŸåŠ©é¢å¤–çš„å­˜å‚¨ç©ºé—´ã€‚ å®é™…ä¸Šï¼Œå°½ç®¡æ¯æ¬¡åˆå¹¶æ“ä½œéƒ½éœ€è¦ç”³è¯·é¢å¤–çš„å†…å­˜ç©ºé—´ï¼Œä½†åœ¨åˆå¹¶å®Œæˆä¹‹åï¼Œä¸´æ—¶å¼€è¾Ÿçš„å†…å­˜ç©ºé—´å°±è¢«é‡Šæ”¾æ‰äº†ã€‚åœ¨ä»»æ„æ—¶åˆ»ï¼ŒCPU åªä¼šæœ‰ä¸€ä¸ªå‡½æ•°åœ¨æ‰§è¡Œï¼Œä¹Ÿå°±åªä¼šæœ‰ä¸€ä¸ªä¸´æ—¶çš„å†…å­˜ç©ºé—´åœ¨ä½¿ç”¨ã€‚ä¸´æ—¶å†…å­˜ç©ºé—´æœ€å¤§ä¹Ÿä¸ä¼šè¶…è¿‡ n ä¸ªæ•°æ®çš„å¤§å°ï¼Œæ‰€ä»¥ç©ºé—´å¤æ‚åº¦æ˜¯ O(n)ã€‚ æ‰€ä»¥ï¼Œå½’å¹¶æ’åºä¸æ˜¯åŸåœ°æ’åºç®—æ³•ã€‚ ç¬¬äºŒï¼Œå½’å¹¶æ’åºæ˜¯ç¨³å®šçš„æ’åºç®—æ³•å— ï¼Ÿ merge æ–¹æ³•é‡Œé¢çš„ left[0] &lt;= right[0] ï¼Œä¿è¯äº†å€¼ç›¸åŒçš„å…ƒç´ ï¼Œåœ¨åˆå¹¶å‰åçš„å…ˆåé¡ºåºä¸å˜ã€‚å½’å¹¶æ’åºæ˜¯ç¨³å®šçš„æ’åºæ–¹æ³•ã€‚ ç¬¬ä¸‰ï¼Œå½’å¹¶æ’åºçš„æ—¶é—´å¤æ‚åº¦æ˜¯å¤šå°‘ ï¼Ÿ ä»æ•ˆç‡ä¸Šçœ‹ï¼Œå½’å¹¶æ’åºå¯ç®—æ˜¯æ’åºç®—æ³•ä¸­çš„ä½¼ä½¼è€…ã€‚å‡è®¾æ•°ç»„é•¿åº¦ä¸º nï¼Œé‚£ä¹ˆæ‹†åˆ†æ•°ç»„å…±éœ€ logn æ­¥ï¼Œåˆæ¯æ­¥éƒ½æ˜¯ä¸€ä¸ªæ™®é€šçš„åˆå¹¶å­æ•°ç»„çš„è¿‡ç¨‹ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º O(n)ï¼Œæ•…å…¶ç»¼åˆæ—¶é—´å¤æ‚åº¦ä¸º O(n log n)ã€‚ æœ€ä½³æƒ…å†µï¼šT(n) = O(n log n)ã€‚ æœ€å·®æƒ…å†µï¼šT(n) = O(n log n)ã€‚ å¹³å‡æƒ…å†µï¼šT(n) = O(n log n)ã€‚ åŠ¨ç”» 3.5 å¿«é€Ÿæ’åº ï¼ˆQuick Sortï¼‰å¿«é€Ÿæ’åºçš„ç‰¹ç‚¹å°±æ˜¯å¿«ï¼Œè€Œä¸”æ•ˆç‡é«˜ï¼å®ƒæ˜¯å¤„ç†å¤§æ•°æ®æœ€å¿«çš„æ’åºç®—æ³•ä¹‹ä¸€ã€‚ æ€æƒ³ å…ˆæ‰¾åˆ°ä¸€ä¸ªåŸºå‡†ç‚¹ï¼ˆä¸€èˆ¬æŒ‡æ•°ç»„çš„ä¸­éƒ¨ï¼‰ï¼Œç„¶åæ•°ç»„è¢«è¯¥åŸºå‡†ç‚¹åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼Œä¾æ¬¡ä¸è¯¥åŸºå‡†ç‚¹æ•°æ®æ¯”è¾ƒï¼Œå¦‚æœæ¯”å®ƒå°ï¼Œæ”¾å·¦è¾¹ï¼›åä¹‹ï¼Œæ”¾å³è¾¹ã€‚ å·¦å³åˆ†åˆ«ç”¨ä¸€ä¸ªç©ºæ•°ç»„å»å­˜å‚¨æ¯”è¾ƒåçš„æ•°æ®ã€‚ æœ€åé€’å½’æ‰§è¡Œä¸Šè¿°æ“ä½œï¼Œç›´åˆ°æ•°ç»„é•¿åº¦ &lt;= 1; ç‰¹ç‚¹ï¼šå¿«é€Ÿï¼Œå¸¸ç”¨ã€‚ ç¼ºç‚¹ï¼šéœ€è¦å¦å¤–å£°æ˜ä¸¤ä¸ªæ•°ç»„ï¼Œæµªè´¹äº†å†…å­˜ç©ºé—´èµ„æºã€‚ å®ç° æ–¹æ³•ä¸€ï¼š const quickSort1 = arr =&gt; { if (arr.length &lt;= 1) { return arr; } const midIndex = Math.floor(arr.length / 2); const valArr = arr.splice(midIndex, 1); const midIndexVal = valArr[0]; const left = []; const right = []; for (let i = 0; i &lt; arr.length; i++) { if (arr[i] &lt; midIndexVal) { left.push(arr[i]); } else { right.push(arr[i]); } } return quickSort1(left).concat(midIndexVal, quickSort1(right)); }; const array2 = [5, 4, 3, 2, 1]; console.log(&apos;quickSort1 &apos;, quickSort1(array2));æ–¹æ³•äºŒï¼š const quickSort = (arr, left, right) =&gt; { let len = arr.length, partitionIndex; left = typeof left != &apos;number&apos; ? 0 : left; right = typeof right != &apos;number&apos; ? len - 1 : right; if (left &lt; right) { partitionIndex = partition(arr, left, right); quickSort(arr, left, partitionIndex - 1); quickSort(arr, partitionIndex + 1, right); } return arr; }; const partition = (arr, left, right) =&gt; { let pivot = left, index = pivot + 1; for (let i = index; i &lt;= right; i++) { if (arr[i] &lt; arr[pivot]) { swap(arr, i, index); index++; } } swap(arr, pivot, index - 1); return index - 1; }; const swap = (arr, i, j) =&gt; { let temp = arr[i]; arr[i] = arr[j]; arr[j] = temp; };æµ‹è¯• // æµ‹è¯• const array = [5, 4, 3, 2, 1]; console.log(&apos;åŸå§‹array:&apos;, array); const newArr = quickSort(array); console.log(&apos;newArr:&apos;, newArr); // åŸå§‹ array: [5, 4, 3, 2, 1] // newArr: [1, 4, 3, 2, 5]åˆ†æ ç¬¬ä¸€ï¼Œå¿«é€Ÿæ’åºæ˜¯åŸåœ°æ’åºç®—æ³•å— ï¼Ÿ å› ä¸º partition() å‡½æ•°è¿›è¡Œåˆ†åŒºæ—¶ï¼Œä¸éœ€è¦å¾ˆå¤šé¢å¤–çš„å†…å­˜ç©ºé—´ï¼Œæ‰€ä»¥å¿«æ’æ˜¯åŸåœ°æ’åºç®—æ³•ã€‚ ç¬¬äºŒï¼Œå¿«é€Ÿæ’åºæ˜¯ç¨³å®šçš„æ’åºç®—æ³•å— ï¼Ÿ å’Œé€‰æ‹©æ’åºç›¸ä¼¼ï¼Œå¿«é€Ÿæ’åºæ¯æ¬¡äº¤æ¢çš„å…ƒç´ éƒ½æœ‰å¯èƒ½ä¸æ˜¯ç›¸é‚»çš„ï¼Œå› æ­¤å®ƒæœ‰å¯èƒ½æ‰“ç ´åŸæ¥å€¼ä¸ºç›¸åŒçš„å…ƒç´ ä¹‹é—´çš„é¡ºåºã€‚å› æ­¤ï¼Œå¿«é€Ÿæ’åºå¹¶ä¸ç¨³å®šã€‚ ç¬¬ä¸‰ï¼Œå¿«é€Ÿæ’åºçš„æ—¶é—´å¤æ‚åº¦æ˜¯å¤šå°‘ ï¼Ÿ æç«¯çš„ä¾‹å­ï¼šå¦‚æœæ•°ç»„ä¸­çš„æ•°æ®åŸæ¥å·²ç»æ˜¯æœ‰åºçš„äº†ï¼Œæ¯”å¦‚ 1ï¼Œ3ï¼Œ5ï¼Œ6ï¼Œ8ã€‚å¦‚æœæˆ‘ä»¬æ¯æ¬¡é€‰æ‹©æœ€åä¸€ä¸ªå…ƒç´ ä½œä¸º pivotï¼Œé‚£æ¯æ¬¡åˆ†åŒºå¾—åˆ°çš„ä¸¤ä¸ªåŒºé—´éƒ½æ˜¯ä¸å‡ç­‰çš„ã€‚æˆ‘ä»¬éœ€è¦è¿›è¡Œå¤§çº¦ n æ¬¡åˆ†åŒºæ“ä½œï¼Œæ‰èƒ½å®Œæˆå¿«æ’çš„æ•´ä¸ªè¿‡ç¨‹ã€‚æ¯æ¬¡åˆ†åŒºæˆ‘ä»¬å¹³å‡è¦æ‰«æå¤§çº¦ n / 2 ä¸ªå…ƒç´ ï¼Œè¿™ç§æƒ…å†µä¸‹ï¼Œå¿«æ’çš„æ—¶é—´å¤æ‚åº¦å°±ä» O(nlogn) é€€åŒ–æˆäº† O(n2)ã€‚ æœ€ä½³æƒ…å†µï¼šT(n) = O(n log n)ã€‚ æœ€å·®æƒ…å†µï¼šT(n) = O(n2)ã€‚ å¹³å‡æƒ…å†µï¼šT(n) = O(n log n)ã€‚ åŠ¨ç”» è§£ç­”å¼€ç¯‡é—®é¢˜ å¿«æ’å’Œå½’å¹¶ç”¨çš„éƒ½æ˜¯åˆ†æ²»æ€æƒ³ï¼Œé€’æ¨å…¬å¼å’Œé€’å½’ä»£ç ä¹Ÿéå¸¸ç›¸ä¼¼ï¼Œé‚£å®ƒä»¬çš„åŒºåˆ«åœ¨å“ªé‡Œå‘¢ ï¼Ÿ å¯ä»¥å‘ç°ï¼š å½’å¹¶æ’åºçš„å¤„ç†è¿‡ç¨‹æ˜¯ç”±ä¸‹è€Œä¸Šçš„ï¼Œå…ˆå¤„ç†å­é—®é¢˜ï¼Œç„¶åå†åˆå¹¶ã€‚ è€Œå¿«æ’æ­£å¥½ç›¸åï¼Œå®ƒçš„å¤„ç†è¿‡ç¨‹æ˜¯ç”±ä¸Šè€Œä¸‹çš„ï¼Œå…ˆåˆ†åŒºï¼Œç„¶åå†å¤„ç†å­é—®é¢˜ã€‚ å½’å¹¶æ’åºè™½ç„¶æ˜¯ç¨³å®šçš„ã€æ—¶é—´å¤æ‚åº¦ä¸º O(nlogn) çš„æ’åºç®—æ³•ï¼Œä½†æ˜¯å®ƒæ˜¯éåŸåœ°æ’åºç®—æ³•ã€‚ å½’å¹¶ä¹‹æ‰€ä»¥æ˜¯éåŸåœ°æ’åºç®—æ³•ï¼Œä¸»è¦åŸå› æ˜¯åˆå¹¶å‡½æ•°æ— æ³•åœ¨åŸåœ°æ‰§è¡Œã€‚ å¿«é€Ÿæ’åºé€šè¿‡è®¾è®¡å·§å¦™çš„åŸåœ°åˆ†åŒºå‡½æ•°ï¼Œå¯ä»¥å®ç°åŸåœ°æ’åºï¼Œè§£å†³äº†å½’å¹¶æ’åºå ç”¨å¤ªå¤šå†…å­˜çš„é—®é¢˜ã€‚ 3.6 å¸Œå°”æ’åºï¼ˆShell Sortï¼‰æ€æƒ³ å…ˆå°†æ•´ä¸ªå¾…æ’åºçš„è®°å½•åºåˆ—åˆ†å‰²æˆä¸ºè‹¥å¹²å­åºåˆ—ã€‚ åˆ†åˆ«è¿›è¡Œç›´æ¥æ’å…¥æ’åºã€‚ å¾…æ•´ä¸ªåºåˆ—ä¸­çš„è®°å½•åŸºæœ¬æœ‰åºæ—¶ï¼Œå†å¯¹å…¨ä½“è®°å½•è¿›è¡Œä¾æ¬¡ç›´æ¥æ’å…¥æ’åºã€‚ è¿‡ç¨‹ ä¸¾ä¸ªæ˜“äºç†è§£çš„ä¾‹å­ï¼š[35, 33, 42, 10, 14, 19, 27, 44]ï¼Œæˆ‘ä»¬é‡‡å–é—´éš” 4ã€‚åˆ›å»ºä¸€ä¸ªä½äº 4 ä¸ªä½ç½®é—´éš”çš„æ‰€æœ‰å€¼çš„è™šæ‹Ÿå­åˆ—è¡¨ã€‚ä¸‹é¢è¿™äº›å€¼æ˜¯ { 35, 14 }ï¼Œ{ 33, 19 }ï¼Œ{ 42, 27 } å’Œ { 10, 44 }ã€‚ æˆ‘ä»¬æ¯”è¾ƒæ¯ä¸ªå­åˆ—è¡¨ä¸­çš„å€¼ï¼Œå¹¶åœ¨åŸå§‹æ•°ç»„ä¸­äº¤æ¢å®ƒä»¬ï¼ˆå¦‚æœéœ€è¦ï¼‰ã€‚å®Œæˆæ­¤æ­¥éª¤åï¼Œæ–°æ•°ç»„åº”å¦‚ä¸‹æ‰€ç¤ºã€‚ ç„¶åï¼Œæˆ‘ä»¬é‡‡ç”¨ 2 çš„é—´éš”ï¼Œè¿™ä¸ªé—´éš™äº§ç”Ÿä¸¤ä¸ªå­åˆ—è¡¨ï¼š{ 14, 27, 35, 42 }ï¼Œ { 19, 10, 33, 44 }ã€‚ æˆ‘ä»¬æ¯”è¾ƒå¹¶äº¤æ¢åŸå§‹æ•°ç»„ä¸­çš„å€¼ï¼ˆå¦‚æœéœ€è¦ï¼‰ã€‚å®Œæˆæ­¤æ­¥éª¤åï¼Œæ•°ç»„å˜æˆï¼š[14, 10, 27, 19, 35, 33, 42, 44]ï¼Œå›¾å¦‚ä¸‹æ‰€ç¤ºï¼Œ10 ä¸ 19 çš„ä½ç½®äº’æ¢ä¸€ä¸‹ã€‚ æœ€åï¼Œæˆ‘ä»¬ä½¿ç”¨å€¼é—´éš” 1 å¯¹æ•°ç»„çš„å…¶ä½™éƒ¨åˆ†è¿›è¡Œæ’åºï¼ŒShell sort ä½¿ç”¨æ’å…¥æ’åºå¯¹æ•°ç»„è¿›è¡Œæ’åºã€‚ å®ç° const shellSort = arr =&gt; { let len = arr.length, temp, gap = 1; console.time(&apos;å¸Œå°”æ’åºè€—æ—¶&apos;); while (gap &lt; len / 3) { gap = gap * 3 + 1; } for (gap; gap &gt; 0; gap = Math.floor(gap / 3)) { for (let i = gap; i &lt; len; i++) { temp = arr[i]; let j = i - gap; for (; j &gt;= 0 &amp;&amp; arr[j] &gt; temp; j -= gap) { arr[j + gap] = arr[j]; } arr[j + gap] = temp; console.log(&apos;arr :&apos;, arr); } } console.timeEnd(&apos;å¸Œå°”æ’åºè€—æ—¶&apos;); return arr; };æµ‹è¯• // æµ‹è¯• const array = [35, 33, 42, 10, 14, 19, 27, 44]; console.log(&apos;åŸå§‹array:&apos;, array); const newArr = shellSort(array); console.log(&apos;newArr:&apos;, newArr); // åŸå§‹ array: [35, 33, 42, 10, 14, 19, 27, 44] // arr : [14, 33, 42, 10, 35, 19, 27, 44] // arr : [14, 19, 42, 10, 35, 33, 27, 44] // arr : [14, 19, 27, 10, 35, 33, 42, 44] // arr : [14, 19, 27, 10, 35, 33, 42, 44] // arr : [14, 19, 27, 10, 35, 33, 42, 44] // arr : [14, 19, 27, 10, 35, 33, 42, 44] // arr : [10, 14, 19, 27, 35, 33, 42, 44] // arr : [10, 14, 19, 27, 35, 33, 42, 44] // arr : [10, 14, 19, 27, 33, 35, 42, 44] // arr : [10, 14, 19, 27, 33, 35, 42, 44] // arr : [10, 14, 19, 27, 33, 35, 42, 44] // å¸Œå°”æ’åºè€—æ—¶: 3.592041015625ms // newArr: [10, 14, 19, 27, 33, 35, 42, 44]åˆ†æ ç¬¬ä¸€ï¼Œå¸Œå°”æ’åºæ˜¯åŸåœ°æ’åºç®—æ³•å— ï¼Ÿ å¸Œå°”æ’åºè¿‡ç¨‹ä¸­ï¼Œåªæ¶‰åŠç›¸é‚»æ•°æ®çš„äº¤æ¢æ“ä½œï¼Œåªéœ€è¦å¸¸é‡çº§çš„ä¸´æ—¶ç©ºé—´ï¼Œç©ºé—´å¤æ‚åº¦ä¸º O(1) ã€‚æ‰€ä»¥ï¼Œå¸Œå°”æ’åºæ˜¯åŸåœ°æ’åºç®—æ³•ã€‚ ç¬¬äºŒï¼Œå¸Œå°”æ’åºæ˜¯ç¨³å®šçš„æ’åºç®—æ³•å— ï¼Ÿ æˆ‘ä»¬çŸ¥é“ï¼Œå•æ¬¡ç›´æ¥æ’å…¥æ’åºæ˜¯ç¨³å®šçš„ï¼Œå®ƒä¸ä¼šæ”¹å˜ç›¸åŒå…ƒç´ ä¹‹é—´çš„ç›¸å¯¹é¡ºåºï¼Œä½†åœ¨å¤šæ¬¡ä¸åŒçš„æ’å…¥æ’åºè¿‡ç¨‹ä¸­ï¼Œç›¸åŒçš„å…ƒç´ å¯èƒ½åœ¨å„è‡ªçš„æ’å…¥æ’åºä¸­ç§»åŠ¨ï¼Œå¯èƒ½å¯¼è‡´ç›¸åŒå…ƒç´ ç›¸å¯¹é¡ºåºå‘ç”Ÿå˜åŒ–ã€‚ å› æ­¤ï¼Œå¸Œå°”æ’åºä¸ç¨³å®šã€‚ ç¬¬ä¸‰ï¼Œå¸Œå°”æ’åºçš„æ—¶é—´å¤æ‚åº¦æ˜¯å¤šå°‘ ï¼Ÿ æœ€ä½³æƒ…å†µï¼šT(n) = O(n log n)ã€‚ æœ€å·®æƒ…å†µï¼šT(n) = O(n log2 n)ã€‚ å¹³å‡æƒ…å†µï¼šT(n) = O(n log2 n)ã€‚ åŠ¨ç”» 3.7 å †æ’åºï¼ˆHeap Sortï¼‰å †çš„å®šä¹‰ å †å…¶å®æ˜¯ä¸€ç§ç‰¹æ®Šçš„æ ‘ã€‚åªè¦æ»¡è¶³è¿™ä¸¤ç‚¹ï¼Œå®ƒå°±æ˜¯ä¸€ä¸ªå †ã€‚ å †æ˜¯ä¸€ä¸ªå®Œå…¨äºŒå‰æ ‘ã€‚ å®Œå…¨äºŒå‰æ ‘ï¼šé™¤äº†æœ€åä¸€å±‚ï¼Œå…¶ä»–å±‚çš„èŠ‚ç‚¹ä¸ªæ•°éƒ½æ˜¯æ»¡çš„ï¼Œæœ€åä¸€å±‚çš„èŠ‚ç‚¹éƒ½é å·¦æ’åˆ—ã€‚ å †ä¸­æ¯ä¸€ä¸ªèŠ‚ç‚¹çš„å€¼éƒ½å¿…é¡»å¤§äºç­‰äºï¼ˆæˆ–å°äºç­‰äºï¼‰å…¶å­æ ‘ä¸­æ¯ä¸ªèŠ‚ç‚¹çš„å€¼ã€‚ ä¹Ÿå¯ä»¥è¯´ï¼šå †ä¸­æ¯ä¸ªèŠ‚ç‚¹çš„å€¼éƒ½å¤§äºç­‰äºï¼ˆæˆ–è€…å°äºç­‰äºï¼‰å…¶å·¦å³å­èŠ‚ç‚¹çš„å€¼ã€‚è¿™ä¸¤ç§è¡¨è¿°æ˜¯ç­‰ä»·çš„ã€‚ å¯¹äºæ¯ä¸ªèŠ‚ç‚¹çš„å€¼éƒ½å¤§äºç­‰äºå­æ ‘ä¸­æ¯ä¸ªèŠ‚ç‚¹å€¼çš„å †ï¼Œæˆ‘ä»¬å«ä½œå¤§é¡¶å †ã€‚ å¯¹äºæ¯ä¸ªèŠ‚ç‚¹çš„å€¼éƒ½å°äºç­‰äºå­æ ‘ä¸­æ¯ä¸ªèŠ‚ç‚¹å€¼çš„å †ï¼Œæˆ‘ä»¬å«ä½œå°é¡¶å †ã€‚ å…¶ä¸­å›¾ 1 å’Œ å›¾ 2 æ˜¯å¤§é¡¶å †ï¼Œå›¾ 3 æ˜¯å°é¡¶å †ï¼Œå›¾ 4 ä¸æ˜¯å †ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œä»å›¾ä¸­è¿˜å¯ä»¥çœ‹å‡ºæ¥ï¼Œå¯¹äºåŒä¸€ç»„æ•°æ®ï¼Œæˆ‘ä»¬å¯ä»¥æ„å»ºå¤šç§ä¸åŒå½¢æ€çš„å †ã€‚ æ€æƒ³ å°†åˆå§‹å¾…æ’åºå…³é”®å­—åºåˆ— (R1, R2 â€¦. Rn) æ„å»ºæˆå¤§é¡¶å †ï¼Œæ­¤å †ä¸ºåˆå§‹çš„æ— åºåŒºï¼› å°†å †é¡¶å…ƒç´  R[1] ä¸æœ€åä¸€ä¸ªå…ƒç´  R[n] äº¤æ¢ï¼Œæ­¤æ—¶å¾—åˆ°æ–°çš„æ— åºåŒº (R1, R2, â€¦.. Rn-1) å’Œæ–°çš„æœ‰åºåŒº (Rn) ï¼Œä¸”æ»¡è¶³ R[1, 2 â€¦ n-1] &lt;= R[n]ã€‚ ç”±äºäº¤æ¢åæ–°çš„å †é¡¶ R[1] å¯èƒ½è¿åå †çš„æ€§è´¨ï¼Œå› æ­¤éœ€è¦å¯¹å½“å‰æ— åºåŒº (R1, R2 â€¦â€¦ Rn-1) è°ƒæ•´ä¸ºæ–°å †ï¼Œç„¶åå†æ¬¡å°† R[1] ä¸æ— åºåŒºæœ€åä¸€ä¸ªå…ƒç´ äº¤æ¢ï¼Œå¾—åˆ°æ–°çš„æ— åºåŒº (R1, R2 â€¦. Rn-2) å’Œæ–°çš„æœ‰åºåŒº (Rn-1, Rn)ã€‚ä¸æ–­é‡å¤æ­¤è¿‡ç¨‹ï¼Œç›´åˆ°æœ‰åºåŒºçš„å…ƒç´ ä¸ªæ•°ä¸º n - 1ï¼Œåˆ™æ•´ä¸ªæ’åºè¿‡ç¨‹å®Œæˆã€‚ å®ç° const heapSort = array =&gt; { console.time(&apos;å †æ’åºè€—æ—¶&apos;); for (let i = Math.floor(array.length / 2 - 1); i &gt;= 0; i--) { heapify(array, i, array.length); } for (let i = Math.floor(array.length - 1); i &gt; 0; i--) { swap(array, 0, i); heapify(array, 0, i); } console.timeEnd(&apos;å †æ’åºè€—æ—¶&apos;); return array; }; const swap = (array, i, j) =&gt; { let temp = array[i]; array[i] = array[j]; array[j] = temp; }; const heapify = (array, i, length) =&gt; { let temp = array[i]; for (let j = 2 * i + 1; j &lt; length; j = 2 * j + 1) { temp = array[i]; if (j + 1 &lt; length &amp;&amp; array[j] &lt; array[j + 1]) { j++; } if (temp &lt; array[j]) { swap(array, i, j); i = j; } else { break; } } };æµ‹è¯• const array = [4, 6, 8, 5, 9, 1, 2, 5, 3, 2]; console.log(&apos;åŸå§‹array:&apos;, array); const newArr = heapSort(array); console.log(&apos;newArr:&apos;, newArr); // åŸå§‹ array: [4, 6, 8, 5, 9, 1, 2, 5, 3, 2] // å †æ’åºè€—æ—¶: 0.15087890625ms // newArr: [1, 2, 2, 3, 4, 5, 5, 6, 8, 9]åˆ†æ ç¬¬ä¸€ï¼Œå †æ’åºæ˜¯åŸåœ°æ’åºç®—æ³•å— ï¼Ÿ æ•´ä¸ªå †æ’åºçš„è¿‡ç¨‹ï¼Œéƒ½åªéœ€è¦æä¸ªåˆ«ä¸´æ—¶å­˜å‚¨ç©ºé—´ï¼Œæ‰€ä»¥å †æ’åºæ˜¯åŸåœ°æ’åºç®—æ³•ã€‚ ç¬¬äºŒï¼Œå †æ’åºæ˜¯ç¨³å®šçš„æ’åºç®—æ³•å— ï¼Ÿ å› ä¸ºåœ¨æ’åºçš„è¿‡ç¨‹ï¼Œå­˜åœ¨å°†å †çš„æœ€åä¸€ä¸ªèŠ‚ç‚¹è·Ÿå †é¡¶èŠ‚ç‚¹äº’æ¢çš„æ“ä½œï¼Œæ‰€ä»¥å°±æœ‰å¯èƒ½æ”¹å˜å€¼ç›¸åŒæ•°æ®çš„åŸå§‹ç›¸å¯¹é¡ºåºã€‚ æ‰€ä»¥ï¼Œå †æ’åºæ˜¯ä¸ç¨³å®šçš„æ’åºç®—æ³•ã€‚ ç¬¬ä¸‰ï¼Œå †æ’åºçš„æ—¶é—´å¤æ‚åº¦æ˜¯å¤šå°‘ ï¼Ÿ å †æ’åºåŒ…æ‹¬å»ºå †å’Œæ’åºä¸¤ä¸ªæ“ä½œï¼Œå»ºå †è¿‡ç¨‹çš„æ—¶é—´å¤æ‚åº¦æ˜¯ O(n)ï¼Œæ’åºè¿‡ç¨‹çš„æ—¶é—´å¤æ‚åº¦æ˜¯ O(nlogn)ï¼Œæ‰€ä»¥ï¼Œå †æ’åºæ•´ä½“çš„æ—¶é—´å¤æ‚åº¦æ˜¯ O(nlogn)ã€‚ æœ€ä½³æƒ…å†µï¼šT(n) = O(n log n)ã€‚ æœ€å·®æƒ…å†µï¼šT(n) = O(n log n)ã€‚ å¹³å‡æƒ…å†µï¼šT(n) = O(n log n)ã€‚ åŠ¨ç”» 3.8 æ¡¶æ’åºï¼ˆBucket Sortï¼‰æ¡¶æ’åºæ˜¯è®¡æ•°æ’åºçš„å‡çº§ç‰ˆï¼Œä¹Ÿé‡‡ç”¨äº†åˆ†æ²»æ€æƒ³ã€‚ æ€æƒ³ å°†è¦æ’åºçš„æ•°æ®åˆ†åˆ°æœ‰é™æ•°é‡çš„å‡ ä¸ªæœ‰åºçš„æ¡¶é‡Œã€‚ æ¯ä¸ªæ¡¶é‡Œçš„æ•°æ®å†å•ç‹¬è¿›è¡Œæ’åºï¼ˆä¸€èˆ¬ç”¨æ’å…¥æ’åºæˆ–è€…å¿«é€Ÿæ’åºï¼‰ã€‚ æ¡¶å†…æ’å®Œåºä¹‹åï¼Œå†æŠŠæ¯ä¸ªæ¡¶é‡Œçš„æ•°æ®æŒ‰ç…§é¡ºåºä¾æ¬¡å–å‡ºï¼Œç»„æˆçš„åºåˆ—å°±æ˜¯æœ‰åºçš„äº†ã€‚ æ¯”å¦‚ï¼š æ¡¶æ’åºåˆ©ç”¨äº†å‡½æ•°çš„æ˜ å°„å…³ç³»ï¼Œé«˜æ•ˆä¸å¦çš„å…³é”®å°±åœ¨äºè¿™ä¸ªæ˜ å°„å‡½æ•°çš„ç¡®å®šã€‚ ä¸ºäº†ä½¿æ¡¶æ’åºæ›´åŠ é«˜æ•ˆï¼Œæˆ‘ä»¬éœ€è¦åšåˆ°è¿™ä¸¤ç‚¹ï¼š åœ¨é¢å¤–ç©ºé—´å……è¶³çš„æƒ…å†µä¸‹ï¼Œå°½é‡å¢å¤§æ¡¶çš„æ•°é‡ã€‚ ä½¿ç”¨çš„æ˜ å°„å‡½æ•°èƒ½å¤Ÿå°†è¾“å…¥çš„ N ä¸ªæ•°æ®å‡åŒ€çš„åˆ†é…åˆ° K ä¸ªæ¡¶ä¸­ã€‚ æ¡¶æ’åºçš„æ ¸å¿ƒï¼šå°±åœ¨äºæ€ä¹ˆæŠŠå…ƒç´ å¹³å‡åˆ†é…åˆ°æ¯ä¸ªæ¡¶é‡Œï¼Œåˆç†çš„åˆ†é…å°†å¤§å¤§æé«˜æ’åºçš„æ•ˆç‡ã€‚ å®ç° const bucketSort = (array, bucketSize) =&gt; { if (array.length === 0) { return array; } console.time(&apos;æ¡¶æ’åºè€—æ—¶&apos;); let i = 0; let minValue = array[0]; let maxValue = array[0]; for (i = 1; i &lt; array.length; i++) { if (array[i] &lt; minValue) { minValue = array[i]; } else if (array[i] &gt; maxValue) { maxValue = array[i]; } } const DEFAULT_BUCKET_SIZE = 5; bucketSize = bucketSize || DEFAULT_BUCKET_SIZE; const bucketCount = Math.floor((maxValue - minValue) / bucketSize) + 1; const buckets = new Array(bucketCount); for (i = 0; i &lt; buckets.length; i++) { buckets[i] = []; } for (i = 0; i &lt; array.length; i++) { buckets[Math.floor((array[i] - minValue) / bucketSize)].push(array[i]); } array.length = 0; for (i = 0; i &lt; buckets.length; i++) { quickSort(buckets[i]); for (var j = 0; j &lt; buckets[i].length; j++) { array.push(buckets[i][j]); } } console.timeEnd(&apos;æ¡¶æ’åºè€—æ—¶&apos;); return array; }; const quickSort = (arr, left, right) =&gt; { let len = arr.length, partitionIndex; left = typeof left != &apos;number&apos; ? 0 : left; right = typeof right != &apos;number&apos; ? len - 1 : right; if (left &lt; right) { partitionIndex = partition(arr, left, right); quickSort(arr, left, partitionIndex - 1); quickSort(arr, partitionIndex + 1, right); } return arr; }; const partition = (arr, left, right) =&gt; { let pivot = left, index = pivot + 1; for (let i = index; i &lt;= right; i++) { if (arr[i] &lt; arr[pivot]) { swap(arr, i, index); index++; } } swap(arr, pivot, index - 1); return index - 1; }; const swap = (arr, i, j) =&gt; { let temp = arr[i]; arr[i] = arr[j]; arr[j] = temp; };æµ‹è¯• const array = [4, 6, 8, 5, 9, 1, 2, 5, 3, 2]; console.log(&apos;åŸå§‹array:&apos;, array); const newArr = bucketSort(array); console.log(&apos;newArr:&apos;, newArr); // åŸå§‹ array: [4, 6, 8, 5, 9, 1, 2, 5, 3, 2] // å †æ’åºè€—æ—¶: 0.133056640625ms // newArr: [1, 2, 2, 3, 4, 5, 5, 6, 8, 9]åˆ†æ ç¬¬ä¸€ï¼Œæ¡¶æ’åºæ˜¯åŸåœ°æ’åºç®—æ³•å— ï¼Ÿ å› ä¸ºæ¡¶æ’åºçš„ç©ºé—´å¤æ‚åº¦ï¼Œä¹Ÿå³å†…å­˜æ¶ˆè€—ä¸º O(n)ï¼Œæ‰€ä»¥ä¸æ˜¯åŸåœ°æ’åºç®—æ³•ã€‚ ç¬¬äºŒï¼Œæ¡¶æ’åºæ˜¯ç¨³å®šçš„æ’åºç®—æ³•å— ï¼Ÿ å–å†³äºæ¯ä¸ªæ¡¶çš„æ’åºæ–¹å¼ï¼Œæ¯”å¦‚ï¼šå¿«æ’å°±ä¸ç¨³å®šï¼Œå½’å¹¶å°±ç¨³å®šã€‚ ç¬¬ä¸‰ï¼Œæ¡¶æ’åºçš„æ—¶é—´å¤æ‚åº¦æ˜¯å¤šå°‘ ï¼Ÿ å› ä¸ºæ¡¶å†…éƒ¨çš„æ’åºå¯ä»¥æœ‰å¤šç§æ–¹æ³•ï¼Œæ˜¯ä¼šå¯¹æ¡¶æ’åºçš„æ—¶é—´å¤æ‚åº¦äº§ç”Ÿå¾ˆé‡å¤§çš„å½±å“ã€‚æ‰€ä»¥ï¼Œæ¡¶æ’åºçš„æ—¶é—´å¤æ‚åº¦å¯ä»¥æ˜¯å¤šç§æƒ…å†µçš„ã€‚ æ€»çš„æ¥è¯´ æœ€ä½³æƒ…å†µï¼šå½“è¾“å…¥çš„æ•°æ®å¯ä»¥å‡åŒ€çš„åˆ†é…åˆ°æ¯ä¸€ä¸ªæ¡¶ä¸­ã€‚ æœ€å·®æƒ…å†µï¼šå½“è¾“å…¥çš„æ•°æ®è¢«åˆ†é…åˆ°äº†åŒä¸€ä¸ªæ¡¶ä¸­ã€‚ ä»¥ä¸‹æ˜¯æ¡¶çš„å†…éƒ¨æ’åºä¸ºå¿«é€Ÿæ’åºçš„æƒ…å†µï¼š å¦‚æœè¦æ’åºçš„æ•°æ®æœ‰ n ä¸ªï¼Œæˆ‘ä»¬æŠŠå®ƒä»¬å‡åŒ€åœ°åˆ’åˆ†åˆ° m ä¸ªæ¡¶å†…ï¼Œæ¯ä¸ªæ¡¶é‡Œå°±æœ‰ k =n / m ä¸ªå…ƒç´ ã€‚æ¯ä¸ªæ¡¶å†…éƒ¨ä½¿ç”¨å¿«é€Ÿæ’åºï¼Œæ—¶é—´å¤æ‚åº¦ä¸º O(k * logk)ã€‚ m ä¸ªæ¡¶æ’åºçš„æ—¶é—´å¤æ‚åº¦å°±æ˜¯ O(m * k * logk)ï¼Œå› ä¸º k = n / mï¼Œæ‰€ä»¥æ•´ä¸ªæ¡¶æ’åºçš„æ—¶é—´å¤æ‚åº¦å°±æ˜¯ O(n*log(n/m))ã€‚ å½“æ¡¶çš„ä¸ªæ•° m æ¥è¿‘æ•°æ®ä¸ªæ•° n æ—¶ï¼Œlog(n/m) å°±æ˜¯ä¸€ä¸ªéå¸¸å°çš„å¸¸é‡ï¼Œè¿™ä¸ªæ—¶å€™æ¡¶æ’åºçš„æ—¶é—´å¤æ‚åº¦æ¥è¿‘ O(n)ã€‚ æœ€ä½³æƒ…å†µï¼šT(n) = O(n)ã€‚å½“è¾“å…¥çš„æ•°æ®å¯ä»¥å‡åŒ€çš„åˆ†é…åˆ°æ¯ä¸€ä¸ªæ¡¶ä¸­ã€‚ æœ€å·®æƒ…å†µï¼šT(n) = O(nlogn)ã€‚å½“è¾“å…¥çš„æ•°æ®è¢«åˆ†é…åˆ°äº†åŒä¸€ä¸ªæ¡¶ä¸­ã€‚ å¹³å‡æƒ…å†µï¼šT(n) = O(n)ã€‚ æ¡¶æ’åºæœ€å¥½æƒ…å†µä¸‹ä½¿ç”¨çº¿æ€§æ—¶é—´ O(n)ï¼Œæ¡¶æ’åºçš„æ—¶é—´å¤æ‚åº¦ï¼Œå–å†³ä¸å¯¹å„ä¸ªæ¡¶ä¹‹é—´æ•°æ®è¿›è¡Œæ’åºçš„æ—¶é—´å¤æ‚åº¦ï¼Œå› ä¸ºå…¶å®ƒéƒ¨åˆ†çš„æ—¶é—´å¤æ‚åº¦éƒ½ä¸º O(n)ã€‚ å¾ˆæ˜¾ç„¶ï¼Œæ¡¶åˆ’åˆ†çš„è¶Šå°ï¼Œå„ä¸ªæ¡¶ä¹‹é—´çš„æ•°æ®è¶Šå°‘ï¼Œæ’åºæ‰€ç”¨çš„æ—¶é—´ä¹Ÿä¼šè¶Šå°‘ã€‚ä½†ç›¸åº”çš„ç©ºé—´æ¶ˆè€—å°±ä¼šå¢å¤§ã€‚ é€‚ç”¨åœºæ™¯ æ¡¶æ’åºæ¯”è¾ƒé€‚åˆç”¨åœ¨å¤–éƒ¨æ’åºä¸­ã€‚ å¤–éƒ¨æ’åºå°±æ˜¯æ•°æ®å­˜å‚¨åœ¨å¤–éƒ¨ç£ç›˜ä¸”æ•°æ®é‡å¤§ï¼Œä½†å†…å­˜æœ‰é™ï¼Œæ— æ³•å°†æ•´ä¸ªæ•°æ®å…¨éƒ¨åŠ è½½åˆ°å†…å­˜ä¸­ã€‚ åŠ¨ç”» 3.9 è®¡æ•°æ’åºï¼ˆCounting Sortï¼‰æ€æƒ³ æ‰¾å‡ºå¾…æ’åºçš„æ•°ç»„ä¸­æœ€å¤§å’Œæœ€å°çš„å…ƒç´ ã€‚ ç»Ÿè®¡æ•°ç»„ä¸­æ¯ä¸ªå€¼ä¸º i çš„å…ƒç´ å‡ºç°çš„æ¬¡æ•°ï¼Œå­˜å…¥æ–°æ•°ç»„ countArr çš„ç¬¬ i é¡¹ã€‚ å¯¹æ‰€æœ‰çš„è®¡æ•°ç´¯åŠ ï¼ˆä» countArr ä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ å¼€å§‹ï¼Œæ¯ä¸€é¡¹å’Œå‰ä¸€é¡¹ç›¸åŠ ï¼‰ã€‚ åå‘å¡«å……ç›®æ ‡æ•°ç»„ï¼šå°†æ¯ä¸ªå…ƒç´  i æ”¾åœ¨æ–°æ•°ç»„çš„ç¬¬ countArr[i] é¡¹ï¼Œæ¯æ”¾ä¸€ä¸ªå…ƒç´ å°±å°† countArr[i] å‡å» 1 ã€‚ å…³é”®åœ¨äºç†è§£æœ€ååå‘å¡«å……æ—¶çš„æ“ä½œã€‚ ä½¿ç”¨æ¡ä»¶ åªèƒ½ç”¨åœ¨æ•°æ®èŒƒå›´ä¸å¤§çš„åœºæ™¯ä¸­ï¼Œè‹¥æ•°æ®èŒƒå›´ k æ¯”è¦æ’åºçš„æ•°æ® n å¤§å¾ˆå¤šï¼Œå°±ä¸é€‚åˆç”¨è®¡æ•°æ’åºã€‚ è®¡æ•°æ’åºåªèƒ½ç»™éè´Ÿæ•´æ•°æ’åºï¼Œå…¶ä»–ç±»å‹éœ€è¦åœ¨ä¸æ”¹å˜ç›¸å¯¹å¤§å°æƒ…å†µä¸‹ï¼Œè½¬æ¢ä¸ºéè´Ÿæ•´æ•°ã€‚ æ¯”å¦‚å¦‚æœè€ƒè¯•æˆç»©ç²¾ç¡®åˆ°å°æ•°åä¸€ä½ï¼Œå°±éœ€è¦å°†æ‰€æœ‰åˆ†æ•°ä¹˜ä»¥ 10ï¼Œè½¬æ¢ä¸ºæ•´æ•°ã€‚ å®ç° æ–¹æ³•ä¸€ï¼š const countingSort = array =&gt; { let len = array.length, result = [], countArr = [], min = (max = array[0]); console.time(&apos;è®¡æ•°æ’åºè€—æ—¶&apos;); for (let i = 0; i &lt; len; i++) { // è·å–æœ€å°ï¼Œæœ€å¤§ å€¼ min = min &lt;= array[i] ? min : array[i]; max = max &gt;= array[i] ? max : array[i]; countArr[array[i]] = countArr[array[i]] ? countArr[array[i]] + 1 : 1; } console.log(&apos;countArr :&apos;, countArr); // ä»æœ€å°å€¼ -&gt; æœ€å¤§å€¼,å°†è®¡æ•°é€é¡¹ç›¸åŠ  for (let j = min; j &lt; max; j++) { countArr[j + 1] = (countArr[j + 1] || 0) + (countArr[j] || 0); } console.log(&apos;countArr 2:&apos;, countArr); // countArr ä¸­,ä¸‹æ ‡ä¸º array æ•°å€¼ï¼Œæ•°æ®ä¸º array æ•°å€¼å‡ºç°æ¬¡æ•°ï¼›åå‘å¡«å……æ•°æ®è¿›å…¥ result æ•°æ® for (let k = len - 1; k &gt;= 0; k--) { // result[ä½ç½®] = array æ•°æ® result[countArr[array[k]] - 1] = array[k]; // å‡å°‘ countArr æ•°ç»„ä¸­ä¿å­˜çš„è®¡æ•° countArr[array[k]]--; // console.log(&quot;array[k]:&quot;, array[k], &apos;countArr[array[k]] :&apos;, countArr[array[k]],) console.log(&apos;result:&apos;, result); } console.timeEnd(&apos;è®¡æ•°æ’åºè€—æ—¶&apos;); return result; };æµ‹è¯• const array = [2, 2, 3, 8, 7, 1, 2, 2, 2, 7, 3, 9, 8, 2, 1, 4, 2, 4, 6, 9, 2]; console.log(&apos;åŸå§‹ array: &apos;, array); const newArr = countingSort(array); console.log(&apos;newArr: &apos;, newArr); æ–¹æ³•äºŒï¼š const countingSort2 = (arr, maxValue) =&gt; { console.time(&apos;è®¡æ•°æ’åºè€—æ—¶&apos;); maxValue = maxValue || arr.length; let bucket = new Array(maxValue + 1), sortedIndex = 0; (arrLen = arr.length), (bucketLen = maxValue + 1); for (let i = 0; i &lt; arrLen; i++) { if (!bucket[arr[i]]) { bucket[arr[i]] = 0; } bucket[arr[i]]++; } for (let j = 0; j &lt; bucketLen; j++) { while (bucket[j] &gt; 0) { arr[sortedIndex++] = j; bucket[j]--; } } console.timeEnd(&apos;è®¡æ•°æ’åºè€—æ—¶&apos;); return arr; };æµ‹è¯• const array2 = [2, 2, 3, 8, 7, 1, 2, 2, 2, 7, 3, 9, 8, 2, 1, 4, 2, 4, 6, 9, 2]; console.log(&apos;åŸå§‹ array2: &apos;, array2); const newArr2 = countingSort2(array2, 21); console.log(&apos;newArr2: &apos;, newArr2);ä¾‹å­ å¯ä»¥è®¤ä¸ºï¼Œè®¡æ•°æ’åºå…¶å®æ˜¯æ¡¶æ’åºçš„ä¸€ç§ç‰¹æ®Šæƒ…å†µã€‚ å½“è¦æ’åºçš„ n ä¸ªæ•°æ®ï¼Œæ‰€å¤„çš„èŒƒå›´å¹¶ä¸å¤§çš„æ—¶å€™ï¼Œæ¯”å¦‚æœ€å¤§å€¼æ˜¯ kï¼Œæˆ‘ä»¬å°±å¯ä»¥æŠŠæ•°æ®åˆ’åˆ†æˆ k ä¸ªæ¡¶ã€‚æ¯ä¸ªæ¡¶å†…çš„æ•°æ®å€¼éƒ½æ˜¯ç›¸åŒçš„ï¼Œçœæ‰äº†æ¡¶å†…æ’åºçš„æ—¶é—´ã€‚ æˆ‘ä»¬éƒ½ç»å†è¿‡é«˜è€ƒï¼Œé«˜è€ƒæŸ¥åˆ†æ•°ç³»ç»Ÿä½ è¿˜è®°å¾—å—ï¼Ÿæˆ‘ä»¬æŸ¥åˆ†æ•°çš„æ—¶å€™ï¼Œç³»ç»Ÿä¼šæ˜¾ç¤ºæˆ‘ä»¬çš„æˆç»©ä»¥åŠæ‰€åœ¨çœçš„æ’åã€‚å¦‚æœä½ æ‰€åœ¨çš„çœæœ‰ 50 ä¸‡è€ƒç”Ÿï¼Œå¦‚ä½•é€šè¿‡æˆç»©å¿«é€Ÿæ’åºå¾—å‡ºåæ¬¡å‘¢ï¼Ÿ è€ƒç”Ÿçš„æ»¡åˆ†æ˜¯ 900 åˆ†ï¼Œæœ€å°æ˜¯ 0 åˆ†ï¼Œè¿™ä¸ªæ•°æ®çš„èŒƒå›´å¾ˆå°ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥åˆ†æˆ 901 ä¸ªæ¡¶ï¼Œå¯¹åº”åˆ†æ•°ä» 0 åˆ†åˆ° 900 åˆ†ã€‚ æ ¹æ®è€ƒç”Ÿçš„æˆç»©ï¼Œæˆ‘ä»¬å°†è¿™ 50 ä¸‡è€ƒç”Ÿåˆ’åˆ†åˆ°è¿™ 901 ä¸ªæ¡¶é‡Œã€‚æ¡¶å†…çš„æ•°æ®éƒ½æ˜¯åˆ†æ•°ç›¸åŒçš„è€ƒç”Ÿï¼Œæ‰€ä»¥å¹¶ä¸éœ€è¦å†è¿›è¡Œæ’åºã€‚ æˆ‘ä»¬åªéœ€è¦ä¾æ¬¡æ‰«ææ¯ä¸ªæ¡¶ï¼Œå°†æ¡¶å†…çš„è€ƒç”Ÿä¾æ¬¡è¾“å‡ºåˆ°ä¸€ä¸ªæ•°ç»„ä¸­ï¼Œå°±å®ç°äº† 50 ä¸‡è€ƒç”Ÿçš„æ’åºã€‚ å› ä¸ºåªæ¶‰åŠæ‰«æéå†æ“ä½œï¼Œæ‰€ä»¥æ—¶é—´å¤æ‚åº¦æ˜¯ O(n)ã€‚ åˆ†æ ç¬¬ä¸€ï¼Œè®¡æ•°æ’åºæ˜¯åŸåœ°æ’åºç®—æ³•å— ï¼Ÿ å› ä¸ºè®¡æ•°æ’åºçš„ç©ºé—´å¤æ‚åº¦ä¸º O(k)ï¼Œk æ¡¶çš„ä¸ªæ•°ï¼Œæ‰€ä»¥ä¸æ˜¯åŸåœ°æ’åºç®—æ³•ã€‚ ç¬¬äºŒï¼Œè®¡æ•°æ’åºæ˜¯ç¨³å®šçš„æ’åºç®—æ³•å— ï¼Ÿ è®¡æ•°æ’åºä¸æ”¹å˜ç›¸åŒå…ƒç´ ä¹‹é—´åŸæœ¬ç›¸å¯¹çš„é¡ºåºï¼Œå› æ­¤å®ƒæ˜¯ç¨³å®šçš„æ’åºç®—æ³•ã€‚ ç¬¬ä¸‰ï¼Œè®¡æ•°æ’åºçš„æ—¶é—´å¤æ‚åº¦æ˜¯å¤šå°‘ ï¼Ÿ æœ€ä½³æƒ…å†µï¼šT(n) = O(n + k) æœ€å·®æƒ…å†µï¼šT(n) = O(n + k) å¹³å‡æƒ…å†µï¼šT(n) = O(n + k) k æ˜¯å¾…æ’åºåˆ—æœ€å¤§å€¼ã€‚ åŠ¨ç”» 3.10 åŸºæ•°æ’åºï¼ˆRadix Sortï¼‰æ€æƒ³ åŸºæ•°æ’åºæ˜¯ä¸€ç§éæ¯”è¾ƒå‹æ•´æ•°æ’åºç®—æ³•ï¼Œå…¶åŸç†æ˜¯å°†æ•´æ•°æŒ‰ä½æ•°åˆ‡å‰²æˆä¸åŒçš„æ•°å­—ï¼Œç„¶åæŒ‰æ¯ä¸ªä½æ•°åˆ†åˆ«æ¯”è¾ƒã€‚ ä¾‹å­ å‡è®¾æˆ‘ä»¬æœ‰ 10 ä¸‡ä¸ªæ‰‹æœºå·ç ï¼Œå¸Œæœ›å°†è¿™ 10 ä¸‡ä¸ªæ‰‹æœºå·ç ä»å°åˆ°å¤§æ’åºï¼Œä½ æœ‰ä»€ä¹ˆæ¯”è¾ƒå¿«é€Ÿçš„æ’åºæ–¹æ³•å‘¢ ï¼Ÿ è¿™ä¸ªé—®é¢˜é‡Œæœ‰è¿™æ ·çš„è§„å¾‹ï¼šå‡è®¾è¦æ¯”è¾ƒä¸¤ä¸ªæ‰‹æœºå·ç  aï¼Œb çš„å¤§å°ï¼Œå¦‚æœåœ¨å‰é¢å‡ ä½ä¸­ï¼Œa æ‰‹æœºå·ç å·²ç»æ¯” b æ‰‹æœºå·ç å¤§äº†ï¼Œé‚£åé¢çš„å‡ ä½å°±ä¸ç”¨çœ‹äº†ã€‚æ‰€ä»¥æ˜¯åŸºäºä½æ¥æ¯”è¾ƒçš„ã€‚ æ¡¶æ’åºã€è®¡æ•°æ’åºèƒ½æ´¾ä¸Šç”¨åœºå— ï¼Ÿæ‰‹æœºå·ç æœ‰ 11 ä½ï¼ŒèŒƒå›´å¤ªå¤§ï¼Œæ˜¾ç„¶ä¸é€‚åˆç”¨è¿™ä¸¤ç§æ’åºç®—æ³•ã€‚é’ˆå¯¹è¿™ä¸ªæ’åºé—®é¢˜ï¼Œæœ‰æ²¡æœ‰æ—¶é—´å¤æ‚åº¦æ˜¯ O(n) çš„ç®—æ³•å‘¢ ï¼Ÿ æœ‰ï¼Œå°±æ˜¯åŸºæ•°æ’åºã€‚ ä½¿ç”¨æ¡ä»¶ è¦æ±‚æ•°æ®å¯ä»¥åˆ†å‰²ç‹¬ç«‹çš„ä½æ¥æ¯”è¾ƒï¼› ä½ä¹‹é—´ç”±é€’è¿›å…³ç³»ï¼Œå¦‚æœ a æ•°æ®çš„é«˜ä½æ¯” b æ•°æ®å¤§ï¼Œé‚£ä¹ˆå‰©ä¸‹çš„åœ°ä½å°±ä¸ç”¨æ¯”è¾ƒäº†ï¼› æ¯ä¸€ä½çš„æ•°æ®èŒƒå›´ä¸èƒ½å¤ªå¤§ï¼Œè¦å¯ä»¥ç”¨çº¿æ€§æ’åºï¼Œå¦åˆ™åŸºæ•°æ’åºçš„æ—¶é—´å¤æ‚åº¦æ— æ³•åšåˆ° O(n)ã€‚ æ–¹æ¡ˆ æŒ‰ç…§ä¼˜å…ˆä»é«˜ä½æˆ–ä½ä½æ¥æ’åºæœ‰ä¸¤ç§å®ç°æ–¹æ¡ˆ: MSDï¼šç”±é«˜ä½ä¸ºåŸºåº•ï¼Œå…ˆæŒ‰ k1 æ’åºåˆ†ç»„ï¼ŒåŒä¸€ç»„ä¸­è®°å½•, å…³é”®ç  k1 ç›¸ç­‰ï¼Œå†å¯¹å„ç»„æŒ‰ k2 æ’åºåˆ†æˆå­ç»„, ä¹‹åï¼Œå¯¹åé¢çš„å…³é”®ç ç»§ç»­è¿™æ ·çš„æ’åºåˆ†ç»„ï¼Œç›´åˆ°æŒ‰æœ€æ¬¡ä½å…³é”®ç  kd å¯¹å„å­ç»„æ’åºåï¼Œå†å°†å„ç»„è¿æ¥èµ·æ¥ï¼Œä¾¿å¾—åˆ°ä¸€ä¸ªæœ‰åºåºåˆ—ã€‚MSD æ–¹å¼é€‚ç”¨äºä½æ•°å¤šçš„åºåˆ—ã€‚ LSDï¼šç”±ä½ä½ä¸ºåŸºåº•ï¼Œå…ˆä» kd å¼€å§‹æ’åºï¼Œå†å¯¹ kd - 1 è¿›è¡Œæ’åºï¼Œä¾æ¬¡é‡å¤ï¼Œç›´åˆ°å¯¹ k1 æ’åºåä¾¿å¾—åˆ°ä¸€ä¸ªæœ‰åºåºåˆ—ã€‚LSD æ–¹å¼é€‚ç”¨äºä½æ•°å°‘çš„åºåˆ—ã€‚ å®ç° const radixSort = (array, max) =&gt; { console.time(&apos;è®¡æ•°æ’åºè€—æ—¶&apos;); const buckets = []; let unit = 10, base = 1; for (let i = 0; i &lt; max; i++, base *= 10, unit *= 10) { for (let j = 0; j &lt; array.length; j++) { let index = ~~((array[j] % unit) / base); if (buckets[index] == null) { buckets[index] = []; } buckets[index].push(array[j]); } let pos = 0, value; for (let j = 0, length = buckets.length; j &lt; length; j++) { if (buckets[j] != null) { while ((value = buckets[j].shift()) != null) { array[pos++] = value; } } } } console.timeEnd(&apos;è®¡æ•°æ’åºè€—æ—¶&apos;); return array; };æµ‹è¯• const array = [3, 44, 38, 5, 47, 15, 36, 26, 27, 2, 46, 4, 19, 50, 48]; console.log(&apos;åŸå§‹array:&apos;, array); const newArr = radixSort(array, 2); console.log(&apos;newArr:&apos;, newArr); // åŸå§‹ array: [3, 44, 38, 5, 47, 15, 36, 26, 27, 2, 46, 4, 19, 50, 48] // å †æ’åºè€—æ—¶: 0.064208984375ms // newArr: [2, 3, 4, 5, 15, 19, 26, 27, 36, 38, 44, 46, 47, 48, 50]åˆ†æ ç¬¬ä¸€ï¼ŒåŸºæ•°æ’åºæ˜¯åŸåœ°æ’åºç®—æ³•å— ï¼Ÿ å› ä¸ºè®¡æ•°æ’åºçš„ç©ºé—´å¤æ‚åº¦ä¸º O(n + k)ï¼Œæ‰€ä»¥ä¸æ˜¯åŸåœ°æ’åºç®—æ³•ã€‚ ç¬¬äºŒï¼ŒåŸºæ•°æ’åºæ˜¯ç¨³å®šçš„æ’åºç®—æ³•å— ï¼Ÿ åŸºæ•°æ’åºä¸æ”¹å˜ç›¸åŒå…ƒç´ ä¹‹é—´çš„ç›¸å¯¹é¡ºåºï¼Œå› æ­¤å®ƒæ˜¯ç¨³å®šçš„æ’åºç®—æ³•ã€‚ ç¬¬ä¸‰ï¼ŒåŸºæ•°æ’åºçš„æ—¶é—´å¤æ‚åº¦æ˜¯å¤šå°‘ ï¼Ÿ æœ€ä½³æƒ…å†µï¼šT(n) = O(n * k) æœ€å·®æƒ…å†µï¼šT(n) = O(n * k) å¹³å‡æƒ…å†µï¼šT(n) = O(n * k) å…¶ä¸­ï¼Œk æ˜¯å¾…æ’åºåˆ—æœ€å¤§å€¼ã€‚ åŠ¨ç”» LSD åŸºæ•°æ’åºåŠ¨å›¾æ¼”ç¤ºï¼š 4. å¤æ‚åº¦å¯¹æ¯”åå¤§ç»å…¸æ’åºç®—æ³•çš„ æ—¶é—´å¤æ‚åº¦ä¸ç©ºé—´å¤æ‚åº¦ æ¯”è¾ƒã€‚ åç§° å¹³å‡ æœ€å¥½ æœ€å ç©ºé—´ ç¨³å®šæ€§ æ’åºæ–¹å¼ å†’æ³¡æ’åº O(n2) O(n) O(n2) O(1) Yes In-place æ’å…¥æ’åº O(n2) O(n) O(n2) O(1) Yes In-place é€‰æ‹©æ’åº O(n2) O(n2) O(n2) O(1) No In-place å½’å¹¶æ’åº O(n log n) O(n log n) O(n log n) O(n) Yes Out-place å¿«é€Ÿæ’åº O(n log n) O(n log n) O(n2) O(logn) No In-place å¸Œå°”æ’åº O(n log n) O(n log2 n) O(n log2 n) O(1) No In-place å †æ’åº O(n log n) O(n log n) O(n log n) O(1) No In-place æ¡¶æ’åº O(n + k) O(n + k) O(n2) O(n + k) Yes Out-place è®¡æ•°æ’åº O(n + k) O(n + k) O(n + k) O(k) Yes Out-place åŸºæ•°æ’åº O(n * k) O(n * k) O(n * k) O(n + k) Yes Out-place åè¯è§£é‡Šï¼š nï¼šæ•°æ®è§„æ¨¡ï¼› kï¼šæ¡¶çš„ä¸ªæ•°ï¼› In-place: å ç”¨å¸¸æ•°å†…å­˜ï¼Œä¸å ç”¨é¢å¤–å†…å­˜ï¼› Out-place: å ç”¨é¢å¤–å†…å­˜ã€‚ 5. ç®—æ³•å¯è§†åŒ–å·¥å…· ç®—æ³•å¯è§†åŒ–å·¥å…· algorithm-visualizer ç®—æ³•å¯è§†åŒ–å·¥å…· algorithm-visualizer æ˜¯ä¸€ä¸ªäº¤äº’å¼çš„åœ¨çº¿å¹³å°ï¼Œå¯ä»¥ä»ä»£ç ä¸­å¯è§†åŒ–ç®—æ³•ï¼Œè¿˜å¯ä»¥çœ‹åˆ°ä»£ç æ‰§è¡Œçš„è¿‡ç¨‹ã€‚æ—¨åœ¨é€šè¿‡äº¤äº’å¼å¯è§†åŒ–çš„æ‰§è¡Œæ¥æ­ç¤ºç®—æ³•èƒŒåçš„æœºåˆ¶ã€‚ æ•ˆæœå¦‚ä¸‹å›¾ï¼š ç®—æ³•å¯è§†åŒ–åŠ¨ç”»ç½‘ç«™ https://visualgo.net/en æ•ˆæœå¦‚ä¸‹å›¾ï¼š ç®—æ³•å¯è§†åŒ–åŠ¨ç”»ç½‘ç«™ www.ee.ryerson.ca æ•ˆæœå¦‚ä¸‹å›¾ï¼š illustrated-algorithms å˜é‡å’Œæ“ä½œçš„å¯è§†åŒ–è¡¨ç¤ºå¢å¼ºäº†æ§åˆ¶æµå’Œå®é™…æºä»£ç ã€‚æ‚¨å¯ä»¥å¿«é€Ÿå‰è¿›å’Œåé€€æ‰§è¡Œï¼Œä»¥å¯†åˆ‡è§‚å¯Ÿç®—æ³•çš„å·¥ä½œæ–¹å¼ã€‚ æ•ˆæœå¦‚ä¸‹å›¾ï¼š 6. ç³»åˆ—æ–‡ç« JavaScript æ•°æ®ç»“æ„ä¸ç®—æ³•ä¹‹ç¾ ç³»åˆ—æ–‡ç« ï¼Œæš‚æ—¶å†™äº†å¦‚ä¸‹çš„ 11 ç¯‡æ–‡ç« ï¼Œåç»­è¿˜æœ‰æƒ³å†™çš„å†…å®¹ï¼Œå†è¡¥å……ã€‚ æ‰€å†™çš„å†…å®¹åªæ˜¯æ•°æ®ç»“æ„ä¸ç®—æ³•å†…å®¹çš„å†°å±±ä¸€è§’ï¼Œå¦‚æœä½ è¿˜æƒ³å­¦æ›´å¤šçš„å†…å®¹ï¼Œæ¨èå­¦ä¹ ç‹äº‰è€å¸ˆçš„ æ•°æ®ç»“æ„ä¸ç®—æ³•ä¹‹ç¾ã€‚ ä»æ—¶é—´å’Œç©ºé—´å¤æ‚åº¦ã€åŸºç¡€æ•°æ®ç»“æ„åˆ°æ’åºç®—æ³•ï¼Œæ–‡ç« çš„å†…å®¹æœ‰ä¸€å®šçš„å…³è”æ€§ï¼Œæ‰€ä»¥é˜…è¯»æ—¶æ¨èæŒ‰é¡ºåºæ¥é˜…è¯»ï¼Œæ•ˆæœæ›´ä½³ã€‚ 1. JavaScript æ•°æ®ç»“æ„ä¸ç®—æ³•ä¹‹ç¾ - æ—¶é—´å’Œç©ºé—´å¤æ‚åº¦ 2. JavaScript æ•°æ®ç»“æ„ä¸ç®—æ³•ä¹‹ç¾ - çº¿æ€§è¡¨ï¼ˆæ•°ç»„ã€é˜Ÿåˆ—ã€æ ˆã€é“¾è¡¨ï¼‰ 3. JavaScript æ•°æ®ç»“æ„ä¸ç®—æ³•ä¹‹ç¾ - å®ç°ä¸€ä¸ªå‰ç«¯è·¯ç”±ï¼Œå¦‚ä½•å®ç°æµè§ˆå™¨çš„å‰è¿›ä¸åé€€ ï¼Ÿ 4. JavaScript æ•°æ®ç»“æ„ä¸ç®—æ³•ä¹‹ç¾ - æ ˆå†…å­˜ä¸å †å†…å­˜ ã€æµ…æ‹·è´ä¸æ·±æ‹·è´ 5. JavaScript æ•°æ®ç»“æ„ä¸ç®—æ³•ä¹‹ç¾ - é€’å½’ 6. JavaScript æ•°æ®ç»“æ„ä¸ç®—æ³•ä¹‹ç¾ - éçº¿æ€§è¡¨ï¼ˆæ ‘ã€å †ï¼‰ 7. JavaScript æ•°æ®ç»“æ„ä¸ç®—æ³•ä¹‹ç¾ - å†’æ³¡æ’åºã€é€‰æ‹©æ’åºã€æ’å…¥æ’åº 8. JavaScript æ•°æ®ç»“æ„ä¸ç®—æ³•ä¹‹ç¾ - å½’å¹¶æ’åºã€å¿«é€Ÿæ’åºã€å¸Œå°”æ’åºã€å †æ’åº 9. JavaScript æ•°æ®ç»“æ„ä¸ç®—æ³•ä¹‹ç¾ - è®¡æ•°æ’åºã€æ¡¶æ’åºã€åŸºæ•°æ’åº 10. JavaScript æ•°æ®ç»“æ„ä¸ç®—æ³•ä¹‹ç¾ - åå¤§ç»å…¸æ’åºç®—æ³•æ±‡æ€» 11. JavaScript æ•°æ®ç»“æ„ä¸ç®—æ³•ä¹‹ç¾ - å¼ºçƒˆæ¨è GitHub ä¸Šå€¼å¾—å‰ç«¯å­¦ä¹ çš„æ•°æ®ç»“æ„ä¸ç®—æ³•é¡¹ç›® å¦‚æœæœ‰é”™è¯¯æˆ–è€…ä¸ä¸¥è°¨çš„åœ°æ–¹ï¼Œè¯·åŠ¡å¿…ç»™äºˆæŒ‡æ­£ï¼Œä»¥å…è¯¯äººå­å¼Ÿï¼Œååˆ†æ„Ÿè°¢ã€‚ Source","categories":[{"name":"æ•°æ®ç»“æ„ä¸ç®—æ³•","slug":"æ•°æ®ç»“æ„ä¸ç®—æ³•","permalink":"http://blog.kobingo.xyz/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/"}],"tags":[{"name":"æ•°æ®ç»“æ„ä¸ç®—æ³•","slug":"æ•°æ®ç»“æ„ä¸ç®—æ³•","permalink":"http://blog.kobingo.xyz/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/"}]},{"title":"nginxåˆè¯•","slug":"others-nginx-basic","date":"2019-05-25T18:35:46.000Z","updated":"2021-01-19T06:41:41.222Z","comments":true,"path":"others-nginx-basic/","link":"","permalink":"http://blog.kobingo.xyz/others-nginx-basic/","excerpt":"â€œNginx æ˜¯ä¸€æ¬¾è½»é‡çº§çš„ HTTP æœåŠ¡å™¨ï¼Œé‡‡ç”¨äº‹ä»¶é©±åŠ¨çš„å¼‚æ­¥éé˜»å¡å¤„ç†æ–¹å¼æ¡†æ¶ï¼Œè¿™è®©å…¶å…·æœ‰æå¥½çš„ IO æ€§èƒ½ï¼Œæ—¶å¸¸ç”¨äºæœåŠ¡ç«¯çš„åå‘ä»£ç†å’Œè´Ÿè½½å‡è¡¡ã€‚â€ ä½œä¸ºå‰ç«¯å¼€å‘ï¼Œå³ä½¿æ²¡ç”¨è¿‡ Nginxï¼Œä½†ä¸€å®šå¬è¯´è¿‡ Nginxã€‚ä¸Šè¿°è¿™æ®µæè¿°ï¼ŒåŸºæœ¬æ„æˆäº†æ‰€æœ‰äººå¯¹ Nginx çš„ç¬¬ä¸€å°è±¡ã€‚ç¬”è€…å¯¹äº Nginx ä¹Ÿæ˜¯æ…•åå·²ä¹…ï¼Œç›´åˆ°ç°åœ¨æ‰å¼€å§‹è¯•å°è¿™é“å¤§é¤ï¼Œæœ¬æ–‡æ˜¯è®°å½•ç¬”è€…å­¦ä¹ å¹¶ä½¿ç”¨ Nginx çš„è¿‡ç¨‹ï¼Œé€šè¿‡æ­¤æ–‡å¯ä»¥ç®€å•å…¥é—¨å¹¶æ­å»ºä¸€å¥— Nginx æœåŠ¡ã€‚","text":"â€œNginx æ˜¯ä¸€æ¬¾è½»é‡çº§çš„ HTTP æœåŠ¡å™¨ï¼Œé‡‡ç”¨äº‹ä»¶é©±åŠ¨çš„å¼‚æ­¥éé˜»å¡å¤„ç†æ–¹å¼æ¡†æ¶ï¼Œè¿™è®©å…¶å…·æœ‰æå¥½çš„ IO æ€§èƒ½ï¼Œæ—¶å¸¸ç”¨äºæœåŠ¡ç«¯çš„åå‘ä»£ç†å’Œè´Ÿè½½å‡è¡¡ã€‚â€ ä½œä¸ºå‰ç«¯å¼€å‘ï¼Œå³ä½¿æ²¡ç”¨è¿‡ Nginxï¼Œä½†ä¸€å®šå¬è¯´è¿‡ Nginxã€‚ä¸Šè¿°è¿™æ®µæè¿°ï¼ŒåŸºæœ¬æ„æˆäº†æ‰€æœ‰äººå¯¹ Nginx çš„ç¬¬ä¸€å°è±¡ã€‚ç¬”è€…å¯¹äº Nginx ä¹Ÿæ˜¯æ…•åå·²ä¹…ï¼Œç›´åˆ°ç°åœ¨æ‰å¼€å§‹è¯•å°è¿™é“å¤§é¤ï¼Œæœ¬æ–‡æ˜¯è®°å½•ç¬”è€…å­¦ä¹ å¹¶ä½¿ç”¨ Nginx çš„è¿‡ç¨‹ï¼Œé€šè¿‡æ­¤æ–‡å¯ä»¥ç®€å•å…¥é—¨å¹¶æ­å»ºä¸€å¥— Nginx æœåŠ¡ã€‚ ä¸€ã€åˆè¯• Nginxæƒ³è¦æˆä¸ºä¸€ä¸ªåˆæ ¼çš„å¤§å‰ç«¯ï¼Œåˆæ€èƒ½ä¸ä¼š Nginx å‘¢ï¼Ÿ Nginx ä» 2004 å¹´å‘å±•è‡³ä»Šï¼Œä»ä¸€å¼€å§‹çš„å®Œå–„æ²‰æ·€ï¼Œå†è¿…é€Ÿè¹¿å‡ä¸ºâ€œç½‘çº¢â€ï¼Œå†åˆ°ç°åœ¨å æœåŠ¡å™¨å¸‚åœºä¸­æ¥è¿‘ 1/3 ä»½é¢ï¼Œæˆä¸ºäº’è”ç½‘ç½‘ç«™æ­å»ºçš„å¿…é€‰æŠ€æœ¯ä¹‹ä¸€ã€‚å‘å±•å¯è°“ç›¸å½“è¿…é€Ÿï¼Œä¹‹æ‰€ä»¥èƒ½å–å¾—å¦‚æ­¤æˆå°±ï¼Œä¸»è¦è¿˜æ˜¯ç›¸å¯¹äºå…¶ä»– HTTP æœåŠ¡å™¨å…¶æœ‰ç€ä¸å¯æ›¿ä»£çš„ä¼˜åŠ¿ï¼š æ”¯æŒæµ·é‡é«˜å¹¶å‘ï¼šé‡‡ç”¨ IO å¤šè·¯å¤ç”¨ epollã€‚å®˜æ–¹æµ‹è¯• Nginx èƒ½å¤Ÿæ”¯æŒ 5 ä¸‡å¹¶å‘é“¾æ¥ï¼Œå®é™…ç”Ÿäº§ç¯å¢ƒä¸­å¯ä»¥æ”¯æ’‘ 2-4 ä¸‡å¹¶å‘è¿æ¥æ•°ã€‚ å†…å­˜æ¶ˆè€—å°‘ï¼šåœ¨ä¸»æµçš„æœåŠ¡å™¨ä¸­ Nginx ç›®å‰æ˜¯å†…å­˜æ¶ˆè€—æœ€å°çš„äº†ï¼Œæ¯”å¦‚æˆ‘ä»¬ç”¨ Nginx+PHPï¼Œåœ¨ 3 ä¸‡å¹¶å‘é“¾æ¥ä¸‹ï¼Œå¼€å¯ 10 ä¸ª Nginx è¿›ç¨‹æ¶ˆè€— 150M å†…å­˜ã€‚ å…è´¹ä½¿ç”¨å¯ä»¥å•†ä¸šåŒ–ï¼šNginx ä¸ºå¼€æºè½¯ä»¶ï¼Œé‡‡ç”¨çš„æ˜¯ 2-clause BSD-like åè®®ï¼Œå¯ä»¥å…è´¹ä½¿ç”¨ï¼Œå¹¶ä¸”å¯ä»¥ç”¨äºå•†ä¸šã€‚ é…ç½®æ–‡ä»¶ç®€å•ï¼šç½‘ç»œå’Œç¨‹åºé…ç½®é€šä¿—æ˜“æ‡‚ï¼Œå³ä½¿éä¸“ä¸šè¿ç»´ä¹Ÿèƒ½çœ‹æ‡‚ã€‚ è€Œå¯¹äºå‰ç«¯ç«¥é‹ï¼Œåœ¨å®é™…å·¥ä½œä¸Šï¼Œæ›´å€¾å‘äºç”¨ Nodejs æ¥æ­å»ºæœåŠ¡å™¨ï¼Œè¿›è€Œå®ç°ä¸€äº›éœ€æ±‚ï¼Œå¯¹ Nginx æœ‰å¤©ç„¶çš„ç–è¿œæ„Ÿã€‚çš„ç¡®ï¼ŒNginx ä¸­çš„ç»å¤§éƒ¨åˆ†åŠŸèƒ½ï¼Œå¦‚æœå•çº¯çš„ä½¿ç”¨ Node.js ä¹Ÿå¯ä»¥æ»¡è¶³å’Œå®ç°ã€‚ä½†å®é™…ä¸Šï¼ŒNginx å’Œ Node.js å¹¶ä¸å†²çªï¼Œéƒ½æœ‰è‡ªå·±æ“…é•¿çš„é¢†åŸŸï¼šNginx æ›´æ“…é•¿äºåº•å±‚æœåŠ¡å™¨ç«¯èµ„æºçš„å¤„ç†ï¼ˆé™æ€èµ„æºå¤„ç†è½¬å‘ã€åå‘ä»£ç†ï¼Œè´Ÿè½½å‡è¡¡ç­‰ï¼‰ï¼ŒNode.js æ›´æ“…é•¿äºä¸Šå±‚å…·ä½“ä¸šåŠ¡é€»è¾‘çš„å¤„ç†ã€‚å¦‚æœå°†ä¸¤è€…ç»„åˆä¸€èµ·ï¼Œåˆ™å¯ä»¥æ›´åŠ åŠ©åŠ›å‰ç«¯å¼€å‘ã€‚ å¼€å§‹åŠ¨æ‰‹ä¹‹å‰å…ˆäº¤ä»£ä¸‹å…·ä½“çš„ç³»ç»Ÿç¯å¢ƒï¼š ç³»ç»Ÿç¯å¢ƒè¯´æ˜ï¼šæœåŠ¡å™¨ï¼šé˜¿é‡Œäº‘ ECSæ“ä½œç³»ç»Ÿï¼š CentOS 7.4 64 ä½Nginx ç‰ˆæœ¬ï¼šnginx/1.16.1 äºŒã€Nginx çš„å®‰è£…é¦–å…ˆå¯ä»¥æŸ¥çœ‹ä¸‹ç³»ç»Ÿçš„ yum æºä¸‹æ˜¯å¦æœ‰å¯ç”¨çš„ Nginx åŒ… 1yum list | grep nginx å¦‚æœç»“æœç±»ä¼¼å¦‚å›¾å†…å®¹ï¼Œè¯´æ˜ yum æºæ˜¯å­˜åœ¨çš„ å¦‚æœä¸å­˜åœ¨æˆ–è€…æ²¡æœ‰éœ€è¦çš„ Nginx ç‰ˆæœ¬ï¼Œåˆ™å¯ä»¥è‡ªå·±é…ä¸€ä¸ª yum æºã€‚ æ‰“å¼€ç»ˆç«¯ï¼Œè¾“å…¥ 1vim /etc/yum.repos.d/nginx.repo å¾€é‡Œé¢æ·»åŠ å¦‚ä¸‹è„šæœ¬ï¼š 12345[nginx]name=nginx repobaseurl=http://nginx.org/packages/$&#123;OS&#125;/$&#123;OSRELEASE&#125;/$basearch/gpgcheck=0enabled=1 éœ€è¦æ³¨æ„ï¼šOS: æ“ä½œç³»ç»Ÿåç§°ï¼Œå¦‚ï¼šcentosOSRELEASE: æ“ä½œç³»ç»Ÿç‰ˆæœ¬ï¼Œå¦‚ï¼š 7å¯¹åº”çš„ baseurl: baseurl=http://nginx.org/packages/centos/7/$basearch/ ä¿å­˜ä¿®æ”¹åï¼Œå°±å¯ä»¥å®‰è£… Nginx äº†ï¼Œå®‰è£…å‘½ä»¤ï¼š 1yum install nginx å®‰è£…å®ŒæˆåæŸ¥çœ‹å®‰è£…çš„ Nginx ç‰ˆæœ¬: 1nginx -v ä¸‰ã€Nginx åŸºæœ¬é…ç½®å®‰è£…å®Œ Nginx åï¼Œéœ€è¦çŸ¥é“ç³»ç»Ÿä¸­å¤šäº†é‚£äº›æ–‡ä»¶ï¼Œå®ƒä»¬éƒ½å®‰è£…åˆ°äº†é‚£é‡Œã€‚å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤è¿›è¡ŒæŸ¥çœ‹ï¼š 1rpm -ql nginx rpm æ˜¯ linux çš„ rpm åŒ…ç®¡ç†å·¥å…·ï¼Œ-q ä»£è¡¨è¯¢é—®æ¨¡å¼ï¼Œ-l ä»£è¡¨è¿”å›åˆ—è¡¨ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥æ‰¾åˆ° nginx çš„æ‰€æœ‰å®‰è£…ä½ç½®äº†ã€‚ ä¸‹é¢é‡ç‚¹ç½—åˆ—ä¸‹ä¸€äº›é‡è¦çš„æ–‡ä»¶ nginx.conf nginx.conf æ–‡ä»¶æ˜¯ Nginx æ€»é…ç½®æ–‡ä»¶ï¼Œåœ¨æˆ‘ä»¬æ­å»ºæœåŠ¡å™¨æ—¶ç»å¸¸è°ƒæ•´çš„æ–‡ä»¶ã€‚ è¿›å…¥ etc/nginx ç›®å½•ä¸‹ï¼Œç„¶åç”¨ vim è¿›è¡Œæ‰“å¼€ 12cd /etc/nginxvim nginx.conf ä¸‹é¢æ˜¯æ–‡ä»¶çš„è¯¦ç»†æ³¨é‡Š: 12345678910111213141516171819202122232425262728293031323334#è¿è¡Œç”¨æˆ·ï¼Œé»˜è®¤å³æ˜¯nginxï¼Œå¯ä»¥ä¸è¿›è¡Œè®¾ç½®user nginx;#Nginxè¿›ç¨‹ï¼Œä¸€èˆ¬è®¾ç½®ä¸ºå’ŒCPUæ ¸æ•°ä¸€æ ·worker_processes 1;#é”™è¯¯æ—¥å¿—å­˜æ”¾ç›®å½•error_log /var/log/nginx/error.log warn;#è¿›ç¨‹pidå­˜æ”¾ä½ç½®pid /var/run/nginx.pid;events &#123; worker_connections 1024; # å•ä¸ªåå°è¿›ç¨‹çš„æœ€å¤§å¹¶å‘æ•°&#125;http &#123; include /etc/nginx/mime.types; #æ–‡ä»¶æ‰©å±•åä¸ç±»å‹æ˜ å°„è¡¨ default_type application/octet-stream; #é»˜è®¤æ–‡ä»¶ç±»å‹ #è®¾ç½®æ—¥å¿—æ¨¡å¼ log_format main '$remote_addr - $remote_user [$time_local] \"$request\" ' '$status $body_bytes_sent \"$http_referer\" ' '\"$http_user_agent\" \"$http_x_forwarded_for\"'; access_log /var/log/nginx/access.log main; #nginxè®¿é—®æ—¥å¿—å­˜æ”¾ä½ç½® sendfile on; #å¼€å¯é«˜æ•ˆä¼ è¾“æ¨¡å¼ #tcp_nopush on; #å‡å°‘ç½‘ç»œæŠ¥æ–‡æ®µçš„æ•°é‡ keepalive_timeout 65; #ä¿æŒè¿æ¥çš„æ—¶é—´ï¼Œä¹Ÿå«è¶…æ—¶æ—¶é—´ #gzip on; #å¼€å¯gzipå‹ç¼© include /etc/nginx/conf.d/*.conf; #åŒ…å«çš„å­é…ç½®é¡¹ä½ç½®å’Œæ–‡ä»¶&#125; default.confè¿›å…¥ conf.d ç›®å½•ï¼Œæ‰“å¼€ default.confï¼Œå†…å®¹å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344server &#123; listen 80; #é…ç½®ç›‘å¬ç«¯å£ server_name localhost; //é…ç½®åŸŸå #charset koi8-r; #access_log /var/log/nginx/host.access.log main; location / &#123; root /usr/share/nginx/html; #æœåŠ¡é»˜è®¤å¯åŠ¨ç›®å½• index index.html index.htm; #é»˜è®¤è®¿é—®æ–‡ä»¶ &#125; #error_page 404 /404.html; # é…ç½®404é¡µé¢ # redirect server error pages to the static page /50x.html # error_page 500 502 503 504 /50x.html; #é”™è¯¯çŠ¶æ€ç çš„æ˜¾ç¤ºé¡µé¢ï¼Œé…ç½®åéœ€è¦é‡å¯ location = /50x.html &#123; root /usr/share/nginx/html; &#125; # proxy the PHP scripts to Apache listening on 127.0.0.1:80 # #location ~ \\.php$ &#123; # proxy_pass http://127.0.0.1; #&#125; # pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000 # #location ~ \\.php$ &#123; # root html; # fastcgi_pass 127.0.0.1:9000; # fastcgi_index index.php; # fastcgi_param SCRIPT_FILENAME /scripts$fastcgi_script_name; # include fastcgi_params; #&#125; # deny access to .htaccess files, if Apache's document root # concurs with nginx's one # #location ~ /\\.ht &#123; # deny all; #&#125;&#125; å››ã€Nginx å¸¸ç”¨æ“ä½œå¯åŠ¨ Nginx æœåŠ¡ Nginx ç›´æ¥å¯åŠ¨ï¼ˆCentOS7.4 ä»¥ä¸Šç‰ˆæœ¬ï¼‰ 1nginx ä½¿ç”¨ systemctl å‘½ä»¤å¯åŠ¨ 1systemctl start nginx.service æŸ¥çœ‹æœåŠ¡è¿è¡ŒçŠ¶æ€ 1ps aux | grep nginx å…³åœ Nginx æœåŠ¡ ç«‹å³åœæ­¢æœåŠ¡ 1nginx -s stop è¿™ç§æ–¹æ³•æ¯”è¾ƒå¼ºç¡¬ï¼Œæ— è®ºè¿›ç¨‹æ˜¯å¦åœ¨å·¥ä½œï¼Œéƒ½ç›´æ¥åœæ­¢è¿›ç¨‹ã€‚ ä»å®¹åœæ­¢æœåŠ¡ 1nginx -s quit è¿™ç§æ–¹æ³•è¾ƒ stop ç›¸æ¯”å°±æ¯”è¾ƒæ¸©å’Œä¸€äº›äº†ï¼Œéœ€è¦è¿›ç¨‹å®Œæˆå½“å‰å·¥ä½œåå†åœæ­¢ã€‚ killall æ–¹æ³•æ€æ­»è¿›ç¨‹ 1killall nginx è¿™ç§æ–¹æ³•ä¹Ÿæ˜¯æ¯”è¾ƒé‡è›®çš„ï¼Œç›´æ¥æ€æ­»è¿›ç¨‹ã€‚ systemctl åœæ­¢ 1systemctl stop nginx.service é‡å¯ Nginx æœåŠ¡1systemctl restart nginx.service é‡æ–°è½½å…¥é…ç½®æ–‡ä»¶åœ¨é‡æ–°ç¼–å†™æˆ–è€…ä¿®æ”¹ Nginx çš„é…ç½®æ–‡ä»¶åï¼Œéœ€è¦ä½œä¸€ä¸‹é‡æ–°è½½å…¥ï¼Œè¿™æ—¶å€™å¯ä»¥ç”¨è¿™ä¸ªå‘½ä»¤ã€‚ 1nginx -s reload æŸ¥çœ‹ç«¯å£å·å¦‚æœ 80 ç«¯å£è¢«å ç”¨ï¼Œå¯ä»¥ä½¿ç”¨æ­¤å‘½ä»¤æŸ¥çœ‹ç«¯å£å ç”¨æƒ…å†µ 1netstat -tlnp 80 äº”ã€è‡ªå®šä¹‰é”™è¯¯é¡µé¢ä»¥åŠè®¿é—®æ§åˆ¶ å¤šé”™è¯¯æŒ‡å‘ä¸€ä¸ªé¡µé¢ 1error_page 500 502 503 504 /50x.html; å•ç‹¬ä¸ºé”™è¯¯ç½®é¡¶å¤„ç†æ–¹å¼ 1error_page 404 /404_error.html; æŠŠé”™è¯¯ç æ¢æˆä¸€ä¸ªåœ°å€ 1error_page 404 http://blog.kobingo.xyz; ç®€å•å®ç°è®¿é—®æ§åˆ¶ æœ‰æ—¶å€™æˆ‘ä»¬çš„æœåŠ¡å™¨åªå…è®¸ç‰¹å®šä¸»æœºè®¿é—®ï¼Œæ¯”å¦‚å†…éƒ¨ OA ç³»ç»Ÿï¼Œæˆ–è€…åº”ç”¨çš„ç®¡ç†åå°ç³»ç»Ÿï¼Œæ›´æˆ–è€…æ˜¯æŸäº›åº”ç”¨æ¥å£ï¼Œè¿™æ—¶å€™æˆ‘ä»¬å°±éœ€è¦æ§åˆ¶ä¸€äº› IP è®¿é—®ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥åœ¨ location é‡Œè¿›è¡Œé…ç½®ã€‚ å¯ä»¥ç›´æ¥åœ¨ default.conf é‡Œè¿›è¡Œé…ç½®ã€‚ 1234location / &#123; deny 123.9.51.42; allow 45.76.202.231; &#125; æŒ‡ä»¤ä¼˜å…ˆçº§ 1234location / &#123; allow 45.76.202.231; deny all; &#125; ä¸Šé¢çš„é…ç½®è¡¨ç¤ºåªå…è®¸45.76.202.231è¿›è¡Œè®¿é—®ï¼Œå…¶ä»–çš„ IP æ˜¯ç¦æ­¢è®¿é—®çš„ã€‚ä½†æ˜¯å¦‚æœæˆ‘ä»¬æŠŠdeny allæŒ‡ä»¤ï¼Œç§»åŠ¨åˆ° allow 45.76.202.231ä¹‹å‰ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆé‚£ï¼Ÿ ä¼šå‘ç°æ‰€æœ‰çš„ IP éƒ½ä¸å…è®¸è®¿é—®äº†ã€‚è¿™è¯´æ˜äº†ä¸€ä¸ªé—®é¢˜ï¼šå°±æ˜¯åœ¨åŒä¸€ä¸ªå—ä¸‹çš„ä¸¤ä¸ªæƒé™æŒ‡ä»¤ï¼Œå…ˆå‡ºç°çš„è®¾ç½®ä¼šè¦†ç›–åå‡ºç°çš„è®¾ç½®ï¼ˆä¹Ÿå°±æ˜¯è°å…ˆè§¦å‘ï¼Œè°èµ·ä½œç”¨ï¼‰ã€‚ å¤æ‚è®¿é—®æ§åˆ¶æƒé™åŒ¹é… åœ¨å·¥ä½œä¸­ï¼Œè®¿é—®æƒé™çš„æ§åˆ¶éœ€æ±‚æ›´åŠ å¤æ‚ï¼Œä¾‹å¦‚ï¼Œå¯¹äºç½‘ç«™ä¸‹çš„ imgï¼ˆå›¾ç‰‡ç›®å½•ï¼‰æ˜¯è¿è¡Œæ‰€æœ‰ç”¨æˆ·è®¿é—®ï¼Œä½†å¯¹äºç½‘ç«™ä¸‹çš„ admin ç›®å½•åˆ™åªå…è®¸å…¬å¸å†…éƒ¨å›ºå®š IP è®¿é—®ã€‚è¿™æ—¶å€™ä»…é  deny å’Œ allow è¿™ä¸¤ä¸ªæŒ‡ä»¤ï¼Œæ˜¯æ— æ³•å®ç°çš„ã€‚æˆ‘ä»¬éœ€è¦ location å—æ¥å®Œæˆç›¸å…³çš„éœ€æ±‚åŒ¹é…ã€‚ ä¸Šé¢çš„éœ€æ±‚ï¼Œé…ç½®ä»£ç å¦‚ä¸‹ï¼š 123456location =/img&#123; allow all;&#125;location =/admin&#123; deny all;&#125; ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼è®¾ç½®è®¿é—®æƒé™ åªæœ‰ç²¾ç¡®åŒ¹é…(=)æœ‰æ—¶æ˜¯å®Œä¸æˆæˆ‘ä»¬çš„å·¥ä½œä»»åŠ¡çš„ï¼Œæ¯”å¦‚ç°åœ¨æˆ‘ä»¬è¦ç¦æ­¢è®¿é—®æ‰€æœ‰ php çš„é¡µé¢ï¼Œphp çš„é¡µé¢å¤§å¤šæ˜¯åå°çš„ç®¡ç†æˆ–è€…æ¥å£ä»£ç ï¼Œæ‰€ä»¥ä¸ºäº†å®‰å…¨æˆ‘ä»¬ç»å¸¸è¦ç¦æ­¢æ‰€æœ‰ç”¨æˆ·è®¿é—®ï¼Œè€Œåªå¼€æ”¾å…¬å¸å†…éƒ¨è®¿é—®çš„ã€‚ ä»£ç å¦‚ä¸‹ï¼š 123location ~\\.php$ &#123; deny all; &#125; è¿™æ ·æˆ‘ä»¬å†è®¿é—®çš„æ—¶å€™å°±ä¸èƒ½è®¿é—®ä»¥ php ç»“å°¾çš„æ–‡ä»¶äº†ã€‚æ˜¯ä¸æ˜¯è®©ç½‘ç«™å˜çš„å®‰å…¨å¾ˆå¤šäº†é‚£ï¼Ÿ å…­ã€Nginx é…ç½®è™šæ‹Ÿä¸»æœºè™šæ‹Ÿä¸»æœºæ˜¯æŒ‡åœ¨ä¸€å°ç‰©ç†ä¸»æœºæœåŠ¡å™¨ä¸Šåˆ’åˆ†å‡ºå¤šä¸ªç£ç›˜ç©ºé—´ï¼Œæ¯ä¸ªç£ç›˜ç©ºé—´éƒ½æ˜¯ä¸€ä¸ªè™šæ‹Ÿä¸»æœºï¼Œæ¯å°è™šæ‹Ÿä¸»æœºéƒ½å¯ä»¥å¯¹å¤–æä¾› Web æœåŠ¡ï¼Œå¹¶ä¸”äº’ä¸å¹²æ‰°ã€‚ç”¨æˆ·èƒ½å¤Ÿåˆ©ç”¨è™šæ‹Ÿä¸»æœºæŠŠå¤šä¸ªä¸åŒåŸŸåçš„ç½‘ç«™éƒ¨ç½²åœ¨åŒä¸€å°æœåŠ¡å™¨ä¸Šã€‚å¯ä»¥å¤§å¤§èŠ‚çº¦æœåŠ¡å™¨æˆæœ¬ä¸ç»´æŠ¤æˆæœ¬ã€‚ åŸºäºç«¯å£å·é…ç½®è™šæ‹Ÿä¸»æœº åŸºäºç«¯å£å·æ¥é…ç½®è™šæ‹Ÿä¸»æœºï¼Œç®—æ˜¯ Nginx ä¸­æœ€ç®€å•çš„ä¸€ç§æ–¹å¼äº†ã€‚åŸç†å°±æ˜¯ Nginx ç›‘å¬å¤šä¸ªç«¯å£ï¼Œæ ¹æ®ä¸åŒçš„ç«¯å£å·ï¼Œæ¥åŒºåˆ†ä¸åŒçš„ç½‘ç«™ æˆ‘ä¹ æƒ¯åœ¨ conf.d é‡Œæ–°å»ºä¸€ä¸ªé…ç½®æ–‡ä»¶æ¥é…ç½®æ–°çš„è™šæ‹Ÿä¸»æœºï¼Œä½†ä¹Ÿå¯ä»¥é…ç½®åœ¨ä¸»é…ç½® etc/nginx/nginx.confé‡Œï¼Œä¹Ÿå¯ä»¥é…ç½®åœ¨etc/nginx/conf.d/default.confé‡Œã€‚ 12345678server&#123; listen 8088; server_name localhost; location / &#123; root /usr/share/nginx/html/html8001; index index.html; &#125;&#125; åŸºäº IP çš„è™šæ‹Ÿä¸»æœº åŸºäº IP å’ŒåŸºäºç«¯å£çš„é…ç½®å‡ ä¹ä¸€æ ·ï¼Œåªæ˜¯æŠŠserver_nameé€‰é¡¹ï¼Œé…ç½®æˆ IP å°±å¯ä»¥äº†ã€‚ 12345678server&#123; listen 80; server_name 112.74.164.244; location / &#123; root /usr/share/nginx/html/html8001; index index.html; &#125;&#125; åŸºäºåŸŸåçš„è™šæ‹Ÿä¸»æœº åŸŸåè®¾ç½®è™šæ‹Ÿä¸»æœºä¹Ÿéå¸¸ç®€å•ï¼Œä¸»è¦æ“ä½œçš„æ˜¯é…ç½®æ–‡ä»¶çš„ server_name é¡¹ 12345678910111213141516server&#123; listen 80; server_name nginx.kobin.com; location / &#123; root /usr/share/nginx/html/html; index index.html index.htm; &#125;&#125;server&#123; listen 80; server_name nginx2.kobin.com; location / &#123; root /usr/share/nginx/html/html8001; index index.html index.htm; &#125;&#125; ä¸ƒã€Nginx åå‘ä»£ç†çš„è®¾ç½®ä»€ä¹ˆæ˜¯åå‘ä»£ç†ï¼Ÿ äº’è”ç½‘åº”ç”¨åŸºæœ¬éƒ½åŸºäº CS åŸºæœ¬ç»“æ„ï¼Œå³ client ç«¯å’Œ server ç«¯ã€‚ä»£ç†å…¶å®å°±æ˜¯åœ¨ client ç«¯å’ŒçœŸæ­£çš„ server ç«¯ä¹‹å‰å¢åŠ ä¸€å±‚æä¾›ç‰¹å®šæœåŠ¡çš„æœåŠ¡å™¨ï¼Œå³ä»£ç†æœåŠ¡å™¨ã€‚ åœ¨äº†è§£åå‘ä»£ç†å‰å…ˆäº†è§£ä»€ä¹ˆæ˜¯æ­£å‘ä»£ç†ã€‚ æ­£å‘ä»£ç† ç¿»å¢™å·¥å…·å°±æ˜¯ä¸€ä¸ªå…¸å‹çš„æ­£å‘ä»£ç†å·¥å…·ã€‚å®ƒä¼šæŠŠæˆ‘ä»¬ä¸èƒ½è®¿é—®çš„å¢™å¤–æœåŠ¡å™¨ server çš„ç½‘é¡µè¯·æ±‚ï¼Œä»£ç†åˆ°ä¸€ä¸ªå¯ä»¥è®¿é—®è¯¥ç½‘ç«™çš„ä»£ç†æœåŠ¡å™¨ proxyï¼Œè¿™ä¸ªä»£ç†æœåŠ¡å™¨ proxy æŠŠå¢™å¤–æœåŠ¡å™¨ server ä¸Šçš„ç½‘é¡µå†…å®¹è·å–ï¼Œå†è½¬å‘ç»™å®¢æˆ·ã€‚å…·ä½“çš„æµç¨‹å¦‚ä¸‹å›¾ã€‚ å…¶ç‰¹ç‚¹å¦‚ä¸‹ï¼š å®¢æˆ·ç«¯å’Œä»£ç†æœåŠ¡å™¨å¯ä»¥ç›´æ¥äº’ç›¸è®¿é—®ï¼Œå±äºä¸€ä¸ª LANï¼ˆå±€åŸŸç½‘ï¼‰ ä»£ç†å¯¹ç”¨æˆ·æ˜¯éé€æ˜çš„ï¼Œå³ç”¨æˆ·éœ€è¦è‡ªå·±æ“ä½œæˆ–è€…æ„ŸçŸ¥å¾—åˆ°è‡ªå·±çš„è¯·æ±‚è¢«å‘é€åˆ°ä»£ç†æœåŠ¡å™¨ ä»£ç†æœåŠ¡å™¨é€šè¿‡ä»£ç†ç”¨æˆ·ç«¯çš„è¯·æ±‚æ¥å‘åŸŸå¤–æœåŠ¡å™¨è¯·æ±‚å“åº”å†…å®¹ã€‚ ä¸€å¥è¯æ€»ç»“ï¼š ä»£ç†çš„æ˜¯å®¢æˆ·ç«¯ åå‘ä»£ç† åå‘ä»£ç†æ­£å¥½ç›¸åï¼Œå®¢æˆ·ç«¯å‘é€çš„è¯·æ±‚ï¼Œæƒ³è¦è®¿é—® server æœåŠ¡å™¨ä¸Šçš„å†…å®¹ã€‚å‘é€çš„å†…å®¹è¢«å‘é€åˆ°ä»£ç†æœåŠ¡å™¨ä¸Šï¼Œè¿™ä¸ªä»£ç†æœåŠ¡å™¨å†æŠŠè¯·æ±‚å‘é€åˆ°è‡ªå·±è®¾ç½®å¥½çš„å†…éƒ¨æœåŠ¡å™¨ä¸Šï¼Œè€Œç”¨æˆ·çœŸå®æƒ³è·å¾—çš„å†…å®¹å°±åœ¨è¿™äº›è®¾ç½®å¥½çš„æœåŠ¡å™¨ä¸Šã€‚ å…¶ç‰¹ç‚¹å¦‚ä¸‹ï¼š ä»£ç†æœåŠ¡å™¨å’ŒçœŸæ­£ server æœåŠ¡å™¨å¯ä»¥ç›´æ¥äº’ç›¸è®¿é—®ï¼Œå±äºä¸€ä¸ª LANï¼ˆæœåŠ¡å™¨å†…ç½‘ï¼‰ ä»£ç†å¯¹ç”¨æˆ·æ˜¯é€æ˜çš„ï¼Œå³æ— æ„ŸçŸ¥ã€‚ä¸è®ºåŠ ä¸åŠ è¿™ä¸ªåå‘ä»£ç†ï¼Œç”¨æˆ·éƒ½æ˜¯é€šè¿‡ç›¸åŒçš„è¯·æ±‚è¿›è¡Œçš„ï¼Œä¸”ä¸éœ€è¦ä»»ä½•é¢å¤–çš„æ“ä½œï¼› ä»£ç†æœåŠ¡å™¨é€šè¿‡ä»£ç†å†…éƒ¨æœåŠ¡å™¨æ¥å—åŸŸå¤–å®¢æˆ·ç«¯çš„è¯·æ±‚ï¼Œå¹¶å°†è¯·æ±‚å‘é€åˆ°å¯¹åº”çš„å†…éƒ¨æœåŠ¡å™¨ä¸Šã€‚ ä¸€å¥è¯æ€»ç»“ï¼š ä»£ç†çš„æ˜¯æœåŠ¡å™¨ åå‘ä»£ç†çš„å¥½å¤„ï¼š å®‰å…¨åŠæƒé™ä½¿ç”¨åå‘ä»£ç†åï¼Œç”¨æˆ·ç«¯å°†æ— æ³•ç›´æ¥é€šè¿‡è¯·æ±‚è®¿é—®çœŸæ­£çš„å†…å®¹æœåŠ¡å™¨ï¼Œè€Œå¿…é¡»é€šè¿‡ Nginxã€‚å¯ä»¥é€šè¿‡åœ¨ Nginx å±‚ä¸Šå°†å±é™©æˆ–è€…æ²¡æœ‰æƒé™çš„è¯·æ±‚å†…å®¹è¿‡æ»¤æ‰ï¼Œä»è€Œä¿è¯äº†æœåŠ¡å™¨çš„å®‰å…¨ã€‚ è´Ÿè½½å‡è¡¡ä¸€ä¸ªç½‘ç«™çš„å†…å®¹è¢«éƒ¨ç½²åœ¨è‹¥å¹²æœåŠ¡å™¨ä¸Šï¼Œå¯ä»¥æŠŠè¿™äº›æœºå­çœ‹æˆä¸€ä¸ªé›†ç¾¤ï¼Œé‚£ Nginx å¯ä»¥å°†æ¥æ”¶åˆ°çš„å®¢æˆ·ç«¯è¯·æ±‚â€œå‡åŒ€åœ°â€åˆ†é…åˆ°è¿™ä¸ªé›†ç¾¤ä¸­æ‰€æœ‰çš„æœåŠ¡å™¨ä¸Šï¼Œä»è€Œå®ç°æœåŠ¡å™¨å‹åŠ›çš„å¹³å‡åˆ†é… ç®€å•å®ç°åå‘ä»£ç† ä¸¾ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬è®¿é—® home.blog.kobingo.xyz è¿™ä¸ªç½‘ç«™ï¼Œç„¶ååå‘ä»£ç†åˆ° baidu.com ä¸Šã€‚å¯åšå¦‚ä¸‹é…ç½®ï¼š 1234567server&#123; listen 80; server_name home.blog.kobingo.xyz; location / &#123; proxy_pass https://www.baidu.com; &#125;&#125; ç»“æœå¦‚ä¸‹ï¼š å…¶ä»–å¸¸ç”¨çš„åå‘ä»£ç†é…ç½®ï¼š proxy_set_header :åœ¨å°†å®¢æˆ·ç«¯è¯·æ±‚å‘é€ç»™åç«¯æœåŠ¡å™¨ä¹‹å‰ï¼Œæ›´æ”¹æ¥è‡ªå®¢æˆ·ç«¯çš„è¯·æ±‚å¤´ä¿¡æ¯ã€‚ proxy_connect_timeout:é…ç½® Nginx ä¸åç«¯ä»£ç†æœåŠ¡å™¨å°è¯•å»ºç«‹è¿æ¥çš„è¶…æ—¶æ—¶é—´ã€‚ proxy_read_timeout : é…ç½® Nginx å‘åç«¯æœåŠ¡å™¨ç»„å‘å‡º read è¯·æ±‚åï¼Œç­‰å¾…ç›¸åº”çš„è¶…æ—¶æ—¶é—´ã€‚ proxy_send_timeoutï¼šé…ç½® Nginx å‘åç«¯æœåŠ¡å™¨ç»„å‘å‡º write è¯·æ±‚åï¼Œç­‰å¾…ç›¸åº”çš„è¶…æ—¶æ—¶é—´ã€‚ proxy_redirect :ç”¨äºä¿®æ”¹åç«¯æœåŠ¡å™¨è¿”å›çš„å“åº”å¤´ä¸­çš„ Location å’Œ Refreshã€‚ å…«ã€Nginx é€‚é…ç§»åŠ¨ç«¯ä¸ PC ç«¯Nginx é€šè¿‡å†…ç½®å˜é‡$http_user_agentï¼Œå¯ä»¥è·å–åˆ°è¯·æ±‚å®¢æˆ·ç«¯çš„userAgentï¼Œå°±å¯ä»¥ç”¨æˆ·ç›®å‰å¤„äºç§»åŠ¨ç«¯è¿˜æ˜¯ PC ç«¯ï¼Œè¿›è€Œå±•ç¤ºä¸åŒçš„é¡µé¢ç»™ç”¨æˆ·ã€‚ åœ¨ conf.d ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ª demo.conf æ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š 1234567891011server &#123; listen 80; server_name blog.blog.kobingo.xyz; location / &#123; root /yangling/app/pc; # é»˜è®¤å±•ç¤ºPCç«¯é¡µé¢ if ($http_user_agent ~* '(Android|webOS|iPhone|iPod|BlackBerry)') &#123; # å¦‚æœåŒ¹é…åˆ°mobileç«¯çš„user_agentåˆ™å±•ç¤ºmobileé¡µé¢ root /yangling/app/mobile; &#125; index index.html; &#125;&#125; ä¹ã€Nginx å®ç° Gzip å‹ç¼©Gzip æ˜¯ç½‘é¡µçš„ä¸€ç§ç½‘é¡µå‹ç¼©æŠ€æœ¯ï¼Œç»è¿‡ gzip å‹ç¼©åï¼Œé¡µé¢å¤§å°å¯ä»¥å˜ä¸ºåŸæ¥çš„ 30%ç”šè‡³æ›´å°ã€‚æ›´å°çš„ç½‘é¡µä¼šè®©ç”¨æˆ·æµè§ˆçš„ä½“éªŒæ›´å¥½ï¼Œé€Ÿåº¦æ›´å¿«ã€‚gzip ç½‘é¡µå‹ç¼©çš„å®ç°éœ€è¦æµè§ˆå™¨å’ŒæœåŠ¡å™¨çš„æ”¯æŒã€‚ gzip æ˜¯éœ€è¦æœåŠ¡å™¨å’Œæµè§ˆå™¨åŒäº‹æ”¯æŒçš„ã€‚å½“æµè§ˆå™¨æ”¯æŒ gzip å‹ç¼©æ—¶ï¼Œä¼šåœ¨è¯·æ±‚æ¶ˆæ¯ä¸­åŒ…å« Accept-Encoding:gzip,è¿™æ · Nginx å°±ä¼šå‘æµè§ˆå™¨å‘é€å¬è¿‡ gzip åçš„å†…å®¹ï¼ŒåŒæ—¶åœ¨ç›¸åº”ä¿¡æ¯å¤´ä¸­åŠ å…¥ Content-Encoding:gzipï¼Œå£°æ˜è¿™æ˜¯ gzip åçš„å†…å®¹ï¼Œå‘ŠçŸ¥æµè§ˆå™¨è¦å…ˆè§£å‹åæ‰èƒ½è§£æè¾“å‡ºã€‚ gzip é…ç½®ï¼š gzip : è¯¥æŒ‡ä»¤ç”¨äºå¼€å¯æˆ– å…³é—­ gzip æ¨¡å—ã€‚ gzip_buffers : è®¾ç½®ç³»ç»Ÿè·å–å‡ ä¸ªå•ä½çš„ç¼“å­˜ç”¨äºå­˜å‚¨ gzip çš„å‹ç¼©ç»“æœæ•°æ®æµã€‚ gzip_comp_level : gzip å‹ç¼©æ¯”ï¼Œå‹ç¼©çº§åˆ«æ˜¯ 1-9ï¼Œ1 çš„å‹ç¼©çº§åˆ«æœ€ä½ï¼Œ9 çš„å‹ç¼©çº§åˆ«æœ€é«˜ã€‚å‹ç¼©çº§åˆ«è¶Šé«˜å‹ç¼©ç‡è¶Šå¤§ï¼Œå‹ç¼©æ—¶é—´è¶Šé•¿ã€‚ gzip_disable : å¯ä»¥é€šè¿‡è¯¥æŒ‡ä»¤å¯¹ä¸€äº›ç‰¹å®šçš„ User-Agent ä¸ä½¿ç”¨å‹ç¼©åŠŸèƒ½ã€‚ gzip_min_length:è®¾ç½®å…è®¸å‹ç¼©çš„é¡µé¢æœ€å°å­—èŠ‚æ•°ï¼Œé¡µé¢å­—èŠ‚æ•°ä»ç›¸åº”æ¶ˆæ¯å¤´çš„ Content-length ä¸­è¿›è¡Œè·å–ã€‚ gzip_http_versionï¼šè¯†åˆ« HTTP åè®®ç‰ˆæœ¬ï¼Œå…¶å€¼å¯ä»¥æ˜¯ 1.1.æˆ– 1.0. gzip_proxied : ç”¨äºè®¾ç½®å¯ç”¨æˆ–ç¦ç”¨ä»ä»£ç†æœåŠ¡å™¨ä¸Šæ”¶åˆ°ç›¸åº”å†…å®¹ gzip å‹ç¼©ã€‚ gzip_vary : ç”¨äºåœ¨å“åº”æ¶ˆæ¯å¤´ä¸­æ·»åŠ  Varyï¼šAccept-Encoding,ä½¿ä»£ç†æœåŠ¡å™¨æ ¹æ®è¯·æ±‚å¤´ä¸­çš„ Accept-Encoding è¯†åˆ«æ˜¯å¦å¯ç”¨ gzip å‹ç¼©ã€‚ ç®€å•é…ç½®ï¼š 123456http &#123; ..... gzip on; gzip_types text/plain application/javascript text/css; .....&#125; gzip onæ˜¯å¯ç”¨ gizp æ¨¡å—ï¼Œä¸‹é¢çš„ä¸€è¡Œæ˜¯ç”¨äºåœ¨å®¢æˆ·ç«¯è®¿é—®ç½‘é¡µæ—¶ï¼Œå¯¹æ–‡æœ¬ã€JavaScript å’Œ CSS æ–‡ä»¶è¿›è¡Œå‹ç¼©è¾“å‡ºã€‚ åã€Nginx ä¸è·¨åŸŸè¯·æ±‚ä¸¾ä¸ªä¾‹å­ï¼šåœ¨ a.com é¡µé¢ä¸­æœ‰è¯·æ±‚ b.com çš„æ¥å£http://b.com/getHomeData, å‡ºç°äº†è·¨åŸŸé—®é¢˜ã€‚å½“ç„¶è¿™ç§è·¨åŸŸé—®é¢˜çš„å¤„ç†æ–¹å¼å¾ˆå¤šï¼Œè¿™é‡Œä¸»è¦è¯´ä¸‹ç”¨ Nginx å¦‚ä½•è§£å†³ã€‚ åœ¨ a.com å¯ä¸ª Nginx æœåŠ¡ï¼Œé…ç½®å¦‚ä¸‹ï¼š 12345678910server &#123; listen 80; server_name a.com; #è¯·æ±‚è·¨åŸŸï¼Œè¿™é‡Œçº¦å®šä»£ç†è¯·æ±‚url pathæ˜¯ä»¥/apis/å¼€å¤´ location ^~/apis/ &#123; # è¿™é‡Œé‡å†™äº†è¯·æ±‚ï¼Œå°†æ­£åˆ™åŒ¹é…ä¸­çš„ç¬¬ä¸€ä¸ª()ä¸­$1çš„pathï¼Œæ‹¼æ¥åˆ°çœŸæ­£çš„è¯·æ±‚åé¢ï¼Œå¹¶ç”¨breakåœæ­¢åç»­åŒ¹é… rewrite ^/apis/(.*)$ /$1 break; proxy_pass https://www.b.com/; &#125;&#125; è¿™æ—¶è¯·æ±‚æ¥å£ URL æ¢æˆhttp://a.com/apis/getHomeDataï¼Œå°±å¯ä»¥æ­£å¸¸è¯·æ±‚åˆ°æ•°æ®äº†ã€‚å…¶æœ¬è´¨è¿˜æ˜¯åˆ©ç”¨äº†æœåŠ¡ç«¯ä¸å—è·¨åŸŸé™åˆ¶çš„åŸç†ã€‚ åä¸€ã€Nginx ä¸åˆå¹¶è¯·æ±‚é€šè¿‡nginx-http-concatæ’ä»¶å¯ä»¥å®ç°å°†å¤šä¸ªèµ„æºè¯·æ±‚åˆå¹¶ä¸ºä¸€ä¸ªè¯·æ±‚ï¼Œè¾¾åˆ°æ€§èƒ½ä¼˜åŒ–ç›®çš„ã€‚ åäºŒã€Nginx ä¸å›¾ç‰‡å¤„ç†é€šè¿‡ngx_http_image_filter_moduleæ’ä»¶å®ç°æ—¥å¸¸å¯¹å›¾ç‰‡çš„å¤„ç†ï¼ŒåŒ…æ‹¬ç¼©æ”¾ã€è£å‰ªã€æ—‹è½¬ã€å›¾ç‰‡è´¨é‡ç­‰çš„æ§åˆ¶ã€‚ åä¸‰ã€ä½¿ç”¨Letâ€™s Encrypté…ç½®sslè¯ä¹¦å®‰è£…certbot1yum install -y python3 &amp;&amp; pip3 install certbot æŸ¥çœ‹certbotä½¿ç”¨æ–¹æ³•ï¼š 1certbot --help certbot é»˜è®¤ä½¿ç”¨httpæ–¹å¼å¯¹åŸŸåæ‰€æœ‰æƒè¿›è¡ŒéªŒè¯ï¼Œè¯¥æ“ä½œéœ€è¦ç»‘å®švpsçš„80ç«¯å£ã€‚å¦‚æœ80ç«¯å£å·²è¢«å ç”¨ï¼Œè¯·å…ˆåœæ­¢å ç”¨çš„è¿›ç¨‹ï¼Œä¾‹å¦‚åœæ­¢Nginxï¼š 1killall nginx ä¸ºæŒ‡å®šåŸŸåç”Ÿæˆè¯ä¹¦ï¼š 1certbot certonly --standalone -d åŸŸå1 -d åŸŸå2 æŸ¥çœ‹åŸŸåè¯ä¹¦çš„è·¯å¾„å’Œå›½æ——æ—¶é—´ 1certbot certificates ç”Ÿæˆçš„è¯æ–‡ä»¶ä½ç½®ï¼š 1/etc/letsencrypt/live/blog.kobingo.xyz/ é…ç½®Nginxç¼–è¾‘/etc/nginx/conf.d/default.conf: 1234567891011121314151617181920212223242526server &#123; listen 80; server_name blog.kobingo.xyz; rewrite ^(.*) https://$server_name$1 permanent;&#125;server &#123; listen 443 ssl; server_name blog.kobingo.xyz; charset utf-8; ssl_certificate /etc/letsencrypt/live/blog.kobingo.xyz/fullchain.pem; ssl_certificate_key /etc/letsencrypt/live/blog.kobingo.xyz/privkey.pem; ssl_protocols TLSv1.2 TLSv1.3; # TLSv1.3éœ€è¦nginx 1.13.0ä»¥ä¸Šç‰ˆæœ¬ # å¦‚æœnginxç‰ˆæœ¬ä½ï¼Œå»ºè®®ä½¿ç”¨è¿™ç§åŠ å¯†ç®—æ³•é…ç½® # ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:ECDHE:ECDH:AES:HIGH:!NULL:!aNULL:!MD5:!ADH:!RC4; ssl_ciphers ECDHE-RSA-AES256-GCM-SHA512:DHE-RSA-AES256-GCM-SHA512:ECDHE-RSA-AES256-GCM-SHA384:DHE-RSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-SHA384; ssl_ecdh_curve secp384r1; ssl_prefer_server_ciphers on; ssl_session_cache shared:SSL:10m; ssl_session_timeout 10m; ssl_session_tickets off; keepalive_timeout 70; # è¿™é‡Œå¡«å†™å…¶ä»–é…ç½®&#125; æŸ¥çœ‹é…ç½®æœ‰æ— é”™è¯¯ï¼š 1nginx -t å¦‚æœæ²¡æœ‰é”™è¯¯ï¼Œåˆ™å¯åŠ¨Nginxï¼š 1systemctl restart nginx.service è¯ä¹¦è‡ªåŠ¨æ›´æ–°Letâ€™s Encryptè¯ä¹¦çš„æœ‰æ•ˆæœŸæ˜¯ä¸‰ä¸ªæœˆï¼Œè¶…è¿‡æœŸé™åˆ™éœ€è¦ç»­ç­¾ã€‚è¯ä¹¦ç»­æœŸå¯ä»¥æ‰‹åŠ¨å®Œæˆï¼Œä¾‹å¦‚ï¼š 123systemctl stop nginxcertbot renewsystemctl restart nginx ä¹Ÿå¯ä»¥é…ç½®crontabä»»åŠ¡è‡ªåŠ¨ç»­ç­¾ï¼Œåœ¨/etc/crontabæ–‡ä»¶æœ«æ·»åŠ ä¸€è¡Œï¼š 10 0 1 */2 0 root systemctl stop nginx; /usr/local/bin/certbot renew; systemctl restart nginx","categories":[{"name":"others","slug":"others","permalink":"http://blog.kobingo.xyz/categories/others/"}],"tags":[{"name":"å…¨æ ˆ","slug":"å…¨æ ˆ","permalink":"http://blog.kobingo.xyz/tags/%E5%85%A8%E6%A0%88/"},{"name":"nginx","slug":"nginx","permalink":"http://blog.kobingo.xyz/tags/nginx/"}]},{"title":"æ–‡ç« æ‘˜å½•","slug":"collection","date":"2019-05-06T15:35:35.000Z","updated":"2021-01-19T06:41:41.218Z","comments":true,"path":"collection/","link":"","permalink":"http://blog.kobingo.xyz/collection/","excerpt":"åœ¨è¿™é‡Œè®°å½•ä¸€äº›çœ‹åˆ°çš„å¥½æ–‡ç« å¥½åšå®¢","text":"åœ¨è¿™é‡Œè®°å½•ä¸€äº›çœ‹åˆ°çš„å¥½æ–‡ç« å¥½åšå®¢ é¾™æ© 0707 cdn å…¨æ ˆä¿®ç‚¼ å‰ç«¯è¿›é˜¶ä¹‹é“ å¤§å‰ç«¯é¢è¯•å®å…¸ - å›¾è§£å‰ç«¯ æœªæ¥å¯æœŸçš„ TypeScript åˆ«å†è¯´è™šæ‹Ÿ DOM å¿«äº†ï¼Œè¦è¢«æ‰“è„¸çš„ æ·±å…¥ç†è§£è™šæ‹Ÿ DOMï¼Œå®ƒçœŸçš„ä¸å¿« Deep In React ä¹‹è¯¦è°ˆ React 16 Diff ç­–ç•¥(äºŒ) ReactFiber åœ¨å¹¶å‘æ¨¡å¼ä¸‹çš„è¿è¡Œæœºåˆ¶ å‰ç«¯æµè§ˆå™¨è¾“å…¥ URL åå‘ç”Ÿä»€ä¹ˆ å¤§å…¬å¸å¦‚ä½•éƒ¨ç½²å‰ç«¯ä»£ç  Vuexã€Fluxã€Reduxã€Redux-sagaã€Dvaã€MobXç´¯æ­»ç´¯æ´»åšä¸šåŠ¡ï¼Œç»©æ•ˆè¿˜ä¸æ€ä¹ˆæ ·ï¼Œæˆ‘åªèƒ½å¸®ä½ åˆ°è¿™äº†â€¦â€¦","categories":[{"name":"é¢è¯•","slug":"é¢è¯•","permalink":"http://blog.kobingo.xyz/categories/%E9%9D%A2%E8%AF%95/"}],"tags":[{"name":"å‰ç«¯","slug":"å‰ç«¯","permalink":"http://blog.kobingo.xyz/tags/%E5%89%8D%E7%AB%AF/"},{"name":"é¢è¯•","slug":"é¢è¯•","permalink":"http://blog.kobingo.xyz/tags/%E9%9D%A2%E8%AF%95/"}]},{"title":"åŸºäºhexoæ­å»ºä¸ªäººåšå®¢å¹¶ä½¿ç”¨GitHub Actionsä¸€é”®å‘å¸ƒåˆ°GitHub pages & é˜¿é‡Œäº‘ECS","slug":"others-hexo","date":"2019-04-28T15:15:23.000Z","updated":"2021-01-19T06:41:41.222Z","comments":true,"path":"others-hexo/","link":"","permalink":"http://blog.kobingo.xyz/others-hexo/","excerpt":"Hexo æ˜¯ä¸€ä¸ªå¿«é€Ÿã€ç®€æ´ä¸”é«˜æ•ˆçš„åšå®¢æ¡†æ¶ã€‚Hexo ä½¿ç”¨ Markdownï¼ˆæˆ–å…¶ä»–æ¸²æŸ“å¼•æ“ï¼‰è§£ææ–‡ç« ï¼Œåœ¨å‡ ç§’å†…ï¼Œå³å¯åˆ©ç”¨é“ä¸½çš„ä¸»é¢˜ç”Ÿæˆé™æ€ç½‘é¡µã€‚æœ¬æ–‡è®°å½•äº†ä½¿ç”¨ Hexo åˆ›å»ºä¸ªäººåšå®¢å¹¶ä½¿ç”¨GitHub Actionsä¸€é”®å‘å¸ƒåˆ° GitHub pages å’Œ é˜¿é‡Œäº‘ECSä¸Šçš„å…¨è¿‡ç¨‹ã€‚","text":"Hexo æ˜¯ä¸€ä¸ªå¿«é€Ÿã€ç®€æ´ä¸”é«˜æ•ˆçš„åšå®¢æ¡†æ¶ã€‚Hexo ä½¿ç”¨ Markdownï¼ˆæˆ–å…¶ä»–æ¸²æŸ“å¼•æ“ï¼‰è§£ææ–‡ç« ï¼Œåœ¨å‡ ç§’å†…ï¼Œå³å¯åˆ©ç”¨é“ä¸½çš„ä¸»é¢˜ç”Ÿæˆé™æ€ç½‘é¡µã€‚æœ¬æ–‡è®°å½•äº†ä½¿ç”¨ Hexo åˆ›å»ºä¸ªäººåšå®¢å¹¶ä½¿ç”¨GitHub Actionsä¸€é”®å‘å¸ƒåˆ° GitHub pages å’Œ é˜¿é‡Œäº‘ECSä¸Šçš„å…¨è¿‡ç¨‹ã€‚ ä»€ä¹ˆæ˜¯ Hexoï¼ŸHexo æ˜¯ä¸€ä¸ªå¿«é€Ÿã€ç®€æ´ä¸”é«˜æ•ˆçš„åšå®¢æ¡†æ¶ã€‚Hexo ä½¿ç”¨ Markdownï¼ˆæˆ–å…¶ä»–æ¸²æŸ“å¼•æ“ï¼‰è§£ææ–‡ç« ï¼Œåœ¨å‡ ç§’å†…ï¼Œå³å¯åˆ©ç”¨é“ä¸½çš„ä¸»é¢˜ç”Ÿæˆé™æ€ç½‘é¡µã€‚ å®‰è£…å®‰è£…å‰æå®‰è£… Hexo å‰ï¼Œè¯·å…ˆç¡®ä¿æ‚¨çš„ç”µè„‘ä¸Šå·²ç»å®‰è£…äº†ä¸‹åˆ—åº”ç”¨ç¨‹åºï¼š Node.js (Node.js ç‰ˆæœ¬éœ€ä¸ä½äº 8.10ï¼Œå»ºè®®ä½¿ç”¨ Node.js 10.0 åŠä»¥ä¸Šç‰ˆæœ¬) Git æ³¨ï¼š å¦‚æœæ‚¨çš„ç”µè„‘æœªå®‰è£… Node æˆ–è€… Gitï¼Œè¯·å…ˆå®‰è£…åå†é˜…è¯»ä¸‹é¢å†…å®¹ å®‰è£… Hexoä½¿ç”¨ npm: 1$ npm install -g hexo-cli ä½¿ç”¨ yarn: 1$ yarn global add hexo-cli å»ºç«™å®‰è£… Hexo å®Œæˆåï¼Œè¯·æ‰§è¡Œä¸‹åˆ—å‘½ä»¤ï¼ŒHexo å°†ä¼šåœ¨æŒ‡å®šæ–‡ä»¶å¤¹ä¸­æ–°å»ºæ‰€éœ€è¦çš„æ–‡ä»¶ã€‚ 123$ hexo init &lt;folder&gt;$ cd &lt;folder&gt;$ npm install æ–°å»ºå®Œæˆåï¼ŒæŒ‡å®šæ–‡ä»¶å¤¹çš„ç›®å½•å¦‚ä¸‹ï¼š 12345678.â”œâ”€â”€ _config.ymlâ”œâ”€â”€ package.jsonâ”œâ”€â”€ scaffoldsâ”œâ”€â”€ source| â”œâ”€â”€ _drafts| â””â”€â”€ _postsâ””â”€â”€ themes _config.ymlç½‘ç«™çš„ é…ç½® ä¿¡æ¯ï¼Œæ‚¨å¯ä»¥åœ¨æ­¤é…ç½®å¤§éƒ¨åˆ†çš„å‚æ•°ã€‚ scaffoldsæ¨¡ç‰ˆ æ–‡ä»¶å¤¹ã€‚å½“æ‚¨æ–°å»ºæ–‡ç« æ—¶ï¼ŒHexo ä¼šæ ¹æ® scaffold æ¥å»ºç«‹æ–‡ä»¶ã€‚ sourceèµ„æºæ–‡ä»¶å¤¹æ˜¯å­˜æ”¾ç”¨æˆ·èµ„æºçš„åœ°æ–¹ã€‚é™¤ _posts æ–‡ä»¶å¤¹ä¹‹å¤–ï¼Œå¼€å¤´å‘½åä¸º _ (ä¸‹åˆ’çº¿)çš„æ–‡ä»¶ / æ–‡ä»¶å¤¹å’Œéšè—çš„æ–‡ä»¶å°†ä¼šè¢«å¿½ç•¥ã€‚Markdown å’Œ HTML æ–‡ä»¶ä¼šè¢«è§£æå¹¶æ”¾åˆ° public æ–‡ä»¶å¤¹ï¼Œè€Œå…¶ä»–æ–‡ä»¶ä¼šè¢«æ‹·è´è¿‡å» themesä¸»é¢˜ æ–‡ä»¶å¤¹ã€‚Hexo ä¼šæ ¹æ®ä¸»é¢˜æ¥ç”Ÿæˆé™æ€é¡µé¢ã€‚ å¸¸ç”¨å‘½ä»¤newæ–°å»ºä¸€ç¯‡æ–‡ç«  1$ hexo new [layout] &lt;title&gt; generateç”Ÿæˆé™æ€æ–‡ä»¶ã€‚ 1$ hexo generate publishå‘è¡¨è‰ç¨¿ã€‚ 1$ hexo publish [layout] &lt;filename&gt; serverå¯åŠ¨æœåŠ¡å™¨ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œè®¿é—®ç½‘å€ä¸ºï¼š http://localhost:4000/ã€‚ 1$ hexo server deployéƒ¨ç½²ç½‘ç«™ã€‚ 1$ hexo deploy cleanæ¸…é™¤ç¼“å­˜æ–‡ä»¶ (db.json) å’Œå·²ç”Ÿæˆçš„é™æ€æ–‡ä»¶ (public)ã€‚åœ¨æŸäº›æƒ…å†µï¼ˆå°¤å…¶æ˜¯æ›´æ¢ä¸»é¢˜åï¼‰ï¼Œå¦‚æœå‘ç°æ‚¨å¯¹ç«™ç‚¹çš„æ›´æ”¹æ— è®ºå¦‚ä½•ä¹Ÿä¸ç”Ÿæ•ˆï¼Œæ‚¨å¯èƒ½éœ€è¦è¿è¡Œè¯¥å‘½ä»¤ã€‚ 1$ hexo clean liståˆ—å‡ºç½‘ç«™èµ„æ–™ã€‚ 1$ hexo list &lt;type&gt; æ³¨ï¼š æ›´å¤šå‘½ä»¤è§å®˜ç½‘ éƒ¨ç½² GitHub pageså¦‚æœæ‚¨åªæ˜¯æƒ³éƒ¨ç½²åˆ°GitHub Actionsä¸Šï¼Œé‚£ä¹ˆå¯ä»¥ç›´æ¥ç”¨è¿™èŠ‚çš„æ–¹æ³•ã€‚å¦‚æœè¿˜æƒ³éƒ¨ç½²åˆ°é˜¿é‡Œäº‘ç­‰ç§äººæœåŠ¡å™¨ä¸Šï¼Œé‚£ä¹ˆå¯ä»¥è·³è¿‡è¿™æ­¥ï¼Œç›´æ¥çœ‹ä¸‹ä¸€èŠ‚ã€‚ æ–°å»º GitHub é¡¹ç›®æ‰“å¼€ GitHub ç‚¹å‡»å³ä¸Šè§’çš„new repository ç„¶ååœ¨ä¸‹å›¾æ‰€ç¤ºä¸­ï¼Œè¾“å…¥é¡¹ç›®åç§°ï¼ˆåé¢ä¸€å®šè¦åŠ .github.io åç¼€ï¼‰ï¼Œå‹¾é€‰ readme åˆå§‹åŒ–ï¼Œç‚¹å‡»å®Œæˆåˆ›å»º å®‰è£… hexo-deployer-gitã€‚1$ npm install hexo-deployer-git --save ä¿®æ”¹_config.yml é…ç½®1234deploy: type: git repo: git@github.com:jiangawait&#x2F;jiangawait.github.io.git branch: master æ‰§è¡Œå‘½ä»¤æ‰§è¡Œ hexo deploy å°†ç”Ÿæˆçš„æ–‡ä»¶éƒ¨ç½²åˆ°ä¸Šä¸€æ­¥é…ç½®çš„ä»“åº“å¯¹åº”çš„åˆ†æ”¯ä¸Šå»ã€‚ 1hexo clean &amp;&amp; hexo deploy è‡³æ­¤ï¼Œå·²ç»å®ç°äº†ä¸ªäººåšå®¢çš„æ­å»ºå¹¶å®Œæˆäº†ä¸€é”®å‘å¸ƒåˆ°GitHub Pagesçš„åŠŸèƒ½ï¼Œå¦‚æœåªéœ€è¦å‘å¸ƒåˆ°GitHub Pagesï¼Œé‚£ä¹ˆè‡³æ­¤å·²ç»å¯ä»¥æ„‰å¿«åœ°å†™æ–‡ç« äº†ã€‚ ä½†æ˜¯ç”±äºæ€»æ‰€å‘¨çŸ¥çš„åŸå› ï¼ŒGitHubåœ¨å›½å†…çš„è®¿é—®é€Ÿåº¦æ€»æ˜¯æ—¶å¥½æ—¶åï¼Œä¸å¤Ÿç•…å¿«ã€‚ é‚£ä¹ˆå¦‚æœä½ æ‰‹é‡Œæ°å¥½æœ‰é—²ç½®çš„äº‘æœåŠ¡å™¨ï¼Œé‚£ä¹ˆæ¥ä¸‹å»å°±æ›´è¿›ä¸€æ­¥å§ï¼ğŸ™‚ GitHub Actionsç™»åœºGitHub Actions æ˜¯ GitHub äº2018å¹´10æœˆæ¨å‡ºçš„æŒç»­é›†æˆæœåŠ¡ã€‚åŠŸèƒ½éå¸¸å¼ºå¤§ï¼Œå…·ä½“çš„åŸºç¡€ç”¨æ³•ä¸èµ˜è¿°ï¼Œå¯ä»¥å‚é˜…é˜®ä¸€å³°è€å¸ˆçš„æ•™ç¨‹ã€‚ è¿™é‡Œä¸»è¦ä»‹ç»å¦‚ä½•é…ç½®GitHub Actionså®ç°è‡ªåŠ¨éƒ¨ç½²åŠŸèƒ½ã€‚ åˆ›å»ºworkflow æ–‡ä»¶GitHub Actions çš„é…ç½®æ–‡ä»¶å«åš workflow æ–‡ä»¶, å­˜æ”¾åœ¨ä»£ç ä»“åº“çš„.github/workflowsç›®å½•ã€‚ æ–°å»º.github/workflows/deploy.yml, å…·ä½“é…ç½®å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152name: Hexo build and deployon: push: branches: - blog # blogåˆ†æ”¯æ˜¯æœ¬äººçš„hexoæºç åˆ†æ”¯jobs: build: runs-on: ubuntu-latest steps: # åˆ‡æ¢åˆ†æ”¯ - name: Checkout uses: actions/checkout@v2 # If you're using actions/checkout@v2 you must set persist-credentials to false in most cases for the deployment to work correctly. with: persist-credentials: false # checkoutåˆ°ä½ çš„hexoä»£ç åˆ†æ”¯ ref: blog # hexoéœ€è¦åŠ è½½å†…éƒ¨å­æ¨¡å— submodules: true # ä½¿ç”¨ node:10 - name: use Node.js 10 uses: actions/setup-node@v1 with: node-version: 10 # å®‰è£…npmåŒ… &amp; ç”Ÿæˆé™æ€æ–‡ä»¶ - name: Install and publish run: | npm install npm run build # å°†é™æ€æ–‡ä»¶éƒ¨ç½²åˆ°é˜¿é‡Œäº‘ - name: Deploy to aliyun server uses: easingthemes/ssh-deploy@v2.0.7 env: SSH_PRIVATE_KEY: $&#123;&#123; secrets.ALIYUN_SERVER_ACCESS_TOKEN &#125;&#125; ARGS: \"-avz --delete\" SOURCE: \"public\" REMOTE_HOST: $&#123;&#123; secrets.ALIYUN_SERVER_HOST &#125;&#125; REMOTE_USER: \"root\" TARGET: \"/code/hexo-blog\" # é™æ€èµ„æºå­˜æ”¾ç›®å½• # å°†é™æ€æ–‡ä»¶éƒ¨ç½²åˆ°github pages - name: Deploy to Github Pages uses: JamesIves/github-pages-deploy-action@releases/v3 with: ACCESS_TOKEN: $&#123;&#123; secrets.ACCESS_TOKEN &#125;&#125; BASE_BRANCH: blog BRANCH: master FOLDER: public é…ç½®å‚æ•°è¯´æ˜ ALIYUN_SERVER_HOSTï¼š é˜¿é‡Œäº‘æœåŠ¡å™¨å…¬ç½‘IPï¼› ALIYUN_SERVER_ACCESS_TOKENï¼šé˜¿é‡Œäº‘.sshä¸‹çš„ç§é’¥(id_rsa); å¦‚æœæœªç”Ÿæˆè¿‡ï¼Œå¯ä»¥æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š1ssh-keygen -m PEM -t rsa -b 4096 æŠŠå…¬é’¥å¤åˆ¶ä¸€ä»½åˆ°authorized_keysä¸­:12cat id_rsa.pub &gt;&gt; ~/.ssh/authorized_keyschmod 600 ~/.ssh/authorized_keys ACCESS_TOKEN: GitHub å¯†é’¥, æŒ‰ç…§å®˜æ–¹æ–‡æ¡£ç”Ÿæˆä¸€ä¸ªç§˜é’¥ã€‚ ä»¥ä¸Šä¸‰ä¸ªå‚æ•°éƒ½ä¿å­˜åˆ°è‡ªå·±ä»“åº“-&gt;settings-&gt;Secretsé‡Œé¢ï¼š æ„å»ºç»“æœå°†æ•´ä¸ªä»“åº“æ¨é€åˆ°GitHubï¼ŒGitHub å‘ç°äº† workflow æ–‡ä»¶ä»¥åï¼Œå°±ä¼šè‡ªåŠ¨è¿è¡Œã€‚ è‡³æ­¤ï¼Œæˆ‘ä»¬å·²ç»å°†åšå®¢éƒ¨ç½²åˆ°GitHub Actionså’Œé˜¿é‡Œäº‘ä¸Šäº†ã€‚é˜¿é‡Œäº‘ä¸Šæˆ‘ä»¬å¯ä»¥ä½¿ç”¨Nginxæ‰˜ç®¡é™æ€èµ„æºï¼š 12345678server &#123; listen 80; server_name blog.kobingo.xyz; location / &#123; root /code/hexo-blog/public; # é™æ€èµ„æºå­˜æ”¾ç›®å½• index index.html; &#125;&#125; ä¸€åˆ‡å¤§åŠŸå‘Šæˆï¼æ”¶å·¥ğŸ˜„","categories":[{"name":"others","slug":"others","permalink":"http://blog.kobingo.xyz/categories/others/"}],"tags":[{"name":"åšå®¢æ­å»º","slug":"åšå®¢æ­å»º","permalink":"http://blog.kobingo.xyz/tags/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/"}]},{"title":"æµè§ˆå™¨ç¼“å­˜IntersectionObserveråŸç†åˆ†æ","slug":"æµè§ˆå™¨-æµè§ˆå™¨ç¼“å­˜","date":"2018-10-23T17:10:38.000Z","updated":"2021-01-19T06:41:41.222Z","comments":true,"path":"æµè§ˆå™¨-æµè§ˆå™¨ç¼“å­˜/","link":"","permalink":"http://blog.kobingo.xyz/%E6%B5%8F%E8%A7%88%E5%99%A8-%E6%B5%8F%E8%A7%88%E5%99%A8%E7%BC%93%E5%AD%98/","excerpt":"æµè§ˆå™¨ç¼“å­˜ä½œä¸ºæ€§èƒ½ä¼˜åŒ–çš„é‡è¦ä¸€ç¯ï¼Œå¯¹äºå‰ç«¯è€Œè¨€ï¼Œé‡è¦æ€§ä¸è¨€è€Œå–»ã€‚ä»¥å‰æ€»æ˜¯ä¸€çŸ¥åŠè§£çš„ï¼Œæ‰€ä»¥è¿™æ¬¡å¥½å¥½æ•´ç†æ€»ç»“äº†ä¸€ä¸‹ã€‚","text":"æµè§ˆå™¨ç¼“å­˜ä½œä¸ºæ€§èƒ½ä¼˜åŒ–çš„é‡è¦ä¸€ç¯ï¼Œå¯¹äºå‰ç«¯è€Œè¨€ï¼Œé‡è¦æ€§ä¸è¨€è€Œå–»ã€‚ä»¥å‰æ€»æ˜¯ä¸€çŸ¥åŠè§£çš„ï¼Œæ‰€ä»¥è¿™æ¬¡å¥½å¥½æ•´ç†æ€»ç»“äº†ä¸€ä¸‹ã€‚ é¦–å…ˆæˆ‘ä»¬æ¥æ€»ä½“æ„ŸçŸ¥ä¸€ä¸‹å®ƒçš„åŒ¹é…æµç¨‹ï¼Œå¦‚ä¸‹ï¼š æµè§ˆå™¨å‘é€è¯·æ±‚å‰ï¼Œæ ¹æ®è¯·æ±‚å¤´çš„expireså’Œcache-controlåˆ¤æ–­æ˜¯å¦å‘½ä¸­ï¼ˆåŒ…æ‹¬æ˜¯å¦è¿‡æœŸï¼‰å¼ºç¼“å­˜ç­–ç•¥ï¼Œå¦‚æœå‘½ä¸­ï¼Œç›´æ¥ä»ç¼“å­˜è·å–èµ„æºï¼Œå¹¶ä¸ä¼šå‘é€è¯·æ±‚ã€‚å¦‚æœæ²¡æœ‰å‘½ä¸­ï¼Œåˆ™è¿›å…¥ä¸‹ä¸€æ­¥ã€‚ æ²¡æœ‰å‘½ä¸­å¼ºç¼“å­˜è§„åˆ™ï¼Œæµè§ˆå™¨ä¼šå‘é€è¯·æ±‚ï¼Œæ ¹æ®è¯·æ±‚å¤´çš„last-modifiedå’Œetagåˆ¤æ–­æ˜¯å¦å‘½ä¸­åå•†ç¼“å­˜ï¼Œå¦‚æœå‘½ä¸­ï¼Œç›´æ¥ä»ç¼“å­˜è·å–èµ„æºã€‚å¦‚æœæ²¡æœ‰å‘½ä¸­ï¼Œåˆ™è¿›å…¥ä¸‹ä¸€æ­¥ã€‚ å¦‚æœå‰ä¸¤æ­¥éƒ½æ²¡æœ‰å‘½ä¸­ï¼Œåˆ™ç›´æ¥ä»æœåŠ¡ç«¯è·å–èµ„æºã€‚ å¼ºç¼“å­˜ï¼šä¸ä¼šå‘æœåŠ¡å™¨å‘é€è¯·æ±‚ï¼Œç›´æ¥ä»ç¼“å­˜ä¸­è¯»å–èµ„æºã€‚ 2.1 å¼ºç¼“å­˜åŸç†å¼ºåˆ¶ç¼“å­˜å°±æ˜¯å‘æµè§ˆå™¨ç¼“å­˜æŸ¥æ‰¾è¯¥è¯·æ±‚ç»“æœï¼Œå¹¶æ ¹æ®è¯¥ç»“æœçš„ç¼“å­˜è§„åˆ™æ¥å†³å®šæ˜¯å¦ä½¿ç”¨è¯¥ç¼“å­˜ç»“æœçš„è¿‡ç¨‹ï¼Œå¼ºåˆ¶ç¼“å­˜çš„æƒ…å†µä¸»è¦æœ‰ä¸‰ç§(æš‚ä¸åˆ†æåå•†ç¼“å­˜è¿‡ç¨‹)ï¼Œå¦‚ä¸‹ï¼š ç¬¬ä¸€æ¬¡è¯·æ±‚ï¼Œä¸å­˜åœ¨ç¼“å­˜ç»“æœå’Œç¼“å­˜æ ‡è¯†ï¼Œç›´æ¥å‘æœåŠ¡å™¨å‘é€è¯·æ±‚ å­˜åœ¨ç¼“å­˜æ ‡è¯†å’Œç¼“å­˜ç»“æœï¼Œä½†æ˜¯å·²ç»å¤±æ•ˆï¼Œå¼ºåˆ¶ç¼“å­˜æ˜¯å•Šæ¯”ï¼Œåˆ™ä½¿ç”¨åå•†ç¼“å­˜ï¼ˆæš‚ä¸åˆ†æï¼‰ å­˜åœ¨è¯¥ç¼“å­˜ç»“æœå’Œç¼“å­˜æ ‡è¯†ï¼Œä¸”è¯¥ç»“æœå°šæœªå¤±æ•ˆï¼Œå¼ºåˆ¶ç¼“å­˜ç”Ÿæ•ˆï¼Œç›´æ¥è¿”å›è¯¥ç»“æœ é‚£ä¹ˆå¼ºåˆ¶ç¼“å­˜çš„ç¼“å­˜è§„åˆ™æ˜¯ä»€ä¹ˆï¼Ÿå½“æµè§ˆå™¨å‘æœåŠ¡å™¨å‘èµ·è¯·æ±‚æ—¶ï¼ŒæœåŠ¡å™¨ä¼šå°†ç¼“å­˜è§„åˆ™æ”¾å…¥HTTPå“åº”æŠ¥æ–‡çš„HTTPå¤´ä¸­å’Œè¯·æ±‚ç»“æœä¸€èµ·è¿”å›ç»™æµè§ˆå™¨ï¼Œæ§åˆ¶å¼ºåˆ¶ç¼“å­˜çš„å­—æ®µåˆ†åˆ«æ˜¯Expireså’ŒCache-Controlï¼Œå…¶ä¸­Cache-Controlä¼˜å…ˆçº§æ¯”Expiresé«˜ã€‚ 2.1.1ã€ Expiresç¼“å­˜è¿‡æœŸæ—¶é—´ï¼Œç”¨æ¥æŒ‡å®šèµ„æºåˆ°æœŸçš„æ—¶é—´ï¼Œæ˜¯æœåŠ¡å™¨ç«¯çš„å…·ä½“çš„æ—¶é—´ç‚¹ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒExpires=max-age + è¯·æ±‚æ—¶é—´ï¼Œéœ€è¦å’ŒLast-modifiedç»“åˆä½¿ç”¨ã€‚Expiresæ˜¯WebæœåŠ¡å™¨å“åº”æ¶ˆæ¯å¤´å­—æ®µï¼Œåœ¨å“åº”httpè¯·æ±‚æ—¶å‘Šè¯‰æµè§ˆå™¨åœ¨è¿‡æœŸæ—¶é—´å‰æµè§ˆå™¨å¯ä»¥ç›´æ¥ä»æµè§ˆå™¨ç¼“å­˜å–æ•°æ®ï¼Œè€Œæ— éœ€å†æ¬¡è¯·æ±‚ã€‚ Expires æ˜¯ HTTP/1 çš„äº§ç‰©ï¼Œå—é™äºæœ¬åœ°æ—¶é—´ï¼Œå¦‚æœä¿®æ”¹äº†æœ¬åœ°æ—¶é—´ï¼Œå¯èƒ½ä¼šé€ æˆç¼“å­˜å¤±æ•ˆã€‚ 2.1.2ã€ Cache-Controlåœ¨HTTP/1.1ä¸­ï¼ŒCache-Controlæ˜¯æœ€é‡è¦çš„è§„åˆ™ï¼Œä¸»è¦ç”¨äºæ§åˆ¶ç½‘é¡µç¼“å­˜ï¼Œä¸»è¦å–å€¼ä¸ºï¼š publicï¼šæ‰€æœ‰å†…å®¹éƒ½å°†è¢«ç¼“å­˜ï¼ˆå®¢æˆ·ç«¯å’Œä»£ç†æœåŠ¡å™¨éƒ½å¯ç¼“å­˜ï¼‰ privateï¼šæ‰€æœ‰å†…å®¹åªæœ‰å®¢æˆ·ç«¯å¯ä»¥ç¼“å­˜ï¼ŒCache-Controlçš„é»˜è®¤å–å€¼ no-cacheï¼šå®¢æˆ·ç«¯ç¼“å­˜å†…å®¹ï¼Œä½†æ˜¯æ˜¯å¦ä½¿ç”¨ç¼“å­˜åˆ™éœ€è¦ç»è¿‡åå•†ç¼“å­˜æ¥éªŒè¯å†³å®š no-storeï¼šæ‰€æœ‰å†…å®¹éƒ½ä¸ä¼šè¢«ç¼“å­˜ï¼Œå³ä¸ä½¿ç”¨å¼ºåˆ¶ç¼“å­˜ï¼Œä¹Ÿä¸ä½¿ç”¨åå•†ç¼“å­˜ max-age=xxx (xxx is numeric)ï¼šç¼“å­˜å†…å®¹å°†åœ¨xxxç§’åå¤±æ•ˆ éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œno-cacheè¿™ä¸ªåå­—æœ‰ä¸€ç‚¹è¯¯å¯¼ã€‚è®¾ç½®äº†no-cacheä¹‹åï¼Œå¹¶ä¸æ˜¯è¯´æµè§ˆå™¨å°±ä¸å†ç¼“å­˜æ•°æ®ï¼Œåªæ˜¯æµè§ˆå™¨åœ¨ä½¿ç”¨ç¼“å­˜æ•°æ®æ—¶ï¼Œéœ€è¦å…ˆç¡®è®¤ä¸€ä¸‹æ•°æ®æ˜¯å¦è¿˜è·ŸæœåŠ¡å™¨ä¿æŒä¸€è‡´ï¼Œä¹Ÿå°±æ˜¯åå•†ç¼“å­˜ã€‚è€Œno-storeæ‰è¡¨ç¤ºä¸ä¼šè¢«ç¼“å­˜ï¼Œå³ä¸ä½¿ç”¨å¼ºåˆ¶ç¼“å­˜ï¼Œä¹Ÿä¸ä½¿ç”¨åå•†ç¼“å­˜ 2.1.3ã€è®¾ç½®å¼ºç¼“å­˜éœ€è¦æœåŠ¡ç«¯è®¾ç½®expireså’Œcache-controlã€‚nginxä»£ç å‚è€ƒï¼Œè®¾ç½®äº†ä¸€å¹´çš„ç¼“å­˜æ—¶é—´ï¼š location ~ .*\\.(ico|svg|ttf|eot|woff)(.*) { proxy_cache pnc; proxy_cache_valid 200 304 1y; proxy_cache_valid any 1m; proxy_cache_lock on; proxy_cache_lock_timeout 5s; proxy_cache_use_stale updating error timeout invalid_header http_500 http_502; expires 1y; }æµè§ˆå™¨çš„ç¼“å­˜å­˜æ”¾åœ¨å“ªé‡Œï¼Œå¦‚ä½•åœ¨æµè§ˆå™¨ä¸­åˆ¤æ–­å¼ºåˆ¶ç¼“å­˜æ˜¯å¦ç”Ÿæ•ˆï¼Ÿè¿™å°±æ˜¯ä¸‹é¢æˆ‘ä»¬è¦è®²åˆ°çš„from disk cacheå’Œfrom memory cacheã€‚ 2.2ã€from disk cacheå’Œfrom memory cacheç»†å¿ƒåœ°åŒå­¦åœ¨å¼€å‘çš„æ—¶å€™åº”è¯¥æ³¨æ„åˆ°äº†Chromeçš„ç½‘ç»œè¯·æ±‚çš„Sizeä¼šå‡ºç°ä¸‰ç§æƒ…å†µfrom disk cache(ç£ç›˜ç¼“å­˜)ã€from memory cache(å†…å­˜ç¼“å­˜)ã€ä»¥åŠèµ„æºå¤§å°æ•°å€¼ã€‚ çŠ¶æ€ ç±»å‹ è¯´æ˜ 200 form memory cache ä¸è¯·æ±‚ç½‘ç»œèµ„æºï¼Œèµ„æºåœ¨å†…å­˜å½“ä¸­ï¼Œä¸€èˆ¬è„šæœ¬ã€å­—ä½“ã€å›¾ç‰‡ä¼šå­˜åœ¨å†…å­˜å½“ä¸­ 200 form disk ceche ä¸è¯·æ±‚ç½‘ç»œèµ„æºï¼Œåœ¨ç£ç›˜å½“ä¸­ï¼Œä¸€èˆ¬éè„šæœ¬ä¼šå­˜åœ¨å†…å­˜å½“ä¸­ï¼Œå¦‚cssç­‰ 200 èµ„æºå¤§å°æ•°å€¼ ä»æœåŠ¡å™¨ä¸‹è½½æœ€æ–°èµ„æº 304 æŠ¥æ–‡å¤§å° è¯·æ±‚æœåŠ¡ç«¯å‘ç°èµ„æºæ²¡æœ‰æ›´æ–°ï¼Œä½¿ç”¨æœ¬åœ°èµ„æº æµè§ˆå™¨è¯»å–ç¼“å­˜çš„é¡ºåºä¸ºmemory â€“&gt; diskã€‚ä»¥è®¿é—®https://github.com/xiangxingchen/blogä¸ºä¾‹æˆ‘ä»¬ç¬¬ä¸€æ¬¡è®¿é—®æ—¶https://github.com/xiangxingchen/blogå…³é—­æ ‡ç­¾é¡µï¼Œå†æ­¤æ‰“å¼€https://github.com/xiangxingchen/blogæ—¶F5åˆ·æ–°æ—¶ ç®€å•çš„å¯¹æ¯”ä¸€ä¸‹ åå•†ç¼“å­˜å°±æ˜¯å¼ºåˆ¶ç¼“å­˜å¤±æ•ˆåï¼Œæµè§ˆå™¨æºå¸¦ç¼“å­˜æ ‡è¯†å‘æœåŠ¡å™¨å‘èµ·è¯·æ±‚ï¼Œç”±æœåŠ¡å™¨æ ¹æ®ç¼“å­˜æ ‡è¯†å†³å®šæ˜¯å¦ä½¿ç”¨ç¼“å­˜çš„è¿‡ç¨‹ï¼Œä¸»è¦æœ‰ä»¥ä¸‹ä¸¤ç§æƒ…å†µï¼š åå•†ç¼“å­˜ç”Ÿæ•ˆï¼Œè¿”å›304å’ŒNot Modified åå•†ç¼“å­˜å¤±æ•ˆï¼Œè¿”å›200å’Œè¯·æ±‚ç»“æœ 3.1ã€Last-Modifiedå’ŒIf-Modified-Since æµè§ˆå™¨é¦–å…ˆå‘é€ä¸€ä¸ªè¯·æ±‚ï¼Œè®©æœåŠ¡ç«¯åœ¨response headerä¸­è¿”å›è¯·æ±‚çš„èµ„æºä¸Šæ¬¡æ›´æ–°æ—¶é—´ï¼Œå°±æ˜¯last-modifiedï¼Œæµè§ˆå™¨ä¼šç¼“å­˜ä¸‹è¿™ä¸ªæ—¶é—´ã€‚ ç„¶åæµè§ˆå™¨å†ä¸‹æ¬¡è¯·æ±‚ä¸­ï¼Œrequest headerä¸­å¸¦ä¸Šif-modified-since:[ä¿å­˜çš„last-modifiedçš„å€¼]ã€‚æ ¹æ®æµè§ˆå™¨å‘é€çš„ä¿®æ”¹æ—¶é—´å’ŒæœåŠ¡ç«¯çš„ä¿®æ”¹æ—¶é—´è¿›è¡Œæ¯”å¯¹ï¼Œä¸€è‡´çš„è¯ä»£è¡¨èµ„æºæ²¡æœ‰æ”¹å˜ï¼ŒæœåŠ¡ç«¯è¿”å›æ­£æ–‡ä¸ºç©ºçš„å“åº”ï¼Œè®©æµè§ˆå™¨ä¸­ç¼“å­˜ä¸­è¯»å–èµ„æºï¼Œè¿™å°±å¤§å¤§å‡å°äº†è¯·æ±‚çš„æ¶ˆè€—ã€‚ ç”±äºlast-modifiedä¾èµ–çš„æ˜¯ä¿å­˜çš„ç»å¯¹æ—¶é—´ï¼Œè¿˜æ˜¯ä¼šå‡ºç°è¯¯å·®çš„æƒ…å†µï¼š ä¿å­˜çš„æ—¶é—´æ˜¯ä»¥ç§’ä¸ºå•ä½çš„ï¼Œ1ç§’å†…å¤šæ¬¡ä¿®æ”¹æ˜¯æ— æ³•æ•æ‰åˆ°çš„ï¼› å„æœºå™¨è¯»å–åˆ°çš„æ—¶é—´ä¸ä¸€è‡´ï¼Œå°±æœ‰å‡ºç°è¯¯å·®çš„å¯èƒ½æ€§ã€‚ä¸ºäº†æ”¹å–„è¿™ä¸ªé—®é¢˜ï¼Œæå‡ºäº†ä½¿ç”¨etagã€‚ 3.2ã€ETagå’ŒIf-None-Matchetagæ˜¯httpåè®®æä¾›çš„è‹¥å¹²æœºåˆ¶ä¸­çš„ä¸€ç§Webç¼“å­˜éªŒè¯æœºåˆ¶ï¼Œå¹¶ä¸”å…è®¸å®¢æˆ·ç«¯è¿›è¡Œç¼“å­˜åå•†ã€‚ç”Ÿæˆetagå¸¸ç”¨çš„æ–¹æ³•åŒ…æ‹¬å¯¹èµ„æºå†…å®¹ä½¿ç”¨æŠ—ç¢°æ’æ•£åˆ—å‡½æ•°ï¼Œä½¿ç”¨æœ€è¿‘ä¿®æ”¹çš„æ—¶é—´æˆ³çš„å“ˆå¸Œå€¼ï¼Œç”šè‡³åªæ˜¯ä¸€ä¸ªç‰ˆæœ¬å·ã€‚ å’Œlast-modifiedä¸€æ ·. æµè§ˆå™¨ä¼šå…ˆå‘é€ä¸€ä¸ªè¯·æ±‚å¾—åˆ°etagçš„å€¼ï¼Œç„¶åå†ä¸‹ä¸€æ¬¡è¯·æ±‚åœ¨request headerä¸­å¸¦ä¸Šif-none-match:[ä¿å­˜çš„etagçš„å€¼]ã€‚ é€šè¿‡å‘é€çš„etagçš„å€¼å’ŒæœåŠ¡ç«¯é‡æ–°ç”Ÿæˆçš„etagçš„å€¼è¿›è¡Œæ¯”å¯¹ï¼Œå¦‚æœä¸€è‡´ä»£è¡¨èµ„æºæ²¡æœ‰æ”¹å˜ï¼ŒæœåŠ¡ç«¯è¿”å›æ­£æ–‡ä¸ºç©ºçš„å“åº”ï¼Œå‘Šè¯‰æµè§ˆå™¨ä»ç¼“å­˜ä¸­è¯»å–èµ„æºã€‚ etagèƒ½å¤Ÿè§£å†³last-modifiedçš„ä¸€äº›ç¼ºç‚¹ï¼Œä½†æ˜¯etagæ¯æ¬¡æœåŠ¡ç«¯ç”Ÿæˆéƒ½éœ€è¦è¿›è¡Œè¯»å†™æ“ä½œï¼Œè€Œlast-modifiedåªéœ€è¦è¯»å–æ“ä½œï¼Œä»è¿™æ–¹é¢æ¥çœ‹ï¼Œetagçš„æ¶ˆè€—æ˜¯æ›´å¤§çš„ã€‚ äºŒè€…å¯¹æ¯” ç²¾ç¡®åº¦ä¸Šï¼šEtagè¦ä¼˜äºLast-Modifiedã€‚ ä¼˜å…ˆçº§ä¸Šï¼šæœåŠ¡å™¨æ ¡éªŒä¼˜å…ˆè€ƒè™‘Etagã€‚ æ€§èƒ½ä¸Šï¼šEtagè¦é€ŠäºLast-Modified æ‰“å¼€ç½‘é¡µï¼Œåœ°å€æ è¾“å…¥åœ°å€ï¼š æŸ¥æ‰¾ disk cache ä¸­æ˜¯å¦æœ‰åŒ¹é…ã€‚å¦‚æœ‰åˆ™ä½¿ç”¨ï¼›å¦‚æ²¡æœ‰åˆ™å‘é€ç½‘ç»œè¯·æ±‚ã€‚ æ™®é€šåˆ·æ–° (F5)ï¼šå› ä¸º TAB å¹¶æ²¡æœ‰å…³é—­ï¼Œå› æ­¤ memory cache æ˜¯å¯ç”¨çš„ï¼Œä¼šè¢«ä¼˜å…ˆä½¿ç”¨(å¦‚æœåŒ¹é…çš„è¯)ã€‚å…¶æ¬¡æ‰æ˜¯ disk cacheã€‚ å¼ºåˆ¶åˆ·æ–° (Ctrl + F5)ï¼šæµè§ˆå™¨ä¸ä½¿ç”¨ç¼“å­˜ï¼Œå› æ­¤å‘é€çš„è¯·æ±‚å¤´éƒ¨å‡å¸¦æœ‰ Cache-control:no-cache(ä¸ºäº†å…¼å®¹ï¼Œè¿˜å¸¦äº† Pragma:no-cache),æœåŠ¡å™¨ç›´æ¥è¿”å› 200 å’Œæœ€æ–°å†…å®¹ã€‚ Source","categories":[{"name":"æµè§ˆå™¨","slug":"æµè§ˆå™¨","permalink":"http://blog.kobingo.xyz/categories/%E6%B5%8F%E8%A7%88%E5%99%A8/"}],"tags":[{"name":"ç¼“å­˜","slug":"ç¼“å­˜","permalink":"http://blog.kobingo.xyz/tags/%E7%BC%93%E5%AD%98/"}]},{"title":"jsæµ®ç‚¹æ•°é™·è¿›ä¸è§£æ³•","slug":"javascript-jsæµ®ç‚¹æ•°é™·è¿›ä¸è§£æ³•","date":"2018-10-15T18:48:33.000Z","updated":"2021-01-19T06:41:41.222Z","comments":true,"path":"javascript-jsæµ®ç‚¹æ•°é™·è¿›ä¸è§£æ³•/","link":"","permalink":"http://blog.kobingo.xyz/javascript-js%E6%B5%AE%E7%82%B9%E6%95%B0%E9%99%B7%E8%BF%9B%E4%B8%8E%E8%A7%A3%E6%B3%95/","excerpt":"ä¼—æ‰€å‘¨çŸ¥ï¼ŒJavaScript æµ®ç‚¹æ•°è¿ç®—æ—¶ç»å¸¸é‡åˆ°ä¼š 0.000000001 å’Œ 0.999999999 è¿™æ ·å¥‡æ€ªçš„ç»“æœï¼Œå¦‚ 0.1+0.2=0.30000000000000004ã€1-0.9=0.09999999999999998ï¼Œå¾ˆå¤šäººçŸ¥é“è¿™æ˜¯æµ®ç‚¹æ•°è¯¯å·®é—®é¢˜ï¼Œä½†å…·ä½“åŸå› å°±è¯´ä¸æ¸…æ¥šäº†ã€‚æœ¬æ–‡å¸®ä½ ç†æ¸…è¿™èƒŒåçš„åŸç†ä»¥åŠè§£å†³æ–¹æ¡ˆï¼Œè¿˜ä¼šå‘ä½ è§£é‡ŠJSä¸­çš„å¤§æ•°å±æœºå’Œå››åˆ™è¿ç®—ä¸­ä¼šé‡åˆ°çš„å‘ã€‚","text":"ä¼—æ‰€å‘¨çŸ¥ï¼ŒJavaScript æµ®ç‚¹æ•°è¿ç®—æ—¶ç»å¸¸é‡åˆ°ä¼š 0.000000001 å’Œ 0.999999999 è¿™æ ·å¥‡æ€ªçš„ç»“æœï¼Œå¦‚ 0.1+0.2=0.30000000000000004ã€1-0.9=0.09999999999999998ï¼Œå¾ˆå¤šäººçŸ¥é“è¿™æ˜¯æµ®ç‚¹æ•°è¯¯å·®é—®é¢˜ï¼Œä½†å…·ä½“åŸå› å°±è¯´ä¸æ¸…æ¥šäº†ã€‚æœ¬æ–‡å¸®ä½ ç†æ¸…è¿™èƒŒåçš„åŸç†ä»¥åŠè§£å†³æ–¹æ¡ˆï¼Œè¿˜ä¼šå‘ä½ è§£é‡ŠJSä¸­çš„å¤§æ•°å±æœºå’Œå››åˆ™è¿ç®—ä¸­ä¼šé‡åˆ°çš„å‘ã€‚ æµ®ç‚¹æ•°çš„å­˜å‚¨é¦–å…ˆè¦ææ¸…æ¥š JavaScript å¦‚ä½•å­˜å‚¨å°æ•°ã€‚å’Œå…¶å®ƒè¯­è¨€å¦‚ Java å’Œ Python ä¸åŒï¼ŒJavaScript ä¸­æ‰€æœ‰æ•°å­—åŒ…æ‹¬æ•´æ•°å’Œå°æ•°éƒ½åªæœ‰ä¸€ç§ç±»å‹ â€” Numberã€‚å®ƒçš„å®ç°éµå¾ª IEEE 754 æ ‡å‡†ï¼Œä½¿ç”¨ 64 ä½å›ºå®šé•¿åº¦æ¥è¡¨ç¤ºï¼Œä¹Ÿå°±æ˜¯æ ‡å‡†çš„ double åŒç²¾åº¦æµ®ç‚¹æ•°ï¼ˆç›¸å…³çš„è¿˜æœ‰float 32ä½å•ç²¾åº¦ï¼‰ã€‚è®¡ç®—æœºç»„æˆåŸç†ä¸­æœ‰è¿‡è¯¦ç»†ä»‹ç»ï¼Œå¦‚æœä½ ä¸è®°å¾—ä¹Ÿæ²¡å…³ç³»ã€‚ æ³¨ï¼šå¤§å¤šæ•°è¯­è¨€ä¸­çš„å°æ•°é»˜è®¤éƒ½æ˜¯éµå¾ª IEEE 754 çš„ float æµ®ç‚¹æ•°ï¼ŒåŒ…æ‹¬ Javaã€Rubyã€Pythonï¼Œæœ¬æ–‡ä¸­çš„æµ®ç‚¹æ•°é—®é¢˜åŒæ ·å­˜åœ¨ã€‚ è¿™æ ·çš„å­˜å‚¨ç»“æ„ä¼˜ç‚¹æ˜¯å¯ä»¥å½’ä¸€åŒ–å¤„ç†æ•´æ•°å’Œå°æ•°ï¼ŒèŠ‚çœå­˜å‚¨ç©ºé—´ã€‚ 64ä½æ¯”ç‰¹åˆå¯åˆ†ä¸ºä¸‰ä¸ªéƒ¨åˆ†ï¼š ç¬¦å·ä½Sï¼šç¬¬ 1 ä½æ˜¯æ­£è´Ÿæ•°ç¬¦å·ä½ï¼ˆsignï¼‰ï¼Œ0ä»£è¡¨æ­£æ•°ï¼Œ1ä»£è¡¨è´Ÿæ•° æŒ‡æ•°ä½Eï¼šä¸­é—´çš„ 11 ä½å­˜å‚¨æŒ‡æ•°ï¼ˆexponentï¼‰ï¼Œç”¨æ¥è¡¨ç¤ºæ¬¡æ–¹æ•° å°¾æ•°ä½Mï¼šæœ€åçš„ 52 ä½æ˜¯å°¾æ•°ï¼ˆmantissaï¼‰ï¼Œè¶…å‡ºçš„éƒ¨åˆ†è‡ªåŠ¨è¿›ä¸€èˆé›¶ å®é™…æ•°å­—å°±å¯ä»¥ç”¨ä»¥ä¸‹å…¬å¼æ¥è®¡ç®—ï¼š æ³¨æ„ä»¥ä¸Šçš„å…¬å¼éµå¾ªç§‘å­¦è®¡æ•°æ³•çš„è§„èŒƒï¼Œåœ¨åè¿›åˆ¶ä¸­ 0&lt;M&lt;10ï¼Œåˆ°äºŒè¿›åˆ¶å°±æ˜¯ 0&lt;M&lt;2ã€‚ä¹Ÿå°±æ˜¯è¯´æ•´æ•°éƒ¨åˆ†åªèƒ½æ˜¯1ï¼Œæ‰€ä»¥å¯ä»¥è¢«èˆå»ï¼Œåªä¿ç•™åé¢çš„å°æ•°éƒ¨åˆ†ã€‚å¦‚ 4.5 è½¬æˆäºŒè¿›åˆ¶å°±æ˜¯ 100.1ï¼Œç§‘å­¦è®¡æ•°æ³•è¡¨ç¤ºæ˜¯ 1.001*2^2ï¼Œèˆå»1å M = 001ã€‚Eæ˜¯ä¸€ä¸ªæ— ç¬¦å·æ•´æ•°ï¼Œå› ä¸ºé•¿åº¦æ˜¯11ä½ï¼Œå–å€¼èŒƒå›´æ˜¯ 0~2047ã€‚ä½†æ˜¯ç§‘å­¦è®¡æ•°æ³•ä¸­çš„æŒ‡æ•°æ˜¯å¯ä»¥ä¸ºè´Ÿæ•°çš„ï¼Œæ‰€ä»¥çº¦å®šå‡å»ä¸€ä¸ªä¸­é—´æ•° 1023ï¼Œ[0,1022] è¡¨ç¤ºä¸ºè´Ÿï¼Œ[1024,2047] è¡¨ç¤ºä¸ºæ­£ã€‚å¦‚ 4.5 çš„æŒ‡æ•° E = 1025ï¼Œå°¾æ•° M = 001ã€‚ æœ€ç»ˆçš„å…¬å¼å˜æˆï¼š æ‰€ä»¥ 4.5 æœ€ç»ˆè¡¨ç¤ºä¸ºï¼ˆM=001ã€E=1025ï¼‰ï¼š (å›¾ç‰‡ç”±æ­¤ç”Ÿæˆ http://www.binaryconvert.com/convert_double.html) ä¸‹é¢å†ä»¥ 0.1 ä¸ºä¾‹è§£é‡Šæµ®ç‚¹è¯¯å·®çš„åŸå› ï¼Œ0.1 è½¬æˆäºŒè¿›åˆ¶è¡¨ç¤ºä¸º 0.0001100110011001100(1100å¾ªç¯)ï¼Œ1.100110011001100x2^-4ï¼Œæ‰€ä»¥ E=-4+1023=1019ï¼›M èˆå»é¦–ä½çš„1ï¼Œå¾—åˆ° 100110011...ã€‚æœ€ç»ˆå°±æ˜¯ï¼š è½¬åŒ–æˆåè¿›åˆ¶åä¸º 0.100000000000000005551115123126ï¼Œå› æ­¤å°±å‡ºç°äº†æµ®ç‚¹è¯¯å·®ã€‚ ä¸ºä»€ä¹ˆ 0.1+0.2=0.30000000000000004ï¼Ÿè®¡ç®—æ­¥éª¤ä¸ºï¼š // 0.1 å’Œ 0.2 éƒ½è½¬åŒ–æˆäºŒè¿›åˆ¶åå†è¿›è¡Œè¿ç®— 0.00011001100110011001100110011001100110011001100110011010 + 0.0011001100110011001100110011001100110011001100110011010 = 0.0100110011001100110011001100110011001100110011001100111 // è½¬æˆåè¿›åˆ¶æ­£å¥½æ˜¯ 0.30000000000000004ä¸ºä»€ä¹ˆ x=0.1 èƒ½å¾—åˆ° 0.1ï¼Ÿæ­å–œä½ åˆ°äº†çœ‹å±±ä¸æ˜¯å±±çš„å¢ƒç•Œã€‚å› ä¸º mantissa å›ºå®šé•¿åº¦æ˜¯ 52 ä½ï¼Œå†åŠ ä¸Šçœç•¥çš„ä¸€ä½ï¼Œæœ€å¤šå¯ä»¥è¡¨ç¤ºçš„æ•°æ˜¯ 2^53=9007199254740992ï¼Œå¯¹åº”ç§‘å­¦è®¡æ•°å°¾æ•°æ˜¯ 9.007199254740992ï¼Œè¿™ä¹Ÿæ˜¯ JS æœ€å¤šèƒ½è¡¨ç¤ºçš„ç²¾åº¦ã€‚å®ƒçš„é•¿åº¦æ˜¯ 16ï¼Œæ‰€ä»¥å¯ä»¥è¿‘ä¼¼ä½¿ç”¨ toPrecision(16) æ¥åšç²¾åº¦è¿ç®—ï¼Œè¶…è¿‡çš„ç²¾åº¦ä¼šè‡ªåŠ¨åšå‡‘æ•´å¤„ç†ã€‚äºæ˜¯å°±æœ‰ï¼š 0.10000000000000000555.toPrecision(16) // è¿”å› 0.1000000000000000ï¼Œå»æ‰æœ«å°¾çš„é›¶åæ­£å¥½ä¸º 0.1 // ä½†ä½ çœ‹åˆ°çš„ `0.1` å®é™…ä¸Šå¹¶ä¸æ˜¯ `0.1`ã€‚ä¸ä¿¡ä½ å¯ç”¨æ›´é«˜çš„ç²¾åº¦è¯•è¯•ï¼š 0.1.toPrecision(21) = 0.100000000000000005551å¤§æ•°å±æœºå¯èƒ½ä½ å·²ç»éšçº¦æ„Ÿè§‰åˆ°äº†ï¼Œå¦‚æœæ•´æ•°å¤§äº 9007199254740992 ä¼šå‡ºç°ä»€ä¹ˆæƒ…å†µå‘¢ï¼Ÿç”±äº E æœ€å¤§å€¼æ˜¯ 1023ï¼Œæ‰€ä»¥æœ€å¤§å¯ä»¥è¡¨ç¤ºçš„æ•´æ•°æ˜¯ 2^1024 - 1ï¼Œè¿™å°±æ˜¯èƒ½è¡¨ç¤ºçš„æœ€å¤§æ•´æ•°ã€‚ä½†ä½ å¹¶ä¸èƒ½è¿™æ ·è®¡ç®—è¿™ä¸ªæ•°å­—ï¼Œå› ä¸ºä» 2^1024 å¼€å§‹å°±å˜æˆäº† Infinity &gt; Math.pow(2, 1023) 8.98846567431158e+307 &gt; Math.pow(2, 1024) Infinityé‚£ä¹ˆå¯¹äº (2^53, 2^63) ä¹‹é—´çš„æ•°ä¼šå‡ºç°ä»€ä¹ˆæƒ…å†µå‘¢ï¼Ÿ (2^53, 2^54) ä¹‹é—´çš„æ•°ä¼šä¸¤ä¸ªé€‰ä¸€ä¸ªï¼Œåªèƒ½ç²¾ç¡®è¡¨ç¤ºå¶æ•° (2^54, 2^55) ä¹‹é—´çš„æ•°ä¼šå››ä¸ªé€‰ä¸€ä¸ªï¼Œåªèƒ½ç²¾ç¡®è¡¨ç¤º4ä¸ªå€æ•° â€¦ ä¾æ¬¡è·³è¿‡æ›´å¤š2çš„å€æ•° ä¸‹é¢è¿™å¼ å›¾èƒ½å¾ˆå¥½çš„è¡¨ç¤º JavaScript ä¸­æµ®ç‚¹æ•°å’Œå®æ•°ï¼ˆReal Numberï¼‰ä¹‹é—´çš„å¯¹åº”å…³ç³»ã€‚æˆ‘ä»¬å¸¸ç”¨çš„ (-2^53, 2^53) åªæ˜¯æœ€ä¸­é—´éå¸¸å°çš„ä¸€éƒ¨åˆ†ï¼Œè¶Šå¾€ä¸¤è¾¹è¶Šç¨€ç–è¶Šä¸ç²¾ç¡®ã€‚ åœ¨æ·˜å®æ—©æœŸçš„è®¢å•ç³»ç»Ÿä¸­æŠŠè®¢å•å·å½“ä½œæ•°å­—å¤„ç†ï¼Œåæ¥éšæ„è®¢å•å·æš´å¢ï¼Œå·²ç»è¶…è¿‡äº†9007199254740992ï¼Œæœ€ç»ˆçš„è§£æ³•æ˜¯æŠŠè®¢å•å·æ”¹æˆå­—ç¬¦ä¸²å¤„ç†ã€‚ è¦æƒ³è§£å†³å¤§æ•°çš„é—®é¢˜ä½ å¯ä»¥å¼•ç”¨ç¬¬ä¸‰æ–¹åº“ bignumber.jsï¼ŒåŸç†æ˜¯æŠŠæ‰€æœ‰æ•°å­—å½“ä½œå­—ç¬¦ä¸²ï¼Œé‡æ–°å®ç°äº†è®¡ç®—é€»è¾‘ï¼Œç¼ºç‚¹æ˜¯æ€§èƒ½æ¯”åŸç”Ÿçš„å·®å¾ˆå¤šï¼Œæ‰€ä»¥åŸç”Ÿæ”¯æŒå¤§æ•°å°±å¾ˆæœ‰å¿…è¦äº†ã€‚TC39 å·²ç»æœ‰ä¸€ä¸ª Stage 3 çš„ææ¡ˆ proposal bigintï¼Œå¤§æ•°é—®é¢˜æœ‰æœ›å½»åº•è§£å†³ã€‚åœ¨æµè§ˆå™¨æ­£å¼æ”¯æŒå‰ï¼Œå¯ä»¥ä½¿ç”¨ Babel 7.0 æ¥å®ç°ï¼Œå®ƒçš„å†…éƒ¨æ˜¯è‡ªåŠ¨è½¬æ¢æˆ big-integer æ¥è®¡ç®—ï¼Œè¿™æ ·èƒ½ä¿æŒç²¾åº¦ä½†è¿ç®—æ•ˆç‡ä¼šé™ä½ã€‚ toPrecision vs toFixedæ•°æ®å¤„ç†æ—¶ï¼Œè¿™ä¸¤ä¸ªå‡½æ•°å¾ˆå®¹æ˜“æ··æ·†ã€‚å®ƒä»¬çš„å…±åŒç‚¹æ˜¯æŠŠæ•°å­—è½¬æˆå­—ç¬¦ä¸²ä¾›å±•ç¤ºä½¿ç”¨ã€‚æ³¨æ„åœ¨è®¡ç®—çš„ä¸­é—´è¿‡ç¨‹ä¸è¦ä½¿ç”¨ï¼Œåªç”¨äºæœ€ç»ˆç»“æœã€‚ ä¸åŒç‚¹å°±éœ€è¦æ³¨æ„ä¸€ä¸‹ï¼š toPrecision æ˜¯å¤„ç†ç²¾åº¦ï¼Œç²¾åº¦æ˜¯ä»å·¦è‡³å³ç¬¬ä¸€ä¸ªä¸ä¸º0çš„æ•°å¼€å§‹æ•°èµ·ã€‚ toFixed æ˜¯å°æ•°ç‚¹åæŒ‡å®šä½æ•°å–æ•´ï¼Œä»å°æ•°ç‚¹å¼€å§‹æ•°èµ·ã€‚ ä¸¤è€…éƒ½èƒ½å¯¹å¤šä½™æ•°å­—åšå‡‘æ•´å¤„ç†ï¼Œä¹Ÿæœ‰äº›äººç”¨ toFixed æ¥åšå››èˆäº”å…¥ï¼Œä½†ä¸€å®šè¦çŸ¥é“å®ƒæ˜¯æœ‰ Bug çš„ã€‚ å¦‚ï¼š1.005.toFixed(2) è¿”å›çš„æ˜¯ 1.00 è€Œä¸æ˜¯ 1.01ã€‚ åŸå› ï¼š 1.005 å®é™…å¯¹åº”çš„æ•°å­—æ˜¯ 1.00499999999999989ï¼Œåœ¨å››èˆäº”å…¥æ—¶å…¨éƒ¨è¢«èˆå»ï¼ è§£æ³•ï¼šä½¿ç”¨å››èˆäº”å…¥å‡½æ•° Math.round() æ¥å¤„ç†ã€‚ä½† Math.round(1.005 * 100) / 100è¿˜æ˜¯ä¸è¡Œï¼Œå› ä¸º 1.005 * 100 = 100.49999999999999ã€‚è¿˜éœ€è¦æŠŠä¹˜æ³•å’Œé™¤æ³•ç²¾åº¦è¯¯å·®éƒ½è§£å†³åå†ä½¿ç”¨ Math.roundã€‚å¯ä»¥ä½¿ç”¨åé¢ä»‹ç»çš„ number-precision#round æ–¹æ³•æ¥è§£å†³ã€‚ è§£å†³æ–¹æ¡ˆå›åˆ°æœ€å…³å¿ƒçš„é—®é¢˜ï¼šå¦‚ä½•è§£å†³æµ®ç‚¹è¯¯å·®ã€‚é¦–å…ˆï¼Œç†è®ºä¸Šç”¨æœ‰é™çš„ç©ºé—´æ¥å­˜å‚¨æ— é™çš„å°æ•°æ˜¯ä¸å¯èƒ½ä¿è¯ç²¾ç¡®çš„ï¼Œä½†æˆ‘ä»¬å¯ä»¥å¤„ç†ä¸€ä¸‹å¾—åˆ°æˆ‘ä»¬æœŸæœ›çš„ç»“æœã€‚ æ•°æ®å±•ç¤ºç±»å½“ä½ æ‹¿åˆ° 1.4000000000000001 è¿™æ ·çš„æ•°æ®è¦å±•ç¤ºæ—¶ï¼Œå»ºè®®ä½¿ç”¨ toPrecision å‡‘æ•´å¹¶ parseFloat è½¬æˆæ•°å­—åå†æ˜¾ç¤ºï¼Œå¦‚ä¸‹ï¼š parseFloat(1.4000000000000001.toPrecision(12)) === 1.4 // Trueå°è£…æˆæ–¹æ³•å°±æ˜¯ï¼š function strip(num, precision = 12) { return +parseFloat(num.toPrecision(precision)); }ä¸ºä»€ä¹ˆé€‰æ‹© 12 åšä¸ºé»˜è®¤ç²¾åº¦ï¼Ÿè¿™æ˜¯ä¸€ä¸ªç»éªŒçš„é€‰æ‹©ï¼Œä¸€èˆ¬é€‰12å°±èƒ½è§£å†³æ‰å¤§éƒ¨åˆ†0001å’Œ0009é—®é¢˜ï¼Œè€Œä¸”å¤§éƒ¨åˆ†æƒ…å†µä¸‹ä¹Ÿå¤Ÿç”¨äº†ï¼Œå¦‚æœä½ éœ€è¦æ›´ç²¾ç¡®å¯ä»¥è°ƒé«˜ã€‚ æ•°æ®è¿ç®—ç±»å¯¹äºè¿ç®—ç±»æ“ä½œï¼Œå¦‚ +-*/ï¼Œå°±ä¸èƒ½ä½¿ç”¨ toPrecision äº†ã€‚æ­£ç¡®çš„åšæ³•æ˜¯æŠŠå°æ•°è½¬æˆæ•´æ•°åå†è¿ç®—ã€‚ä»¥åŠ æ³•ä¸ºä¾‹ï¼š /** * ç²¾ç¡®åŠ æ³• */ function add(num1, num2) { const num1Digits = (num1.toString().split(&apos;.&apos;)[1] || &apos;&apos;).length; const num2Digits = (num2.toString().split(&apos;.&apos;)[1] || &apos;&apos;).length; const baseNum = Math.pow(10, Math.max(num1Digits, num2Digits)); return (num1 * baseNum + num2 * baseNum) / baseNum; }ä»¥ä¸Šæ–¹æ³•èƒ½é€‚ç”¨äºå¤§éƒ¨åˆ†åœºæ™¯ã€‚é‡åˆ°ç§‘å­¦è®¡æ•°æ³•å¦‚ 2.3e+1ï¼ˆå½“æ•°å­—ç²¾åº¦å¤§äº21æ—¶ï¼Œæ•°å­—ä¼šå¼ºåˆ¶è½¬ä¸ºç§‘å­¦è®¡æ•°æ³•å½¢å¼æ˜¾ç¤ºï¼‰æ—¶è¿˜éœ€è¦ç‰¹åˆ«å¤„ç†ä¸€ä¸‹ã€‚ èƒ½è¯»åˆ°è¿™é‡Œï¼Œè¯´æ˜ä½ éå¸¸æœ‰è€å¿ƒï¼Œé‚£æˆ‘å°±æ”¾ä¸ªç¦åˆ©å§ã€‚é‡åˆ°æµ®ç‚¹æ•°è¯¯å·®é—®é¢˜æ—¶å¯ä»¥ç›´æ¥ä½¿ç”¨https://github.com/dt-fe/number-precision å®Œç¾æ”¯æŒæµ®ç‚¹æ•°çš„åŠ å‡ä¹˜é™¤ã€å››èˆäº”å…¥ç­‰è¿ç®—ã€‚éå¸¸å°åªæœ‰1Kï¼Œè¿œå°äºç»å¤§å¤šæ•°åŒç±»åº“ï¼ˆå¦‚Math.jsã€BigDecimal.jsï¼‰ï¼Œ100%æµ‹è¯•å…¨è¦†ç›–ï¼Œä»£ç å¯è¯»æ€§å¼ºï¼Œä¸å¦¨åœ¨ä½ çš„åº”ç”¨é‡Œç”¨èµ·æ¥ï¼ å‚è€ƒ Double-precision floating-point format What Every Programmer Should Know About Floating-Point Arithmetic Why Computers are Bad at Algebra | Infinite Series Is Your Model Susceptible to Floating-Point Errors? åŸæ–‡é‡Œé“¾æ¥","categories":[{"name":"javascript","slug":"javascript","permalink":"http://blog.kobingo.xyz/categories/javascript/"}],"tags":[{"name":"number","slug":"number","permalink":"http://blog.kobingo.xyz/tags/number/"},{"name":"bigint","slug":"bigint","permalink":"http://blog.kobingo.xyz/tags/bigint/"}]},{"title":"Event Loopè¯¦è§£","slug":"javascript-event-loop","date":"2018-03-01T18:55:10.000Z","updated":"2021-01-19T06:41:41.222Z","comments":true,"path":"javascript-event-loop/","link":"","permalink":"http://blog.kobingo.xyz/javascript-event-loop/","excerpt":"JavaScriptä»è¯ç”Ÿèµ·å°±æ˜¯ä¸€é—¨å•çº¿ç¨‹çš„è¯­è¨€,å•çº¿ç¨‹çš„ç¼ºç‚¹æ˜¯ä»»åŠ¡æ‰§è¡Œä¼šé˜»å¡ï¼Œè¡¨ç°åˆ°ç½‘é¡µé‡Œæ˜¯ï¼šå‘èµ·æ•°æ®è¯·æ±‚ â€“&gt; httpå»¶è¿Ÿ â€“&gt; ç­‰å¾…å®Œæˆï¼Œç­‰å¾…çš„è¿‡ç¨‹ä¸­ï¼Œå…¶ä»–æ“ä½œæ— æ³•æ‰§è¡Œï¼Œå¯¼è‡´é¡µé¢é•¿æ—¶é—´æ— å“åº”ã€‚ JavaScriptç”¨å¼‚æ­¥å›è°ƒï¼ˆasynchronous callbackï¼‰å»è§£å†³è¿™äº›é—®é¢˜ã€‚å®ç°å¼‚æ­¥å›è°ƒçš„ç‰¹æ€§ï¼Œå…¶å®æ˜¯åŸºäºEvent Loopï¼ˆäº‹ä»¶å¾ªç¯ï¼‰ã€‚","text":"JavaScriptä»è¯ç”Ÿèµ·å°±æ˜¯ä¸€é—¨å•çº¿ç¨‹çš„è¯­è¨€,å•çº¿ç¨‹çš„ç¼ºç‚¹æ˜¯ä»»åŠ¡æ‰§è¡Œä¼šé˜»å¡ï¼Œè¡¨ç°åˆ°ç½‘é¡µé‡Œæ˜¯ï¼šå‘èµ·æ•°æ®è¯·æ±‚ â€“&gt; httpå»¶è¿Ÿ â€“&gt; ç­‰å¾…å®Œæˆï¼Œç­‰å¾…çš„è¿‡ç¨‹ä¸­ï¼Œå…¶ä»–æ“ä½œæ— æ³•æ‰§è¡Œï¼Œå¯¼è‡´é¡µé¢é•¿æ—¶é—´æ— å“åº”ã€‚ JavaScriptç”¨å¼‚æ­¥å›è°ƒï¼ˆasynchronous callbackï¼‰å»è§£å†³è¿™äº›é—®é¢˜ã€‚å®ç°å¼‚æ­¥å›è°ƒçš„ç‰¹æ€§ï¼Œå…¶å®æ˜¯åŸºäºEvent Loopï¼ˆäº‹ä»¶å¾ªç¯ï¼‰ã€‚ å…ˆäº†è§£ä¸€ç‚¹åŸºç¡€çŸ¥è¯†1. JavaScriptçš„ Engine å’Œ Runtimeç®€å•æ¥è¯´ï¼Œä¸ºäº†è®© JavaScript è¿è¡Œèµ·æ¥ï¼Œè¦å®Œæˆä¸¤éƒ¨åˆ†å·¥ä½œï¼ˆå½“ç„¶å®é™…æ¯”è¿™å¤æ‚å¾—å¤šï¼‰ï¼š ç¬¬ä¸€éƒ¨åˆ†æ˜¯Engineï¼ˆJSå¼•æ“ï¼‰ï¼šç¼–è¯‘å¹¶æ‰§è¡Œ JavaScript ä»£ç ï¼Œå®Œæˆå†…å­˜åˆ†é…ã€åƒåœ¾å›æ”¶ç­‰ï¼›ç¬¬äºŒéƒ¨åˆ†æ˜¯æ˜¯ Runtimeï¼ˆè¿è¡Œæ—¶ï¼‰ï¼šä¸º JavaScript æä¾›ä¸€äº›å¯¹è±¡æˆ–æœºåˆ¶ï¼Œä½¿å®ƒèƒ½å¤Ÿä¸å¤–ç•Œäº¤äº’ã€‚ ä¸¾ä¸ªä¾‹å­ï¼š Chromeæµè§ˆå™¨ å’Œ Node.js éƒ½ä½¿ç”¨äº† V8 Engineã€‚V8 å®ç°å¹¶æä¾›äº† ECMAScript æ ‡å‡†ä¸­çš„æ‰€æœ‰æ•°æ®ç±»å‹ã€æ“ä½œç¬¦ã€å¯¹è±¡å’Œæ–¹æ³•ï¼ˆæ³¨æ„å¹¶æ²¡æœ‰ DOMï¼‰ã€‚ ä½†å®ƒä»¬çš„ Runtime å¹¶ä¸ä¸€æ ·ï¼šChrome æä¾›äº† windowã€DOMï¼Œè€Œ Node.js åˆ™æ˜¯ requireã€process ç­‰ç­‰ã€‚ 2. æµè§ˆå™¨çš„çº¿ç¨‹ç°ä»£æµè§ˆå™¨çš„ä¸€ä¸ª tab ï¼Œå…¶ä¸­çš„çº¿ç¨‹åŒ…æ‹¬ä½†ä¸å±€é™äºï¼š GUI æ¸²æŸ“çº¿ç¨‹ JSå¼•æ“çº¿ç¨‹ äº‹ä»¶è§¦å‘çº¿ç¨‹ å®šæ—¶å™¨è§¦å‘çº¿ç¨‹ å¼‚æ­¥httpè¯·æ±‚çº¿ç¨‹ JavaScriptä¸­çš„å¼‚æ­¥å›è°ƒæ˜¯é€šè¿‡ WebAPIs å»æ”¯æŒçš„ï¼Œå¸¸è§çš„æœ‰ XMLHttpRequestï¼ŒsetTimeoutï¼Œäº‹ä»¶å›è°ƒï¼ˆonclik, onscrollç­‰ï¼‰ã€‚è€Œè¿™å‡ ä¸ª API æµè§ˆå™¨éƒ½æä¾›äº†å•ç‹¬çš„çº¿ç¨‹å»è¿è¡Œï¼Œæ‰€ä»¥æ‰ä¼šæœ‰åˆé€‚çš„åœ°æ–¹å»å¤„ç†å®šæ—¶å™¨çš„è®¡æ—¶ã€å„ç§è¯·æ±‚çš„å›è°ƒã€‚å³å½“ä»£ç ä¸­å‡ºç°è¿™å‡ ä¸ªå®šä¹‰çš„å¼‚æ­¥ä»»åŠ¡ï¼Œæ˜¯ç”±æµè§ˆå™¨å®ç°äº†å®ƒä»¬ä¸JSå¼•æ“çš„é€šä¿¡ï¼Œä¸JSå¼•æ“ä¸å±ä¸åŒä¸€ä¸ªçº¿ç¨‹ã€‚ å¦å¤–ï¼ŒGUI æ¸²æŸ“å’ŒJavaScriptæ‰§è¡Œæ˜¯äº’æ–¥çš„ã€‚è™½ç„¶ä¸¤è€…å±äºä¸åŒçš„çº¿ç¨‹ï¼Œä½†æ˜¯ç”±äºJavaScriptæ‰§è¡Œç»“æœå¯èƒ½ä¼šå¯¹é¡µé¢äº§ç”Ÿå½±å“ï¼Œæ‰€ä»¥æµè§ˆå™¨å¯¹æ­¤åšäº†å¤„ç†ï¼Œå¤§éƒ¨åˆ†æƒ…å†µä¸‹JavaScriptçº¿ç¨‹æ‰§è¡Œï¼Œæ‰§è¡Œæ¸²æŸ“ï¼ˆrenderï¼‰çš„çº¿ç¨‹å°±ä¼šæš‚åœï¼Œç­‰JavaScriptçš„åŒæ­¥ä»£ç æ‰§è¡Œå®Œå†å»æ¸²æŸ“ã€‚ Event loopçš„å®šä¹‰Event Loopï¼ˆäº‹ä»¶å¾ªç¯ï¼‰ æ˜¯è®© JavaScript åšåˆ°æ—¢æ˜¯å•çº¿ç¨‹ï¼Œåˆç»å¯¹ä¸ä¼šé˜»å¡çš„æ ¸å¿ƒæœºåˆ¶ï¼Œä¹Ÿæ˜¯ JavaScript å¹¶å‘æ¨¡å‹ï¼ˆConcurrency Modelï¼‰çš„åŸºç¡€ï¼Œæ˜¯ç”¨æ¥åè°ƒå„ç§äº‹ä»¶ã€ç”¨æˆ·äº¤äº’ã€è„šæœ¬æ‰§è¡Œã€UI æ¸²æŸ“ã€ç½‘ç»œè¯·æ±‚ç­‰çš„ä¸€ç§æœºåˆ¶ã€‚Event Loopçš„ä½œç”¨å¾ˆç®€å•ï¼š ç›‘æ§è°ƒç”¨æ ˆå’Œä»»åŠ¡é˜Ÿåˆ—ï¼ˆè§ 3ï¼‰ï¼Œå¦‚æœè°ƒç”¨æ ˆæ˜¯ç©ºçš„ï¼Œå®ƒå°±ä¼šå–å‡ºé˜Ÿåˆ—ä¸­çš„ç¬¬ä¸€ä¸ªâ€callbackå‡½æ•°â€ï¼Œç„¶åå°†å®ƒå‹å…¥åˆ°è°ƒç”¨æ ˆä¸­ï¼Œç„¶åæ‰§è¡Œå®ƒã€‚ æ€»çš„æ¥è¯´ï¼ŒEvent Loop æ˜¯å®ç°å¼‚æ­¥å›è°ƒçš„ä¸€ç§æœºåˆ¶è€Œå·²ã€‚ 1.åˆ†ä¸¤ç§Event Loop åˆ†ä¸ºä¸¤ç§ï¼Œä¸€ç§å­˜åœ¨äº Browsing Context ä¸­ï¼Œè¿˜æœ‰ä¸€ç§åœ¨ Worker ä¸­ã€‚ Browsing Context æ˜¯æŒ‡ä¸€ç§ç”¨æ¥å°† Documentï¼ˆæ–‡æ¡£ï¼‰å±•ç°ç»™ç”¨æˆ·çš„ç¯å¢ƒã€‚ä¾‹å¦‚æµè§ˆå™¨ä¸­çš„ tabï¼Œwindow æˆ– iframe ç­‰ï¼Œé€šå¸¸éƒ½åŒ…å« Browsing Contextã€‚ Worker æ˜¯æŒ‡ä¸€ç§ç‹¬ç«‹äº UI è„šæœ¬ï¼Œå¯åœ¨åå°æ‰§è¡Œè„šæœ¬çš„ APIã€‚å¸¸ç”¨æ¥åœ¨åå°å¤„ç†ä¸€äº›è®¡ç®—å¯†é›†å‹çš„ä»»åŠ¡ã€‚ æœ¬ç¯‡é‡ç‚¹ä»‹ç»çš„æ˜¯ Browsing Context ä¸­çš„ Event Loopï¼Œç›¸æ¯” Worker ä¸­çš„ Event Loopï¼Œå®ƒä¹Ÿæ›´åŠ å¤æ‚ä¸€äº›ã€‚ å¦å¤–ï¼ŒEvent Loop å¹¶ä¸æ˜¯åœ¨ ECMAScript æ ‡å‡†ä¸­å®šä¹‰çš„ï¼Œè€Œæ˜¯åœ¨ HTML æ ‡å‡†ä¸­å®šä¹‰çš„ã€‚åœ¨ JSå¼•æ“ä¸­ï¼ˆä»¥V8ä¸ºä¾‹ï¼‰ï¼Œåªæ˜¯å®ç°äº† ECMAScript æ ‡å‡†ï¼Œè€Œå¹¶ä¸å…³å¿ƒä»€ä¹ˆ Event Loopã€‚ä¹Ÿå°±æ˜¯è¯´ Event Loop æ˜¯å±äº JavaScript Runtime çš„ï¼Œæ˜¯ç”±å®¿ä¸»ç¯å¢ƒï¼ˆæ¯”å¦‚æµè§ˆå™¨ï¼‰æä¾›çš„ã€‚æ‰€ä»¥åƒä¸‡ä¸è¦ç†è§£é”™äº†ï¼Œè¿™ä¹Ÿæ˜¯å‰é¢ä»‹ç» JavaScript Engine å’Œ Runtime çš„åŸå› ã€‚ 2.ç‹¬ç«‹æ¯ä¸ªâ€çº¿ç¨‹â€œéƒ½æœ‰è‡ªå·±çš„ Event Loopã€‚æ‰€ä»¥ï¼Œæ¯ä¸ª web worker æ‹¥æœ‰ç‹¬ç«‹çš„ Event Loopï¼Œå®ƒä»¬éƒ½å¯ä»¥ç‹¬ç«‹è¿è¡Œï¼›åŒæºçš„ windows å…±äº«ä¸€ä¸ª Event Loopï¼Œå®ƒä»¬ä¹‹é—´å¯ä»¥äº’ç›¸é€šä¿¡ã€‚ å†…å­˜æ¨¡å‹ä» JavaScript å†…å­˜æ¨¡å‹çš„è§’åº¦ï¼Œæˆ‘ä»¬å¯ä»¥å°†å†…å­˜åˆ’åˆ†ä¸ºè°ƒç”¨æ ˆï¼ˆCall Stackï¼‰ã€å †ï¼ˆHeapï¼‰ä»¥åŠä»»åŠ¡é˜Ÿåˆ—ï¼ˆQueueï¼‰ç­‰å‡ ä¸ªéƒ¨åˆ†ï¼š 1. è°ƒç”¨æ ˆè°ƒç”¨æ ˆä¼šè®°å½•æ‰€æœ‰çš„å‡½æ•°è°ƒç”¨ä¿¡æ¯ï¼Œå½“æˆ‘ä»¬è°ƒç”¨æŸä¸ªå‡½æ•°æ—¶ï¼Œä¼šå°†å…¶å‚æ•°ä¸å±€éƒ¨å˜é‡ç­‰ä»¥æ ˆå¸§çš„å½¢å¼å‹å…¥æ ˆä¸­ï¼ˆå…¥æ ˆï¼‰ï¼›åœ¨æ‰§è¡Œå®Œæ¯•åï¼Œä¼šå¼¹å‡ºæ ˆé¡¶çš„å¸§ã€‚è®©æˆ‘ä»¬æ¥çœ‹ä¸€çœ‹ä¸‹é¢çš„ä¾‹å­ï¼š 12345678function multiply(x, y) &#123; return x * y;&#125;function printSquare(x) &#123; var s = multiply(x, x); console.log(s);&#125;printSquare(5); å½“ç¨‹åºå¼€å§‹æ‰§è¡Œçš„æ—¶å€™ï¼Œè°ƒç”¨æ ˆæ˜¯ç©ºçš„ï¼Œç„¶åï¼Œæ­¥éª¤å¦‚ä¸‹ï¼š 2. å †å †åˆ™åˆ™å­˜æ”¾äº†å¤§é‡çš„éç»“æ„åŒ–æ•°æ®ï¼Œè­¬å¦‚ç¨‹åºåˆ†é…çš„å˜é‡ä¸å¯¹è±¡ã€‚ 3. ä»»åŠ¡é˜Ÿåˆ—ä»»åŠ¡é˜Ÿåˆ—åŒ…å«äº†ä¸€ç³»åˆ—å¾…å¤„ç†çš„ä¿¡æ¯ä¸ç›¸å…³è”çš„å›è°ƒå‡½æ•°ã€‚ä»»åŠ¡é˜Ÿåˆ—åˆåˆ†ä¸º MacroTask Queue å’Œ MicroTask Queue ä¸¤ç§ã€‚ MacroTask å’Œ MicroTask1. MacroTask Queueï¼ˆå®ä»»åŠ¡é˜Ÿåˆ—ï¼‰Event Loop ä¼šæœ‰ä¸€ä¸ªæˆ–å¤šä¸ª MacroTask Queueï¼Œè¿™æ˜¯ä¸€ä¸ªå…ˆè¿›å…ˆå‡ºï¼ˆFIFOï¼‰çš„æœ‰åºåˆ—è¡¨ï¼Œå­˜æ”¾ç€æ¥è‡ªä¸åŒ Task Sourceï¼ˆä»»åŠ¡æºï¼‰çš„ Taskï¼ˆä¹Ÿå³MacroTaskï¼‰ã€‚ å…³äº Taskï¼Œå¸¸æœ‰äººé€šä¿—åœ°ç§°å®ƒä¸º MarcoTaskï¼Œä½†å…¶å® HTML æ ‡å‡†ä¸­å¹¶æ²¡æœ‰è¿™ç§è¯´æ³•ã€‚ç„¶è€Œï¼Œä¸ºäº†æ–¹ä¾¿ç†è§£ï¼Œæœ¬ä¹¦ä»æ²¿ç”¨é€šä¿—çš„ç§°è°“MacroTaskã€‚ åœ¨ HTML æ ‡å‡†ä¸­ï¼Œå®šä¹‰äº†å‡ ç§å¸¸è§çš„ Task Sourceï¼š DOM manipulationï¼ˆDOM æ“ä½œï¼‰ï¼› User interactionï¼ˆç”¨æˆ·äº¤äº’ï¼‰ï¼› Networkingï¼ˆç½‘ç»œè¯·æ±‚ï¼‰ï¼› History traversalï¼ˆHistory API æ“ä½œï¼‰ã€‚ MacroTask Source çš„å®šä¹‰éå¸¸çš„å®½æ³›ï¼Œå¸¸è§çš„é¼ æ ‡ã€é”®ç›˜äº‹ä»¶ï¼ŒAJAXï¼Œæ•°æ®åº“æ“ä½œï¼ˆä¾‹å¦‚ IndexedDBï¼‰ï¼Œä»¥åŠå®šæ—¶å™¨ç›¸å…³çš„ setTimeoutã€setInterval ç­‰ç­‰éƒ½å±äº Task Sourceï¼Œæ‰€æœ‰æ¥è‡ªè¿™äº› MacroTask Source çš„ MacroTask éƒ½ä¼šè¢«æ”¾åˆ°å¯¹åº”çš„ MacroTask Queue ä¸­ç­‰å¾…å¤„ç†ã€‚ å¯¹äº MacroTaskã€MacroTask Queue å’Œ Task Sourceï¼Œæœ‰å¦‚ä¸‹è§„å®šï¼š æ¥è‡ªç›¸åŒ Task Source çš„ MacroTaskï¼Œå¿…é¡»æ”¾åœ¨åŒä¸€ä¸ª MacroTask Queue ä¸­ï¼› æ¥è‡ªä¸åŒ Task Source çš„ MacroTaskï¼Œå¯ä»¥æ”¾åœ¨ä¸åŒçš„ MacroTask Queue ä¸­ï¼› åŒä¸€ä¸ª MacroTask Queue å†…çš„ MacroTask æ˜¯æŒ‰é¡ºåºæ‰§è¡Œçš„ï¼› ä½†å¯¹äºä¸åŒçš„ MacroTask Queueï¼ˆTask Sourceï¼‰ï¼Œæµè§ˆå™¨ä¼šè¿›è¡Œè°ƒåº¦ï¼Œå…è®¸ä¼˜å…ˆæ‰§è¡Œæ¥è‡ªç‰¹å®š Task Source çš„ MacroTaskã€‚ ä¾‹å¦‚ï¼Œé¼ æ ‡ã€é”®ç›˜äº‹ä»¶å’Œç½‘ç»œè¯·æ±‚éƒ½æœ‰å„è‡ªçš„ MacroTask Queueï¼Œå½“ä¸¤è€…åŒæ—¶å­˜æ—¶ï¼Œæµè§ˆå™¨å¯ä»¥ä¼˜å…ˆä»ç”¨æˆ·äº¤äº’ç›¸å…³çš„ MacroTask Queue ä¸­æŒ‘é€‰ MacroTask å¹¶æ‰§è¡Œï¼Œæ¯”å¦‚è¿™é‡Œçš„é¼ æ ‡ã€é”®ç›˜äº‹ä»¶ï¼Œä»è€Œä¿è¯æµç•…çš„ç”¨æˆ·ä½“éªŒã€‚ 2. MicroTask Queueï¼ˆå¾®ä»»åŠ¡é˜Ÿåˆ—ï¼‰MicroTask Queue ä¸ MacroTask Queue ç±»ä¼¼ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªæœ‰åºåˆ—è¡¨ã€‚ä¸åŒä¹‹å¤„åœ¨äºï¼Œä¸€ä¸ª Event Loop åªæœ‰ä¸€ä¸ª MicroTask Queueã€‚ åœ¨ HTML æ ‡å‡†ä¸­ï¼Œå¹¶æ²¡æœ‰æ˜ç¡®è§„å®š MicroTask Sourceï¼Œé€šå¸¸è®¤ä¸ºæœ‰ä»¥ä¸‹å‡ ç§ï¼š Promise åœ¨ Promises/A+ Note 3.1 ä¸­æåˆ°äº† thenã€onFulfilledã€onRejected çš„å®ç°æ–¹æ³•ï¼Œä½† Promise æœ¬èº«å±äºå¹³å°ä»£ç ï¼Œç”±å…·ä½“å®ç°æ¥å†³å®šæ˜¯å¦ä½¿ç”¨ Microtaskï¼Œå› æ­¤åœ¨ä¸åŒæµè§ˆå™¨ä¸Šå¯èƒ½ä¼šå‡ºç°æ‰§è¡Œé¡ºåºä¸ä¸€è‡´çš„é—®é¢˜ã€‚ä¸è¿‡å¥½åœ¨ç›®å‰çš„å…±è¯†æ˜¯ç”¨ Microtask æ¥å®ç°äº‹ä»¶é˜Ÿåˆ—ã€‚ MutationObserver Object.observe (å·²åºŸå¼ƒ) è¿™é‡Œè¦ç‰¹åˆ«æä¸€ä¸‹ï¼šç½‘ä¸Šæœ‰å¾ˆå¤šæ–‡ç« æŠŠ Node.js çš„ process.nextTick å’Œ Microtask æ··ä¸ºä¸€è°ˆï¼Œäº‹å®ä¸Šè™½ç„¶ä¸¤è€…å±‚çº§ï¼ˆè¿è¡Œæ—¶æœºï¼‰éå¸¸æ¥è¿‘ï¼Œä½†å¹¶ä¸æ˜¯åŒä¸€ä¸ªä¸œè¥¿ã€‚process.nextTick æ˜¯ Node.js è‡ªèº«å®šä¹‰å®ç°çš„ä¸€ç§æœºåˆ¶ï¼Œæœ‰è‡ªå·±çš„ nextTickQueueï¼Œä¸ HTML æ ‡å‡†ä¸­çš„ MicroTask ä¸æ˜¯ä¸€å›äº‹ã€‚åœ¨ Node.js ä¸­ï¼Œprocess.nextTick ä¼šå…ˆäº Microtask Queue è¢«æ‰§è¡Œã€‚ 3. äºŒè€…å…³ç³»å›¾ä¾‹Event Loopä¸­ï¼Œæ¯ä¸€æ¬¡å¾ªç¯ç§°ä¸ºtickï¼Œæ¯ä¸€æ¬¡tickçš„ä»»åŠ¡ç»†èŠ‚å¦‚ä¸‹ï¼š è°ƒç”¨æ ˆé€‰æ‹©æœ€å…ˆè¿›å…¥é˜Ÿåˆ—çš„MacroTaskï¼ˆé€šå¸¸æ˜¯scriptæ•´ä½“ä»£ç ï¼‰ï¼Œå¦‚æœæœ‰åˆ™æ‰§è¡Œï¼› æ£€æŸ¥æ˜¯å¦å­˜åœ¨ MicroTaskï¼Œå¦‚æœå­˜åœ¨åˆ™ä¸åœçš„æ‰§è¡Œï¼Œç›´è‡³æ¸…ç©º MicroTask Queueï¼› æµè§ˆå™¨æ›´æ–°æ¸²æŸ“ï¼ˆrenderï¼‰ï¼Œæ¯ä¸€æ¬¡äº‹ä»¶å¾ªç¯ï¼Œæµè§ˆå™¨éƒ½å¯èƒ½ä¼šå»æ›´æ–°æ¸²æŸ“ï¼› é‡å¤ä»¥ä¸Šæ­¥éª¤ã€‚ MacroTask Queueå’ŒMicroTask QueueäºŒè€…çš„å…³ç³»å¦‚ä¸‹å›¾ï¼š å¦‚å›¾æ‰€ç¤ºï¼ŒäºŒè€…äº’ç›¸ç©¿æ’ï¼šMacroTask â€“&gt; MicroTask Queue â€“&gt; MacroTaskã€‚ ä¸€ä¸ªEvent Loopä¼šæœ‰ä¸€ä¸ªæˆ–å¤šä¸ª MacroTask Queueï¼Œè€Œ Event Loop ä»…æœ‰ä¸€ä¸ª MicroTask Queueã€‚ è¿™å¥è¯å¯èƒ½æ¯”è¾ƒä»¤äººè´¹è§£ï¼Œå› ä¸ºå›¾ä¸­ä¼¼ä¹æœ‰2 ä¸ªMicroTask Queueï¼ å…¶å®æ˜¯è¿™æ ·çš„ï¼Œæ¯ä¸ª MacroTask Queue éƒ½ä¿è¯æŒ‰ç…§å›è°ƒå‡½æ•°ï¼ˆcallbackï¼‰å…¥é˜Ÿåˆ—çš„é¡ºåºä¾æ¬¡æ‰§è¡ŒMacroTaskï¼Œåœ¨ MacroTask æˆ–è€… MicroTask ä¸­äº§ç”Ÿçš„æ–° MicroTask ä¼šè¢«å‹å…¥åˆ° MicroTask Queueä¸­å¹¶æ‰§è¡Œã€‚è€Œåœ¨ æ‰§è¡Œä¸¤ä¸ªMacroTaskä¹‹é—´ï¼Œä¹Ÿå³åœ¨æ‰§è¡Œä¸‹ä¸€ä¸ªMacroTaskä¹‹å‰ï¼Œä¼šä¼˜å…ˆæ‰§è¡Œå®Œæ‰€æœ‰MicroTaskï¼Œä¹Ÿå³ä¼šä¼˜å…ˆæ¸…ç©ºå·²æœ‰çš„ MicroTask Queueã€‚ å› æ­¤ï¼Œå›¾ä¸­ç¬¬äºŒä¸ªMicroTask Queueäº§ç”Ÿçš„æ—¶å€™ï¼Œç¬¬ä¸€ä¸ªMicroTask Queueå…¶å®å·²ç»è¢«æ¸…ç©ºäº†ã€‚æ‰€ä»¥Event Loopå®é™…ä¸Šä»…æœ‰ä¸€ä¸ªMicroTask Queueã€‚ JavaScript Runtime çš„è¿è¡Œæœºåˆ¶äº†è§£äº† Event Loop å’Œä»»åŠ¡é˜Ÿåˆ—çš„åŸºæœ¬æ¦‚å¿µåï¼Œå°±å¯ä»¥ä»ç›¸å¯¹å®è§‚çš„è§’åº¦å…ˆäº†è§£ä¸€ä¸‹ JavaScript Runtime çš„è¿è¡Œæœºåˆ¶äº†ï¼Œç®€åŒ–åçš„æ­¥éª¤å¦‚ä¸‹ï¼š ä¸»çº¿ç¨‹ä¸æ–­å¾ªç¯ï¼› å¯¹äºåŒæ­¥ä»»åŠ¡ï¼Œåˆ›å»ºæ‰§è¡Œä¸Šä¸‹æ–‡ï¼ˆExecution Contextï¼‰ï¼ŒæŒ‰é¡ºåºè¿›å…¥è°ƒç”¨æ ˆï¼› å¯¹äºå¼‚æ­¥ä»»åŠ¡ï¼š ä¸æ­¥éª¤ 2 ç›¸åŒï¼ŒåŒæ­¥æ‰§è¡Œè¿™æ®µä»£ç ï¼› å°†ç›¸åº”çš„ MacroTaskï¼ˆæˆ– Microtaskï¼‰æ·»åŠ åˆ°ä»»åŠ¡é˜Ÿåˆ—ï¼› ç”±å…¶ä»–çº¿ç¨‹æ¥æ‰§è¡Œå…·ä½“çš„å¼‚æ­¥æ“ä½œã€‚ å…¶ä»–çº¿ç¨‹æ˜¯æŒ‡ï¼šå°½ç®¡ JavaScript æ˜¯å•çº¿ç¨‹çš„ï¼Œä½†æµè§ˆå™¨å†…æ ¸æ˜¯å¤šçº¿ç¨‹çš„ï¼Œå®ƒä¼šå°† GUI æ¸²æŸ“ã€å®šæ—¶å™¨è§¦å‘ã€HTTP è¯·æ±‚ç­‰å·¥ä½œäº¤ç»™ä¸“é—¨çš„çº¿ç¨‹æ¥å¤„ç†ã€‚å¦å¤–ï¼Œåœ¨ Node.js ä¸­ï¼Œå¼‚æ­¥æ“ä½œä¼šä¼˜å…ˆç”± OS æˆ–ç¬¬ä¸‰æ–¹ç³»ç»Ÿæä¾›çš„å¼‚æ­¥æ¥å£æ¥æ‰§è¡Œï¼Œç„¶åæ‰ç”±çº¿ç¨‹æ± å¤„ç†ã€‚ å½“ä¸»çº¿ç¨‹æ‰§è¡Œå®Œå½“å‰è°ƒç”¨æ ˆä¸­çš„æ‰€æœ‰ä»»åŠ¡ï¼Œå°±ä¼šå»è¯»å– Event Loop çš„ä»»åŠ¡é˜Ÿåˆ—ï¼Œå–å‡ºå¹¶æ‰§è¡Œä»»åŠ¡ï¼› é‡å¤ä»¥ä¸Šæ­¥éª¤ã€‚ ç”¨ä¸€å¼ ç®€å›¾æ¥è¡¨ç¤ºä¸€ä¸‹è¿™ç§è¿è¡Œæœºåˆ¶ï¼š è¿˜æ˜¯æ‹¿ setTimeout ä¸¾ä¾‹ï¼š ä¸»çº¿ç¨‹åŒæ­¥æ‰§è¡Œè¿™ä¸ª setTimeout å‡½æ•°æœ¬èº«ã€‚ å°†è´Ÿè´£æ‰§è¡Œè¿™ä¸ª setTimeout çš„å›è°ƒå‡½æ•°çš„ MacroTask æ·»åŠ åˆ° MacroTask Queueã€‚ å®šæ—¶å™¨å¼€å§‹å·¥ä½œï¼ˆå®é™…ä¸Šæ˜¯é  Event Loop ä¸æ–­å¾ªç¯æ£€æŸ¥ç³»ç»Ÿæ—¶é—´æ¥åˆ¤æ–­æ˜¯å¦å·²ç»åˆ°è¾¾æŒ‡å®šçš„æ—¶é—´ç‚¹ï¼‰ã€‚ ä¸»çº¿ç¨‹ç»§ç»­æ‰§è¡Œå…¶ä»–ä»»åŠ¡ã€‚ å½“è°ƒç”¨æ ˆä¸ºç©ºï¼Œä¸”å®šæ—¶å™¨è§¦å‘æ—¶ï¼Œä¸»çº¿ç¨‹å–å‡º MacroTask å¹¶æ‰§è¡Œç›¸åº”çš„å›è°ƒå‡½æ•°ã€‚ å¾ˆæ˜æ˜¾ï¼Œæ‰§è¡Œ setTimeout ä¸ä¼šå¯¼è‡´é˜»å¡ã€‚å½“ç„¶ï¼Œå¦‚æœä¸»çº¿ç¨‹å¾ˆå¿™çš„è¯ï¼ˆè°ƒç”¨æ ˆä¸€ç›´éç©ºï¼‰ï¼Œå°±ä¼šå‡ºç°æ˜æ˜æ—¶é—´å·²ç»åˆ°äº†ï¼Œå´ä¹Ÿä¸æ‰§è¡Œå›è°ƒçš„ç°è±¡ï¼Œæ‰€ä»¥ç±»ä¼¼ setTimeout è¿™æ ·çš„å›è°ƒå‡½æ•°éƒ½æ˜¯æ²¡æ³•ä¿è¯æ‰§è¡Œæ—¶æœºçš„ã€‚ setTimeoutå’ŒsetIntervalå–çš„æ—¶é—´æ˜¯ä¸å‡†ç¡®çš„ï¼Œå› ä¸ºå½“è°ƒç”¨æ ˆè‹¥ä¸ä¸ºç©ºï¼Œå®ƒä»¬çš„å›è°ƒå‡½æ•°æ°¸è¿œä¸ä¼šåˆ«æ‰§è¡Œã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬ä¼šç»å¸¸ç¢°åˆ°setTimeoutå’ŒsetIntervalç”¨æ¥åšåŠ¨ç”»çš„æ—¶å€™ï¼Œå¾ˆä¸æµç•…æˆ–è€…å¡é¡¿ã€‚ é¢è¯•é¢˜è§£æåœ¨é¢è¯•ä¸­æˆ‘ä»¬å¸¸å¸¸ä¼šç¢°åˆ°å¦‚ä¸‹ç±»ä¼¼çš„ä»£ç é¢˜ï¼Œé¢è¯•å®˜è¦ä½ å†™å‡ºè¾“å‡ºç»“æœï¼Œå…¶è¦ç›®çš„æ˜¯è€ƒå¯Ÿå¯¹JavaScriptä¸åŒä»»åŠ¡çš„æ‰§è¡Œå…ˆåé¡ºåºçš„ç†è§£ï¼š 1234567891011// æ‰§è¡Œé¡ºåºé—®é¢˜ï¼Œè€ƒå¯Ÿé¢‘ç‡æŒºé«˜setTimeout(function() &#123; console.log(1);&#125;);new Promise(function(resolve, reject) &#123; console.log(2); resolve(3);&#125;).then(function(val) &#123; console.log(val);&#125;);console.log(4); æ ¹æ®æœ¬æ–‡çš„è§£æï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ°ï¼š å…ˆæ‰§è¡ŒåŒæ­¥ä»£ç  é¦–å…ˆï¼Œæ‰§è¡Œnew Promiseä¸­çš„console.log(2)ï¼Œthenåé¢çš„å±äºMicroTaskæ‰€ä»¥è·³è¿‡ï¼› ç„¶åï¼Œæ‰§è¡Œconsole.log(4)ã€‚ æ‰§è¡Œå®Œscriptè¿™ä¸ªMacroTaskåï¼Œæ‰§è¡ŒMicroTaskï¼ˆä¹Ÿå³Promise.thenï¼‰ ä¸­çš„console.log(val)ï¼Œæ­¤æ—¶valçš„å€¼ç”±resolve(3)ä¼ é€’è¿‡æ¥ï¼Œå€¼ä¸º3ã€‚åé¢æ— å…¶ä»–å¾®ä»»åŠ¡ã€‚ æ‰§è¡Œå¦ä¸€ä¸ªMacroTaskä¹Ÿå³å®šæ—¶å™¨setTimeoutä¸­çš„console.log(1)ã€‚ æ ¹æ®æœ¬æ–‡çš„å†…å®¹ï¼Œå¯ä»¥å¾ˆè½»æ¾ï¼Œä¸”æœ‰ç†æœ‰æ®çš„çŒœå‡ºå†™å‡ºæ­£ç¡®ç­”æ¡ˆï¼š2ï¼Œ4ï¼Œ3ï¼Œ1ã€‚","categories":[],"tags":[]},{"title":"javascriptçš„ç»§æ‰¿å®ç°","slug":"javascript-javascriptçš„ç»§æ‰¿å®ç°","date":"2018-03-01T17:19:23.000Z","updated":"2021-01-19T06:41:41.222Z","comments":true,"path":"javascript-javascriptçš„ç»§æ‰¿å®ç°/","link":"","permalink":"http://blog.kobingo.xyz/javascript-javascript%E7%9A%84%E7%BB%A7%E6%89%BF%E5%AE%9E%E7%8E%B0/","excerpt":"æŠ›å¼€JavaScriptè‡ªå¸¦çš„classè¯­æ³•ç³–å®ç°ç±»çš„ç»§æ‰¿ï¼Œå¦‚æœç”¨åŸç”ŸJavaScriptå®ç°ç±»çš„ç»§æ‰¿ï¼Œæœ‰ä»¥ä¸‹å…­ç§æ–¹å¼ï¼Œå…¶å®ç°ä»£ç ä¸ä¼˜ç¼ºç‚¹åˆ†æå¦‚ä¸‹","text":"æŠ›å¼€JavaScriptè‡ªå¸¦çš„classè¯­æ³•ç³–å®ç°ç±»çš„ç»§æ‰¿ï¼Œå¦‚æœç”¨åŸç”ŸJavaScriptå®ç°ç±»çš„ç»§æ‰¿ï¼Œæœ‰ä»¥ä¸‹å…­ç§æ–¹å¼ï¼Œå…¶å®ç°ä»£ç ä¸ä¼˜ç¼ºç‚¹åˆ†æå¦‚ä¸‹ 01.ç±»å¼ç»§æ‰¿(classical inheritance) å®ç°æœ¬è´¨ï¼šé‡å†™å­ç±»çš„åŸå‹ï¼Œä»£ä¹‹ä»¥çˆ¶ç±»çš„å®ä¾‹ã€‚ 1234567891011121314151617181920212223242526272829303132//çˆ¶ç±»function User(username) &#123; this.username = username ? username : \"Unknown\"; this.books = [\"coffe\", \"1891\"];&#125;//å­ç±»function CoffeUser(username) &#123; if (username) this.username = username;&#125;//å…³é”®CoffeUser.prototype = new User();const user1 = new CoffeUser();const user2 = new CoffeUser();//instanceofæ˜¯æ£€æµ‹æŸä¸ªå¯¹è±¡æ˜¯å¦æ˜¯æŸä¸ªç±»çš„å®ä¾‹console.log(user1 instanceof User);//&gt;&gt; true// å¯ä»¥ç›´æ¥è®¿é—®åŸå‹é“¾ä¸Šçš„å±æ€§console.log(user1.username);//&gt;&gt; Unknownconsole.log(user1.books); //&gt;&gt; [\"coffe\", \"1891\"]//ä¿®æ”¹æ¥è‡ªåŸå‹ä¸Šçš„å¼•ç”¨ç±»å‹çš„å±æ€§ï¼Œåˆ™æœ‰å‰¯ä½œç”¨ï¼šä¼šå½±å“åˆ°æ‰€æœ‰å®ä¾‹user1.books.push(\"hello\");console.log(user1.books); //&gt;&gt; [\"coffe\", \"1891\", \"hello\"]console.log(user2.books); //&gt;&gt; [\"coffe\", \"1891\", \"hello\"]//ä¿®æ”¹æ¥è‡ªåŸå‹ä¸Šçš„å€¼ç±»å‹çš„å±æ€§ï¼Œæ— å‰¯ä½œç”¨user1.username = 'U';console.log(user1.username, user2.username); //&gt;&gt; U Unknown ç¼ºé™·ï¼š å¼•ç”¨ç±»å‹å±æ€§çš„è¯¯ä¿®æ”¹ã€‚åŸå‹å±æ€§ä¸­çš„å¼•ç”¨ç±»å‹å±æ€§ä¼šè¢«æ‰€æœ‰å®ä¾‹å…±äº«ï¼Œè‹¥å­ç±»å®ä¾‹æ›´æ”¹ä»çˆ¶ç±»åŸå‹ç»§æ‰¿æ¥çš„å¼•ç”¨ç±»å‹çš„å…±æœ‰å±æ€§ï¼Œä¼šå½±å“å…¶ä»–å­ç±»ã€‚ æ— æ³•ä¼ é€’å‚æ•°ã€‚åœ¨åˆ›å»ºå­ç±»å‹çš„å®ä¾‹æ—¶ï¼Œä¸èƒ½å‘çˆ¶ç±»çš„æ„é€ å‡½æ•°ä¸­ä¼ é€’å‚æ•°ã€‚è¿™ç‚¹å¦‚è¿‡ä¸å¥½ç†è§£çš„è¯ï¼Œæ¥ç€çœ‹ä¸‹é¢çš„â€œæ„é€ å‡½æ•°å¼ç»§æ‰¿â€ã€‚ ç»¼ä¸Šï¼Œæˆ‘ä»¬åœ¨å®é™…å¼€å‘ä¸­å¾ˆå°‘å•ç‹¬ä½¿ç”¨ç±»å¼ç»§æ‰¿ã€‚ 02.æ„é€ å‡½æ•°å¼ç»§æ‰¿é€šè¿‡call/applyè°ƒç”¨æ¥å®ç°ç»§æ‰¿ï¼š 123456789101112131415161718function User(username, password) &#123; this.password = password; this.username = username; User.prototype.login = function () &#123; console.log(this.username + 'è¦ç™»å½•Githubï¼Œå¯†ç æ˜¯' + this.password); &#125;&#125;function CoffeUser(username, password) &#123; User.call(this, username, password);//é€šè¿‡callå‘çˆ¶ç±»çš„æ„é€ å‡½æ•°ä¼ é€’å‚æ•° this.articles = 3; // æ–‡ç« æ•°é‡&#125;const user1 = new CoffeUser('coffe1891', '123456');console.log(user1 instanceof User);//&gt;&gt; falseconsole.log(user1.username, user1.password); //&gt;&gt; coffe1891 123456console.log(user1.login()); // TypeError: user1.login is not a function å­˜åœ¨æ˜æ˜¾çš„ç¼ºé™·ï¼š æ— æ³•é€šè¿‡instanceofçš„æµ‹è¯•ï¼› å¹¶æ²¡æœ‰ç»§æ‰¿çˆ¶ç±»åŸå‹ä¸Šçš„æ–¹æ³•ã€‚ 03.ç»„åˆå¼ç»§æ‰¿æ—¢ç„¶ä¸Šè¿°ä¸¤ç§æ–¹æ³•å„æœ‰ç¼ºç‚¹ï¼Œä½†æ˜¯åˆå„æœ‰æ‰€é•¿ï¼Œé‚£ä¹ˆæˆ‘ä»¬æ˜¯å¦å¯ä»¥å°†å…¶ç»“åˆèµ·æ¥ä½¿ç”¨å‘¢ï¼Ÿå³åŸå‹é“¾ç»§æ‰¿æ–¹æ³•ï¼Œè€Œåœ¨æ„é€ å‡½æ•°ç»§æ‰¿å±æ€§ï¼Œè¿™ç§ç»§æ‰¿æ–¹å¼å°±å«åšâ€œç»„åˆå¼ç»§æ‰¿â€ã€‚ 123456789101112131415161718function User(username, password) &#123; this.password = password; this.username = username; User.prototype.login = function () &#123; console.log(this.username + 'è¦ç™»å½•Githubï¼Œå¯†ç æ˜¯' + this.password); &#125;&#125;function CoffeUser(username, password) &#123; User.call(this, username, password); // ç¬¬2æ¬¡æ‰§è¡Œ User çš„æ„é€ å‡½æ•° this.articles = 3; // æ–‡ç« æ•°é‡&#125;CoffeUser.prototype = new User(); // ç¬¬1æ¬¡æ‰§è¡Œ User çš„æ„é€ å‡½æ•°const user1 = new CoffeUser(\"coffe1891\", \"123456\");console.log(user1 instanceof User);//&gt;&gt; trueuser1.login();//&gt;&gt; coffe1891è¦ç™»å½•Githubï¼Œå¯†ç æ˜¯123456 è™½ç„¶è¿™ç§æ–¹å¼å¼¥è¡¥äº†ä¸Šè¿°ä¸¤ç§æ–¹å¼çš„ä¸€äº›ç¼ºé™·ï¼Œä½†æœ‰äº›é—®é¢˜ä»ç„¶å­˜åœ¨ï¼š çˆ¶ç±»çš„æ„é€ å‡½æ•°è¢«è°ƒç”¨äº†ä¸¤æ¬¡ï¼Œæ˜¾å¾—å¤šä½™ï¼› æ±¡æŸ“ï¼šè‹¥å†æ·»åŠ ä¸€ä¸ªå­ç±»å‹ï¼Œç»™å…¶åŸå‹å•ç‹¬æ·»åŠ ä¸€ä¸ªæ–¹æ³•ï¼Œé‚£ä¹ˆå…¶ä»–å­ç±»å‹ä¹ŸåŒæ—¶æ‹¥æœ‰äº†è¿™ä¸ªæ–¹æ³•ã€‚ ç»¼ä¸Šï¼Œç»„åˆå¼ç»§æ‰¿ä¹Ÿä¸æ˜¯æˆ‘ä»¬æœ€ç»ˆæƒ³è¦çš„ã€‚ 04.åŸå‹ç»§æ‰¿(prototypal inheritance)åŸå‹ç»§æ‰¿å®é™…ä¸Šæ˜¯å¯¹ç±»å¼ç»§æ‰¿çš„ä¸€ç§å°è£…ï¼Œåªä¸è¿‡å…¶ç‹¬ç‰¹ä¹‹å¤„åœ¨äºï¼Œå®šä¹‰äº†ä¸€ä¸ªå¹²å‡€çš„ä¸­é—´ç±»ï¼Œå¦‚ä¸‹ï¼š 123456789function createObject(o) &#123; // åˆ›å»ºä¸´æ—¶ç±» function F() &#123; &#125; // ä¿®æ”¹ç±»çš„åŸå‹ä¸ºo, äºæ˜¯fçš„å®ä¾‹éƒ½å°†ç»§æ‰¿oä¸Šçš„æ–¹æ³• F.prototype = o; return new F();&#125; è¿™ä¸å°±æ˜¯ES5çš„ Object.create å—ï¼Ÿæ²¡é”™ï¼Œä½ å¯ä»¥è®¤ä¸ºæ˜¯å¦‚æ­¤ã€‚ æ—¢ç„¶åªæ˜¯ç±»å¼ç»§æ‰¿çš„ä¸€ç§å°è£…ï¼Œå…¶ä½¿ç”¨æ–¹å¼è‡ªç„¶å¦‚ä¸‹ï¼š 1CoffeUser.prototype &#x3D; createObject(User) ä¹Ÿå°±ä»ç„¶æ²¡æœ‰è§£å†³ç±»å¼ç»§æ‰¿çš„ä¸€äº›é—®é¢˜ã€‚ä»è¿™ä¸ªè§’åº¦è€Œè¨€ï¼ŒåŸå‹ç»§æ‰¿å’Œç±»å¼ç»§æ‰¿åº”è¯¥ç›´æ¥å½’ä¸ºä¸€ç§ç»§æ‰¿ã€‚ 05.å¯„ç”Ÿå¼ç»§æ‰¿å¯„ç”Ÿå¼ç»§æ‰¿æ˜¯ä¸åŸå‹ç»§æ‰¿ç´§å¯†ç›¸å…³çš„ä¸€ç§æ€è·¯ï¼Œå®ƒä¾æ‰˜äºä¸€ä¸ªå†…éƒ¨å¯¹è±¡è€Œç”Ÿæˆä¸€ä¸ªæ–°å¯¹è±¡ï¼Œå› æ­¤ç§°ä¹‹ä¸ºå¯„ç”Ÿã€‚ 12345678910111213141516const UserSample = &#123; username: \"coffe1891\", password: \"123456\"&#125;function CoffeUser(obj) &#123; var o = Object.create(obj);//oç»§æ‰¿objçš„åŸå‹ o.__proto__.readArticle = function () &#123;//æ‰©å±•æ–¹æ³• console.log('Read article'); &#125; return o;&#125;var user = new CoffeUser(UserSample);user.readArticle();//&gt;&gt; Read articleconsole.log(user.username, user.password);//&gt;&gt; coffe1891 123456 06.å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿12345678910111213141516171819202122232425262728293031323334353637//å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿çš„æ ¸å¿ƒæ–¹æ³•function inherit(child, parent) &#123; // ç»§æ‰¿çˆ¶ç±»çš„åŸå‹ const p = Object.create(parent.prototype); // é‡å†™å­ç±»çš„åŸå‹ child.prototype = p; // é‡å†™è¢«æ±¡æŸ“çš„å­ç±»çš„constructor p.constructor = child;&#125;//User, çˆ¶ç±»function User(username, password) &#123; let _password = password this.username = username&#125;User.prototype.login = function () &#123; console.log(this.username + 'è¦ç™»å½•Githubï¼Œå¯†ç æ˜¯' + _password); //&gt;&gt; ReferenceError: _password is not defined&#125;//CoffeUser, å­ç±»function CoffeUser(username, password) &#123; User.call(this, username, password) // ç»§æ‰¿å±æ€§ this.articles = 3 // æ–‡ç« æ•°é‡&#125;//ç»§æ‰¿inherit(CoffeUser, User);//åœ¨åŸå‹ä¸Šæ·»åŠ æ–°æ–¹æ³•CoffeUser.prototype.readArticle = function () &#123; console.log('Read article');&#125;const user1 = new CoffeUser(\"Coffe1891\", \"123456\");console.log(user1); è§‚å¯Ÿchromeæµè§ˆå™¨çš„è¾“å‡ºç»“æœï¼š ç®€å•è¯´æ˜ä¸€ä¸‹ï¼š å­ç±»ç»§æ‰¿äº†çˆ¶ç±»çš„å±æ€§å’Œæ–¹æ³•ï¼ŒåŒæ—¶ï¼Œå±æ€§æ²¡æœ‰è¢«åˆ›å»ºåœ¨åŸå‹é“¾ä¸Šï¼Œå› æ­¤å¤šä¸ªå­ç±»ä¸ä¼šå…±äº«åŒä¸€ä¸ªå±æ€§ï¼› å­ç±»å¯ä»¥ä¼ é€’åŠ¨æ€å‚æ•°ç»™çˆ¶ç±»ï¼› çˆ¶ç±»çš„æ„é€ å‡½æ•°åªæ‰§è¡Œäº†ä¸€æ¬¡ã€‚ Niceï¼è¿™æ‰æ˜¯æˆ‘ä»¬æƒ³è¦çš„ç»§æ‰¿æ–¹æ³•ã€‚ç„¶è€Œï¼Œä»ç„¶å­˜åœ¨ä¸€ä¸ªç¾ä¸­ä¸è¶³çš„é—®é¢˜ï¼š å­ç±»æƒ³è¦åœ¨åŸå‹ä¸Šæ·»åŠ æ–¹æ³•ï¼Œå¿…é¡»åœ¨ç»§æ‰¿ä¹‹åæ·»åŠ ï¼Œå¦åˆ™å°†è¦†ç›–æ‰åŸæœ‰åŸå‹ä¸Šçš„æ–¹æ³•ã€‚è¿™æ ·çš„è¯è‹¥æ˜¯å·²ç»å­˜åœ¨çš„ä¸¤ä¸ªç±»ï¼Œå°±ä¸å¥½åŠäº†ã€‚ æ‰€ä»¥ï¼Œæˆ‘ä»¬å¯ä»¥å°†å…¶ä¼˜åŒ–ä¸€ä¸‹ï¼š 12345678function inherit(child, parent) &#123; // ç»§æ‰¿çˆ¶ç±»çš„åŸå‹ const parentPrototype = Object.create(parent.prototype) // å°†çˆ¶ç±»åŸå‹å’Œå­ç±»åŸå‹åˆå¹¶ï¼Œå¹¶èµ‹å€¼ç»™å­ç±»çš„åŸå‹ child.prototype = Object.assign(parentPrototype, child.prototype) // é‡å†™è¢«æ±¡æŸ“çš„å­ç±»çš„constructor p.constructor = child&#125; ä½†å®é™…ä¸Šï¼Œä½¿ç”¨Object.assign æ¥è¿›è¡Œ copy ä»ç„¶ä¸æ˜¯æœ€å¥½çš„æ–¹æ³•ã€‚å› ä¸ºä¸Šè¿°çš„ç»§æ‰¿æ–¹æ³•åªé€‚ç”¨äº copy åŸå‹é“¾ä¸Šå¯æšä¸¾çš„æ–¹æ³•ï¼Œè€ŒES6ä¸­ï¼Œç±»çš„æ–¹æ³•é»˜è®¤éƒ½æ˜¯ä¸å¯æšä¸¾çš„ã€‚æ­¤å¤–ï¼Œå¦‚æœå­ç±»æœ¬èº«å·²ç»ç»§æ‰¿è‡ªæŸä¸ªç±»ï¼Œä»¥ä¸Šçš„ç»§æ‰¿å°†ä¸èƒ½æ»¡è¶³è¦æ±‚ã€‚ å‚è€ƒæ–‡çŒ®Inheritance in JavaScript","categories":[{"name":"JavaScript","slug":"JavaScript","permalink":"http://blog.kobingo.xyz/categories/JavaScript/"}],"tags":[{"name":"ç»§æ‰¿","slug":"ç»§æ‰¿","permalink":"http://blog.kobingo.xyz/tags/%E7%BB%A7%E6%89%BF/"},{"name":"JavaScript","slug":"JavaScript","permalink":"http://blog.kobingo.xyz/tags/JavaScript/"}]},{"title":"åŸå‹ä¸åŸå‹é“¾","slug":"javascript-åŸå‹ä¸åŸå‹é“¾","date":"2018-02-05T15:45:38.000Z","updated":"2021-01-19T06:41:41.222Z","comments":true,"path":"javascript-åŸå‹ä¸åŸå‹é“¾/","link":"","permalink":"http://blog.kobingo.xyz/javascript-%E5%8E%9F%E5%9E%8B%E4%B8%8E%E5%8E%9F%E5%9E%8B%E9%93%BE/","excerpt":"åœ¨ES6ä¹‹å‰ï¼ŒJavaScript ä¸­é™¤äº†åŸºç¡€ç±»å‹å¤–çš„æ•°æ®ç±»å‹éƒ½æ˜¯å¯¹è±¡ï¼ˆå¼•ç”¨ç±»å‹ï¼‰ï¼Œæ²¡æœ‰ç±»ï¼ˆclassï¼‰ï¼Œä¸ºäº†å®ç°ç±»ä¼¼ç»§æ‰¿ä»¥ä¾¿å¤ç”¨ä»£ç çš„èƒ½åŠ›ï¼ŒJavaScripté€‰æ‹©äº†åŸå‹å’ŒåŸå‹é“¾ã€‚ç”šè‡³åœ¨ES6ä¹‹åï¼ŒJavaScriptä¹Ÿæ²¡æœ‰çœŸæ­£çš„ç±»ï¼ˆclassï¼‰ã€‚ES6è™½ç„¶æä¾›äº†classå…³é”®å­—è®©æˆ‘ä¹ˆå¯ä»¥ä¼ªé€ ä¸€ä¸ªâ€œç±»â€ï¼Œä½†å…¶å®åªæ˜¯è¯­æ³•ç³–è€Œå·²ï¼Œæœ¬è´¨ä¸Šä»ç„¶æ˜¯ä¸€ä¸ªå¯¹è±¡ã€‚ES6å®ç°çš„ç»§æ‰¿ï¼Œæœ¬è´¨ä»æ˜¯åŸºäºåŸå‹å’ŒåŸå‹é“¾ã€‚","text":"åœ¨ES6ä¹‹å‰ï¼ŒJavaScript ä¸­é™¤äº†åŸºç¡€ç±»å‹å¤–çš„æ•°æ®ç±»å‹éƒ½æ˜¯å¯¹è±¡ï¼ˆå¼•ç”¨ç±»å‹ï¼‰ï¼Œæ²¡æœ‰ç±»ï¼ˆclassï¼‰ï¼Œä¸ºäº†å®ç°ç±»ä¼¼ç»§æ‰¿ä»¥ä¾¿å¤ç”¨ä»£ç çš„èƒ½åŠ›ï¼ŒJavaScripté€‰æ‹©äº†åŸå‹å’ŒåŸå‹é“¾ã€‚ç”šè‡³åœ¨ES6ä¹‹åï¼ŒJavaScriptä¹Ÿæ²¡æœ‰çœŸæ­£çš„ç±»ï¼ˆclassï¼‰ã€‚ES6è™½ç„¶æä¾›äº†classå…³é”®å­—è®©æˆ‘ä¹ˆå¯ä»¥ä¼ªé€ ä¸€ä¸ªâ€œç±»â€ï¼Œä½†å…¶å®åªæ˜¯è¯­æ³•ç³–è€Œå·²ï¼Œæœ¬è´¨ä¸Šä»ç„¶æ˜¯ä¸€ä¸ªå¯¹è±¡ã€‚ES6å®ç°çš„ç»§æ‰¿ï¼Œæœ¬è´¨ä»æ˜¯åŸºäºåŸå‹å’ŒåŸå‹é“¾ã€‚ åŸå‹ã€prototypeã€__proto__ åŸå‹æ˜¯ä¸€ä¸ªå¯¹è±¡ã€‚ prototypeæ˜¯å‡½æ•°çš„ä¸€ä¸ªå±æ€§è€Œå·²ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå®ƒå’ŒåŸå‹æ²¡æœ‰ç»å¯¹çš„å…³ç³»ï¼ˆå¾ˆå¤šä¹¦ã€å¾ˆå¤šç½‘ç»œæ–‡ç« éƒ½æ¨¡ç³Šåœ°å°†prototypeè¡¨è¿°ä¸ºåŸå‹ï¼Œè¿™æ˜¯ä¸¥é‡ä¸å¯¹çš„ï¼‰ã€‚JavaScripté‡Œå‡½æ•°ä¹Ÿæ˜¯ä¸€ç§å¯¹è±¡ï¼Œæ¯ä¸ªå¯¹è±¡éƒ½æœ‰ä¸€ä¸ªåŸå‹ï¼Œä½†ä¸æ˜¯æ‰€æœ‰å¯¹è±¡éƒ½æœ‰prototypeå±æ€§ï¼Œå®é™…ä¸Šåªæœ‰å‡½æ•°æ‰æœ‰è¿™ä¸ªå±æ€§ã€‚ 1234567var a = function()&#123;&#125;;var b=[1,2,3];//å‡½æ•°æ‰æœ‰prototypeå±æ€§console.log(a.prototype);//&gt;&gt; function()&#123;&#125;//éå‡½æ•°ï¼Œæ²¡æœ‰prototypeå±æ€§console.log(b.prototype);//&gt;&gt; undefined æ¯ä¸ªå¯¹è±¡(å®ä¾‹)éƒ½æœ‰ä¸€ä¸ªå±æ€§__proto__ï¼ŒæŒ‡å‘ä»–çš„æ„é€ å‡½æ•°ï¼ˆconstructorï¼‰çš„prototypeå±æ€§ã€‚ ä¸€ä¸ªå¯¹è±¡çš„åŸå‹å°±æ˜¯å®ƒçš„æ„é€ å‡½æ•°çš„prototypeå±æ€§çš„å€¼ï¼Œå› æ­¤__proto__ä¹Ÿå³åŸå‹çš„ä»£åè¯ã€‚ å¯¹è±¡çš„__proto__ä¹Ÿæœ‰è‡ªå·±çš„__proto__ï¼Œå±‚å±‚å‘ä¸Šï¼Œç›´åˆ°__proto__ä¸ºnullã€‚æ¢å¥è¯è¯´ï¼ŒåŸå‹æœ¬èº«ä¹Ÿæœ‰è‡ªå·±çš„åŸå‹ã€‚è¿™ç§ç”±åŸå‹å±‚å±‚é“¾æ¥èµ·æ¥çš„æ•°æ®ç»“æ„æˆä¸º åŸå‹é“¾ã€‚å› ä¸ºnullä¸å†æœ‰åŸå‹ï¼Œæ‰€ä»¥åŸå‹é“¾çš„æœ«ç«¯æ˜¯nullã€‚ è®©æˆ‘ä»¬ç”¨æ›´å¤šä»£ç æ¥éªŒè¯ä¸€ä¸‹ä»¥ä¸Šç»“è®ºï¼š 123456789101112131415161718var a = function()&#123;&#125;;var b=[1,2,3];//açš„æ„é€ å‡½æ•°æ˜¯ã€ŒFunctionå‡½æ•°ã€console.log(a.__proto__ == Function.prototype);//&gt;&gt; true//bçš„æ„é€ å‡½æ•°æ˜¯ã€ŒArrayå‡½æ•°ã€console.log(b.__proto__ == Array.prototype);//&gt;&gt; true//å› ä¸ºã€ŒFunctionå‡½æ•°ã€å’Œã€ŒArrayå‡½æ•°ã€åˆéƒ½æ˜¯å¯¹è±¡ï¼Œå…¶æ„é€ å‡½æ•°//æ˜¯ã€ŒObjectå‡½æ•°ã€ï¼Œæ‰€ä»¥ï¼Œaå’Œbçš„åŸå‹çš„åŸå‹éƒ½æ˜¯Object.prototypeconsole.log(a.__proto__.__proto__ === Object.prototype);//&gt;&gt; trueconsole.log(b.__proto__.__proto__ === Object.prototype);//&gt;&gt; true//Objectä½œä¸ºé¡¶çº§å¯¹è±¡çš„æ„é€ å‡½æ•°ï¼Œå®ƒå®ä¾‹çš„åŸå‹æœ¬èº«å°±ä¸å†æœ‰åŸå‹äº†ï¼Œå› æ­¤å®ƒåŸå‹//çš„__proto__å±æ€§ä¸ºnullconsole.log(new Object().__proto__.__proto__);//&gt;&gt; null//ä¹Ÿå³Objectç±»å‹å¯¹è±¡ï¼Œå…¶åŸå‹ï¼ˆObject.prototypeï¼‰çš„__proto__ä¸ºnullconsole.log(Object.prototype.__proto__);//&gt;&gt; null ä¸‰è€…å…³ç³»å›¾å¦‚ä¸‹ï¼š ä½¿ç”¨__proto__æ˜¯æœ‰äº‰è®®çš„ï¼Œä¹Ÿä¸é¼“åŠ±ä½¿ç”¨å®ƒã€‚å› ä¸ºå®ƒä»æ¥æ²¡æœ‰è¢«åŒ…æ‹¬åœ¨EcmaScriptè¯­è¨€è§„èŒƒä¸­ï¼Œä½†æ˜¯ç°ä»£æµè§ˆå™¨éƒ½å®ç°äº†å®ƒã€‚__proto__å±æ€§å·²åœ¨ECMAScript 6è¯­è¨€è§„èŒƒä¸­æ ‡å‡†åŒ–ï¼Œç”¨äºç¡®ä¿Webæµè§ˆå™¨çš„å…¼å®¹æ€§ï¼Œå› æ­¤å®ƒæœªæ¥å°†è¢«æ”¯æŒã€‚ä½†æ˜¯ï¼Œå®ƒå·²è¢«ä¸æ¨èä½¿ç”¨ï¼Œç°åœ¨æ›´æ¨èä½¿ç”¨Object.getPrototypeOf/Reflect.getPrototypeOf å’ŒObject.setPrototypeOf/Reflect.setPrototypeOfï¼ˆå°½ç®¡å¦‚æ­¤ï¼Œè®¾ç½®å¯¹è±¡çš„åŸå‹æ˜¯ä¸€ä¸ªç¼“æ…¢çš„æ“ä½œï¼Œå¦‚æœæ€§èƒ½è¦æ±‚å¾ˆé«˜ï¼Œåº”è¯¥é¿å…è®¾ç½®å¯¹è±¡çš„åŸå‹ï¼‰ã€‚ åŸå‹ç»§æ‰¿ä½¿ç”¨æœ€æ–°çš„æ–¹æ³•Object.setPrototypeOfï¼ˆç±»ä¼¼Reflect.setPrototypeOfï¼‰å¯ä»¥å¾ˆæ–¹ä¾¿åœ°ç»™å¯¹è±¡è®¾ç½®åŸå‹ï¼Œè¿™ä¸ªå¯¹è±¡ä¼šç»§æ‰¿è¯¥åŸå‹æ‰€æœ‰å±æ€§å’Œæ–¹æ³•ã€‚ ä½†æ˜¯ï¼ŒsetPrototypeOfçš„æ€§èƒ½å¾ˆå·®ï¼Œæˆ‘ä»¬åº”è¯¥å°½é‡ä½¿ç”¨ Object.create()æ¥ä¸ºæŸä¸ªå¯¹è±¡è®¾ç½®åŸå‹ã€‚ 1234567891011//objçš„åŸå‹æ˜¯Object.prototypevar obj=&#123; methodA()&#123; console.log(\"coffe\"); &#125;&#125;var newObj = Object.create(obj);//ä»¥objä¸ºåŸå‹åˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡//methodAå®é™…ä¸Šæ˜¯newObjåŸå‹å¯¹è±¡objä¸Šçš„æ–¹æ³•ã€‚ä¹Ÿå³newObjç»§æ‰¿äº†å®ƒçš„åŸå‹å¯¹è±¡objçš„å±æ€§å’Œæ–¹æ³•ã€‚newObj.methodA();//&gt;&gt; coffe ç±»(classï¼‰çš„prototypeå’ŒprotoES6ä¹‹åï¼Œç±»(class)ä¹Ÿæœ‰äº†prototypeå±æ€§ï¼Œä¸ºä»€ä¹ˆå‘¢ï¼Œå› ä¸ºclassæœ¬è´¨ä¸Šæ˜¯æ„é€ å‡½æ•°çš„è¯­æ³•ç³–. 1234class A &#123;&#125;typeof A;//&gt;&gt; \"function\" è¯´æ˜classæœ¬è´¨ä¸Šä¹Ÿæ˜¯å‡½æ•°ï¼Œæ‰€ä»¥å®ƒå¸¦æœ‰prototypeå±æ€§æ˜¯ååˆ†æ­£å¸¸çš„äº‹ã€‚ç„¶åï¼Œåœ¨Chromeæµè§ˆå™¨é‡Œè°ƒè¯•å¦‚ä¸‹ä»£ç ï¼š 1234class A &#123;&#125;A.prototype; å¾—åˆ°çš„ç»“æœå¦‚ä¸‹å›¾: ä¸Šé¢ä»£ç è¯´æ˜ç±»çš„prototypeæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå®ƒåŒ…å«æœ‰constructorå±æ€§ã€‚è¿™å’Œå‡½æ•°çš„prototypeå±æ€§è¡¨ç°å…·æœ‰ä¸€è‡´æ€§ã€‚ 1234class A &#123;&#125;A===A.prototype.constructor;//&gt;&gt; true ä¸Šé¢ä»£ç è¯´æ˜ä¸€ä¸ªé‡è¦ç»“è®ºï¼šç±»æŒ‡å‘è‡ªèº«æ„é€ å‡½æ•°ã€‚è€Œä¸”ï¼Œäº‹å®ä¸Šï¼Œç±»çš„æ‰€æœ‰æ–¹æ³•éƒ½å®šä¹‰åœ¨ç±»çš„prototypeå±æ€§ä¸Šé¢ã€‚åŒæ ·å¯ä»¥é€šè¿‡Chromeè°ƒè¯•éªŒè¯ã€‚ 1234567891011121314151617181920class A&#123; constructor() &#123; // ... &#125; toString() &#123; // ... &#125; toValue() &#123; // ... &#125;&#125;// ç­‰åŒäºA.prototype = &#123; constructor() &#123;&#125;, toString() &#123;&#125;, toValue() &#123;&#125;,&#125;; ç»“æœå¦‚ä¸‹ï¼š å®šç†class ä½œä¸ºæ„é€ å‡½æ•°çš„è¯­æ³•ç³–ï¼ŒåŒæ—¶æœ‰prototypeå±æ€§å’Œ__proto__å±æ€§ï¼Œå› æ­¤åŒæ—¶å­˜åœ¨ä¸¤æ¡ç»§æ‰¿é“¾ã€‚ ï¼ˆ1ï¼‰å­ç±»çš„__proto__å±æ€§ï¼Œè¡¨ç¤ºæ„é€ å‡½æ•°çš„ç»§æ‰¿ï¼Œæ€»æ˜¯æŒ‡å‘çˆ¶ç±»ã€‚ ï¼ˆ2ï¼‰å­ç±»prototypeå±æ€§çš„__proto__å±æ€§ï¼Œè¡¨ç¤ºæ–¹æ³•çš„ç»§æ‰¿ï¼Œæ€»æ˜¯æŒ‡å‘çˆ¶ç±»çš„prototypeå±æ€§ã€‚ 12345678class A &#123;&#125;class B extends A &#123;&#125;B.__proto__ === A //&gt;&gt; trueB.prototype.__proto__ === A.prototype //&gt;&gt; true","categories":[{"name":"JavaScript","slug":"JavaScript","permalink":"http://blog.kobingo.xyz/categories/JavaScript/"}],"tags":[{"name":"åŸå‹","slug":"åŸå‹","permalink":"http://blog.kobingo.xyz/tags/%E5%8E%9F%E5%9E%8B/"}]},{"title":"é—­åŒ…","slug":"javascript-é—­åŒ…","date":"2018-02-03T15:04:57.000Z","updated":"2021-01-19T06:41:41.222Z","comments":true,"path":"javascript-é—­åŒ…/","link":"","permalink":"http://blog.kobingo.xyz/javascript-%E9%97%AD%E5%8C%85/","excerpt":"é—­åŒ…æ˜¯JavaScriptçš„å¼ºå¤§çš„ç‰¹æ€§ï¼Œå¾ˆå¤šå¼ºå¤§JavaScriptåº“æ¯”å¦‚jQueryã€Vue.jséƒ½ä½¿ç”¨äº†é—­åŒ…çš„ç‰¹æ€§æ¥å®ç°çš„ï¼ŒåŒæ—¶ï¼Œé—­åŒ…ä¹Ÿæ˜¯jsé‡Œçš„ç†è§£éš¾ç‚¹ä¹‹ä¸€ã€‚","text":"é—­åŒ…æ˜¯JavaScriptçš„å¼ºå¤§çš„ç‰¹æ€§ï¼Œå¾ˆå¤šå¼ºå¤§JavaScriptåº“æ¯”å¦‚jQueryã€Vue.jséƒ½ä½¿ç”¨äº†é—­åŒ…çš„ç‰¹æ€§æ¥å®ç°çš„ï¼ŒåŒæ—¶ï¼Œé—­åŒ…ä¹Ÿæ˜¯jsé‡Œçš„ç†è§£éš¾ç‚¹ä¹‹ä¸€ã€‚ çƒ­èº«ï¼šå¾ªç¯ä¸­çš„é—­åŒ…12345for (var i = 1; i &lt;= 5; i++) &#123; setTimeout(function test() &#123; console.log(i) //&gt;&gt; 6 6 6 6 6 &#125;, i * 1000);&#125; æœ¬æ„æ˜¯æƒ³æ¯éš”ä¸€ç§’ä¾æ¬¡è¾“å‡ºâ€œ1 2 3 4 5â€ï¼Œç»“æœå˜æˆè¾“å‡ºâ€œ6 6 6 6 6 â€ã€‚ä¸ºä»€ä¹ˆä¼šè¿™æ ·å‘¢ï¼Œæ ¹æ®ä½œç”¨åŸŸé“¾ä¸Šå˜é‡æŸ¥æ‰¾æœºåˆ¶ï¼ŒsetTimeoutç¬¬ä¸€ä¸ªå‚æ•°çš„å‡½æ•°ä½“å†…çš„iå¼•ç”¨äº†å»å…¨å±€ä½œç”¨åŸŸé‡Œé¢çš„iï¼Œå½“forå¾ªç¯å®Œæ¯•åï¼Œiçš„å€¼ä¸º6ï¼Œæ‰€ä»¥è¾“å‡ºäº†â€œ6 6 6 6 6 â€ã€‚ å¦‚ä½•å®ç°æ­£ç¡®çš„è¾“å‡ºå‘¢ï¼Ÿ å…¶å®ç”¨é—­åŒ…å°±èƒ½è½»æ¾è§£å†³è¿™ä¸ªé—®é¢˜ï¼š 1234567for (var i = 1; i &lt;= 5; i++) &#123; (function(j) &#123;//åŒ…äº†ä¸€å±‚IIFEå½¢å¼çš„å‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°æ˜¯é—­åŒ… setTimeout(function test() &#123;//å‡½æ•°ä½“å†…çš„jå¼•ç”¨äº†å¤–å±‚åŒ¿åå‡½æ•°çš„å‚æ•°j console.log(j); //&gt;&gt; 1 2 3 4 5 &#125;, j * 1000); &#125;)(i);&#125; ä»€ä¹ˆæ˜¯é—­åŒ…1. é—­åŒ…çš„å®šä¹‰å…³äºJavaScripté—­åŒ…çš„å®šä¹‰æœ‰å¾ˆå¤šç§ï¼Œæ¯æœ¬ä¹¦ã€æ¯ä¸ªä½œè€…éƒ½æœ‰ä¸å®Œå…¨ç›¸åŒçš„æè¿°ï¼Œè™½ç„¶ç¬”è€…è®¤ä¸ºå‡½æ•°å°±æ˜¯é—­åŒ…è¿™ä¸ªå®šä¹‰æ‰æ˜¯æœ€ç®€å•æœ€ç›´ç™½çš„ï¼Œä½†å…¶å®ç¬”è€…çœ‹åˆ°è¿‡ä¸ä¸‹åç§å®šä¹‰ï¼Œåˆ°ç°åœ¨ä¸€ç§éƒ½è®°ä¸ä½ã€‚é‰´äºæ­¤ï¼Œæˆ‘ä»¬å¹²è„†ä¸è¦è®°ä½è¿™äº›äº”èŠ±å…«é—¨çš„å®šä¹‰äº†ï¼Œåªè¦è®°ä½äº†äº§ç”Ÿé—­åŒ…çš„æ—¶æœºä¼šæ›´å®é™…ä¸€äº›ï¼Œé¢è¯•æ—¶ï¼ŒæŠŠé—­åŒ…äº§ç”Ÿçš„æ—¶æœºå‘Šè¯‰é¢è¯•å®˜å°±å¯ä»¥äº†ï¼š å†…å±‚çš„ä½œç”¨åŸŸè®¿é—®å®ƒå¤–å±‚å‡½æ•°ä½œç”¨åŸŸé‡Œçš„å‚æ•°/å˜é‡/å‡½æ•°æ—¶ï¼Œé—­åŒ…å°±äº§ç”Ÿäº†ã€‚è®©æˆ‘ä»¬ç”¨ä»£ç æ¥è¯´äº‹å„¿å§ï¼š 1234567891011function func()&#123;//func1å¼•ç”¨äº†å®ƒå¤–å±‚çš„å˜é‡aï¼Œå› æ­¤funcæˆä¸ºäº†é—­åŒ… let a=\"coffe\"; function func1()&#123; console.log(a);//è®¿é—®äº†å¤–å±‚å‡½æ•°funcä½“å†…çš„å˜é‡a debugger;//æ–­ç‚¹ &#125; func1();&#125;func(); æˆ‘ä»¬åœ¨chromeæµè§ˆå™¨çš„â€œå¼€å‘è€…å·¥å…·â€é‡Œé¢çš„æ§åˆ¶å°ï¼Œè¿è¡Œä¸Šé¢çš„ä»£ç ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿çœ‹åˆ°é—­åŒ…ã€‚ çœ‹ä¸Šé¢è¿™ä¸ªå›¾ï¼ŒClosureå‡ºç°åœ¨Scopeä¸€æ é‡Œé¢ï¼Œæ‰€ä»¥å¯ä»¥è®¤ä¸ºé—­åŒ…ä¹Ÿæ˜¯ä¸€ç§ä½œç”¨åŸŸã€‚æ—¢ç„¶é—­åŒ…ä¹Ÿæ˜¯ä¸€ç§ä½œç”¨åŸŸï¼Œé—­åŒ…èƒ½å¤Ÿè§£å†³ç»å…¸çš„â€œå¾ªç¯ä¸­çš„é—­åŒ…â€çš„é—®é¢˜ï¼Œé‚£æ˜¯ä¸æ˜¯åˆ©ç”¨ä½œç”¨åŸŸå°±èƒ½è§£å†³é—®é¢˜ï¼Ÿè¿™è®©äººæƒ³åˆ°äº†å…³é”®å­—letï¼Œè¯•è¯•çœ‹å§ï¼ŒæŠŠæœ¬æ–‡å¼€å¤´çš„ä»£ç æ”¹é€ ä¸€ä¸‹ï¼š 12345678for (var i = 1; i &lt;= 5; i++) &#123; &#123; let j = i; setTimeout(function test() &#123; console.log(j) //&gt;&gt; 1 2 3 4 5 &#125;, j * 1000); &#125;&#125; æœç„¶ï¼Œç”¨letå…³é”®å­—åŒ…ä¸Šä¸€ä¸ªä½œç”¨åŸŸï¼Œä¹Ÿèƒ½å’Œé—­åŒ…ä¸€æ ·è§£å†³é—®é¢˜è¾¾æˆç›®çš„ã€‚å› æ­¤å¯ä»¥è¯´ï¼Œé—­åŒ…æ˜¯ä¸€ç§ä½œç”¨åŸŸï¼Œå®ƒæ‹·è´äº†ä¸€å¥—å¤–å±‚å‡½æ•°ä½œç”¨åŸŸä¸­è¢«è®¿é—®çš„å‚æ•°ã€å˜é‡/å‡½æ•°ï¼Œè¿™ä¸ªæ‹·è´éƒ½æ˜¯æµ…æ‹·è´ 2. å†™æˆé—­åŒ…å½¢å¼æœ‰ä»€ä¹ˆå¥½å¤„å‘¢ï¼Ÿå½“ç„¶æœ‰å¥½å¤„ï¼è¿˜æ˜¯ä»¥ä¹‹å‰çš„ä»£ç ä¸ºä¾‹ï¼Œå˜é‡aç±»ä¼¼äºé«˜çº§è¯­è¨€çš„ç§æœ‰å±æ€§ï¼Œæ— æ³•è¢«funcå¤–éƒ¨ä½œç”¨åŸŸè®¿é—®å’Œä¿®æ”¹ï¼Œåªæœ‰funcå†…éƒ¨çš„ä½œç”¨åŸŸï¼ˆå«åµŒå¥—ä½œç”¨åŸŸï¼‰å¯ä»¥è®¿é—®ã€‚è¿™æ ·å¯ä»¥å®ç°è½¯ä»¶è®¾è®¡ä¸Šçš„å°è£…ï¼Œè®¾è®¡å‡ºå¾ˆå¼ºå¤§çš„ç±»åº“ã€æ¡†æ¶ï¼Œæ¯”å¦‚æˆ‘ä»¬å¸¸ç”¨çš„jQueryã€AngularJSã€Vue.jsã€‚ çœ‹ä¸€ä¸ªES6å‡ºç°ä¹‹å‰æœ€å¸¸è§çš„æ¨¡å—åŒ–å°è£…çš„ä¾‹å­: 12345678910111213141516171819202122//å®šä¹‰ä¸€ä¸ªæ¨¡å—function module(n) &#123; //ç§æœ‰å±æ€§ let name = n; //ç§æœ‰æ–¹æ³• function getModuleName() &#123; return name; &#125; //ç§æœ‰æ–¹æ³• function someMethod() &#123; console.log(\"coffe1891\"); &#125; //ä»¥ä¸€ä¸ªå¯¹è±¡çš„å½¢å¼è¿”å› return &#123; getModuleName: getModuleName, getXXX: someMethod &#125;;&#125;let myapp = module(\"myModule\");//å®šä¹‰ä¸€ä¸ªæ¨¡å—console.log(myapp.getModuleName()); //&gt;&gt; myModuleconsole.log(myapp.getXXX()); //&gt;&gt; coffe1891 3. é—­åŒ…æœ‰ä»€ä¹ˆç¼ºç‚¹å—ï¼Ÿjavascriptä¸­çš„åƒåœ¾å›æ”¶ï¼ˆGCï¼‰è§„åˆ™æ˜¯è¿™æ ·çš„ï¼šå¦‚æœå¯¹è±¡ä¸å†è¢«å¼•ç”¨ï¼Œæˆ–è€…å¯¹è±¡äº’ç›¸å¼•ç”¨å½¢æˆæ•°æ®å­¤å²›åä¸”æ²¡æœ‰è¢«å­¤å²›ä¹‹å¤–çš„å…¶ä»–å¯¹è±¡å¼•ç”¨ï¼Œé‚£ä¹ˆè¿™äº›å¯¹è±¡å°†ä¼šè¢«JSå¼•æ“çš„åƒåœ¾å›æ”¶å™¨å›æ”¶ï¼›åä¹‹ï¼Œè¿™äº›å¯¹è±¡ä¸€ç›´ä¼šä¿å­˜åœ¨å†…å­˜ä¸­ã€‚ ç”±äºé—­åŒ…ä¼šå¼•ç”¨åŒ…å«å®ƒçš„å¤–å±‚å‡½æ•°ä½œç”¨åŸŸé‡Œçš„å˜é‡/å‡½æ•°ï¼Œå› æ­¤ä¼šæ¯”å…¶ä»–éé—­åŒ…å½¢å¼çš„å‡½æ•°å ç”¨æ›´å¤šå†…å­˜ã€‚å½“å¤–å±‚å‡½æ•°æ‰§è¡Œå®Œæ¯•é€€å‡ºå‡½æ•°è°ƒç”¨æ ˆï¼ˆcall stackï¼‰çš„æ—¶å€™ï¼Œå¤–å±‚å‡½æ•°ä½œç”¨åŸŸé‡Œå˜é‡å› ä¸ºè¢«å¼•ç”¨ç€ï¼Œå¯èƒ½å¹¶ä¸ä¼šè¢«JSå¼•æ“çš„åƒåœ¾å›æ”¶å™¨å›æ”¶ï¼Œå› è€Œä¼šå¼•èµ·å†…å­˜æ³„æ¼ã€‚è¿‡åº¦ä½¿ç”¨é—­åŒ…ï¼Œä¼šå¯¼è‡´å†…å­˜å ç”¨è¿‡å¤šï¼Œç”šè‡³å†…å­˜æ³„æ¼ã€‚ 123456789101112function A()&#123; var count = 0; function B()&#123; count ++; console.log(count); &#125; return B;//å‡½æ•°Bä¿æŒäº†å¯¹countçš„å¼•ç”¨&#125;var b = A();b();//&gt;&gt; 1b();//&gt;&gt; 2b();//&gt;&gt; 3 countæ˜¯å‡½æ•°Aä¸­çš„ä¸€ä¸ªå˜é‡ï¼Œå®ƒçš„å€¼åœ¨å‡½æ•°Bä¸­è¢«æ”¹å˜ï¼ŒBæ¯æ‰§è¡Œä¸€æ¬¡ï¼Œcountçš„å€¼å°±åœ¨åŸæ¥çš„åŸºç¡€ä¸Šç´¯åŠ 1ã€‚å› æ­¤ï¼Œå‡½æ•°Aä¸­çš„countä¸€ç›´ä¿å­˜åœ¨å†…å­˜ä¸­ï¼Œå¹¶æ²¡æœ‰å› ä¸ºå‡½æ•°Aæ‰§è¡Œå®Œæ¯•é€€å‡ºå‡½æ•°è°ƒç”¨æ ˆåè¢«JSå¼•æ“çš„åƒåœ¾å›æ”¶å™¨å›æ”¶æ‰ã€‚ é¿å…é—­åŒ…å¯¼è‡´å†…å­˜æ³„æ¼çš„è§£å†³æ–¹æ³•æ˜¯ï¼Œåœ¨å‡½æ•°Aæ‰§è¡Œå®Œæ¯•é€€å‡ºå‡½æ•°è°ƒç”¨æ ˆä¹‹å‰ï¼Œå°†ä¸å†ä½¿ç”¨çš„å±€éƒ¨å˜é‡å…¨éƒ¨åˆ é™¤æˆ–è€…èµ‹å€¼ä¸ºnullã€‚ å…¶ä»–ä½¿ç”¨åœºæ™¯ä»‹ç»é™¤äº†ä¸Šé¢ä»‹ç»è¿‡çš„å¾ªç¯ä¸­çš„é—­åŒ…ã€æ¨¡å—åŒ–å°è£…ä¹‹å¤–ï¼Œé—­åŒ…è¿˜æœ‰ä¸€äº›å…¶ä»–å†™æ³•ã€‚ 1. è¿”å›ä¸€ä¸ªæ–°å‡½æ•°123456789101112function sayHello2(name) &#123; var text = \"Hello \" + name; // å±€éƒ¨å˜é‡ var sayAlert = function() &#123; console.log(text); &#125;; return sayAlert;&#125;var say2 = sayHello2(\"coffe1891\");say2(); //&gt;&gt; Hello coffe1891 è°ƒç”¨sayHello2()å‡½æ•°è¿”å›äº†sayAlertï¼Œèµ‹å€¼ç»™say2ã€‚æ³¨æ„say2æ˜¯ä¸€ä¸ªå¼•ç”¨å˜é‡ï¼ŒæŒ‡å‘ä¸€ä¸ªå‡½æ•°æœ¬èº«ï¼Œè€Œä¸æ˜¯æŒ‡å‘ä¸€ä¸ªå˜é‡ã€‚ 2. æ‰©å±•å…¨å±€å¯¹è±¡çš„æ–¹æ³•ä¸‹é¢è¿™ç§åˆ©ç”¨é—­åŒ…æ‰©å±•å…¨å±€å¯¹è±¡ï¼Œå¯ä»¥æœ‰æ•ˆåœ°ä¿æŠ¤ç§æœ‰å˜é‡ï¼Œå½¢æˆä¸€å®šçš„å°è£…ã€æŒä¹…æ€§ã€‚ 12345678910111213141516171819202122232425function setupSomeGlobals() &#123; //ç§æœ‰å˜é‡ var num = 666; gAlertNumber = function() &#123;//æ²¡æœ‰ç”¨varå’Œletå…³é”®å­—å£°æ˜ï¼Œä¼šæˆä¸ºå…¨å±€å¯¹è±¡çš„æ–¹æ³• console.log(num); &#125;; gIncreaseNumber = function() &#123; num++; &#125;; gSetNumber = function(x) &#123; num = x; &#125;;&#125;setupSomeGlobals();gAlertNumber(); //&gt;&gt; 666gIncreaseNumber();gAlertNumber(); //&gt;&gt; 667gSetNumber(1891);gAlertNumber(); //&gt;&gt; 1891 ä¸‰ä¸ªå…¨å±€å‡½æ•°gAlertNumberï¼ŒgIncreaseNumberï¼ŒgSetNumberæŒ‡å‘äº†åŒä¸€ä¸ªé—­åŒ…ï¼Œå› ä¸ºå®ƒä»¬æ˜¯åœ¨åŒä¸€æ¬¡setupSomeGlobals()è°ƒç”¨ä¸­å£°æ˜çš„ã€‚å®ƒä»¬æ‰€æŒ‡å‘çš„é—­åŒ…æ˜¯ä¸setupSomeGlobals()å‡½æ•°å…³è”ä¸€ä¸ªä½œç”¨åŸŸï¼Œè¯¥ä½œç”¨åŸŸåŒ…æ‹¬äº†numå˜é‡çš„æ‹·è´ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œè¿™ä¸‰ä¸ªå‡½æ•°æ“ä½œçš„æ˜¯åŒä¸€ä¸ªnumå˜é‡ã€‚ 3. å»¶é•¿å±€éƒ¨å˜é‡çš„ç”Ÿå‘½æ—¥å¸¸å¼€å‘æ—¶ï¼ŒImageå¯¹è±¡ç»å¸¸è¢«ç”¨äºæ•°æ®ç»Ÿè®¡çš„ä¸ŠæŠ¥ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 12345var report = function(src) &#123; var img = new Image(); img.src = src;&#125;report('http://www.xxx.com/getClientInfo');//æŠŠå®¢æˆ·ç«¯ä¿¡æ¯ä¸ŠæŠ¥æ•°æ® è¿™æ®µä»£ç åœ¨è¿è¡Œæ—¶ï¼Œå‘ç°åœ¨ä¸€äº›ä½ç‰ˆæœ¬æµè§ˆå™¨ä¸Šå­˜åœ¨bugï¼Œä¼šä¸¢å¤±éƒ¨åˆ†æ•°æ®ä¸ŠæŠ¥ã€‚åŸå› æ˜¯Imageå¯¹è±¡æ˜¯reportå‡½æ•°ä¸­çš„å±€éƒ¨å˜é‡ï¼Œå½“reportå‡½æ•°è°ƒç”¨ç»“æŸåï¼ŒImageå¯¹è±¡éšå³è¢«JSå¼•æ“åƒåœ¾å›æ”¶å™¨å›æ”¶ï¼Œè€Œæ­¤æ—¶å¯èƒ½è¿˜æ²¡æ¥å¾—åŠå‘å‡ºhttpè¯·æ±‚ï¼Œæ‰€ä»¥å¯èƒ½å¯¼è‡´æ­¤æ¬¡ä¸ŠæŠ¥æ•°æ®çš„è¯·æ±‚å¤±è´¥ã€‚ æ€ä¹ˆåŠå‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥ä½¿ç”¨é—­åŒ…æŠŠImageå¯¹è±¡å°é—­èµ·æ¥ï¼Œå°±å¯ä»¥è§£å†³æ•°æ®ä¸¢å¤±çš„é—®é¢˜ï¼Œä»£ç å¦‚ä¸‹ï¼š 123456789var report = (function() &#123; var imgs = [];//åœ¨å†…å­˜é‡ŒæŒä¹…åŒ– return function(src) &#123; var img = new Image(); imgs.push(img);//å¼•ç”¨å±€éƒ¨å˜é‡imgs img.src = src; &#125;&#125;());report('http://www.xxx.com/getClientInfo');//æŠŠå®¢æˆ·ç«¯ä¿¡æ¯ä¸ŠæŠ¥æ•°æ®","categories":[{"name":"JavaScript","slug":"JavaScript","permalink":"http://blog.kobingo.xyz/categories/JavaScript/"}],"tags":[{"name":"é—­åŒ…","slug":"é—­åŒ…","permalink":"http://blog.kobingo.xyz/tags/%E9%97%AD%E5%8C%85/"}]},{"title":"å®Œå…¨ç†è§£javascripté‡Œçš„this","slug":"javascript-javascripté‡Œçš„this","date":"2018-02-01T14:03:22.000Z","updated":"2021-01-19T06:41:41.222Z","comments":true,"path":"javascript-javascripté‡Œçš„this/","link":"","permalink":"http://blog.kobingo.xyz/javascript-javascript%E9%87%8C%E7%9A%84this/","excerpt":"","text":"thisæ˜¯JavaScriptä¸–ç•Œæœ€è®©äººè¿·æƒ‘çš„å…³é”®å­—ä¹‹ä¸€ï¼Œå¾ˆå¤šäººå¯¹å®ƒä¸€çŸ¥åŠè§£ï¼Œæœ¬æ–‡å¸Œæœ›è¯¦ç»†çš„æŠŠthisè¯´æ˜ç™½ã€‚ ä¸ºä»€ä¹ˆè¦æœ‰thisï¼ŸJavaScript å…è®¸åœ¨å‡½æ•°ä½“å†…éƒ¨ï¼Œå¼•ç”¨å½“å‰æ‰§è¡Œä¸Šä¸‹æ–‡çš„å…¶ä»–å˜é‡ã€‚ 123function func() &#123; console.log(a);&#125; å¦‚ä¸Šä»£ç ï¼Œå‡½æ•°funcå¼•ç”¨äº†å½“å‰æ‰§è¡Œä¸Šä¸‹æ–‡çš„å˜é‡aï¼Œé—®é¢˜æ˜¯è¿™ä¸ªå‡½æ•°funcå¯ä»¥åœ¨ä»»æ„å…¶ä»–æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­è¢«è°ƒç”¨ï¼Œå› æ­¤è¿™ä¸ªaå¯èƒ½å°±æŒ‡å‘ä¸åŒäº†ã€‚æ­£å› ä¸ºå¦‚æ­¤ï¼ŒJSå¼•æ“éœ€è¦æœ‰ä¸€ä¸ªæœºåˆ¶ï¼Œå¯ä»¥ä¾é å…¶ ä¼˜é›…åœ°ã€å‡†ç¡®åœ°æŒ‡å‘å½“å‰ä»£ç è¿è¡Œæ—¶æ‰€å¤„çš„ä¸Šä¸‹æ–‡ç¯å¢ƒï¼ˆcontextï¼‰ã€‚ å› æ­¤ä¾¿å‚¬ç”Ÿäº†â€œthisâ€ã€‚ ä½•è°“â€ä¼˜é›…åœ°â€œï¼Ÿ12345678910//å‡è®¾æœ‰ä¸ªå¯¹è±¡åå­—å¾ˆé•¿ï¼Œè€Œä¸”æœ‰å¯èƒ½ä¼šæ”¹åvar iAmALongLongLongNameObject=&#123; name:\"coffe\", func1()&#123; return iAmALongLongLongNameObject.name; &#125;, func2()&#123; return this.name; &#125;&#125; iAmALongLongLongNameObjectçš„æ–¹æ³•func2ä½¿ç”¨äº†thiså…³é”®å­—ï¼Œæ˜¯ä¸æ˜¯ä¼˜é›…å¤šäº†ï¼Ÿç„¶åå³ä½¿ä»¥åå¯¹è±¡åå­—å˜åŒ–ï¼Œfunc2å†…éƒ¨çš„ä»£ç ä¹Ÿä¸ç”¨æ”¹å˜ã€‚func1è¿™ç§ç¡®å®ä¹Ÿå¯ä»¥å®ç°ä¸func2åŒæ ·çš„åŠŸèƒ½ï¼Œä½†æ˜¯å°±æ˜¾å¾—ä¸‘é™‹ã€ä¸çµæ´»äº†ã€‚ ä½•è°“â€œå‡†ç¡®åœ°â€ï¼Ÿthiså¯ä»¥å‡†ç¡®åœ°æŒ‡å‘ï¼ˆæŸä¸ªå¯¹è±¡ï¼‰è€Œä¸ä¼šäº§ç”Ÿæ­§ä¹‰ã€‚ 123456789101112131415161718192021//å…¨å±€å˜é‡var iAmALongLongLongNameObject = &#123; name: \"1891\"&#125;;(function() &#123; //å±€éƒ¨å˜é‡ var iAmALongLongLongNameObject = &#123; name: \"coffe\", func1() &#123; //å¦‚æœå…‰çœ‹ä»£ç ï¼Œæ˜¯ä¸æ˜¯å®¹æ˜“çœ‹æˆè°ƒç”¨äº†å…¨å±€å˜é‡çš„nameï¼Ÿ return iAmALongLongLongNameObject.name; &#125;, func2() &#123; //è¿™é‡Œå…‰çœ‹ä»£ç å°±å¾ˆå‡†ç¡®åœ°çŸ¥é“æ˜¯è°ƒç”¨äº†å±€éƒ¨å˜é‡çš„nameï¼ return this.name; &#125; &#125;; console.log(iAmALongLongLongNameObject.func1());//&gt;&gt; coffe&#125;)(); ä¸â€œJavaç­‰é«˜çº§è¯­è¨€çš„thisä¼šæŒ‡å‘å¯¹è±¡çš„å®ä¾‹æœ¬èº«â€ä¸åŒï¼ŒJavaScriptçš„thisæŒ‡å‘å‡½æ•°çš„è°ƒç”¨ä½ç½®çš„å¯¹è±¡ï¼Œä¹Ÿå³è°ƒç”¨è¯¥å‡½æ•°çš„å¯¹è±¡ã€‚ä½ éœ€è¦çŸ¥é“ï¼ŒJavaScriptä¸­æ‰€æœ‰çš„å‡½æ•°éƒ½æœ‰å±æ€§ï¼Œå°±å¦‚å¯¹è±¡æœ‰å±æ€§ä¸€æ ·ã€‚å‡½æ•°æ‰§è¡Œé˜¶æ®µï¼ˆä¹Ÿå³æ‰§è¡Œä¸Šä¸‹æ–‡çš„æ‰§è¡Œé˜¶æ®µï¼‰ä¼šè·å–thiså±æ€§çš„å€¼ï¼Œæ­¤æ—¶thiså°±æ˜¯ä¸€ä¸ªå˜é‡ï¼Œå‚¨å­˜ç€è°ƒç”¨è¯¥å‡½æ•°çš„å¯¹è±¡çš„å€¼ã€‚ 12345var a = \"coffe\";function func() &#123; console.log(this.a);&#125;func();//&gt;&gt; coffe ä¸Šé¢ä»£ç ä¸­ï¼Œfuncçš„è°ƒç”¨è€…æœªé€šè¿‡ç‚¹æ“ä½œç¬¦.æŒ‡æ˜ï¼Œé‚£å®ƒçš„è°ƒç”¨è€…å°±æ˜¯é»˜è®¤çš„å…¨å±€å¯¹è±¡windowï¼Œfuncå‡½æ•°ä½œä¸ºwindowçš„ä¸€ä¸ªæ–¹æ³•ï¼Œå…¶ä½“å†…çš„this.aå°±æ˜¯æ˜ç¡®æŒ‡ä»£windowä¸­å±æ€§aï¼Œè¿™ç§æŒ‡å‘æ˜¯å‡†ç¡®è€Œæ¸…æ™°çš„ï¼Œä¸ä¼šæœ‰æ­§ä¹‰ã€‚thisçš„è¿™ç§çµæ´»æ€§åœ¨è®¾è®¡APIçš„æ—¶å€™ï¼Œä¼šå˜å¾—å¾ˆæ–¹ä¾¿å’Œå®¹æ˜“è¢«å¤ç”¨ã€‚ è°ƒç”¨ä½ç½®è°ƒç”¨ä½ç½®å°±æ˜¯å‡½æ•°åœ¨ä»£ç ä¸­è¢«è°ƒç”¨çš„ä½ç½®ï¼Œè€Œä¸æ˜¯å£°æ˜çš„ä½ç½®ã€‚ç ”ç©¶è°ƒç”¨ä½ç½®ï¼Œä¹Ÿå³ææ¸…â€œç”±è°åœ¨å“ªè°ƒç”¨äº†è¿™ä¸ªå‡½æ•°â€çš„é—®é¢˜ã€‚ææ¸…æ¥šäº†è°ƒç”¨ä½ç½®ï¼Œæ‰èƒ½å‡†ç¡®åœ°æ‰¾åˆ°thisçš„æŒ‡å‘ã€‚ è¦æ‰¾åˆ°è°ƒç”¨ä½ç½®ï¼Œæœ€é‡è¦çš„æ˜¯è¦åˆ†ææ˜¯è¢«è°ã€åœ¨å“ªè°ƒç”¨ã€‚ 1234567891011var module = &#123; x: \"1891\", getX: function() &#123; return this.x; &#125;&#125;console.log(module.getX());//&gt;&gt; 1891var getX = module.getX;//æ³¨æ„ï¼šgetXå’Œmodule.getXéƒ½æ˜¯æŒ‡å‘å†…å­˜ä¸­å‡½æ•°çš„åœ°å€è€Œå·²ï¼Œå®ƒä»¬å¹¶æ²¡æœ‰è¢«â€œ()â€ä»¥ä¾¿æ‰§è¡Œ //è¿™é‡Œå®é™…ä¸Šæ˜¯ã€é—´æ¥å¼•ç”¨ã€‘çš„æ¨¡å¼ï¼Œè§æ–‡å°¾ã€å£¹.2.3.6ã€‘è§£é‡Šconsole.log(getX()); //&gt;&gt; undefined å¦‚ä¸Šä»£ç ï¼Œè¦æ‰¾åˆ°å‡½æ•°getXçš„è°ƒç”¨ä½ç½®ï¼Œéœ€è¦å…ˆçœ‹å“ªå„¿è°ƒç”¨äº†å®ƒï¼Œå¾ˆæ˜æ˜¾ï¼Œæœ‰å‡½æ•°æœ‰ä¸¤å¤„ä½ç½®è°ƒç”¨äº†å‡½æ•°getX()ï¼Œæ¥ä¸‹æ¥åˆ†ææ˜¯è°è°ƒç”¨äº†å®ƒã€‚ ä½œä¸ºmoduleå¯¹è±¡çš„getXæ–¹æ³•è¢«è°ƒç”¨ã€‚ è¿™ç§æƒ…å†µè¢«è°è°ƒç”¨ï¼Ÿå¾ˆæ˜æ˜¾æ˜¯è¢«å¯¹è±¡moduleè°ƒç”¨ï¼Œthisæ˜¯æŒ‡å‘moduleã€‚moduleå¯¹è±¡é‡Œé¢æœ‰ä¸€ä¸ªå±æ€§xï¼Œå®ƒçš„å€¼æ˜¯1891ï¼Œå› æ­¤console.log(module.getX())è¾“å‡º1891ã€‚ ä½œä¸ºå…¨å±€å‡½æ•°getXè¢«è°ƒç”¨ã€‚ è¿™ç§æƒ…å†µæ˜¯è¢«è°è°ƒç”¨ï¼Ÿæˆ‘ä»¬éƒ½çŸ¥é“å…¨å±€å‡½æ•°å¯ä»¥çœ‹ä½œä¸ºwindowå¯¹è±¡çš„æ–¹æ³•ï¼Œé‚£ä¹ˆï¼Œå¾ˆæ˜æ˜¾ç°åœ¨getXæ˜¯è¢«å½“åšå…¨å±€å¯¹è±¡windowçš„ä¸€ä¸ªæ–¹æ³•è¢«è°ƒç”¨ã€‚ æˆ‘ä»¬ææ¸…æ¥šäº†è°ƒç”¨ä½ç½®ä¹‹åï¼Œæ¥ä¸‹æ¥å°±ä¼šç€æ‰‹åˆ¤æ–­thisçš„æŒ‡å‘ã€‚ å…ˆçœ‹çœ‹å¾ˆå¤šäººå¯¹thisæŒ‡å‘çš„ä¸€äº›è¯¯è§£this æ—¢ä¸æŒ‡å‘å‡½æ•°è‡ªèº«ä¹Ÿä¸æŒ‡å‘å‡½æ•°çš„ä½œç”¨åŸŸï¼Œè¿™ä¹‹å‰æ˜¯å¾ˆå¤šå‰ç«¯å·¥ç¨‹å¸ˆå®¹æ˜“è¯¯è§£çš„åœ°æ–¹ï¼Œç°åœ¨æ¾„æ¸…ä¸€ä¸‹ã€‚ thisçš„æŒ‡å‘ï¼Œæ˜¯åœ¨å‡½æ•°è¢«è°ƒç”¨çš„æ—¶å€™ç¡®å®šçš„ï¼Œä¹Ÿå°±æ˜¯æ‰§è¡Œä¸Šä¸‹æ–‡è¢«åˆ›å»ºæ—¶ç¡®å®šçš„ï¼› this çš„æŒ‡å‘å’Œå‡½æ•°å£°æ˜çš„ä½ç½®æ²¡æœ‰ä»»ä½•å…³ç³»ï¼Œåªå–å†³äºå‡½æ•°çš„è°ƒç”¨ä½ç½®ï¼ˆä¹Ÿå³ç”±è°ã€åœ¨ä»€ä¹ˆåœ°æ–¹è°ƒç”¨è¿™ä¸ªå‡½æ•°ï¼‰ï¼› æ­£å› ä¸ºåœ¨æ‰§è¡Œä¸Šä¸‹æ–‡çš„åˆ›å»ºé˜¶æ®µthisçš„æŒ‡å‘å°±å·²ç»è¢«ç¡®å®šäº†ï¼Œåœ¨æ‰§è¡Œé˜¶æ®µthisæŒ‡å‘ä¸å¯å†è¢«æ›´æ”¹ã€‚ 12345678910var obj = &#123; a: \"1891\"&#125;function func() &#123; this = obj; //æŠ¥é”™ï¼Œå› ä¸ºåœ¨æ‰§è¡Œé˜¶æ®µè¯•å›¾ä¿®æ”¹thisçš„æŒ‡å‘ console.log(this.a);&#125;func(); thisçš„æŒ‡å‘è§„åˆ™1. é»˜è®¤æŒ‡å‘ç‹¬ç«‹å‡½æ•°è°ƒç”¨ï¼ˆæ— æ³•åº”ç”¨åé¢å…¶ä»–æŒ‡å‘è§„åˆ™æ—¶ï¼‰ï¼ŒthisæŒ‡å‘å…¨å±€å¯¹è±¡windowã€‚ 12345function func() &#123; console.log( this.a ); // thisæŒ‡å‘å…¨å±€å¯¹è±¡&#125;var a = 2;func(); //&gt;&gt; 2 å¯¹äºé»˜è®¤æŒ‡å‘æ¥è¯´ï¼Œå†³å®šthisæŒ‡å‘å¯¹è±¡çš„å¹¶ä¸æ˜¯è°ƒç”¨ä½ç½®æ˜¯å¦å¤„äºä¸¥æ ¼æ¨¡å¼ï¼Œè€Œæ˜¯å‡½æ•°ä½“æ˜¯å¦å¤„äºä¸¥æ ¼æ¨¡å¼ã€‚å¦‚æœå‡½æ•°ä½“å¤„äºä¸¥æ ¼æ¨¡å¼ï¼Œthisä¼šæŒ‡å‘undefinedï¼Œå¦åˆ™thisä¼šæŒ‡å‘å…¨å±€å¯¹è±¡ã€‚ 123456789function func() &#123; \"use strict\";//å‡½æ•°ä½“å¤„äºä¸¥æ ¼æ¨¡å¼ä¸‹ï¼ŒthisæŒ‡å‘undefined console.log(this.a);&#125;var a = \"1891\";(function() &#123; func(); //&gt;&gt; æŠ¥é”™&#125;)(); 12345678910function func() &#123; console.log(this.a);&#125;var a = \"1891\";(function() &#123; \"use strict\"; func(); //&gt;&gt; 1891 //è¿™é‡Œè¾“å‡º 1891 è€Œä¸æ˜¯æŠ¥é”™ï¼Œæ˜¯å› ä¸ºä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œthisçš„æŒ‡å‘ä¸funcçš„è°ƒç”¨ä½ç½®æ— å…³&#125;)(); è¿˜æœ‰ä¸€ç§é»˜è®¤æŒ‡å‘ï¼Œå°±æ˜¯åœ¨SetTimeoutæˆ–SetIntervalç»“åˆä½¿ç”¨æ—¶ã€‚ä»£ç ç¤ºä¾‹å¦‚ä¸‹ã€‚ 1234567891011121314151617181920212223var num = 0;class Obj &#123; constructor(num)&#123; this.num = num; &#125; func()&#123; console.log(this.num); &#125; func1()&#123; setTimeout(function () &#123; console.log(\"setTimeout:\"+this.num); &#125;, 1000) &#125; func2()&#123; setInterval(function () &#123; console.log(this.num); &#125;, 2000) &#125;&#125;var obj = new Obj(1);obj.func();//&gt;&gt; 1 è¾“å‡ºçš„æ˜¯obj.numobj.func1()//&gt;&gt; setTimeout:0 è¾“å‡ºçš„æ˜¯window.numobj.func2()//&gt;&gt; 0 0 0 0 â€¦â€¦ è¾“å‡ºçš„æ˜¯window.num å¯ä»¥å‘ç°åœ¨setIntervalå’ŒsetTimeoutä¸­ä¼ å…¥å‡½æ•°æ—¶ï¼Œå‡½æ•°ä¸­çš„thisä¼šæŒ‡å‘windowå¯¹è±¡ã€‚ 2. éšå¼æŒ‡å‘éšå¼æŒ‡å‘æ˜¯æ—¥å¸¸å¼€å‘ä¸­æœ€å¸¸è§çš„æŒ‡å‘ã€‚ å‡½æ•°ä½“å†…thisçš„æŒ‡å‘ç”±è°ƒç”¨ä½ç½®çš„è°ƒç”¨è€…å†³å®šã€‚å¦‚æœè°ƒç”¨è€…è°ƒç”¨çš„å‡½æ•°ï¼Œä¸ºæŸä»¥ä¸ªå¯¹è±¡çš„æ–¹æ³•ï¼Œé‚£ä¹ˆè¯¥å‡½æ•°åœ¨è¢«è°ƒç”¨æ—¶ï¼Œå…¶å†…éƒ¨çš„thisæŒ‡å‘è¯¥å¯¹è±¡ã€‚ 1234567891011function func() &#123; console.log(this.a);&#125;var obj = &#123; a: 2, func: func&#125;;obj.func(); //&gt;&gt; 2// æ‰¾åˆ°è°ƒç”¨ä½ç½®ï¼Œç”± obj å¯¹è±¡æ¥è°ƒç”¨å‡½æ•°funcï¼Œ// æ­¤æ—¶å¯ä»¥è¯´å‡½æ•°funcè¢«è°ƒç”¨æ—¶ï¼Œobj å¯¹è±¡â€œæ‹¥æœ‰â€æˆ–è€…â€œåŒ…å«â€funcå‡½æ•°ï¼Œ// æ‰€ä»¥æ­¤æ—¶çš„ this æŒ‡å‘è°ƒç”¨ func å‡½æ•°çš„ obj å¯¹è±¡ã€‚ å¯¹è±¡å±æ€§å¼•ç”¨é“¾ä¸­åªæœ‰æœ€é¡¶å±‚æˆ–è€…è¯´æœ€åä¸€å±‚ä¼šå½±å“è°ƒç”¨ä½ç½®ï¼Œä¹Ÿå°±æ˜¯è¯´thisæŒ‡å‘æœ€ç»ˆè°ƒç”¨å‡½æ•°çš„å¯¹è±¡ã€‚è¿™å¥è¯å¯èƒ½è¯´å¾—æ¯”è¾ƒæ‹—å£ï¼Œå…¶å®ç®€å•é€šä¿—åœ°è¯´ï¼ŒthisæŒ‡å‘æœ€é è¿‘è¢«è°ƒç”¨å‡½æ•°çš„å¯¹è±¡ï¼Œç¦»å¾—è¿œçš„ä¸æ˜¯ã€‚ä¸¾ä¾‹æ¥è¯´ï¼š 12345678910111213141516function func() &#123; console.log(this.a);&#125;var obj2 = &#123; a: \"1891\", func: func&#125;;var obj1 = &#123; a: \"coffe\", obj2: obj2&#125;;//æ­¤æ—¶çš„ this æŒ‡å‘ obj2 å¯¹è±¡ï¼Œå› ä¸ºobj2ç¦»å¾—è¿‘ï¼obj1.obj2.func(); //&gt;&gt; 1891 å†æ¥çœ‹çœ‹éšå¼ä¸¢å¤±ï¼š 1234567891011121314151617function func() &#123; console.log( this.a );&#125;var obj = &#123; a: \"coffe1891\", func: func&#125;;var bar = obj.func; // é—´æ¥å¼•ç”¨,è§æœ¬æ–‡ã€å£¹.2.3.6ã€‘ã€‚æ­¤æ—¶barå’Œobj.funcå…¶å® // éƒ½æŒ‡å‘å†…å­˜ä¸­çš„å‡½æ•°funcæœ¬èº«ã€‚var a = \"oops, global\"; // a æ˜¯å…¨å±€å¯¹è±¡windowçš„å±æ€§ï¼Œä¹Ÿæ˜¯å…¨å±€å˜é‡bar(); //&gt;&gt; oops, global// è™½ç„¶ bar æ˜¯ obj.func çš„ä¸€ä¸ªå¼•ç”¨ï¼Œä½†æ˜¯å®é™…ä¸Šï¼Œå®ƒå¼•ç”¨çš„æ˜¯funcå‡½æ•°æœ¬èº«ï¼Œ// å› æ­¤æ­¤æ—¶çš„ bar() å…¶å®æ˜¯ä¸€ä¸ªä¸å¸¦ä»»ä½•å®šè¯­çš„ç‹¬ç«‹å‡½æ•°è°ƒç”¨ï¼Œåº”ç”¨ã€é»˜è®¤æŒ‡å‘ã€‘è§„åˆ™,// å› æ­¤å‡½æ•°ä½“å†…çš„thisæŒ‡å‘windowï¼Œthis.aæŒ‡å‘windowçš„å±æ€§aï¼ˆå…¨å±€å˜é‡aï¼‰ 3. æ˜¾å¼æŒ‡å‘JavaScriptå†…ç½®å¯¹è±¡Functionçš„ä¸‰ä¸ªåŸå‹æ–¹æ³•call()ã€apply()å’Œbind()ï¼Œå®ƒä»¬çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå®ƒä»¬ä¼šæŠŠè¿™ä¸ªå¯¹è±¡ç»‘å®šåˆ°thisï¼Œæ¥ç€åœ¨è°ƒç”¨å‡½æ•°æ—¶è®©thisæŒ‡å‘è¿™ä¸ªå¯¹è±¡ã€‚ 1234567891011var a = \"makai\";function func() &#123; console.log( this.a );&#125;var obj = &#123; a:\"coffe1891\"&#125;;func.call(obj); //&gt;&gt; coffe1891// åœ¨è°ƒç”¨ func æ—¶å¼ºåˆ¶æŠŠå®ƒçš„ this ç»‘å®šåˆ° obj ä¸Š å¦å¤–ï¼Œä½¿ç”¨bindå¯ä»¥ä¿®æ­£SetTimeoutå’ŒSetIntervalçš„thisæŒ‡å‘ï¼š 1234567891011121314151617181920212223var num = 0;class Obj &#123; constructor(num)&#123; this.num = num; &#125; func()&#123; console.log(this.num); &#125; func1()&#123; setTimeout(function () &#123; console.log(\"setTimeout:\"+this.num); &#125;.bind(this), 1000);//bind &#125; func2()&#123; setInterval(function () &#123; console.log(this.num); &#125;.bind(this), 2000);//bind &#125;&#125;var obj = new Obj(1);obj.func();//&gt;&gt; 1 è¾“å‡ºçš„æ˜¯obj.numobj.func1()//&gt;&gt; setTimeout:1 è¾“å‡ºçš„æ˜¯obj.numobj.func2()//&gt;&gt; 1 1 1 1 â€¦â€¦ è¾“å‡ºçš„æ˜¯obj.num 4. â€œnewâ€æ“ä½œç¬¦æŒ‡å‘åœ¨JavaScript ä¸­ï¼Œæ„é€ å‡½æ•°åªæ˜¯ä¸€äº›ä½¿ç”¨newæ“ä½œç¬¦æ—¶è¢«è°ƒç”¨çš„å‡½æ•°ã€‚å®ƒä»¬å¹¶ä¸ä¼šå±äºæŸä¸ªç±»ï¼Œä¹Ÿä¸ä¼šå®ä¾‹åŒ–ä¸€ä¸ªç±»ã€‚å®é™…ä¸Šï¼Œå®ƒä»¬ç”šè‡³éƒ½ä¸èƒ½ç®—æ˜¯ä¸€ç§ç‰¹æ®Šçš„ç±»å‹ï¼ˆclassï¼‰ï¼Œå®ƒä»¬åªæ˜¯è¢«newæ“ä½œç¬¦è°ƒç”¨çš„æ™®é€šå‡½æ•°è€Œå·²ã€‚ ä½¿ç”¨new æ¥è°ƒç”¨å‡½æ•°ï¼Œæˆ–è€…è¯´å‘ç”Ÿæ„é€ å‡½æ•°è°ƒç”¨æ—¶ï¼Œä¼šè‡ªåŠ¨æ‰§è¡Œä¸‹é¢çš„æ“ä½œï¼š åˆ›å»ºï¼ˆæˆ–è€…è¯´æ„é€ ï¼‰ä¸€ä¸ªå…¨æ–°çš„å¯¹è±¡ï¼› å°†æ„é€ å‡½æ•°çš„ä½œç”¨åŸŸèµ‹ç»™æ–°å¯¹è±¡ï¼ˆå› æ­¤thiså°±æŒ‡å‘äº†è¿™ä¸ªæ–°å¯¹è±¡ï¼‰ï¼› æ‰§è¡Œæ„é€ å‡½æ•°ä¸­çš„ä»£ç ï¼ˆä¸ºè¿™ä¸ªæ–°å¯¹è±¡æ·»åŠ å±æ€§ã€æ–¹æ³•ç­‰ï¼‰ï¼› å¦‚æœå‡½æ•°æ²¡æœ‰è¿”å›å…¶ä»–å¯¹è±¡ï¼Œé‚£ä¹ˆè¿”å›è¿™ä¸ªæ–°å¯¹è±¡ã€‚ 123456function func(a) &#123; this.a = a;&#125;var bar = new func(\"coffe1891\");console.log(bar.a); //&gt;&gt; coffe1891// ä½¿ç”¨new æ¥è°ƒç”¨func(..)æ—¶ï¼Œæˆ‘ä»¬ä¼šæ„é€ ä¸€ä¸ªæ–°å¯¹è±¡å¹¶æŠŠå®ƒç»‘å®šåˆ°func(..)è°ƒç”¨ä¸­çš„thisä¸Š å¯ä»¥å°†å‡½æ•°çš„è¿”å›å€¼åˆ†æˆä¸‰ç§æƒ…å†µï¼š è¿”å›ä¸€ä¸ªå¯¹è±¡ æ²¡æœ‰è¿”å›å€¼ï¼Œå³é»˜è®¤è¿”å›undefined è¿”å›åŸºæœ¬æ•°æ®ç±»å‹ 12345678910111213141516171819202122232425262728293031323334353637381ã€è¿”å›ä¸€ä¸ªå¯¹è±¡function Foo(name,age) &#123; this.name = name; return &#123; age &#125;&#125;var bar = new Foo(\"kobin\",\"18\");bar.name; // undefinedbar.age; // 182ã€æ²¡æœ‰è¿”å›å€¼function Foo(name,age) &#123; this.name = name;&#125;var bar = new Foo(\"kobin\",\"18\");bar.name; // kobinbar.age; // undefined3ã€è¿”å›åŸºæœ¬æ•°æ®ç±»å‹function Foo(name,age) &#123; this.name = name; return 123&#125;var bar = new Foo(\"kobin\",\"18\");bar.name; // kobinbar.age; // undefined æ‰€ä»¥ä½¿ç”¨newç»‘å®šæ—¶ï¼Œéœ€è¦åˆ¤æ–­å‡½æ•°è¿”å›çš„å€¼æ˜¯å¦ä¸ºä¸€ä¸ªå¯¹è±¡ï¼Œå¦‚æœæ˜¯å¯¹è±¡ï¼Œé‚£ä¹ˆthisä¼šç»‘å®šåˆ°è¿”å›çš„å¯¹è±¡ä¸Š å¦‚ä½•åˆ©ç”¨è§„åˆ™åˆ¤æ–­thisçš„æŒ‡å‘thisçš„æŒ‡å‘åˆ¤æ–­ï¼Œå¯ä»¥æŒ‰ç…§ä¸‹é¢çš„ä¼˜å…ˆçº§é¡ºåºæ¥åˆ¤æ–­å‡½æ•°åœ¨æŸä¸ªè°ƒç”¨ä½ç½®åº”ç”¨çš„æ˜¯å“ªæ¡è§„åˆ™ 1. å‡½æ•°æ˜¯å¦åœ¨new ä¸­è¢«è°ƒç”¨ï¼ˆnew æ“ä½œç¬¦æŒ‡å‘ï¼‰ï¼Ÿå¦‚æœæ˜¯çš„è¯ï¼Œthis ç»‘å®šçš„æ˜¯æ–°åˆ›å»ºçš„å¯¹è±¡ã€‚ 123456789function func(name) &#123; this.name = name; this.getName = function() &#123; return this.name; &#125;;&#125;var obj = new func(\"coffe\"); //thisä¼šæŒ‡å‘objconsole.log(obj.getName()); //&gt;&gt; coffe 2. å‡½æ•°æ˜¯å¦é€šè¿‡callã€applyã€bindæ˜¾å¼æŒ‡å‘ï¼Ÿå¦‚æœæ˜¯çš„è¯ï¼ŒthisæŒ‡å‘çš„æ˜¯callã€applyã€bindä¸‰ä¸ªæ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°æŒ‡å®šçš„å¯¹è±¡ã€‚ 12345678var obj1 = &#123; name: \"coffe\"&#125;;function func() &#123; return this.name; //è¿™é‡Œçš„thisæœ¬æ¥æŒ‡å‘window&#125;var str = func.call(obj1); //æ”¹å˜äº†funcå‡½æ•°é‡Œé¢thisçš„æŒ‡å‘ï¼ŒæŒ‡å‘obj1console.log(str); //&gt;&gt; coffe 3. å‡½æ•°æ˜¯å¦è¢«å½“åšæŸä¸ªå¯¹è±¡çš„æ–¹æ³•è€Œè°ƒç”¨ï¼ˆéšå¼æŒ‡å‘ï¼‰ï¼Ÿå¦‚æœæ˜¯çš„è¯ï¼ŒthisæŒ‡å‘çš„æ˜¯è¿™ä¸ªå¯¹è±¡ã€‚ 123456789var obj1 = &#123; name: \"coffe\", func() &#123; return this.name; //æŒ‡å‘obj1 &#125;&#125;;//è¿™é‡Œçš„obj1.func()ï¼Œè¡¨æ˜funcå‡½æ•°è¢«obj1è°ƒç”¨ï¼Œå› æ­¤funcä¸­çš„thisæŒ‡å‘obj1console.log(obj1.func()); //&gt;&gt; coffe 4. è‹¥ä»¥ä¸Šéƒ½ä¸æ˜¯çš„è¯ï¼Œä½¿ç”¨é»˜è®¤ç»‘å®šã€‚å¦‚æœåœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œå°±ç»‘å®šåˆ°undefinedï¼Œå¦åˆ™ç»‘å®šåˆ°å…¨å±€å¯¹è±¡ã€‚ 12345678var a = \"coffe\"; //ä¸ºå…¨å±€å¯¹è±¡windowæ·»åŠ ä¸€ä¸ªå±æ€§afunction func() &#123; \"use strict\";//å¼€å¯ä¸¥æ ¼æ¨¡å¼ return this.a;&#125;//ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼ŒthisæŒ‡å‘undefinedconsole.log(func()); //&gt;&gt; TypeError å‡ ä¸ªä¾‹å¤–æƒ…å†µ1. è¢«å¿½ç•¥çš„thisnull æˆ–è€…undefinedä½œä¸ºthisæŒ‡å‘çš„å¯¹è±¡ä¼ å…¥callã€applyæˆ–è€…bindï¼Œè¿™äº›å€¼åœ¨è°ƒç”¨æ—¶ä¼šè¢«å¿½ç•¥ï¼Œå®é™…åº”ç”¨çš„æ˜¯é»˜è®¤æŒ‡å‘è§„åˆ™ã€‚ 1234567function func() &#123; console.log(this.a);&#125;var a = 2;func.call(null); //&gt;&gt; 2 //thisæŒ‡å‘äº†window 2. é—´æ¥å¼•ç”¨é—´æ¥å¼•ç”¨æœ€å®¹æ˜“åœ¨èµ‹å€¼æ—¶å‘ç”Ÿï¼›é—´æ¥å¼•ç”¨æ—¶ï¼Œè°ƒç”¨è¿™ä¸ªå‡½æ•°ä¼šåº”ç”¨é»˜è®¤æŒ‡å‘è§„åˆ™ã€‚ 12345678910function func() &#123; console.log(this.a);&#125;var a = 2;var o = &#123; a: 3, func: func &#125;;var p = &#123; a: 4 &#125;;o.func(); //&gt;&gt; 3(p.func = o.func)(); //&gt;&gt; 2// èµ‹å€¼è¡¨è¾¾å¼ p.func=o.func çš„è¿”å›å€¼æ˜¯ç›®æ ‡å‡½æ•°çš„å¼•ç”¨ï¼Œä¹Ÿå°±æ˜¯ func å‡½æ•°çš„å¼•ç”¨// å› æ­¤è°ƒç”¨ä½ç½®æ˜¯ func() è€Œä¸æ˜¯ p.func() æˆ–è€… o.func() 3. ç®­å¤´å‡½æ•°ç®­å¤´å‡½æ•°å¹¶ä¸æ˜¯ä½¿ç”¨functionå…³é”®å­—å®šä¹‰çš„ï¼Œè€Œæ˜¯ä½¿ç”¨è¢«ç§°ä¸ºâ€œèƒ–ç®­å¤´â€çš„æ“ä½œç¬¦ =&gt; å®š ä¹‰çš„ã€‚ ç®­å¤´å‡½æ•°ä¸éµå®ˆthisçš„å››ç§æŒ‡å‘è§„åˆ™ï¼Œè€Œæ˜¯æ ¹æ®å‡½æ•°å®šä¹‰æ—¶çš„ä½œç”¨åŸŸæ¥å†³å®š this çš„æŒ‡å‘ã€‚ä½•è°“â€œå®šä¹‰æ—¶çš„ä½œç”¨åŸŸâ€ï¼Ÿå°±æ˜¯ä½ å®šä¹‰è¿™ä¸ªç®­å¤´å‡½æ•°çš„æ—¶å€™ï¼Œè¯¥ç®­å¤´å‡½æ•°åœ¨å“ªä¸ªå‡½æ•°é‡Œï¼Œé‚£ä¹ˆç®­å¤´å‡½æ•°ä½“å†…çš„thiså°±æ˜¯å®ƒçˆ¶å‡½æ•°çš„thisã€‚ çœ‹ä¸‹é¢ä»£ç åŠ æ·±ç†è§£ï¼š 1234567891011121314151617181920function func() &#123; // è¿”å›ä¸€ä¸ªç®­å¤´å‡½æ•° return a =&gt; &#123; //this ç»§æ‰¿è‡ª func() console.log(this.a); &#125;;&#125;var obj1 = &#123; a: 2&#125;;var obj2 = &#123; a: 3&#125;;var bar = func.call(obj1);bar.call(obj2); //&gt;&gt; 2 ä¸æ˜¯ 3 ï¼// func() å†…éƒ¨åˆ›å»ºçš„ç®­å¤´å‡½æ•°ä¼šæ•è·è°ƒç”¨æ—¶ func() çš„ thisã€‚// ç”±äº func() çš„ this ç»‘å®šåˆ° obj1ï¼Œ barï¼ˆå¼•ç”¨ç®­å¤´å‡½æ•°ï¼‰çš„ this ä¹Ÿä¼šç»‘å®šåˆ° obj1ï¼Œ// thisä¸€æ—¦è¢«ç¡®å®šï¼Œå°±ä¸å¯æ›´æ”¹ï¼Œæ‰€ä»¥ç®­å¤´å‡½æ•°çš„ç»‘å®šæ— æ³•è¢«ä¿®æ”¹ã€‚ï¼ˆnew ä¹Ÿä¸è¡Œï¼ï¼‰ è¿™ä¸ªç‰¹æ€§ç”šè‡³è¢«mozillaçš„MDNç§°ä½œâ€œæ²¡æœ‰thisâ€ï¼Œè¿™ç§è¯´æ³•å¾ˆè´¹è§£ã€‚å…¶å®åº”è¯¥è¿™ä¹ˆç†è§£ï¼šä¸€èˆ¬è€Œè¨€ï¼Œthisçš„æŒ‡å‘æ˜¯åœ¨å‡½æ•°è¿è¡Œä¹‹åæ‰ç¡®å®šçš„ï¼Œè€Œç®­å¤´å‡½æ•°çš„thisæŒ‡å‘åœ¨å®šä¹‰æ—¶ä¹Ÿå³è°ƒç”¨ä¹‹å‰å°±å®šæ­»äº†ï¼Œåœ¨è¿è¡Œä¹‹åæ— æ³•æ›´æ”¹ï¼Œé‚£ç›¸å½“äºå½“æˆä¸€ä¸ªå›ºå®šå€¼çš„å˜é‡ï¼Œæ­¤æ—¶thiså¤±å»äº†åŸæ¥ä½œä¸ºâ€œæŒ‡å‘å½“å‰ä»£ç è¿è¡Œæ—¶æ‰€å¤„çš„ä¸Šä¸‹æ–‡ç¯å¢ƒï¼ˆcontextï¼‰â€çš„æ„ä¹‰ï¼Œæ‰€ä»¥MDNè¯´ç®­å¤´å‡½æ•°æ²¡æœ‰äº†thisï¼Œæˆ‘è§‰å¾—ç¿»è¯‘æˆâ€œæŠŠthisé˜‰å‰²äº†â€æ›´è´´åˆ‡ ğŸ¤£ ã€‚","categories":[],"tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"http://blog.kobingo.xyz/tags/JavaScript/"}]},{"title":"å¦‚ä½•è®©centOS7ä¸‹å…¨å±€å®‰è£…çš„npmæ¨¡å—åœ¨ç¯å¢ƒå˜é‡ä¸­ç”Ÿæ•ˆ","slug":"others-centOS7-npm","date":"2017-09-10T16:12:53.000Z","updated":"2021-01-19T06:41:41.222Z","comments":true,"path":"others-centOS7-npm/","link":"","permalink":"http://blog.kobingo.xyz/others-centOS7-npm/","excerpt":"è®°ä¸€æ¬¡åœ¨centOS7ä¸‹npmå®‰è£…å…¨å±€æ¨¡å—ï¼Œä¾ç„¶æ— æ³•ä½¿ç”¨ç›¸å…³å…¨å±€å‘½ä»¤çš„é—®é¢˜çš„è§£å†³æ–¹æ¡ˆ","text":"è®°ä¸€æ¬¡åœ¨centOS7ä¸‹npmå®‰è£…å…¨å±€æ¨¡å—ï¼Œä¾ç„¶æ— æ³•ä½¿ç”¨ç›¸å…³å…¨å±€å‘½ä»¤çš„é—®é¢˜çš„è§£å†³æ–¹æ¡ˆ é—®é¢˜è¯¦è¿°é€šè¿‡npm i -g cnpmå®‰è£…çš„cnpmåï¼Œä¾ç„¶æ— æ³•å…¨å±€ä½¿ç”¨cnpmå‘½ä»¤ï¼š 1-bash: cnpm: command not found è§£å†³æ–¹æ¡ˆï¼š éœ€è¦å°†nodeè·¯å¾„å…³è”åˆ°ç¯å¢ƒå˜é‡ä¸­ å…·ä½“æ“ä½œ ä½¿ç”¨npm root -gè·å–nodeç›®å½•, 1&#x2F;usr&#x2F;sbin&#x2F;nodejs&#x2F;lib&#x2F;node_modules é€šè¿‡vimç¼–è¾‘/etc/profileæ–‡ä»¶, åœ¨æ–‡ä»¶æœ€åº•ä¸‹æ–°å¢: 123# Nodeæ‰€åœ¨è·¯å¾„export NODE_HOME=/usr/sbin/nodejsexport PATH=$&#123;NODE_HOME&#125;/bin:$PATH å¦‚æœPATHæœ‰å…¶ä»–é…ç½®ï¼Œé€šè¿‡export PATH=&lt;path1&gt;:&lt;path2&gt;:&lt;path3&gt;:$PATHæ–¹å¼é…ç½® æœ€åæ‰§è¡Œå‘½ä»¤ä½¿ç¯å¢ƒå˜é‡ç”Ÿæ•ˆ 1source /etc/profile æŸ¥çœ‹ç¯å¢ƒå˜é‡ 1echo $PATH éªŒè¯æ•ˆæœ ä»¥åé€šè¿‡npmå…¨å±€å®‰è£…çš„æ¨¡å—ä¼šè‡ªåŠ¨åœ¨ç¯å¢ƒå˜é‡ä¸­ç”Ÿæ•ˆ","categories":[{"name":"others","slug":"others","permalink":"http://blog.kobingo.xyz/categories/others/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"http://blog.kobingo.xyz/tags/Linux/"},{"name":"centOS","slug":"centOS","permalink":"http://blog.kobingo.xyz/tags/centOS/"}]},{"title":"word-wrap,word-break,white-spaceå¼ºåˆ¶æ¢è¡Œå’Œä¸æ¢è¡Œæ€»ç»“","slug":"css-å¼ºåˆ¶æ¢è¡Œä¸ä¸æ¢è¡Œ","date":"2017-05-15T17:30:05.000Z","updated":"2021-01-19T06:41:41.218Z","comments":true,"path":"css-å¼ºåˆ¶æ¢è¡Œä¸ä¸æ¢è¡Œ/","link":"","permalink":"http://blog.kobingo.xyz/css-%E5%BC%BA%E5%88%B6%E6%8D%A2%E8%A1%8C%E4%B8%8E%E4%B8%8D%E6%8D%A2%E8%A1%8C/","excerpt":"æˆ‘ä»¬ä¸€èˆ¬æ§åˆ¶æ¢è¡Œæ‰€ç”¨åˆ°çš„ CSS å±æ€§ä¸€å…±æœ‰ä¸‰ä¸ªï¼šword-wrap; word-break; white-spaceã€‚è¿™ä¸‰ä¸ªå±æ€§å¯ä»¥è¯´æ˜¯ä¸“ä¸ºäº†æ–‡å­—æ–­è¡Œè€Œåˆ›é€ å‡ºæ¥çš„","text":"æˆ‘ä»¬ä¸€èˆ¬æ§åˆ¶æ¢è¡Œæ‰€ç”¨åˆ°çš„ CSS å±æ€§ä¸€å…±æœ‰ä¸‰ä¸ªï¼šword-wrap; word-break; white-spaceã€‚è¿™ä¸‰ä¸ªå±æ€§å¯ä»¥è¯´æ˜¯ä¸“ä¸ºäº†æ–‡å­—æ–­è¡Œè€Œåˆ›é€ å‡ºæ¥çš„ word-wrap è¯­æ³•ï¼š word-wrap: normal(é»˜è®¤) | break-word normal: å…è®¸å†…å®¹é¡¶å¼€æŒ‡å®šçš„å®¹å™¨è¾¹ç•Œ break-word: å†…å®¹å°†åœ¨è¾¹ç•Œå†…æ¢è¡Œã€‚å¿…è¦æ—¶ä¼šè§¦å‘ word-break è¯´æ˜word-wrap æ˜¯æ§åˆ¶æ˜¯å¦â€œä¸ºè¯æ–­è¡Œâ€çš„ï¼Œè®¾ç½®æˆ–æ£€ç´¢å½“å‰è¡Œè¶…è¿‡æŒ‡å®šå®¹å™¨çš„è¾¹ç•Œæ—¶æ˜¯å¦æ–­å¼€è½¬è¡Œã€‚ä¸­æ–‡æ²¡æœ‰ä»»ä½•é—®é¢˜ï¼Œè‹±æ–‡è¯­å¥ä¹Ÿæ²¡é—®é¢˜ã€‚ä½†æ˜¯å¯¹äºé•¿ä¸²çš„è‹±æ–‡ï¼Œå°±ä¸èµ·ä½œç”¨ã€‚ èŒƒä¾‹congratulation è¿™ä¸ªå•è¯å±äºé•¿ä¸²è‹±æ–‡ï¼Œword-wrap:break-word æ•´ä¸ªå•è¯çœ‹æˆä¸€ä¸ªæ•´ä½“ï¼Œå¦‚æœè¯¥è¡Œæœ«ç«¯å®½åº¦ä¸å¤Ÿæ˜¾ç¤ºæ•´ä¸ªå•è¯ï¼Œå®ƒä¼šè‡ªåŠ¨æŠŠæ•´ä¸ªå•è¯æ”¾åˆ°ä¸‹ä¸€è¡Œï¼Œè€Œä¸ä¼šæŠŠå•è¯æˆªæ–­ï¼Œè¿™å°±æ˜¯å¯¹äºé•¿ä¸²æ–‡å­—ä¸èµ·ä½œç”¨çš„è§£é‡Šã€‚word-wrap:normal æ˜¯é»˜è®¤æƒ…å†µï¼Œè‹±æ–‡å•è¯ä¸è¢«æ‹†å¼€ã€‚ ç»“è®ºä½œç”¨èŒƒå›´ä»…ä¸º div è¿™ç±»æ ‡å‡†å—çº§å…ƒç´ ï¼Œth,td è¿™ç±» table å…ƒç´ è™½ç„¶è¯†åˆ«ä½†æ˜¯æ²¡æœ‰æ•ˆæœï¼ˆå¦‚æœä¸º td,th åŠ ä¸Šå®½åº¦ word-wrap åœ¨ IE ä¸‹æ˜¯èƒ½å¤Ÿå‘æŒ¥æ•ˆæœçš„ï¼Œä½†æ ¹æ®å®Œå…¨å…¼å®¹æ€§æ–¹ä¾¿è®°å¿†è§’åº¦ä¸Šæ¥è¯´è¿˜æ˜¯ä»¥å‰é¢çš„ç»“è®ºä¸ºå‡†ï¼‰ã€‚ word-break word-break: normal(é»˜è®¤) | break-all | keep-all normal: ä¾ç…§äºšæ´²è¯­è¨€å’Œéäºšæ´²è¯­è¨€çš„æ–‡æœ¬è§„åˆ™ï¼Œå…è®¸åœ¨å­—å†…æ¢è¡Œã€‚ break-all: è¯¥è¡Œä¸ºä¸äºšæ´²è¯­è¨€çš„ normal ç›¸åŒã€‚ä¹Ÿå…è®¸éäºšæ´²è¯­è¨€æ–‡æœ¬è¡Œçš„ä»»æ„å­—å†…æ–­å¼€ã€‚è¯¥å€¼é€‚åˆåŒ…å«ä¸€äº›éäºšæ´²æ–‡æœ¬çš„äºšæ´²æ–‡æœ¬ã€‚ keep-all: ä¸æ‰€æœ‰éäºšæ´²è¯­è¨€çš„ normal ç›¸åŒã€‚å¯¹äºä¸­æ–‡ï¼ŒéŸ©æ–‡ï¼Œæ—¥æ–‡ï¼Œä¸å…è®¸å­—æ–­å¼€ã€‚é€‚åˆåŒ…å«å°‘é‡äºšæ´²æ–‡æœ¬çš„éäºšæ´²æ–‡æœ¬ã€‚ è¯´æ˜word-break:break-allï¼Œæ˜¯æ–­å¼€å•è¯ã€‚åœ¨å•è¯åˆ°è¾¹ç•Œæ—¶ï¼Œä¸‹ä¸ªå­—æ¯è‡ªåŠ¨åˆ°ä¸‹ä¸€è¡Œã€‚ä¸»è¦è§£å†³äº†é•¿ä¸²è‹±æ–‡çš„é—®é¢˜ï¼ˆæ°æ°å¼¥è¡¥äº†ä¸Šé¢ word-wrap:break-word å¯¹äºé•¿ä¸²æ–‡å­—ä¸èµ·ä½œç”¨çš„ç¼ºé™·ï¼‰ èŒƒä¾‹ç»§ç»­ä»¥ä¸Šé¢ congratulation è¿™ä¸ªå•è¯å±äºé•¿ä¸²è‹±æ–‡ï¼Œword-break:break-all å®ƒä¼šæŠŠå•è¯æˆªæ–­ï¼Œè¯¥è¡Œæœ«ç«¯å°±ä¼šå˜æˆç±»ä¼¼ conra(congratulation çš„å‰ç«¯éƒ¨åˆ†)ï¼Œä¸‹ä¸€è¡Œä¸º tulationï¼ˆconguatulationï¼‰çš„åç«¯éƒ¨åˆ†äº†ã€‚word-break:keep-allï¼Œæ˜¯æŒ‡ Chinese, Japanese, and Korean ä¸æ–­è¯ã€‚å³åªç”¨æ­¤æ—¶ï¼Œä¸ç”¨ word-wrapï¼Œä¸­æ–‡å°±ä¸ä¼šæ¢è¡Œäº†ã€‚ï¼ˆè‹±æ–‡è¯­å¥æ­£å¸¸ã€‚ï¼‰ ç»“è®ºä½œç”¨èŒƒå›´ä»…ä¸º div è¿™ç±»æ ‡å‡†å—çº§å…ƒç´ ï¼Œth,td è¿™ç±» table å…ƒç´ è™½ç„¶è¯†åˆ«ä½†æ˜¯æ²¡æœ‰æ•ˆæœï¼ˆç»æµ‹è¯• Chrome ä¸‹ word-break:break-all æ˜¯æœ‰æ•ˆæœçš„ï¼Œä½†æ ¹æ®å®Œå…¨å…¼å®¹æ€§æ–¹ä¾¿è®°å¿†è§’åº¦ä¸Šæ¥è¯´è¿˜æ˜¯ä»¥å‰é¢çš„ç»“è®ºä¸ºå‡†ï¼‰ã€‚Firefox,Opera æ˜¯æ— æ³•è¯†åˆ« word-break çš„ï¼Œæ›´ä¸ç”¨æ Firefox ä¸‹çš„ th,td ä¸­ä½¿ç”¨ word-break çš„æ•ˆæœäº†ã€‚ white-space white-space: normal(é»˜è®¤) | pre | nowrap normal: é»˜è®¤ã€‚ç©ºç™½ä¼šè¢«æµè§ˆå™¨å¿½ç•¥ã€‚ pre: ç©ºç™½ä¼šè¢«æµè§ˆå™¨ä¿ç•™ã€‚å…¶è¡Œä¸ºæ–¹å¼ç±»ä¼¼ HTML ä¸­çš„ pre æ ‡ç­¾ nowrap: æ–‡æœ¬ä¸ä¼šæ¢è¡Œï¼Œæ–‡æœ¬ä¼šåœ¨åœ¨åŒä¸€è¡Œä¸Šç»§ç»­ï¼Œç›´åˆ°é‡åˆ° br æ ‡ç­¾ä¸ºæ­¢ã€‚ è¯´æ˜ å¯¹äº pre å±æ€§ï¼Œå…¶å®å°±æ˜¯ HTML ä¸­è¿ç»­çš„å¤šä¸ªç©ºç™½ç¬¦ä¼šè¢«åˆå¹¶ï¼Œç„¶åä¸ºäº†ä¸è®©ä»–åˆå¹¶ï¼ˆæœ€å¸¸ç”¨çš„åœºåˆå°±æ˜¯è¡¨ç¤ºä»£ç æ–‡å­—ç¼©è¿›ï¼‰è®©å…¶ä¸­çš„ç©ºç™½ç¬¦ç»§ç»­ä¿ç•™è€Œä¸éœ€è¦æˆ‘ä»¬å¢åŠ é¢å¤–çš„æ ·å¼å’Œæ ‡ç­¾æ¥æ§åˆ¶å®ƒçš„ç¼©è¿›å’Œæ¢è¡Œã€‚pre æ ‡ç­¾çš„åŸç†ä¹Ÿæ˜¯ä¸€æ ·çš„å†…éƒ¨é»˜è®¤æœ‰äº†ä¸ª white-space:preã€‚ å¯¹äº nowrap å±æ€§ï¼Œè¿™ä¸ªæ˜¯å¼ºåˆ¶ä¸æ¢è¡Œæ ¸å¿ƒï¼Œä¸€èˆ¬å¼ºåˆ¶ä¸æ¢è¡Œå°±æ˜¯åˆ©ç”¨è¿™ä¸ªå±æ€§ã€‚Firefox çš„ div å’Œ td ä¸­ï¼Œä»¥åŠ IE çš„ div ä¸­ï¼Œå‡æ²¡æœ‰é—®é¢˜ã€‚å”¯ä¸€çš„ç‘•ç–µå°±æ˜¯åœ¨ IE çš„ td ä¸­ä¼šæœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå¦‚æœ td æ²¡æœ‰æŒ‡å®šå®½åº¦ï¼Œåˆ™ nowrap ä»ç„¶æœ‰æ•ˆï¼Œå¦‚æœ td æœ‰å®½åº¦ï¼Œå¹¶ä¸”æ–‡å­—ä¸­æ— æ ‡ç‚¹ã€æ— ç©ºæ ¼ï¼ˆä¾‹å¦‚ä¸­æ–‡é•¿ä¸²æ–‡å­—ï¼‰ï¼Œnowrap åˆ™ä¸å†æœ‰æ•ˆã€‚è§£å†³æ–¹å¼å°±æ˜¯å¯ä»¥åŠ  word-break:keep-all;å¯ä»¥è§£å†³æ­¤é—®é¢˜ã€‚ æ€»ç»“å¼ºåˆ¶æ¢è¡Œ divï¼ˆå—çº§å…ƒç´ ï¼‰ word-wrap:break-word; word-break:break-all; td,th è¿™ç±» table å…ƒç´  å…ˆä¸º table è®¾å®š table-layout:fixedï¼ŒåŸºæœ¬ä¸Šè®¾å®šå®Œè¿™ä¸ªå±æ€§ååŸºæœ¬çš„æ¢è¡Œé—®é¢˜éƒ½èƒ½å¤Ÿè§£å†³è€Œä¸ä¼šå‡ºç° table ä¸­ td,th å› ä¸ºé‡Œé¢å„ä¸ªå†…å®¹çš„å¤šå¯¡å‘ç”ŸæŠ¢å¤ºå…¶ä»– td,th å®½åº¦çš„æƒ…å½¢å‘ç”Ÿã€‚è¿™æ—¶å¦‚æœä½ ä¾æ—§æœ‰å¼ºåˆ¶æ¢è¡Œé—®é¢˜ï¼Œé‚£ä¹ˆåœ¨æ­¤ td ä¸­å†…éƒ¨åŠ ä¸€å±‚ divï¼Œé‚£ä¹ˆæƒ…å†µå°±ä¼šåƒä¸Šé¢è®¨è®ºçš„æ–¹å¼æ¥è§£å†³ã€‚ æ€»ç»“å¼ºåˆ¶ä¸æ¢è¡Œ white-space:nowrap åœ¨æ–‡å­—ä¸ td ä¹‹é—´å†å¥—ä¸€å±‚ divï¼Œç„¶åä½¿ç”¨ nowrap overflow:hidden é˜²æ­¢æ–‡å­—æº¢å‡º","categories":[{"name":"css","slug":"css","permalink":"http://blog.kobingo.xyz/categories/css/"}],"tags":[{"name":"css","slug":"css","permalink":"http://blog.kobingo.xyz/tags/css/"}]}],"categories":[{"name":"css","slug":"css","permalink":"http://blog.kobingo.xyz/categories/css/"},{"name":"æµè§ˆå™¨","slug":"æµè§ˆå™¨","permalink":"http://blog.kobingo.xyz/categories/%E6%B5%8F%E8%A7%88%E5%99%A8/"},{"name":"npm","slug":"npm","permalink":"http://blog.kobingo.xyz/categories/npm/"},{"name":"react","slug":"react","permalink":"http://blog.kobingo.xyz/categories/react/"},{"name":"æ•°æ®ç»“æ„ä¸ç®—æ³•","slug":"æ•°æ®ç»“æ„ä¸ç®—æ³•","permalink":"http://blog.kobingo.xyz/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/"},{"name":"Chromeæºç ","slug":"Chromeæºç ","permalink":"http://blog.kobingo.xyz/categories/Chrome%E6%BA%90%E7%A0%81/"},{"name":"others","slug":"others","permalink":"http://blog.kobingo.xyz/categories/others/"},{"name":"JavaScript","slug":"JavaScript","permalink":"http://blog.kobingo.xyz/categories/JavaScript/"},{"name":"node","slug":"node","permalink":"http://blog.kobingo.xyz/categories/node/"},{"name":"é¢è¯•","slug":"é¢è¯•","permalink":"http://blog.kobingo.xyz/categories/%E9%9D%A2%E8%AF%95/"},{"name":"javascript","slug":"javascript","permalink":"http://blog.kobingo.xyz/categories/javascript/"}],"tags":[{"name":"css","slug":"css","permalink":"http://blog.kobingo.xyz/tags/css/"},{"name":"IntersectionObserver","slug":"IntersectionObserver","permalink":"http://blog.kobingo.xyz/tags/IntersectionObserver/"},{"name":"ç”Ÿæ´»","slug":"ç”Ÿæ´»","permalink":"http://blog.kobingo.xyz/tags/%E7%94%9F%E6%B4%BB/"},{"name":"npm","slug":"npm","permalink":"http://blog.kobingo.xyz/tags/npm/"},{"name":"react","slug":"react","permalink":"http://blog.kobingo.xyz/tags/react/"},{"name":"keep alice","slug":"keep-alice","permalink":"http://blog.kobingo.xyz/tags/keep-alice/"},{"name":"æ•°æ®ç»“æ„ä¸ç®—æ³•","slug":"æ•°æ®ç»“æ„ä¸ç®—æ³•","permalink":"http://blog.kobingo.xyz/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/"},{"name":"LeetCode","slug":"LeetCode","permalink":"http://blog.kobingo.xyz/tags/LeetCode/"},{"name":"array","slug":"array","permalink":"http://blog.kobingo.xyz/tags/array/"},{"name":"å‘½ä»¤","slug":"å‘½ä»¤","permalink":"http://blog.kobingo.xyz/tags/%E5%91%BD%E4%BB%A4/"},{"name":"æ¢¯å­","slug":"æ¢¯å­","permalink":"http://blog.kobingo.xyz/tags/%E6%A2%AF%E5%AD%90/"},{"name":"Macç»ˆç«¯","slug":"Macç»ˆç«¯","permalink":"http://blog.kobingo.xyz/tags/Mac%E7%BB%88%E7%AB%AF/"},{"name":"software","slug":"software","permalink":"http://blog.kobingo.xyz/tags/software/"},{"name":"è½¯ä»¶","slug":"è½¯ä»¶","permalink":"http://blog.kobingo.xyz/tags/%E8%BD%AF%E4%BB%B6/"},{"name":"Linux","slug":"Linux","permalink":"http://blog.kobingo.xyz/tags/Linux/"},{"name":"centOS","slug":"centOS","permalink":"http://blog.kobingo.xyz/tags/centOS/"},{"name":"java","slug":"java","permalink":"http://blog.kobingo.xyz/tags/java/"},{"name":"JavaScript","slug":"JavaScript","permalink":"http://blog.kobingo.xyz/tags/JavaScript/"},{"name":"å †","slug":"å †","permalink":"http://blog.kobingo.xyz/tags/%E5%A0%86/"},{"name":"æ ˆ","slug":"æ ˆ","permalink":"http://blog.kobingo.xyz/tags/%E6%A0%88/"},{"name":"node","slug":"node","permalink":"http://blog.kobingo.xyz/tags/node/"},{"name":"stdin","slug":"stdin","permalink":"http://blog.kobingo.xyz/tags/stdin/"},{"name":"promise","slug":"promise","permalink":"http://blog.kobingo.xyz/tags/promise/"},{"name":"iframe","slug":"iframe","permalink":"http://blog.kobingo.xyz/tags/iframe/"},{"name":"download","slug":"download","permalink":"http://blog.kobingo.xyz/tags/download/"},{"name":"å…¨æ ˆ","slug":"å…¨æ ˆ","permalink":"http://blog.kobingo.xyz/tags/%E5%85%A8%E6%A0%88/"},{"name":"nginx","slug":"nginx","permalink":"http://blog.kobingo.xyz/tags/nginx/"},{"name":"å‰ç«¯","slug":"å‰ç«¯","permalink":"http://blog.kobingo.xyz/tags/%E5%89%8D%E7%AB%AF/"},{"name":"é¢è¯•","slug":"é¢è¯•","permalink":"http://blog.kobingo.xyz/tags/%E9%9D%A2%E8%AF%95/"},{"name":"åšå®¢æ­å»º","slug":"åšå®¢æ­å»º","permalink":"http://blog.kobingo.xyz/tags/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/"},{"name":"ç¼“å­˜","slug":"ç¼“å­˜","permalink":"http://blog.kobingo.xyz/tags/%E7%BC%93%E5%AD%98/"},{"name":"number","slug":"number","permalink":"http://blog.kobingo.xyz/tags/number/"},{"name":"bigint","slug":"bigint","permalink":"http://blog.kobingo.xyz/tags/bigint/"},{"name":"ç»§æ‰¿","slug":"ç»§æ‰¿","permalink":"http://blog.kobingo.xyz/tags/%E7%BB%A7%E6%89%BF/"},{"name":"åŸå‹","slug":"åŸå‹","permalink":"http://blog.kobingo.xyz/tags/%E5%8E%9F%E5%9E%8B/"},{"name":"é—­åŒ…","slug":"é—­åŒ…","permalink":"http://blog.kobingo.xyz/tags/%E9%97%AD%E5%8C%85/"}]}